"use strict";var ef=Object.create;var As=Object.defineProperty;var tf=Object.getOwnPropertyDescriptor;var nf=Object.getOwnPropertyNames;var sf=Object.getPrototypeOf,rf=Object.prototype.hasOwnProperty;var U=(e,t)=>()=>(e&&(t=e(e=0)),t);var b=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Br=(e,t)=>{for(var n in t)As(e,n,{get:t[n],enumerable:!0})},No=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of nf(t))!rf.call(e,r)&&r!==n&&As(e,r,{get:()=>t[r],enumerable:!(s=tf(t,r))||s.enumerable});return e};var Xn=(e,t,n)=>(n=e!=null?ef(sf(e)):{},No(t||!e||!e.__esModule?As(n,"default",{value:e,enumerable:!0}):n,e)),af=e=>No(As({},"__esModule",{value:!0}),e);var vs=b(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.toCommandProperties=zt.toCommandValue=void 0;function of(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}zt.toCommandValue=of;function cf(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}zt.toCommandProperties=cf});var ko=b(Q=>{"use strict";var df=Q&&Q.__createBinding||(Object.create?function(e,t,n,s){s===void 0&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){s===void 0&&(s=n),e[s]=t[n]}),lf=Q&&Q.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),mf=Q&&Q.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&df(t,e,n);return lf(t,e),t};Object.defineProperty(Q,"__esModule",{value:!0});Q.issue=Q.issueCommand=void 0;var uf=mf(require("os")),Do=vs();function Mo(e,t,n){let s=new Gr(e,t,n);process.stdout.write(s.toString()+uf.EOL)}Q.issueCommand=Mo;function ff(e,t=""){Mo(e,{},t)}Q.issue=ff;var Oo="::",Gr=class{constructor(t,n,s){t||(t="missing.command"),this.command=t,this.properties=n,this.message=s}toString(){let t=Oo+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let n=!0;for(let s in this.properties)if(this.properties.hasOwnProperty(s)){let r=this.properties[s];r&&(n?n=!1:t+=",",t+=`${s}=${pf(r)}`)}}return t+=`${Oo}${yf(this.message)}`,t}};function yf(e){return Do.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function pf(e){return Do.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});function Qn(){return bs>Ps.length-16&&(Lo.default.randomFillSync(Ps),bs=0),Ps.slice(bs,bs+=16)}var Lo,Ps,bs,qr=U(()=>{Lo=Xn(require("crypto")),Ps=new Uint8Array(256),bs=Ps.length});var Fo,$o=U(()=>{Fo=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function hf(e){return typeof e=="string"&&Fo.test(e)}var He,Zn=U(()=>{$o();He=hf});function wf(e,t=0){let n=(k[e[t+0]]+k[e[t+1]]+k[e[t+2]]+k[e[t+3]]+"-"+k[e[t+4]]+k[e[t+5]]+"-"+k[e[t+6]]+k[e[t+7]]+"-"+k[e[t+8]]+k[e[t+9]]+"-"+k[e[t+10]]+k[e[t+11]]+k[e[t+12]]+k[e[t+13]]+k[e[t+14]]+k[e[t+15]]).toLowerCase();if(!He(n))throw TypeError("Stringified UUID is invalid");return n}var k,je,es=U(()=>{Zn();k=[];for(let e=0;e<256;++e)k.push((e+256).toString(16).substr(1));je=wf});function Ef(e,t,n){let s=t&&n||0,r=t||new Array(16);e=e||{};let a=e.node||Vo,o=e.clockseq!==void 0?e.clockseq:Hr;if(a==null||o==null){let u=e.random||(e.rng||Qn)();a==null&&(a=Vo=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),o==null&&(o=Hr=(u[6]<<8|u[7])&16383)}let i=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:Kr+1,d=i-jr+(c-Kr)/1e4;if(d<0&&e.clockseq===void 0&&(o=o+1&16383),(d<0||i>jr)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");jr=i,Kr=c,Hr=o,i+=122192928e5;let l=((i&268435455)*1e4+c)%4294967296;r[s++]=l>>>24&255,r[s++]=l>>>16&255,r[s++]=l>>>8&255,r[s++]=l&255;let m=i/4294967296*1e4&268435455;r[s++]=m>>>8&255,r[s++]=m&255,r[s++]=m>>>24&15|16,r[s++]=m>>>16&255,r[s++]=o>>>8|128,r[s++]=o&255;for(let u=0;u<6;++u)r[s+u]=a[u];return t||je(r)}var Vo,Hr,jr,Kr,zo,Uo=U(()=>{qr();es();jr=0,Kr=0;zo=Ef});function If(e){if(!He(e))throw TypeError("Invalid UUID");let t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=t&255,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=t&255,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=t&255,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=t&255,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=t&255,n}var Ns,Jr=U(()=>{Zn();Ns=If});function gf(e){e=unescape(encodeURIComponent(e));let t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}function Os(e,t,n){function s(r,a,o,i){if(typeof r=="string"&&(r=gf(r)),typeof a=="string"&&(a=Ns(a)),a.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+r.length);if(c.set(a),c.set(r,a.length),c=n(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,o){i=i||0;for(let d=0;d<16;++d)o[i+d]=c[d];return o}return je(c)}try{s.name=e}catch{}return s.DNS=Sf,s.URL=xf,s}var Sf,xf,Yr=U(()=>{es();Jr();Sf="6ba7b810-9dad-11d1-80b4-00c04fd430c8",xf="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function Tf(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Wo.default.createHash("md5").update(e).digest()}var Wo,Bo,Go=U(()=>{Wo=Xn(require("crypto"));Bo=Tf});var Cf,qo,Ho=U(()=>{Yr();Go();Cf=Os("v3",48,Bo),qo=Cf});function Rf(e,t,n){e=e||{};let s=e.random||(e.rng||Qn)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){n=n||0;for(let r=0;r<16;++r)t[n+r]=s[r];return t}return je(s)}var Ds,jo=U(()=>{qr();es();Ds=Rf});function _f(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Ko.default.createHash("sha1").update(e).digest()}var Ko,Jo,Yo=U(()=>{Ko=Xn(require("crypto"));Jo=_f});var Af,Xo,Qo=U(()=>{Yr();Yo();Af=Os("v5",80,Jo),Xo=Af});var Zo,ei=U(()=>{Zo="00000000-0000-0000-0000-000000000000"});function vf(e){if(!He(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var ti,ni=U(()=>{Zn();ti=vf});var si={};Br(si,{NIL:()=>Zo,parse:()=>Ns,stringify:()=>je,v1:()=>zo,v3:()=>qo,v4:()=>Ds,v5:()=>Xo,validate:()=>He,version:()=>ti});var Xr=U(()=>{Uo();Ho();jo();Qo();ei();ni();Zn();es();Jr()});var ii=b(Z=>{"use strict";var bf=Z&&Z.__createBinding||(Object.create?function(e,t,n,s){s===void 0&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){s===void 0&&(s=n),e[s]=t[n]}),Pf=Z&&Z.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ai=Z&&Z.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&bf(t,e,n);return Pf(t,e),t};Object.defineProperty(Z,"__esModule",{value:!0});Z.prepareKeyValueMessage=Z.issueFileCommand=void 0;var ri=ai(require("fs")),Qr=ai(require("os")),Nf=(Xr(),af(si)),oi=vs();function Of(e,t){let n=process.env[`GITHUB_${e}`];if(!n)throw new Error(`Unable to find environment variable for file command ${e}`);if(!ri.existsSync(n))throw new Error(`Missing file at path: ${n}`);ri.appendFileSync(n,`${oi.toCommandValue(t)}${Qr.EOL}`,{encoding:"utf8"})}Z.issueFileCommand=Of;function Df(e,t){let n=`ghadelimiter_${Nf.v4()}`,s=oi.toCommandValue(t);if(e.includes(n))throw new Error(`Unexpected input: name should not contain the delimiter "${n}"`);if(s.includes(n))throw new Error(`Unexpected input: value should not contain the delimiter "${n}"`);return`${e}<<${n}${Qr.EOL}${s}${Qr.EOL}${n}`}Z.prepareKeyValueMessage=Df});var di=b(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.checkBypass=Ut.getProxyUrl=void 0;function Mf(e){let t=e.protocol==="https:";if(ci(e))return;let n=(()=>t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(n)return new URL(n)}Ut.getProxyUrl=Mf;function ci(e){if(!e.hostname)return!1;let t=e.hostname;if(kf(t))return!0;let n=process.env.no_proxy||process.env.NO_PROXY||"";if(!n)return!1;let s;e.port?s=Number(e.port):e.protocol==="http:"?s=80:e.protocol==="https:"&&(s=443);let r=[e.hostname.toUpperCase()];typeof s=="number"&&r.push(`${r[0]}:${s}`);for(let a of n.split(",").map(o=>o.trim().toUpperCase()).filter(o=>o))if(a==="*"||r.some(o=>o===a||o.endsWith(`.${a}`)||a.startsWith(".")&&o.endsWith(`${a}`)))return!0;return!1}Ut.checkBypass=ci;function kf(e){let t=e.toLowerCase();return t==="localhost"||t.startsWith("127.")||t.startsWith("[::1]")||t.startsWith("[0:0:0:0:0:0:0:1]")}});var fi=b(Wt=>{"use strict";var Xg=require("net"),Lf=require("tls"),Zr=require("http"),li=require("https"),Ff=require("events"),Qg=require("assert"),$f=require("util");Wt.httpOverHttp=Vf;Wt.httpsOverHttp=zf;Wt.httpOverHttps=Uf;Wt.httpsOverHttps=Wf;function Vf(e){var t=new ke(e);return t.request=Zr.request,t}function zf(e){var t=new ke(e);return t.request=Zr.request,t.createSocket=mi,t.defaultPort=443,t}function Uf(e){var t=new ke(e);return t.request=li.request,t}function Wf(e){var t=new ke(e);return t.request=li.request,t.createSocket=mi,t.defaultPort=443,t}function ke(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||Zr.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(s,r,a,o){for(var i=ui(r,a,o),c=0,d=t.requests.length;c<d;++c){var l=t.requests[c];if(l.host===i.host&&l.port===i.port){t.requests.splice(c,1),l.request.onSocket(s);return}}s.destroy(),t.removeSocket(s)})}$f.inherits(ke,Ff.EventEmitter);ke.prototype.addRequest=function(t,n,s,r){var a=this,o=ea({request:t},a.options,ui(n,s,r));if(a.sockets.length>=this.maxSockets){a.requests.push(o);return}a.createSocket(o,function(i){i.on("free",c),i.on("close",d),i.on("agentRemove",d),t.onSocket(i);function c(){a.emit("free",i,o)}function d(l){a.removeSocket(i),i.removeListener("free",c),i.removeListener("close",d),i.removeListener("agentRemove",d)}})};ke.prototype.createSocket=function(t,n){var s=this,r={};s.sockets.push(r);var a=ea({},s.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(a.localAddress=t.localAddress),a.proxyAuth&&(a.headers=a.headers||{},a.headers["Proxy-Authorization"]="Basic "+new Buffer(a.proxyAuth).toString("base64")),Ke("making CONNECT request");var o=s.request(a);o.useChunkedEncodingByDefault=!1,o.once("response",i),o.once("upgrade",c),o.once("connect",d),o.once("error",l),o.end();function i(m){m.upgrade=!0}function c(m,u,y){process.nextTick(function(){d(m,u,y)})}function d(m,u,y){if(o.removeAllListeners(),u.removeAllListeners(),m.statusCode!==200){Ke("tunneling socket could not be established, statusCode=%d",m.statusCode),u.destroy();var p=new Error("tunneling socket could not be established, statusCode="+m.statusCode);p.code="ECONNRESET",t.request.emit("error",p),s.removeSocket(r);return}if(y.length>0){Ke("got illegal response body from proxy"),u.destroy();var p=new Error("got illegal response body from proxy");p.code="ECONNRESET",t.request.emit("error",p),s.removeSocket(r);return}return Ke("tunneling connection has established"),s.sockets[s.sockets.indexOf(r)]=u,n(u)}function l(m){o.removeAllListeners(),Ke(`tunneling socket could not be established, cause=%s
`,m.message,m.stack);var u=new Error("tunneling socket could not be established, cause="+m.message);u.code="ECONNRESET",t.request.emit("error",u),s.removeSocket(r)}};ke.prototype.removeSocket=function(t){var n=this.sockets.indexOf(t);if(n!==-1){this.sockets.splice(n,1);var s=this.requests.shift();s&&this.createSocket(s,function(r){s.request.onSocket(r)})}};function mi(e,t){var n=this;ke.prototype.createSocket.call(n,e,function(s){var r=e.request.getHeader("host"),a=ea({},n.options,{socket:s,servername:r?r.replace(/:.*$/,""):e.host}),o=Lf.connect(0,a);n.sockets[n.sockets.indexOf(s)]=o,t(o)})}function ui(e,t,n){return typeof e=="string"?{host:e,port:t,localAddress:n}:e}function ea(e){for(var t=1,n=arguments.length;t<n;++t){var s=arguments[t];if(typeof s=="object")for(var r=Object.keys(s),a=0,o=r.length;a<o;++a){var i=r[a];s[i]!==void 0&&(e[i]=s[i])}}return e}var Ke;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?Ke=function(){var e=Array.prototype.slice.call(arguments);typeof e[0]=="string"?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:Ke=function(){};Wt.debug=Ke});var pi=b((eS,yi)=>{yi.exports=fi()});var wi=b(R=>{"use strict";var Bf=R&&R.__createBinding||(Object.create?function(e,t,n,s){s===void 0&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){s===void 0&&(s=n),e[s]=t[n]}),Gf=R&&R.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),$s=R&&R.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&Bf(t,e,n);return Gf(t,e),t},D=R&&R.__awaiter||function(e,t,n,s){function r(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function i(l){try{d(s.next(l))}catch(m){o(m)}}function c(l){try{d(s.throw(l))}catch(m){o(m)}}function d(l){l.done?a(l.value):r(l.value).then(i,c)}d((s=s.apply(e,t||[])).next())})};Object.defineProperty(R,"__esModule",{value:!0});R.HttpClient=R.isHttps=R.HttpClientResponse=R.HttpClientError=R.getProxyUrl=R.MediaTypes=R.Headers=R.HttpCodes=void 0;var Ms=$s(require("http")),ta=$s(require("https")),hi=$s(di()),ks=$s(pi()),me;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})(me=R.HttpCodes||(R.HttpCodes={}));var W;(function(e){e.Accept="accept",e.ContentType="content-type"})(W=R.Headers||(R.Headers={}));var Je;(function(e){e.ApplicationJson="application/json"})(Je=R.MediaTypes||(R.MediaTypes={}));function qf(e){let t=hi.getProxyUrl(new URL(e));return t?t.href:""}R.getProxyUrl=qf;var Hf=[me.MovedPermanently,me.ResourceMoved,me.SeeOther,me.TemporaryRedirect,me.PermanentRedirect],jf=[me.BadGateway,me.ServiceUnavailable,me.GatewayTimeout],Kf=["OPTIONS","GET","DELETE","HEAD"],Jf=10,Yf=5,Bt=class extends Error{constructor(t,n){super(t),this.name="HttpClientError",this.statusCode=n,Object.setPrototypeOf(this,Bt.prototype)}};R.HttpClientError=Bt;var Fs=class{constructor(t){this.message=t}readBody(){return D(this,void 0,void 0,function*(){return new Promise(t=>D(this,void 0,void 0,function*(){let n=Buffer.alloc(0);this.message.on("data",s=>{n=Buffer.concat([n,s])}),this.message.on("end",()=>{t(n.toString())})}))})}};R.HttpClientResponse=Fs;function Xf(e){return new URL(e).protocol==="https:"}R.isHttps=Xf;var na=class{constructor(t,n,s){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=n||[],this.requestOptions=s,s&&(s.ignoreSslError!=null&&(this._ignoreSslError=s.ignoreSslError),this._socketTimeout=s.socketTimeout,s.allowRedirects!=null&&(this._allowRedirects=s.allowRedirects),s.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=s.allowRedirectDowngrade),s.maxRedirects!=null&&(this._maxRedirects=Math.max(s.maxRedirects,0)),s.keepAlive!=null&&(this._keepAlive=s.keepAlive),s.allowRetries!=null&&(this._allowRetries=s.allowRetries),s.maxRetries!=null&&(this._maxRetries=s.maxRetries))}options(t,n){return D(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,n||{})})}get(t,n){return D(this,void 0,void 0,function*(){return this.request("GET",t,null,n||{})})}del(t,n){return D(this,void 0,void 0,function*(){return this.request("DELETE",t,null,n||{})})}post(t,n,s){return D(this,void 0,void 0,function*(){return this.request("POST",t,n,s||{})})}patch(t,n,s){return D(this,void 0,void 0,function*(){return this.request("PATCH",t,n,s||{})})}put(t,n,s){return D(this,void 0,void 0,function*(){return this.request("PUT",t,n,s||{})})}head(t,n){return D(this,void 0,void 0,function*(){return this.request("HEAD",t,null,n||{})})}sendStream(t,n,s,r){return D(this,void 0,void 0,function*(){return this.request(t,n,s,r)})}getJson(t,n={}){return D(this,void 0,void 0,function*(){n[W.Accept]=this._getExistingOrDefaultHeader(n,W.Accept,Je.ApplicationJson);let s=yield this.get(t,n);return this._processResponse(s,this.requestOptions)})}postJson(t,n,s={}){return D(this,void 0,void 0,function*(){let r=JSON.stringify(n,null,2);s[W.Accept]=this._getExistingOrDefaultHeader(s,W.Accept,Je.ApplicationJson),s[W.ContentType]=this._getExistingOrDefaultHeader(s,W.ContentType,Je.ApplicationJson);let a=yield this.post(t,r,s);return this._processResponse(a,this.requestOptions)})}putJson(t,n,s={}){return D(this,void 0,void 0,function*(){let r=JSON.stringify(n,null,2);s[W.Accept]=this._getExistingOrDefaultHeader(s,W.Accept,Je.ApplicationJson),s[W.ContentType]=this._getExistingOrDefaultHeader(s,W.ContentType,Je.ApplicationJson);let a=yield this.put(t,r,s);return this._processResponse(a,this.requestOptions)})}patchJson(t,n,s={}){return D(this,void 0,void 0,function*(){let r=JSON.stringify(n,null,2);s[W.Accept]=this._getExistingOrDefaultHeader(s,W.Accept,Je.ApplicationJson),s[W.ContentType]=this._getExistingOrDefaultHeader(s,W.ContentType,Je.ApplicationJson);let a=yield this.patch(t,r,s);return this._processResponse(a,this.requestOptions)})}request(t,n,s,r){return D(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let a=new URL(n),o=this._prepareRequest(t,a,r),i=this._allowRetries&&Kf.includes(t)?this._maxRetries+1:1,c=0,d;do{if(d=yield this.requestRaw(o,s),d&&d.message&&d.message.statusCode===me.Unauthorized){let m;for(let u of this.handlers)if(u.canHandleAuthentication(d)){m=u;break}return m?m.handleAuthentication(this,o,s):d}let l=this._maxRedirects;for(;d.message.statusCode&&Hf.includes(d.message.statusCode)&&this._allowRedirects&&l>0;){let m=d.message.headers.location;if(!m)break;let u=new URL(m);if(a.protocol==="https:"&&a.protocol!==u.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield d.readBody(),u.hostname!==a.hostname)for(let y in r)y.toLowerCase()==="authorization"&&delete r[y];o=this._prepareRequest(t,u,r),d=yield this.requestRaw(o,s),l--}if(!d.message.statusCode||!jf.includes(d.message.statusCode))return d;c+=1,c<i&&(yield d.readBody(),yield this._performExponentialBackoff(c))}while(c<i);return d})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,n){return D(this,void 0,void 0,function*(){return new Promise((s,r)=>{function a(o,i){o?r(o):i?s(i):r(new Error("Unknown error"))}this.requestRawWithCallback(t,n,a)})})}requestRawWithCallback(t,n,s){typeof n=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(n,"utf8"));let r=!1;function a(c,d){r||(r=!0,s(c,d))}let o=t.httpModule.request(t.options,c=>{let d=new Fs(c);a(void 0,d)}),i;o.on("socket",c=>{i=c}),o.setTimeout(this._socketTimeout||3*6e4,()=>{i&&i.end(),a(new Error(`Request timeout: ${t.options.path}`))}),o.on("error",function(c){a(c)}),n&&typeof n=="string"&&o.write(n,"utf8"),n&&typeof n!="string"?(n.on("close",function(){o.end()}),n.pipe(o)):o.end()}getAgent(t){let n=new URL(t);return this._getAgent(n)}_prepareRequest(t,n,s){let r={};r.parsedUrl=n;let a=r.parsedUrl.protocol==="https:";r.httpModule=a?ta:Ms;let o=a?443:80;if(r.options={},r.options.host=r.parsedUrl.hostname,r.options.port=r.parsedUrl.port?parseInt(r.parsedUrl.port):o,r.options.path=(r.parsedUrl.pathname||"")+(r.parsedUrl.search||""),r.options.method=t,r.options.headers=this._mergeHeaders(s),this.userAgent!=null&&(r.options.headers["user-agent"]=this.userAgent),r.options.agent=this._getAgent(r.parsedUrl),this.handlers)for(let i of this.handlers)i.prepareRequest(r.options);return r}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},Ls(this.requestOptions.headers),Ls(t||{})):Ls(t||{})}_getExistingOrDefaultHeader(t,n,s){let r;return this.requestOptions&&this.requestOptions.headers&&(r=Ls(this.requestOptions.headers)[n]),t[n]||r||s}_getAgent(t){let n,s=hi.getProxyUrl(t),r=s&&s.hostname;if(this._keepAlive&&r&&(n=this._proxyAgent),this._keepAlive&&!r&&(n=this._agent),n)return n;let a=t.protocol==="https:",o=100;if(this.requestOptions&&(o=this.requestOptions.maxSockets||Ms.globalAgent.maxSockets),s&&s.hostname){let i={maxSockets:o,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(s.username||s.password)&&{proxyAuth:`${s.username}:${s.password}`}),{host:s.hostname,port:s.port})},c,d=s.protocol==="https:";a?c=d?ks.httpsOverHttps:ks.httpsOverHttp:c=d?ks.httpOverHttps:ks.httpOverHttp,n=c(i),this._proxyAgent=n}if(this._keepAlive&&!n){let i={keepAlive:this._keepAlive,maxSockets:o};n=a?new ta.Agent(i):new Ms.Agent(i),this._agent=n}return n||(n=a?ta.globalAgent:Ms.globalAgent),a&&this._ignoreSslError&&(n.options=Object.assign(n.options||{},{rejectUnauthorized:!1})),n}_performExponentialBackoff(t){return D(this,void 0,void 0,function*(){t=Math.min(Jf,t);let n=Yf*Math.pow(2,t);return new Promise(s=>setTimeout(()=>s(),n))})}_processResponse(t,n){return D(this,void 0,void 0,function*(){return new Promise((s,r)=>D(this,void 0,void 0,function*(){let a=t.message.statusCode||0,o={statusCode:a,result:null,headers:{}};a===me.NotFound&&s(o);function i(l,m){if(typeof m=="string"){let u=new Date(m);if(!isNaN(u.valueOf()))return u}return m}let c,d;try{d=yield t.readBody(),d&&d.length>0&&(n&&n.deserializeDates?c=JSON.parse(d,i):c=JSON.parse(d),o.result=c),o.headers=t.message.headers}catch{}if(a>299){let l;c&&c.message?l=c.message:d&&d.length>0?l=d:l=`Failed request: (${a})`;let m=new Bt(l,a);m.result=o.result,r(m)}else s(o)}))})}};R.HttpClient=na;var Ls=e=>Object.keys(e).reduce((t,n)=>(t[n.toLowerCase()]=e[n],t),{})});var Ei=b(Ee=>{"use strict";var oa=Ee&&Ee.__awaiter||function(e,t,n,s){function r(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function i(l){try{d(s.next(l))}catch(m){o(m)}}function c(l){try{d(s.throw(l))}catch(m){o(m)}}function d(l){l.done?a(l.value):r(l.value).then(i,c)}d((s=s.apply(e,t||[])).next())})};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.PersonalAccessTokenCredentialHandler=Ee.BearerCredentialHandler=Ee.BasicCredentialHandler=void 0;var sa=class{constructor(t,n){this.username=t,this.password=n}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return oa(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Ee.BasicCredentialHandler=sa;var ra=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return oa(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Ee.BearerCredentialHandler=ra;var aa=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return oa(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Ee.PersonalAccessTokenCredentialHandler=aa});var Si=b(Gt=>{"use strict";var Ii=Gt&&Gt.__awaiter||function(e,t,n,s){function r(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function i(l){try{d(s.next(l))}catch(m){o(m)}}function c(l){try{d(s.throw(l))}catch(m){o(m)}}function d(l){l.done?a(l.value):r(l.value).then(i,c)}d((s=s.apply(e,t||[])).next())})};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.OidcClient=void 0;var Qf=wi(),Zf=Ei(),gi=ia(),Ye=class{static createHttpClient(t=!0,n=10){let s={allowRetries:t,maxRetries:n};return new Qf.HttpClient("actions/oidc-client",[new Zf.BearerCredentialHandler(Ye.getRequestToken())],s)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var n;return Ii(this,void 0,void 0,function*(){let a=(n=(yield Ye.createHttpClient().getJson(t).catch(o=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${o.statusCode}
 
        Error Message: ${o.result.message}`)})).result)===null||n===void 0?void 0:n.value;if(!a)throw new Error("Response json body do not have ID Token field");return a})}static getIDToken(t){return Ii(this,void 0,void 0,function*(){try{let n=Ye.getIDTokenUrl();if(t){let r=encodeURIComponent(t);n=`${n}&audience=${r}`}gi.debug(`ID token url is ${n}`);let s=yield Ye.getCall(n);return gi.setSecret(s),s}catch(n){throw new Error(`Error message: ${n.message}`)}})}};Gt.OidcClient=Ye});var ma=b(q=>{"use strict";var ca=q&&q.__awaiter||function(e,t,n,s){function r(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function i(l){try{d(s.next(l))}catch(m){o(m)}}function c(l){try{d(s.throw(l))}catch(m){o(m)}}function d(l){l.done?a(l.value):r(l.value).then(i,c)}d((s=s.apply(e,t||[])).next())})};Object.defineProperty(q,"__esModule",{value:!0});q.summary=q.markdownSummary=q.SUMMARY_DOCS_URL=q.SUMMARY_ENV_VAR=void 0;var ey=require("os"),da=require("fs"),{access:ty,appendFile:ny,writeFile:sy}=da.promises;q.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";q.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var la=class{constructor(){this._buffer=""}filePath(){return ca(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[q.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${q.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield ty(t,da.constants.R_OK|da.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,n,s={}){let r=Object.entries(s).map(([a,o])=>` ${a}="${o}"`).join("");return n?`<${t}${r}>${n}</${t}>`:`<${t}${r}>`}write(t){return ca(this,void 0,void 0,function*(){let n=!!(t!=null&&t.overwrite),s=yield this.filePath();return yield(n?sy:ny)(s,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return ca(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,n=!1){return this._buffer+=t,n?this.addEOL():this}addEOL(){return this.addRaw(ey.EOL)}addCodeBlock(t,n){let s=Object.assign({},n&&{lang:n}),r=this.wrap("pre",this.wrap("code",t),s);return this.addRaw(r).addEOL()}addList(t,n=!1){let s=n?"ol":"ul",r=t.map(o=>this.wrap("li",o)).join(""),a=this.wrap(s,r);return this.addRaw(a).addEOL()}addTable(t){let n=t.map(r=>{let a=r.map(o=>{if(typeof o=="string")return this.wrap("td",o);let{header:i,data:c,colspan:d,rowspan:l}=o,m=i?"th":"td",u=Object.assign(Object.assign({},d&&{colspan:d}),l&&{rowspan:l});return this.wrap(m,c,u)}).join("");return this.wrap("tr",a)}).join(""),s=this.wrap("table",n);return this.addRaw(s).addEOL()}addDetails(t,n){let s=this.wrap("details",this.wrap("summary",t)+n);return this.addRaw(s).addEOL()}addImage(t,n,s){let{width:r,height:a}=s||{},o=Object.assign(Object.assign({},r&&{width:r}),a&&{height:a}),i=this.wrap("img",null,Object.assign({src:t,alt:n},o));return this.addRaw(i).addEOL()}addHeading(t,n){let s=`h${n}`,r=["h1","h2","h3","h4","h5","h6"].includes(s)?s:"h1",a=this.wrap(r,t);return this.addRaw(a).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,n){let s=Object.assign({},n&&{cite:n}),r=this.wrap("blockquote",t,s);return this.addRaw(r).addEOL()}addLink(t,n){let s=this.wrap("a",t,{href:n});return this.addRaw(s).addEOL()}},xi=new la;q.markdownSummary=xi;q.summary=xi});var Ti=b(H=>{"use strict";var ry=H&&H.__createBinding||(Object.create?function(e,t,n,s){s===void 0&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){s===void 0&&(s=n),e[s]=t[n]}),ay=H&&H.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),oy=H&&H.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&ry(t,e,n);return ay(t,e),t};Object.defineProperty(H,"__esModule",{value:!0});H.toPlatformPath=H.toWin32Path=H.toPosixPath=void 0;var iy=oy(require("path"));function cy(e){return e.replace(/[\\]/g,"/")}H.toPosixPath=cy;function dy(e){return e.replace(/[/]/g,"\\")}H.toWin32Path=dy;function ly(e){return e.replace(/[/\\]/g,iy.sep)}H.toPlatformPath=ly});var ia=b(w=>{"use strict";var my=w&&w.__createBinding||(Object.create?function(e,t,n,s){s===void 0&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){s===void 0&&(s=n),e[s]=t[n]}),uy=w&&w.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ci=w&&w.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&my(t,e,n);return uy(t,e),t},Ri=w&&w.__awaiter||function(e,t,n,s){function r(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function i(l){try{d(s.next(l))}catch(m){o(m)}}function c(l){try{d(s.throw(l))}catch(m){o(m)}}function d(l){l.done?a(l.value):r(l.value).then(i,c)}d((s=s.apply(e,t||[])).next())})};Object.defineProperty(w,"__esModule",{value:!0});w.getIDToken=w.getState=w.saveState=w.group=w.endGroup=w.startGroup=w.info=w.notice=w.warning=w.error=w.debug=w.isDebug=w.setFailed=w.setCommandEcho=w.setOutput=w.getBooleanInput=w.getMultilineInput=w.getInput=w.addPath=w.setSecret=w.exportVariable=w.ExitCode=void 0;var ee=ko(),Nt=ii(),qt=vs(),_i=Ci(require("os")),fy=Ci(require("path")),yy=Si(),Ai;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(Ai=w.ExitCode||(w.ExitCode={}));function py(e,t){let n=qt.toCommandValue(t);if(process.env[e]=n,process.env.GITHUB_ENV||"")return Nt.issueFileCommand("ENV",Nt.prepareKeyValueMessage(e,t));ee.issueCommand("set-env",{name:e},n)}w.exportVariable=py;function hy(e){ee.issueCommand("add-mask",{},e)}w.setSecret=hy;function wy(e){process.env.GITHUB_PATH||""?Nt.issueFileCommand("PATH",e):ee.issueCommand("add-path",{},e),process.env.PATH=`${e}${fy.delimiter}${process.env.PATH}`}w.addPath=wy;function ua(e,t){let n=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!n)throw new Error(`Input required and not supplied: ${e}`);return t&&t.trimWhitespace===!1?n:n.trim()}w.getInput=ua;function Ey(e,t){let n=ua(e,t).split(`
`).filter(s=>s!=="");return t&&t.trimWhitespace===!1?n:n.map(s=>s.trim())}w.getMultilineInput=Ey;function Iy(e,t){let n=["true","True","TRUE"],s=["false","False","FALSE"],r=ua(e,t);if(n.includes(r))return!0;if(s.includes(r))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}w.getBooleanInput=Iy;function gy(e,t){if(process.env.GITHUB_OUTPUT||"")return Nt.issueFileCommand("OUTPUT",Nt.prepareKeyValueMessage(e,t));process.stdout.write(_i.EOL),ee.issueCommand("set-output",{name:e},qt.toCommandValue(t))}w.setOutput=gy;function Sy(e){ee.issue("echo",e?"on":"off")}w.setCommandEcho=Sy;function xy(e){process.exitCode=Ai.Failure,vi(e)}w.setFailed=xy;function Ty(){return process.env.RUNNER_DEBUG==="1"}w.isDebug=Ty;function Cy(e){ee.issueCommand("debug",{},e)}w.debug=Cy;function vi(e,t={}){ee.issueCommand("error",qt.toCommandProperties(t),e instanceof Error?e.toString():e)}w.error=vi;function Ry(e,t={}){ee.issueCommand("warning",qt.toCommandProperties(t),e instanceof Error?e.toString():e)}w.warning=Ry;function _y(e,t={}){ee.issueCommand("notice",qt.toCommandProperties(t),e instanceof Error?e.toString():e)}w.notice=_y;function Ay(e){process.stdout.write(e+_i.EOL)}w.info=Ay;function bi(e){ee.issue("group",e)}w.startGroup=bi;function Pi(){ee.issue("endgroup")}w.endGroup=Pi;function vy(e,t){return Ri(this,void 0,void 0,function*(){bi(e);let n;try{n=yield t()}finally{Pi()}return n})}w.group=vy;function by(e,t){if(process.env.GITHUB_STATE||"")return Nt.issueFileCommand("STATE",Nt.prepareKeyValueMessage(e,t));ee.issueCommand("save-state",{name:e},qt.toCommandValue(t))}w.saveState=by;function Py(e){return process.env[`STATE_${e}`]||""}w.getState=Py;function Ny(e){return Ri(this,void 0,void 0,function*(){return yield yy.OidcClient.getIDToken(e)})}w.getIDToken=Ny;var Oy=ma();Object.defineProperty(w,"summary",{enumerable:!0,get:function(){return Oy.summary}});var Dy=ma();Object.defineProperty(w,"markdownSummary",{enumerable:!0,get:function(){return Dy.markdownSummary}});var fa=Ti();Object.defineProperty(w,"toPosixPath",{enumerable:!0,get:function(){return fa.toPosixPath}});Object.defineProperty(w,"toWin32Path",{enumerable:!0,get:function(){return fa.toWin32Path}});Object.defineProperty(w,"toPlatformPath",{enumerable:!0,get:function(){return fa.toPlatformPath}})});var qa=b($e=>{"use strict";var fd=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",iw=fd+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",yd="["+fd+"]["+iw+"]*",cw=new RegExp("^"+yd+"$"),dw=function(e,t){let n=[],s=t.exec(e);for(;s;){let r=[];r.startIndex=t.lastIndex-s[0].length;let a=s.length;for(let o=0;o<a;o++)r.push(s[o]);n.push(r),s=t.exec(e)}return n},lw=function(e){let t=cw.exec(e);return!(t===null||typeof t>"u")};$e.isExist=function(e){return typeof e<"u"};$e.isEmptyObject=function(e){return Object.keys(e).length===0};$e.merge=function(e,t,n){if(t){let s=Object.keys(t),r=s.length;for(let a=0;a<r;a++)n==="strict"?e[s[a]]=[t[s[a]]]:e[s[a]]=t[s[a]]}};$e.getValue=function(e){return $e.isExist(e)?e:""};$e.isName=lw;$e.getAllMatches=dw;$e.nameRegexp=yd});var ja=b(Id=>{"use strict";var Ha=qa(),mw={allowBooleanAttributes:!1,unpairedTags:[]};Id.validate=function(e,t){t=Object.assign({},mw,t);let n=[],s=!1,r=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let a=0;a<e.length;a++)if(e[a]==="<"&&e[a+1]==="?"){if(a+=2,a=hd(e,a),a.err)return a}else if(e[a]==="<"){let o=a;if(a++,e[a]==="!"){a=wd(e,a);continue}else{let i=!1;e[a]==="/"&&(i=!0,a++);let c="";for(;a<e.length&&e[a]!==">"&&e[a]!==" "&&e[a]!=="	"&&e[a]!==`
`&&e[a]!=="\r";a++)c+=e[a];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),a--),!Iw(c)){let m;return c.trim().length===0?m="Invalid space after '<'.":m="Tag '"+c+"' is an invalid name.",O("InvalidTag",m,X(e,a))}let d=yw(e,a);if(d===!1)return O("InvalidAttr","Attributes for '"+c+"' have open quote.",X(e,a));let l=d.value;if(a=d.index,l[l.length-1]==="/"){let m=a-l.length;l=l.substring(0,l.length-1);let u=Ed(l,t);if(u===!0)s=!0;else return O(u.err.code,u.err.msg,X(e,m+u.err.line))}else if(i)if(d.tagClosed){if(l.trim().length>0)return O("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",X(e,o));{let m=n.pop();if(c!==m.tagName){let u=X(e,m.tagStartPos);return O("InvalidTag","Expected closing tag '"+m.tagName+"' (opened in line "+u.line+", col "+u.col+") instead of closing tag '"+c+"'.",X(e,o))}n.length==0&&(r=!0)}}else return O("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",X(e,a));else{let m=Ed(l,t);if(m!==!0)return O(m.err.code,m.err.msg,X(e,a-l.length+m.err.line));if(r===!0)return O("InvalidXml","Multiple possible root nodes found.",X(e,a));t.unpairedTags.indexOf(c)!==-1||n.push({tagName:c,tagStartPos:o}),s=!0}for(a++;a<e.length;a++)if(e[a]==="<")if(e[a+1]==="!"){a++,a=wd(e,a);continue}else if(e[a+1]==="?"){if(a=hd(e,++a),a.err)return a}else break;else if(e[a]==="&"){let m=ww(e,a);if(m==-1)return O("InvalidChar","char '&' is not expected.",X(e,a));a=m}else if(r===!0&&!pd(e[a]))return O("InvalidXml","Extra text at the end",X(e,a));e[a]==="<"&&a--}}else{if(pd(e[a]))continue;return O("InvalidChar","char '"+e[a]+"' is not expected.",X(e,a))}if(s){if(n.length==1)return O("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",X(e,n[0].tagStartPos));if(n.length>0)return O("InvalidXml","Invalid '"+JSON.stringify(n.map(a=>a.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return O("InvalidXml","Start tag expected.",1);return!0};function pd(e){return e===" "||e==="	"||e===`
`||e==="\r"}function hd(e,t){let n=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let s=e.substr(n,t-n);if(t>5&&s==="xml")return O("InvalidXml","XML declaration allowed only at the start of the document.",X(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function wd(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let n=1;for(t+=8;t<e.length;t++)if(e[t]==="<")n++;else if(e[t]===">"&&(n--,n===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var uw='"',fw="'";function yw(e,t){let n="",s="",r=!1;for(;t<e.length;t++){if(e[t]===uw||e[t]===fw)s===""?s=e[t]:s!==e[t]||(s="");else if(e[t]===">"&&s===""){r=!0;break}n+=e[t]}return s!==""?!1:{value:n,index:t,tagClosed:r}}var pw=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Ed(e,t){let n=Ha.getAllMatches(e,pw),s={};for(let r=0;r<n.length;r++){if(n[r][1].length===0)return O("InvalidAttr","Attribute '"+n[r][2]+"' has no space in starting.",ds(n[r]));if(n[r][3]!==void 0&&n[r][4]===void 0)return O("InvalidAttr","Attribute '"+n[r][2]+"' is without value.",ds(n[r]));if(n[r][3]===void 0&&!t.allowBooleanAttributes)return O("InvalidAttr","boolean attribute '"+n[r][2]+"' is not allowed.",ds(n[r]));let a=n[r][2];if(!Ew(a))return O("InvalidAttr","Attribute '"+a+"' is an invalid name.",ds(n[r]));if(!s.hasOwnProperty(a))s[a]=1;else return O("InvalidAttr","Attribute '"+a+"' is repeated.",ds(n[r]))}return!0}function hw(e,t){let n=/\d/;for(e[t]==="x"&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(n))break}return-1}function ww(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,hw(e,t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(e[t]===";")break;return-1}return t}function O(e,t,n){return{err:{code:e,msg:t,line:n.line||n,col:n.col}}}function Ew(e){return Ha.isName(e)}function Iw(e){return Ha.isName(e)}function X(e,t){let n=e.substring(0,t).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function ds(e){return e.startIndex+e[1].length}});var Sd=b(Ka=>{var gd={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1},gw=function(e){return Object.assign({},gd,e)};Ka.buildOptions=gw;Ka.defaultOptions=gd});var Td=b(($O,xd)=>{"use strict";var Ja=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,n){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:n})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,[":@"]:t[":@"]}):this.child.push({[t.tagname]:t.child})}};xd.exports=Ja});var Rd=b((VO,Cd)=>{function Sw(e,t){let n={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let s=1,r=!1,a=!1,o=!1,i="";for(;t<e.length;t++)if(e[t]==="<"&&!o){if(r&&e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y")t+=7,a=!0;else if(r&&e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T")t+=8;else if(r&&e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T")t+=8;else if(r&&e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N")t+=9;else if(e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-")o=!0;else throw new Error("Invalid DOCTYPE");s++,i=""}else if(e[t]===">"){if(o?e[t-1]==="-"&&e[t-2]==="-"&&(o=!1,s--):(a&&(Tw(i,n),a=!1),s--),s===0)break}else e[t]==="["?r=!0:i+=e[t];if(s!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:n,i:t}}var xw=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function Tw(e,t){let n=xw.exec(e);n&&(t[n[1]]={regx:RegExp(`&${n[1]};`,"g"),val:n[3]})}Cd.exports=Sw});var Ad=b((zO,_d)=>{var Cw=/^[-+]?0x[a-fA-F0-9]+$/,Rw=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var _w={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Aw(e,t={}){if(t=Object.assign({},_w,t),!e||typeof e!="string")return e;let n=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(n))return e;if(t.hex&&Cw.test(n))return Number.parseInt(n,16);{let s=Rw.exec(n);if(s){let r=s[1],a=s[2],o=vw(s[3]),i=s[4]||s[6];if(!t.leadingZeros&&a.length>0&&r&&n[2]!==".")return e;if(!t.leadingZeros&&a.length>0&&!r&&n[1]!==".")return e;{let c=Number(n),d=""+c;return d.search(/[eE]/)!==-1||i?t.eNotation?c:e:n.indexOf(".")!==-1?d==="0"&&o===""||d===o||r&&d==="-"+o?c:e:a?o===d||r+o===d?c:e:n===d||n===r+d?c:e}}else return e}}function vw(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}_d.exports=Aw});var bd=b((WO,vd)=>{"use strict";var Za=qa(),ls=Td(),bw=Rd(),Pw=Ad(),UO="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,Za.nameRegexp),Ya=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=Nw,this.parseXml=Lw,this.parseTextData=Ow,this.resolveNameSpace=Dw,this.buildAttributesMap=kw,this.isItStopNode=Vw,this.replaceEntitiesValue=Fw,this.readStopNodeData=Uw,this.saveTextToParentTag=$w}};function Nw(e){let t=Object.keys(e);for(let n=0;n<t.length;n++){let s=t[n];this.lastEntities[s]={regex:new RegExp("&"+s+";","g"),val:e[s]}}}function Ow(e,t,n,s,r,a,o){if(e!==void 0&&(this.options.trimValues&&!s&&(e=e.trim()),e.length>0)){o||(e=this.replaceEntitiesValue(e));let i=this.options.tagValueProcessor(t,e,n,r,a);return i==null?e:typeof i!=typeof e||i!==e?i:this.options.trimValues?Qa(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?Qa(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function Dw(e){if(this.options.removeNSPrefix){let t=e.split(":"),n=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=n+t[1])}return e}var Mw=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function kw(e,t){if(!this.options.ignoreAttributes&&typeof e=="string"){let n=Za.getAllMatches(e,Mw),s=n.length,r={};for(let a=0;a<s;a++){let o=this.resolveNameSpace(n[a][1]),i=n[a][4],c=this.options.attributeNamePrefix+o;if(o.length)if(this.options.transformAttributeName&&(c=this.options.transformAttributeName(c)),c==="__proto__"&&(c="#__proto__"),i!==void 0){this.options.trimValues&&(i=i.trim()),i=this.replaceEntitiesValue(i);let d=this.options.attributeValueProcessor(o,i,t);d==null?r[c]=i:typeof d!=typeof i||d!==i?r[c]=d:r[c]=Qa(i,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(r[c]=!0)}if(!Object.keys(r).length)return;if(this.options.attributesGroupName){let a={};return a[this.options.attributesGroupName]=r,a}return r}}var Lw=function(e){e=e.replace(/\r\n?/g,`
`);let t=new ls("!xml"),n=t,s="",r="";for(let a=0;a<e.length;a++)if(e[a]==="<")if(e[a+1]==="/"){let i=Mt(e,">",a,"Closing Tag is not closed."),c=e.substring(a+2,i).trim();if(this.options.removeNSPrefix){let d=c.indexOf(":");d!==-1&&(c=c.substr(d+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),n&&(s=this.saveTextToParentTag(s,n,r)),r=r.substr(0,r.lastIndexOf(".")),n=this.tagsNodeStack.pop(),s="",a=i}else if(e[a+1]==="?"){let i=Xa(e,a,!1,"?>");if(!i)throw new Error("Pi Tag is not closed.");if(s=this.saveTextToParentTag(s,n,r),!(this.options.ignoreDeclaration&&i.tagName==="?xml"||this.options.ignorePiTags)){let c=new ls(i.tagName);c.add(this.options.textNodeName,""),i.tagName!==i.tagExp&&i.attrExpPresent&&(c[":@"]=this.buildAttributesMap(i.tagExp,r)),n.addChild(c)}a=i.closeIndex+1}else if(e.substr(a+1,3)==="!--"){let i=Mt(e,"-->",a+4,"Comment is not closed.");if(this.options.commentPropName){let c=e.substring(a+4,i-2);s=this.saveTextToParentTag(s,n,r),n.add(this.options.commentPropName,[{[this.options.textNodeName]:c}])}a=i}else if(e.substr(a+1,2)==="!D"){let i=bw(e,a);this.docTypeEntities=i.entities,a=i.i}else if(e.substr(a+1,2)==="!["){let i=Mt(e,"]]>",a,"CDATA is not closed.")-2,c=e.substring(a+9,i);if(s=this.saveTextToParentTag(s,n,r),this.options.cdataPropName)n.add(this.options.cdataPropName,[{[this.options.textNodeName]:c}]);else{let d=this.parseTextData(c,n.tagname,r,!0,!1,!0);d==null&&(d=""),n.add(this.options.textNodeName,d)}a=i+2}else{let i=Xa(e,a,this.options.removeNSPrefix),c=i.tagName,d=i.tagExp,l=i.attrExpPresent,m=i.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),n&&s&&n.tagname!=="!xml"&&(s=this.saveTextToParentTag(s,n,r,!1)),c!==t.tagname&&(r+=r?"."+c:c);let u=n;if(u&&this.options.unpairedTags.indexOf(u.tagname)!==-1&&(n=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,r,c)){let y="";if(d.length>0&&d.lastIndexOf("/")===d.length-1)a=i.closeIndex;else if(this.options.unpairedTags.indexOf(c)!==-1)a=i.closeIndex;else{let h=this.readStopNodeData(e,c,m+1);if(!h)throw new Error(`Unexpected end of ${c}`);a=h.i,y=h.tagContent}let p=new ls(c);c!==d&&l&&(p[":@"]=this.buildAttributesMap(d,r)),y&&(y=this.parseTextData(y,c,r,!0,l,!0,!0)),r=r.substr(0,r.lastIndexOf(".")),p.add(this.options.textNodeName,y),n.addChild(p)}else{if(d.length>0&&d.lastIndexOf("/")===d.length-1){c[c.length-1]==="/"?(c=c.substr(0,c.length-1),d=c):d=d.substr(0,d.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));let y=new ls(c);c!==d&&l&&(y[":@"]=this.buildAttributesMap(d,r)),r=r.substr(0,r.lastIndexOf(".")),n.addChild(y)}else{let y=new ls(c);this.tagsNodeStack.push(n),c!==d&&l&&(y[":@"]=this.buildAttributesMap(d,r)),n.addChild(y),n=y}s="",a=m}}else s+=e[a];return t.child},Fw=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let n=this.docTypeEntities[t];e=e.replace(n.regx,n.val)}for(let t in this.lastEntities){let n=this.lastEntities[t];e=e.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let n=this.htmlEntities[t];e=e.replace(n.regex,n.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function $w(e,t,n,s){return e&&(s===void 0&&(s=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,n,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,s),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function Vw(e,t,n){let s="*."+n;for(let r in e){let a=e[r];if(s===a||t===a)return!0}return!1}function zw(e,t,n=">"){let s,r="";for(let a=t;a<e.length;a++){let o=e[a];if(s)o===s&&(s="");else if(o==='"'||o==="'")s=o;else if(o===n[0])if(n[1]){if(e[a+1]===n[1])return{data:r,index:a}}else return{data:r,index:a};else o==="	"&&(o=" ");r+=o}}function Mt(e,t,n,s){let r=e.indexOf(t,n);if(r===-1)throw new Error(s);return r+t.length-1}function Xa(e,t,n,s=">"){let r=zw(e,t+1,s);if(!r)return;let a=r.data,o=r.index,i=a.search(/\s/),c=a,d=!0;if(i!==-1&&(c=a.substr(0,i).replace(/\s\s*$/,""),a=a.substr(i+1)),n){let l=c.indexOf(":");l!==-1&&(c=c.substr(l+1),d=c!==r.data.substr(l+1))}return{tagName:c,tagExp:a,closeIndex:o,attrExpPresent:d}}function Uw(e,t,n){let s=n,r=1;for(;n<e.length;n++)if(e[n]==="<")if(e[n+1]==="/"){let a=Mt(e,">",n,`${t} is not closed`);if(e.substring(n+2,a).trim()===t&&(r--,r===0))return{tagContent:e.substring(s,n),i:a};n=a}else if(e[n+1]==="?")n=Mt(e,"?>",n+1,"StopNode is not closed.");else if(e.substr(n+1,3)==="!--")n=Mt(e,"-->",n+3,"StopNode is not closed.");else if(e.substr(n+1,2)==="![")n=Mt(e,"]]>",n,"StopNode is not closed.")-2;else{let a=Xa(e,n,">");a&&((a&&a.tagName)===t&&a.tagExp[a.tagExp.length-1]!=="/"&&r++,n=a.closeIndex)}}function Qa(e,t,n){if(t&&typeof e=="string"){let s=e.trim();return s==="true"?!0:s==="false"?!1:Pw(e,n)}else return Za.isExist(e)?e:""}vd.exports=Ya});var Od=b(Nd=>{"use strict";function Ww(e,t){return Pd(e,t)}function Pd(e,t,n){let s,r={};for(let a=0;a<e.length;a++){let o=e[a],i=Bw(o),c="";if(n===void 0?c=i:c=n+"."+i,i===t.textNodeName)s===void 0?s=o[i]:s+=""+o[i];else{if(i===void 0)continue;if(o[i]){let d=Pd(o[i],t,c),l=qw(d,t);o[":@"]?Gw(d,o[":@"],c,t):Object.keys(d).length===1&&d[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?d=d[t.textNodeName]:Object.keys(d).length===0&&(t.alwaysCreateTextNode?d[t.textNodeName]="":d=""),r[i]!==void 0&&r.hasOwnProperty(i)?(Array.isArray(r[i])||(r[i]=[r[i]]),r[i].push(d)):t.isArray(i,c,l)?r[i]=[d]:r[i]=d}}}return typeof s=="string"?s.length>0&&(r[t.textNodeName]=s):s!==void 0&&(r[t.textNodeName]=s),r}function Bw(e){let t=Object.keys(e);for(let n=0;n<t.length;n++){let s=t[n];if(s!==":@")return s}}function Gw(e,t,n,s){if(t){let r=Object.keys(t),a=r.length;for(let o=0;o<a;o++){let i=r[o];s.isArray(i,n+"."+i,!0,!0)?e[i]=[t[i]]:e[i]=t[i]}}}function qw(e,t){let n=Object.keys(e).length;return!!(n===0||n===1&&e[t.textNodeName])}Nd.prettify=Ww});var Md=b((GO,Dd)=>{var{buildOptions:Hw}=Sd(),jw=bd(),{prettify:Kw}=Od(),Jw=ja(),eo=class{constructor(t){this.externalEntities={},this.options=Hw(t)}parse(t,n){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(n){n===!0&&(n={});let a=Jw.validate(t,n);if(a!==!0)throw Error(`${a.err.msg}:${a.err.line}:${a.err.col}`)}let s=new jw(this.options);s.addExternalEntities(this.externalEntities);let r=s.parseXml(t);return this.options.preserveOrder||r===void 0?r:Kw(r,this.options)}addEntity(t,n){if(n.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(n==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=n}};Dd.exports=eo});var Vd=b((qO,$d)=>{var Yw=`
`;function Xw(e,t){let n="";return t.format&&t.indentBy.length>0&&(n=Yw),Ld(e,t,"",n)}function Ld(e,t,n,s){let r="",a=!1;for(let o=0;o<e.length;o++){let i=e[o],c=Qw(i),d="";if(n.length===0?d=c:d=`${n}.${c}`,c===t.textNodeName){let p=i[c];Zw(d,t)||(p=t.tagValueProcessor(c,p),p=Fd(p,t)),a&&(r+=s),r+=p,a=!1;continue}else if(c===t.cdataPropName){a&&(r+=s),r+=`<![CDATA[${i[c][0][t.textNodeName]}]]>`,a=!1;continue}else if(c===t.commentPropName){r+=s+`<!--${i[c][0][t.textNodeName]}-->`,a=!0;continue}else if(c[0]==="?"){let p=kd(i[":@"],t),h=c==="?xml"?"":s,E=i[c][0][t.textNodeName];E=E.length!==0?" "+E:"",r+=h+`<${c}${E}${p}?>`,a=!0;continue}let l=s;l!==""&&(l+=t.indentBy);let m=kd(i[":@"],t),u=s+`<${c}${m}`,y=Ld(i[c],t,d,l);t.unpairedTags.indexOf(c)!==-1?t.suppressUnpairedNode?r+=u+">":r+=u+"/>":(!y||y.length===0)&&t.suppressEmptyNode?r+=u+"/>":y&&y.endsWith(">")?r+=u+`>${y}${s}</${c}>`:(r+=u+">",y&&s!==""&&(y.includes("/>")||y.includes("</"))?r+=s+t.indentBy+y+s:r+=y,r+=`</${c}>`),a=!0}return r}function Qw(e){let t=Object.keys(e);for(let n=0;n<t.length;n++){let s=t[n];if(s!==":@")return s}}function kd(e,t){let n="";if(e&&!t.ignoreAttributes)for(let s in e){let r=t.attributeValueProcessor(s,e[s]);r=Fd(r,t),r===!0&&t.suppressBooleanAttributes?n+=` ${s.substr(t.attributeNamePrefix.length)}`:n+=` ${s.substr(t.attributeNamePrefix.length)}="${r}"`}return n}function Zw(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let n=e.substr(e.lastIndexOf(".")+1);for(let s in t.stopNodes)if(t.stopNodes[s]===e||t.stopNodes[s]==="*."+n)return!0;return!1}function Fd(e,t){if(e&&e.length>0&&t.processEntities)for(let n=0;n<t.entities.length;n++){let s=t.entities[n];e=e.replace(s.regex,s.val)}return e}$d.exports=Xw});var Ud=b((HO,zd)=>{"use strict";var eE=Vd(),tE={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[]};function gt(e){this.options=Object.assign({},tE,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=rE),this.processTextOrObjNode=nE,this.options.format?(this.indentate=sE,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}gt.prototype.build=function(e){return this.options.preserveOrder?eE(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};gt.prototype.j2x=function(e,t){let n="",s="";for(let r in e)if(!(typeof e[r]>"u"))if(e[r]===null)r[0]==="?"?s+=this.indentate(t)+"<"+r+"?"+this.tagEndChar:s+=this.indentate(t)+"<"+r+"/"+this.tagEndChar;else if(e[r]instanceof Date)s+=this.buildTextValNode(e[r],r,"",t);else if(typeof e[r]!="object"){let a=this.isAttribute(r);if(a)n+=this.buildAttrPairStr(a,""+e[r]);else if(r===this.options.textNodeName){let o=this.options.tagValueProcessor(r,""+e[r]);s+=this.replaceEntitiesValue(o)}else s+=this.buildTextValNode(e[r],r,"",t)}else if(Array.isArray(e[r])){let a=e[r].length;for(let o=0;o<a;o++){let i=e[r][o];typeof i>"u"||(i===null?r[0]==="?"?s+=this.indentate(t)+"<"+r+"?"+this.tagEndChar:s+=this.indentate(t)+"<"+r+"/"+this.tagEndChar:typeof i=="object"?s+=this.processTextOrObjNode(i,r,t):s+=this.buildTextValNode(i,r,"",t))}}else if(this.options.attributesGroupName&&r===this.options.attributesGroupName){let a=Object.keys(e[r]),o=a.length;for(let i=0;i<o;i++)n+=this.buildAttrPairStr(a[i],""+e[r][a[i]])}else s+=this.processTextOrObjNode(e[r],r,t);return{attrStr:n,val:s}};gt.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function nE(e,t,n){let s=this.j2x(e,n+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,s.attrStr,n):this.buildObjectNode(s.val,t,s.attrStr,n)}gt.prototype.buildObjectNode=function(e,t,n,s){if(e==="")return t[0]==="?"?this.indentate(s)+"<"+t+n+"?"+this.tagEndChar:this.indentate(s)+"<"+t+n+this.closeTag(t)+this.tagEndChar;{let r="</"+t+this.tagEndChar,a="";return t[0]==="?"&&(a="?",r=""),n&&e.indexOf("<")===-1?this.indentate(s)+"<"+t+n+a+">"+e+r:this.options.commentPropName!==!1&&t===this.options.commentPropName&&a.length===0?this.indentate(s)+`<!--${e}-->`+this.newLine:this.indentate(s)+"<"+t+n+a+this.tagEndChar+e+this.indentate(s)+r}};gt.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};gt.prototype.buildTextValNode=function(e,t,n,s){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(s)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(s)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(s)+"<"+t+n+"?"+this.tagEndChar;{let r=this.options.tagValueProcessor(t,e);return r=this.replaceEntitiesValue(r),r===""?this.indentate(s)+"<"+t+n+this.closeTag(t)+this.tagEndChar:this.indentate(s)+"<"+t+n+">"+r+"</"+t+this.tagEndChar}};gt.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let n=this.options.entities[t];e=e.replace(n.regex,n.val)}return e};function sE(e){return this.options.indentBy.repeat(e)}function rE(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}zd.exports=gt});var Bd=b((jO,Wd)=>{"use strict";var aE=ja(),oE=Md(),iE=Ud();Wd.exports={XMLParser:oE,XMLValidator:aE,XMLBuilder:iE}});var v=Xn(ia());var Ni=async e=>{let t=(e==null?void 0:e.Bucket)||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),$y(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Fy(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},My=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,ky=/(\d+\.){3}\d+/,Ly=/\.\./;var Fy=e=>My.test(e)&&!ky.test(e)&&!Ly.test(e),$y=e=>{let[t,n,s,r,a,o]=e.split(":"),i=t==="arn"&&e.split(":").length>=6,c=[t,n,s,a,o].filter(Boolean).length===5;if(i&&!c)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return t==="arn"&&!!n&&!!s&&!!a&&!!o};var Oi=(e,t,n)=>{let s=async()=>{let r=n[e]??n[t];return typeof r=="function"?r():r};return e==="endpoint"||t==="endpoint"?async()=>{let r=await s();if(r&&typeof r=="object"){if("url"in r)return r.url.href;if("hostname"in r){let{protocol:a,hostname:o,port:i,path:c}=r;return`${a}//${o}${i?":"+i:""}${c}`}}return r}:s};var Di=async(e,t,n,s)=>{let r=await Vy(e,t,n);if(typeof n.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return n.endpointProvider(r,s)},Vy=async(e,t,n)=>{var a;let s={},r=((a=t==null?void 0:t.getEndpointParameterInstructions)==null?void 0:a.call(t))||{};for(let[o,i]of Object.entries(r))switch(i.type){case"staticContextParams":s[o]=i.value;break;case"contextParams":s[o]=e[i.name];break;case"clientContextParams":case"builtInParams":s[o]=await Oi(i.name,o,n)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(r).length===0&&Object.assign(s,n),String(n.serviceId).toLowerCase()==="s3"&&await Ni(s),s};function Mi(e){let t={};if(e=e.replace(/^\?/,""),e)for(let n of e.split("&")){let[s,r=null]=n.split("=");s=decodeURIComponent(s),r&&(r=decodeURIComponent(r)),s in t?Array.isArray(t[s])?t[s].push(r):t[s]=[t[s],r]:t[s]=r}return t}var j=e=>{if(typeof e=="string")return j(new URL(e));let{hostname:t,pathname:n,port:s,protocol:r,search:a}=e,o;return a&&(o=Mi(a)),{hostname:t,port:s?parseInt(s):void 0,protocol:r,path:n,query:o}};var ki=e=>typeof e=="object"?"url"in e?j(e.url):e:j(e);var Li=({config:e,instructions:t})=>(n,s)=>async r=>{var i,c;let a=await Di(r.input,{getEndpointParameterInstructions(){return t}},{...e},s);s.endpointV2=a,s.authSchemes=(i=a.properties)==null?void 0:i.authSchemes;let o=(c=s.authSchemes)==null?void 0:c[0];return o&&(s.signing_region=o.signingRegion,s.signing_service=o.signingName),n({...r})};var Fi=(e,t)=>(n,s)=>async r=>{let{response:a}=await n(r);try{let o=await t(a,e);return{response:a,output:o}}catch(o){if(Object.defineProperty(o,"$response",{value:a}),!("$metadata"in o)){let i="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";o.message+=`
  `+i}throw o}};var $i=(e,t)=>(n,s)=>async r=>{var i;let a=(i=s.endpointV2)!=null&&i.url&&e.urlParser?async()=>e.urlParser(s.endpointV2.url):e.endpoint;if(!a)throw new Error("No valid endpoint provider available.");let o=await t(r.input,{...e,endpoint:a});return n({...r,request:o})};var zy={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},ya={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function te(e,t,n){return{applyToStack:s=>{s.add(Fi(e,n),zy),s.add($i(e,t),ya)}}}var Uy={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:ya.name},ne=(e,t)=>({applyToStack:n=>{n.addRelativeTo(Li({config:e,instructions:t}),Uy)}});var L=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};var Xe=e=>{let t=e.tls??!0,{endpoint:n}=e,s=n!=null?async()=>ki(await L(n)()):void 0;return{...e,endpoint:s,tls:t,isCustomEndpoint:!!n,useDualstackEndpoint:L(e.useDualstackEndpoint??!1),useFipsEndpoint:L(e.useFipsEndpoint??!1)}};var Ie=class{trace(){}debug(){}info(){}warn(){}error(){}};var Ht=()=>{let e=[],t=[],n=new Set,s=l=>l.sort((m,u)=>Vi[u.step]-Vi[m.step]||zi[u.priority||"normal"]-zi[m.priority||"normal"]),r=l=>{let m=!1,u=y=>y.name&&y.name===l?(m=!0,n.delete(l),!1):!0;return e=e.filter(u),t=t.filter(u),m},a=l=>{let m=!1,u=y=>y.middleware===l?(m=!0,y.name&&n.delete(y.name),!1):!0;return e=e.filter(u),t=t.filter(u),m},o=l=>(e.forEach(m=>{l.add(m.middleware,{...m})}),t.forEach(m=>{l.addRelativeTo(m.middleware,{...m})}),l),i=l=>{let m=[];return l.before.forEach(u=>{u.before.length===0&&u.after.length===0?m.push(u):m.push(...i(u))}),m.push(l),l.after.reverse().forEach(u=>{u.before.length===0&&u.after.length===0?m.push(u):m.push(...i(u))}),m},c=(l=!1)=>{let m=[],u=[],y={};return e.forEach(h=>{let E={...h,before:[],after:[]};E.name&&(y[E.name]=E),m.push(E)}),t.forEach(h=>{let E={...h,before:[],after:[]};E.name&&(y[E.name]=E),u.push(E)}),u.forEach(h=>{if(h.toMiddleware){let E=y[h.toMiddleware];if(E===void 0){if(l)return;throw new Error(`${h.toMiddleware} is not found when adding ${h.name||"anonymous"} middleware ${h.relation} ${h.toMiddleware}`)}h.relation==="after"&&E.after.push(h),h.relation==="before"&&E.before.push(h)}}),s(m).map(i).reduce((h,E)=>(h.push(...E),h),[])},d={add:(l,m={})=>{let{name:u,override:y}=m,p={step:"initialize",priority:"normal",middleware:l,...m};if(u){if(n.has(u)){if(!y)throw new Error(`Duplicate middleware name '${u}'`);let h=e.findIndex(we=>we.name===u),E=e[h];if(E.step!==p.step||E.priority!==p.priority)throw new Error(`"${u}" middleware with ${E.priority} priority in ${E.step} step cannot be overridden by same-name middleware with ${p.priority} priority in ${p.step} step.`);e.splice(h,1)}n.add(u)}e.push(p)},addRelativeTo:(l,m)=>{let{name:u,override:y}=m,p={middleware:l,...m};if(u){if(n.has(u)){if(!y)throw new Error(`Duplicate middleware name '${u}'`);let h=t.findIndex(we=>we.name===u),E=t[h];if(E.toMiddleware!==p.toMiddleware||E.relation!==p.relation)throw new Error(`"${u}" middleware ${E.relation} "${E.toMiddleware}" middleware cannot be overridden by same-name middleware ${p.relation} "${p.toMiddleware}" middleware.`);t.splice(h,1)}n.add(u)}t.push(p)},clone:()=>o(Ht()),use:l=>{l.applyToStack(d)},remove:l=>typeof l=="string"?r(l):a(l),removeByTag:l=>{let m=!1,u=y=>{let{tags:p,name:h}=y;return p&&p.includes(l)?(h&&n.delete(h),m=!0,!1):!0};return e=e.filter(u),t=t.filter(u),m},concat:l=>{let m=o(Ht());return m.use(l),m},applyToStack:o,identify:()=>c(!0).map(l=>l.name+": "+(l.tags||[]).join(",")),resolve:(l,m)=>{for(let u of c().map(y=>y.middleware).reverse())l=u(l,m);return l}};return d},Vi={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},zi={high:3,normal:2,low:1};var ge=class{constructor(t){this.middlewareStack=Ht(),this.config=t}send(t,n,s){let r=typeof n!="function"?n:void 0,a=typeof n=="function"?n:s,o=t.resolveMiddleware(this.middlewareStack,this.config,r);if(a)o(t).then(i=>a(null,i.output),i=>a(i)).catch(()=>{});else return o(t).then(i=>i.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}};var K=class{constructor(){this.middlewareStack=Ht()}};var Qe="***SensitiveInformation***";var pa=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&zs.warn(Vs(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){let t=e.toLowerCase();if((t==="false"||t==="true")&&zs.warn(Vs(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},jt=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&zs.warn(Vs(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},Wy=Math.ceil(34028234663852886e22),Ui=e=>{let t=jt(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>Wy)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},ts=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}};var ue=e=>ha(e,32),Wi=e=>ha(e,16),Bi=e=>ha(e,8),ha=(e,t)=>{let n=ts(e);if(n!==void 0&&By(n,t)!==n)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return n},By=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},fe=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},Us=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},f=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return zs.warn(Vs(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}};var Gi=e=>jt(typeof e=="string"?ns(e):e);var qi=e=>Ui(typeof e=="string"?ns(e):e),Gy=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,ns=e=>{let t=e.match(Gy);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)};var wa=e=>ue(typeof e=="string"?ns(e):e),Hi=e=>Wi(typeof e=="string"?ns(e):e),ji=e=>Bi(typeof e=="string"?ns(e):e),Vs=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),zs={warn:console.warn};var qy=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var ax=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/);var Hy=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Ki=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=Hy.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[n,s,r,a,o,i,c,d,l]=t,m=Hi(Ji(s)),u=ss(r,"month",1,12),y=ss(a,"day",1,31),p=jy(m,u,y,{hours:o,minutes:i,seconds:c,fractionalMilliseconds:d});return l.toUpperCase()!="Z"&&p.setTime(p.getTime()-Qy(l)),p},ox=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),ix=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),cx=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/);var Ea=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=Gi(e);else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},jy=(e,t,n,s)=>{let r=t-1;return Jy(e,r,n),new Date(Date.UTC(e,r,n,ss(s.hours,"hour",0,23),ss(s.minutes,"minute",0,59),ss(s.seconds,"seconds",0,60),Xy(s.fractionalMilliseconds)))};var dx=50*365*24*60*60*1e3;var Ky=[31,28,31,30,31,30,31,31,30,31,30,31],Jy=(e,t,n)=>{let s=Ky[t];if(t===1&&Yy(e)&&(s=29),n>s)throw new TypeError(`Invalid day for ${qy[t]} in ${e}: ${n}`)},Yy=e=>e%4===0&&(e%100!==0||e%400===0),ss=(e,t,n,s)=>{let r=ji(Ji(e));if(r<n||r>s)throw new TypeError(`${t} must be between ${n} and ${s}, inclusive`);return r},Xy=e=>e==null?0:qi("0."+e)*1e3,Qy=e=>{let t=e[0],n=1;if(t=="+")n=1;else if(t=="-")n=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let s=Number(e.substring(1,3)),r=Number(e.substring(4,6));return n*(s*60+r)*60*1e3},Ji=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};var se=class extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,se.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}},g=(e,t={})=>{Object.entries(t).filter(([,s])=>s!==void 0).forEach(([s,r])=>{(e[s]==null||e[s]==="")&&(e[s]=r)});let n=e.message||e.Message||"UnknownError";return e.message=n,delete e.Message,e};var Se=({output:e,parsedBody:t,exceptionCtor:n,errorCode:s})=>{let r=Zy(e),a=r.httpStatusCode?r.httpStatusCode+"":void 0,o=new n({name:(t==null?void 0:t.code)||(t==null?void 0:t.Code)||s||a||"UnknownError",$fault:"client",$metadata:r});throw g(o,t)},Zy=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});var Ze=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};var Yi=!1,et=e=>{e&&!Yi&&parseInt(e.substring(1,e.indexOf(".")))<14&&(Yi=!0)};function Ws(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var Ia=e=>{let t="#text";for(let n in e)e.hasOwnProperty(n)&&e[n][t]!==void 0?e[n]=e[n][t]:typeof e[n]=="object"&&e[n]!==null&&(e[n]=Ia(e[n]));return e};var ga=function(){let e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),n=new t;return Object.setPrototypeOf(n,e.prototype),n};ga.prototype=Object.create(String.prototype,{constructor:{value:ga,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(ga,String);function rs(e,t,n){let s,r,a;if(typeof t>"u"&&typeof n>"u")s={},a=e;else{if(s=e,typeof t=="function")return r=t,a=n,ep(s,r,a);a=t}for(let o of Object.keys(a)){if(!Array.isArray(a[o])){s[o]=a[o];continue}tp(s,null,a,o)}return s}var ep=(e,t,n)=>rs(e,Object.entries(n).reduce((s,[r,a])=>(Array.isArray(a)?s[r]=a:typeof a=="function"?s[r]=[t,a()]:s[r]=[t,a],s),{})),tp=(e,t,n,s)=>{if(t!==null){let o=n[s];typeof o=="function"&&(o=[,o]);let[i=np,c=sp,d=s]=o;(typeof i=="function"&&i(t[d])||typeof i!="function"&&i)&&(e[s]=c(t[d]));return}let[r,a]=n[s];if(typeof a=="function"){let o,i=r===void 0&&(o=a())!=null,c=typeof r=="function"&&!!r(void 0)||typeof r!="function"&&!!r;i?e[s]=o:c&&(e[s]=a())}else{let o=r===void 0&&a!=null,i=typeof r=="function"&&!!r(a)||typeof r!="function"&&!!r;(o||i)&&(e[s]=a)}},np=e=>e!=null,sp=e=>e;var Sa;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(Sa||(Sa={}));var _=class{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/"}static isInstance(t){if(!t)return!1;let n=t;return"method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&typeof n.query=="object"&&typeof n.headers=="object"}clone(){let t=new _({...this,headers:{...this.headers}});return t.query&&(t.query=rp(t.query)),t}};function rp(e){return Object.keys(e).reduce((t,n)=>{let s=e[n];return{...t,[n]:Array.isArray(s)?[...s]:s}},{})}var xe=class{constructor(t){this.statusCode=t.statusCode,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let n=t;return typeof n.statusCode=="number"&&typeof n.headers=="object"}};var N=class extends se{constructor(t){super(t),Object.setPrototypeOf(this,N.prototype)}};var Kt=class extends N{constructor(t){super({name:"InternalServerError",$fault:"server",...t}),this.name="InternalServerError",this.$fault="server",Object.setPrototypeOf(this,Kt.prototype),this.Message=t.Message}};var Jt=class extends N{constructor(t){super({name:"DuplicateInstanceId",$fault:"client",...t}),this.name="DuplicateInstanceId",this.$fault="client",Object.setPrototypeOf(this,Jt.prototype)}},Yt=class extends N{constructor(t){super({name:"InvalidCommandId",$fault:"client",...t}),this.name="InvalidCommandId",this.$fault="client",Object.setPrototypeOf(this,Yt.prototype)}},Xt=class extends N{constructor(t){super({name:"InvalidInstanceId",$fault:"client",...t}),this.name="InvalidInstanceId",this.$fault="client",Object.setPrototypeOf(this,Xt.prototype),this.Message=t.Message}};var Qt=class extends N{constructor(t){super({name:"InvalidParameters",$fault:"client",...t}),this.name="InvalidParameters",this.$fault="client",Object.setPrototypeOf(this,Qt.prototype),this.Message=t.Message}};var Zt=class extends N{constructor(t){super({name:"InvalidDocument",$fault:"client",...t}),this.name="InvalidDocument",this.$fault="client",Object.setPrototypeOf(this,Zt.prototype),this.Message=t.Message}},en=class extends N{constructor(t){super({name:"InvalidDocumentVersion",$fault:"client",...t}),this.name="InvalidDocumentVersion",this.$fault="client",Object.setPrototypeOf(this,en.prototype),this.Message=t.Message}};var tn=class extends N{constructor(t){super({name:"UnsupportedPlatformType",$fault:"client",...t}),this.name="UnsupportedPlatformType",this.$fault="client",Object.setPrototypeOf(this,tn.prototype),this.Message=t.Message}};var nn=class extends N{constructor(t){super({name:"MaxDocumentSizeExceeded",$fault:"client",...t}),this.name="MaxDocumentSizeExceeded",this.$fault="client",Object.setPrototypeOf(this,nn.prototype),this.Message=t.Message}};var sn=class extends N{constructor(t){super({name:"InvalidPluginName",$fault:"client",...t}),this.name="InvalidPluginName",this.$fault="client",Object.setPrototypeOf(this,sn.prototype)}},rn=class extends N{constructor(t){super({name:"InvocationDoesNotExist",$fault:"client",...t}),this.name="InvocationDoesNotExist",this.$fault="client",Object.setPrototypeOf(this,rn.prototype)}};var an=class extends N{constructor(t){super({name:"InvalidNotificationConfig",$fault:"client",...t}),this.name="InvalidNotificationConfig",this.$fault="client",Object.setPrototypeOf(this,an.prototype),this.Message=t.Message}},on=class extends N{constructor(t){super({name:"InvalidOutputFolder",$fault:"client",...t}),this.name="InvalidOutputFolder",this.$fault="client",Object.setPrototypeOf(this,on.prototype)}},cn=class extends N{constructor(t){super({name:"InvalidRole",$fault:"client",...t}),this.name="InvalidRole",this.$fault="client",Object.setPrototypeOf(this,cn.prototype),this.Message=t.Message}};var ap=e=>({...e,...e.Parameters&&{Parameters:Qe}});var Xi=e=>({...e,...e.Parameters&&{Parameters:Qe}}),Qi=e=>({...e,...e.Command&&{Command:ap(e.Command)}});var Zi=async(e,t)=>{let n=ic("GetCommandInvocation"),s;return s=JSON.stringify(Cp(e,t)),oc(t,n,"/",void 0,s)};var ec=async(e,t)=>{let n=ic("SendCommand"),s;return s=JSON.stringify(Pp(e,t)),oc(t,n,"/",void 0,s)};var tc=async(e,t)=>{if(e.statusCode>=300)return op(e,t);let n=await xa(e.body,t),s={};s=Up(n,t);let r={$metadata:V(e),...s};return Promise.resolve(r)},op=async(e,t)=>{let n={...e,body:await cc(e.body,t)},s=dc(e,n.body);switch(s){case"InternalServerError":case"com.amazonaws.ssm#InternalServerError":throw await sc(n,t);case"InvalidCommandId":case"com.amazonaws.ssm#InvalidCommandId":throw await dp(n,t);case"InvalidInstanceId":case"com.amazonaws.ssm#InvalidInstanceId":throw await rc(n,t);case"InvalidPluginName":case"com.amazonaws.ssm#InvalidPluginName":throw await pp(n,t);case"InvocationDoesNotExist":case"com.amazonaws.ssm#InvocationDoesNotExist":throw await wp(n,t);default:let r=n.body;Se({output:e,parsedBody:r,exceptionCtor:N,errorCode:s})}};var nc=async(e,t)=>{if(e.statusCode>=300)return ip(e,t);let n=await xa(e.body,t),s={};s=ah(n,t);let r={$metadata:V(e),...s};return Promise.resolve(r)},ip=async(e,t)=>{let n={...e,body:await cc(e.body,t)},s=dc(e,n.body);switch(s){case"DuplicateInstanceId":case"com.amazonaws.ssm#DuplicateInstanceId":throw await cp(n,t);case"InternalServerError":case"com.amazonaws.ssm#InternalServerError":throw await sc(n,t);case"InvalidDocument":case"com.amazonaws.ssm#InvalidDocument":throw await lp(n,t);case"InvalidDocumentVersion":case"com.amazonaws.ssm#InvalidDocumentVersion":throw await mp(n,t);case"InvalidInstanceId":case"com.amazonaws.ssm#InvalidInstanceId":throw await rc(n,t);case"InvalidNotificationConfig":case"com.amazonaws.ssm#InvalidNotificationConfig":throw await up(n,t);case"InvalidOutputFolder":case"com.amazonaws.ssm#InvalidOutputFolder":throw await fp(n,t);case"InvalidParameters":case"com.amazonaws.ssm#InvalidParameters":throw await yp(n,t);case"InvalidRole":case"com.amazonaws.ssm#InvalidRole":throw await hp(n,t);case"MaxDocumentSizeExceeded":case"com.amazonaws.ssm#MaxDocumentSizeExceeded":throw await Ep(n,t);case"UnsupportedPlatformType":case"com.amazonaws.ssm#UnsupportedPlatformType":throw await Ip(n,t);default:let r=n.body;Se({output:e,parsedBody:r,exceptionCtor:N,errorCode:s})}};var cp=async(e,t)=>{let n=e.body,s=zp(n,t),r=new Jt({$metadata:V(e),...s});return g(r,n)};var sc=async(e,t)=>{let n=e.body,s=Bp(n,t),r=new Kt({$metadata:V(e),...s});return g(r,n)};var dp=async(e,t)=>{let n=e.body,s=Gp(n,t),r=new Yt({$metadata:V(e),...s});return g(r,n)};var lp=async(e,t)=>{let n=e.body,s=qp(n,t),r=new Zt({$metadata:V(e),...s});return g(r,n)};var mp=async(e,t)=>{let n=e.body,s=Hp(n,t),r=new en({$metadata:V(e),...s});return g(r,n)};var rc=async(e,t)=>{let n=e.body,s=jp(n,t),r=new Xt({$metadata:V(e),...s});return g(r,n)};var up=async(e,t)=>{let n=e.body,s=Kp(n,t),r=new an({$metadata:V(e),...s});return g(r,n)};var fp=async(e,t)=>{let n=e.body,s=Jp(n,t),r=new on({$metadata:V(e),...s});return g(r,n)};var yp=async(e,t)=>{let n=e.body,s=Yp(n,t),r=new Qt({$metadata:V(e),...s});return g(r,n)};var pp=async(e,t)=>{let n=e.body,s=Xp(n,t),r=new sn({$metadata:V(e),...s});return g(r,n)};var hp=async(e,t)=>{let n=e.body,s=Qp(n,t),r=new cn({$metadata:V(e),...s});return g(r,n)};var wp=async(e,t)=>{let n=e.body,s=Zp(n,t),r=new rn({$metadata:V(e),...s});return g(r,n)};var Ep=async(e,t)=>{let n=e.body,s=eh(n,t),r=new nn({$metadata:V(e),...s});return g(r,n)};var Ip=async(e,t)=>{let n=e.body,s=dh(n,t),r=new tn({$metadata:V(e),...s});return g(r,n)};var gp=(e,t)=>({...e.Name!=null&&{Name:e.Name}}),Sp=(e,t)=>({...e.Alarms!=null&&{Alarms:xp(e.Alarms,t)},...e.IgnorePollAlarmFailure!=null&&{IgnorePollAlarmFailure:e.IgnorePollAlarmFailure}}),xp=(e,t)=>e.filter(n=>n!=null).map(n=>gp(n,t));var Tp=(e,t)=>({...e.CloudWatchLogGroupName!=null&&{CloudWatchLogGroupName:e.CloudWatchLogGroupName},...e.CloudWatchOutputEnabled!=null&&{CloudWatchOutputEnabled:e.CloudWatchOutputEnabled}});var Cp=(e,t)=>({...e.CommandId!=null&&{CommandId:e.CommandId},...e.InstanceId!=null&&{InstanceId:e.InstanceId},...e.PluginName!=null&&{PluginName:e.PluginName}});var Rp=(e,t)=>e.filter(n=>n!=null).map(n=>n);var _p=(e,t)=>({...e.NotificationArn!=null&&{NotificationArn:e.NotificationArn},...e.NotificationEvents!=null&&{NotificationEvents:Ap(e.NotificationEvents,t)},...e.NotificationType!=null&&{NotificationType:e.NotificationType}}),Ap=(e,t)=>e.filter(n=>n!=null).map(n=>n);var vp=(e,t)=>Object.entries(e).reduce((n,[s,r])=>(r===null||(n[s]=bp(r,t)),n),{});var bp=(e,t)=>e.filter(n=>n!=null).map(n=>n);var Pp=(e,t)=>({...e.AlarmConfiguration!=null&&{AlarmConfiguration:Sp(e.AlarmConfiguration,t)},...e.CloudWatchOutputConfig!=null&&{CloudWatchOutputConfig:Tp(e.CloudWatchOutputConfig,t)},...e.Comment!=null&&{Comment:e.Comment},...e.DocumentHash!=null&&{DocumentHash:e.DocumentHash},...e.DocumentHashType!=null&&{DocumentHashType:e.DocumentHashType},...e.DocumentName!=null&&{DocumentName:e.DocumentName},...e.DocumentVersion!=null&&{DocumentVersion:e.DocumentVersion},...e.InstanceIds!=null&&{InstanceIds:Rp(e.InstanceIds,t)},...e.MaxConcurrency!=null&&{MaxConcurrency:e.MaxConcurrency},...e.MaxErrors!=null&&{MaxErrors:e.MaxErrors},...e.NotificationConfig!=null&&{NotificationConfig:_p(e.NotificationConfig,t)},...e.OutputS3BucketName!=null&&{OutputS3BucketName:e.OutputS3BucketName},...e.OutputS3KeyPrefix!=null&&{OutputS3KeyPrefix:e.OutputS3KeyPrefix},...e.OutputS3Region!=null&&{OutputS3Region:e.OutputS3Region},...e.Parameters!=null&&{Parameters:vp(e.Parameters,t)},...e.ServiceRoleArn!=null&&{ServiceRoleArn:e.ServiceRoleArn},...e.Targets!=null&&{Targets:Op(e.Targets,t)},...e.TimeoutSeconds!=null&&{TimeoutSeconds:e.TimeoutSeconds}});var Np=(e,t)=>({...e.Key!=null&&{Key:e.Key},...e.Values!=null&&{Values:Dp(e.Values,t)}});var Op=(e,t)=>e.filter(n=>n!=null).map(n=>Np(n,t)),Dp=(e,t)=>e.filter(n=>n!=null).map(n=>n);var Mp=(e,t)=>({Name:f(e.Name)}),kp=(e,t)=>({Alarms:e.Alarms!=null?Lp(e.Alarms,t):void 0,IgnorePollAlarmFailure:pa(e.IgnorePollAlarmFailure)}),Lp=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>s===null?null:Mp(s,t)),Fp=(e,t)=>({Name:f(e.Name),State:f(e.State)}),$p=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>s===null?null:Fp(s,t));var ac=(e,t)=>({CloudWatchLogGroupName:f(e.CloudWatchLogGroupName),CloudWatchOutputEnabled:pa(e.CloudWatchOutputEnabled)}),Vp=(e,t)=>({AlarmConfiguration:e.AlarmConfiguration!=null?kp(e.AlarmConfiguration,t):void 0,CloudWatchOutputConfig:e.CloudWatchOutputConfig!=null?ac(e.CloudWatchOutputConfig,t):void 0,CommandId:f(e.CommandId),Comment:f(e.Comment),CompletedCount:ue(e.CompletedCount),DeliveryTimedOutCount:ue(e.DeliveryTimedOutCount),DocumentName:f(e.DocumentName),DocumentVersion:f(e.DocumentVersion),ErrorCount:ue(e.ErrorCount),ExpiresAfter:e.ExpiresAfter!=null?fe(Ea(jt(e.ExpiresAfter))):void 0,InstanceIds:e.InstanceIds!=null?Wp(e.InstanceIds,t):void 0,MaxConcurrency:f(e.MaxConcurrency),MaxErrors:f(e.MaxErrors),NotificationConfig:e.NotificationConfig!=null?th(e.NotificationConfig,t):void 0,OutputS3BucketName:f(e.OutputS3BucketName),OutputS3KeyPrefix:f(e.OutputS3KeyPrefix),OutputS3Region:f(e.OutputS3Region),Parameters:e.Parameters!=null?sh(e.Parameters,t):void 0,RequestedDateTime:e.RequestedDateTime!=null?fe(Ea(jt(e.RequestedDateTime))):void 0,ServiceRole:f(e.ServiceRole),Status:f(e.Status),StatusDetails:f(e.StatusDetails),TargetCount:ue(e.TargetCount),Targets:e.Targets!=null?ih(e.Targets,t):void 0,TimeoutSeconds:ue(e.TimeoutSeconds),TriggeredAlarms:e.TriggeredAlarms!=null?$p(e.TriggeredAlarms,t):void 0});var zp=(e,t)=>({});var Up=(e,t)=>({CloudWatchOutputConfig:e.CloudWatchOutputConfig!=null?ac(e.CloudWatchOutputConfig,t):void 0,CommandId:f(e.CommandId),Comment:f(e.Comment),DocumentName:f(e.DocumentName),DocumentVersion:f(e.DocumentVersion),ExecutionElapsedTime:f(e.ExecutionElapsedTime),ExecutionEndDateTime:f(e.ExecutionEndDateTime),ExecutionStartDateTime:f(e.ExecutionStartDateTime),InstanceId:f(e.InstanceId),PluginName:f(e.PluginName),ResponseCode:ue(e.ResponseCode),StandardErrorContent:f(e.StandardErrorContent),StandardErrorUrl:f(e.StandardErrorUrl),StandardOutputContent:f(e.StandardOutputContent),StandardOutputUrl:f(e.StandardOutputUrl),Status:f(e.Status),StatusDetails:f(e.StatusDetails)});var Wp=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>s===null?null:f(s));var Bp=(e,t)=>({Message:f(e.Message)});var Gp=(e,t)=>({});var qp=(e,t)=>({Message:f(e.Message)});var Hp=(e,t)=>({Message:f(e.Message)});var jp=(e,t)=>({Message:f(e.Message)});var Kp=(e,t)=>({Message:f(e.Message)});var Jp=(e,t)=>({});var Yp=(e,t)=>({Message:f(e.Message)});var Xp=(e,t)=>({});var Qp=(e,t)=>({Message:f(e.Message)});var Zp=(e,t)=>({});var eh=(e,t)=>({Message:f(e.Message)});var th=(e,t)=>({NotificationArn:f(e.NotificationArn),NotificationEvents:e.NotificationEvents!=null?nh(e.NotificationEvents,t):void 0,NotificationType:f(e.NotificationType)}),nh=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>s===null?null:f(s));var sh=(e,t)=>Object.entries(e).reduce((n,[s,r])=>(r===null||(n[s]=rh(r,t)),n),{}),rh=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>s===null?null:f(s));var ah=(e,t)=>({Command:e.Command!=null?Vp(e.Command,t):void 0});var oh=(e,t)=>({Key:f(e.Key),Values:e.Values!=null?ch(e.Values,t):void 0});var ih=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>s===null?null:oh(s,t)),ch=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>s===null?null:f(s));var dh=(e,t)=>({Message:f(e.Message)});var V=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),lh=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),mh=(e,t)=>lh(e,t).then(n=>t.utf8Encoder(n)),oc=async(e,t,n,s,r)=>{let{hostname:a,protocol:o="https",port:i,path:c}=await e.endpoint(),d={protocol:o,hostname:a,port:i,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+n:c+n,headers:t};return s!==void 0&&(d.hostname=s),r!==void 0&&(d.body=r),new _(d)};function ic(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`AmazonSSM.${e}`}}var xa=(e,t)=>mh(e,t).then(n=>n.length?JSON.parse(n):{}),cc=async(e,t)=>{let n=await xa(e,t);return n.message=n.message??n.Message,n},dc=(e,t)=>{let n=(a,o)=>Object.keys(a).find(i=>i.toLowerCase()===o.toLowerCase()),s=a=>{let o=a;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o},r=n(e.headers,"x-amzn-errortype");if(r!==void 0)return s(e.headers[r]);if(t.code!==void 0)return s(t.code);if(t.__type!==void 0)return s(t.__type)};var dn=class extends K{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,n,s){this.middlewareStack.use(te(n,this.serialize,this.deserialize)),this.middlewareStack.use(ne(n,dn.getEndpointParameterInstructions()));let r=t.concat(this.middlewareStack),{logger:a}=n,c={logger:a,clientName:"SSMClient",commandName:"GetCommandInvocationCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=n;return r.resolve(l=>d.handle(l.request,s||{}),c)}serialize(t,n){return Zi(t,n)}deserialize(t,n){return tc(t,n)}};var ln=class extends K{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,n,s){this.middlewareStack.use(te(n,this.serialize,this.deserialize)),this.middlewareStack.use(ne(n,ln.getEndpointParameterInstructions()));let r=t.concat(this.middlewareStack),{logger:a}=n,c={logger:a,clientName:"SSMClient",commandName:"SendCommandCommand",inputFilterSensitiveLog:Xi,outputFilterSensitiveLog:Qi},{requestHandler:d}=n;return r.resolve(l=>d.handle(l.request,s||{}),c)}serialize(t,n){return ec(t,n)}deserialize(t,n){return nc(t,n)}};var tt;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(tt||(tt={}));var mn=(e,t,n)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${n} "${t}". Expected "true" or "false", got ${e[t]}.`)}};var uh="AWS_USE_DUALSTACK_ENDPOINT",fh="use_dualstack_endpoint";var nt={environmentVariableSelector:e=>mn(e,uh,tt.ENV),configFileSelector:e=>mn(e,fh,tt.CONFIG),default:!1};var yh="AWS_USE_FIPS_ENDPOINT",ph="use_fips_endpoint";var st={environmentVariableSelector:e=>mn(e,yh,tt.ENV),configFileSelector:e=>mn(e,ph,tt.CONFIG),default:!1};var hh="AWS_REGION",wh="region",Te={environmentVariableSelector:e=>e[hh],configFileSelector:e=>e[wh],default:()=>{throw new Error("Region is missing")}},rt={preferredFile:"credentials"};var Bs=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips"));var Ta=e=>Bs(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e;var at=e=>{let{region:t,useFipsEndpoint:n}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return Ta(t);let s=await t();return Ta(s)},useFipsEndpoint:async()=>{let s=typeof t=="string"?t:await t();return Bs(s)?!0:typeof n!="function"?Promise.resolve(!!n):n()}}};var lc="content-length";function Eh(e){return t=>async n=>{let s=n.request;if(_.isInstance(s)){let{body:r,headers:a}=s;if(r&&Object.keys(a).map(o=>o.toLowerCase()).indexOf(lc)===-1)try{let o=e(r);s.headers={...s.headers,[lc]:String(o)}}catch{}}return t({...n,request:s})}}var Ih={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},ot=e=>({applyToStack:t=>{t.add(Eh(e.bodyLengthChecker),Ih)}});var gh=e=>t=>async n=>{if(!_.isInstance(n.request))return t(n);let{request:s}=n,{handlerProtocol:r=""}=e.requestHandler.metadata||{};if(r.indexOf("h2")>=0&&!s.headers[":authority"])delete s.headers.host,s.headers[":authority"]="";else if(!s.headers.host){let a=s.hostname;s.port!=null&&(a+=`:${s.port}`),s.headers.host=a}return t(n)},Sh={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},it=e=>({applyToStack:t=>{t.add(gh(e),Sh)}});var xh=()=>(e,t)=>async n=>{var s,r;try{let a=await e(n),{clientName:o,commandName:i,logger:c,dynamoDbDocumentClientOptions:d={}}=t,{overrideInputFilterSensitiveLog:l,overrideOutputFilterSensitiveLog:m}=d,u=l??t.inputFilterSensitiveLog,y=m??t.outputFilterSensitiveLog,{$metadata:p,...h}=a.output;return(s=c==null?void 0:c.info)==null||s.call(c,{clientName:o,commandName:i,input:u(n.input),output:y(h),metadata:p}),a}catch(a){let{clientName:o,commandName:i,logger:c,dynamoDbDocumentClientOptions:d={}}=t,{overrideInputFilterSensitiveLog:l}=d,m=l??t.inputFilterSensitiveLog;throw(r=c==null?void 0:c.error)==null||r.call(c,{clientName:o,commandName:i,input:m(n.input),error:a,metadata:a.$metadata}),a}},Th={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},ct=e=>({applyToStack:t=>{t.add(xh(),Th)}});var mc="X-Amzn-Trace-Id",Ch="AWS_LAMBDA_FUNCTION_NAME",Rh="_X_AMZN_TRACE_ID",_h=e=>t=>async n=>{let{request:s}=n;if(!_.isInstance(s)||e.runtime!=="node"||s.headers.hasOwnProperty(mc))return t(n);let r=process.env[Ch],a=process.env[Rh],o=i=>typeof i=="string"&&i.length>0;return o(r)&&o(a)&&(s.headers[mc]=a),t({...n,request:s})},Ah={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},dt=e=>({applyToStack:t=>{t.add(_h(e),Ah)}});var Ce;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(Ce||(Ce={}));var Ot=3,Re="STANDARD";var uc=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],fc=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],yc=[500,502,503,504],pc=["ECONNRESET","EPIPE","ETIMEDOUT"];var un=e=>{var t,n;return((t=e.$metadata)==null?void 0:t.httpStatusCode)===429||uc.includes(e.name)||((n=e.$retryable)==null?void 0:n.throttling)==!0},Gs=e=>{var t;return fc.includes(e.name)||pc.includes((e==null?void 0:e.code)||"")||yc.includes(((t=e.$metadata)==null?void 0:t.httpStatusCode)||0)},hc=e=>{var t;if(((t=e.$metadata)==null?void 0:t.httpStatusCode)!==void 0){let n=e.$metadata.httpStatusCode;return 500<=n&&n<=599&&!Gs(e)}return!1};var as=class{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(t==null?void 0:t.beta)??.7,this.minCapacity=(t==null?void 0:t.minCapacity)??1,this.minFillRate=(t==null?void 0:t.minFillRate)??.5,this.scaleConstant=(t==null?void 0:t.scaleConstant)??.4,this.smooth=(t==null?void 0:t.smooth)??.8;let n=this.getCurrentTimeInSeconds();this.lastThrottleTime=n,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let n=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(s=>setTimeout(s,n))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let n=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+n),this.lastTimestamp=t}updateClientSendingRate(t){let n;if(this.updateMeasuredRate(),un(t)){let r=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=r,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),n=this.cubicThrottle(r),this.enableTokenBucket()}else this.calculateTimeWindow(),n=this.cubicSuccess(this.getCurrentTimeInSeconds());let s=Math.min(n,2*this.measuredTxRate);this.updateTokenBucketRate(s)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),n=Math.floor(t*2)/2;if(this.requestCount++,n>this.lastTxRateBucket){let s=this.requestCount/(n-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(s*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=n}}getPrecise(t){return parseFloat(t.toFixed(8))}};var qs="amz-sdk-invocation-id",Hs="amz-sdk-request";var wc=()=>{let e=100;return{computeNextBackoffDelay:s=>Math.floor(Math.min(2e4,Math.random()*2**s*e)),setDelayBase:s=>{e=s}}};var xc=(e,t,n,s)=>{let r=e,a=(s==null?void 0:s.retryCost)??5,o=(s==null?void 0:s.timeoutRetryCost)??10,i=(s==null?void 0:s.retryBackoffStrategy)??wc(),c=e,d=Math.min(2e4,t),l,m=n??0,u=le=>le==="TRANSIENT"?o:a,y=()=>m,p=()=>d,h=()=>l,E=le=>u(le)<=c;return{getRetryCount:y,getRetryDelay:p,getLastRetryCost:h,hasRetryTokens:E,getRetryTokenCount:le=>{let Ur=le.errorType;if(!E(Ur))throw new Error("No retry token available");let Wr=u(Ur),Qu=Ur==="THROTTLING"?500:100;i.setDelayBase(Qu);let Po=i.computeNextBackoffDelay(m);if(le.retryAfterHint){let Zu=le.retryAfterHint.getTime()-Date.now();d=Math.max(Zu||0,Po)}else d=Po;return m++,l=Wr,c-=Wr,Wr},releaseRetryTokens:le=>{c+=le??1,c=Math.min(c,r)}}};var yn=class{constructor(t){this.maxAttemptsProvider=t,this.mode=Ce.STANDARD,this.retryToken=xc(500,100),this.maxAttemptsProvider=t}async acquireInitialRetryToken(t){return this.retryToken}async refreshRetryTokenForRetry(t,n){let s=await this.getMaxAttempts();if(this.shouldRetry(t,n,s))return t.getRetryTokenCount(n),t;throw new Error("No retry token available")}recordSuccess(t){this.retryToken.releaseRetryTokens(t.getLastRetryCost())}async getMaxAttempts(){let t;try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Ot}`),Ot}}shouldRetry(t,n,s){return t.getRetryCount()<s&&t.hasRetryTokens(n.errorType)&&this.isRetryableError(n.errorType)}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}};var Ks=class{constructor(t,n){this.maxAttemptsProvider=t,this.mode=Ce.ADAPTIVE;let{rateLimiter:s}=n??{};this.rateLimiter=s??new as,this.standardRetryStrategy=new yn(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,n){return this.rateLimiter.updateClientSendingRate(n),this.standardRetryStrategy.refreshRetryTokenForRetry(t,n)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}};var Ca=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`);var Cc="AWS_MAX_ATTEMPTS",Rc="max_attempts",lt={environmentVariableSelector:e=>{let t=e[Cc];if(!t)return;let n=parseInt(t);if(Number.isNaN(n))throw new Error(`Environment variable ${Cc} mast be a number, got "${t}"`);return n},configFileSelector:e=>{let t=e[Rc];if(!t)return;let n=parseInt(t);if(Number.isNaN(n))throw new Error(`Shared config file entry ${Rc} mast be a number, got "${t}"`);return n},default:Ot},mt=e=>{let{retryStrategy:t}=e,n=L(e.maxAttempts??Ot);return{...e,maxAttempts:n,retryStrategy:async()=>t||(await L(e.retryMode)()===Ce.ADAPTIVE?new Ks(n):new yn(n))}},vh="AWS_RETRY_MODE",bh="retry_mode",ut={environmentVariableSelector:e=>e[vh],configFileSelector:e=>e[bh],default:Re};Xr();var Ph=e=>(t,n)=>async s=>{let r=await e.retryStrategy(),a=await e.maxAttempts();if(Nh(r)){r=r;let o=await r.acquireInitialRetryToken(n.partition_id),i=new Error,c=0,d=0,{request:l}=s;for(_.isInstance(l)&&(l.headers[qs]=Ds());;)try{_.isInstance(l)&&(l.headers[Hs]=`attempt=${c+1}; max=${a}`);let{response:m,output:u}=await t(s);return r.recordSuccess(o),u.$metadata.attempts=c+1,u.$metadata.totalRetryDelay=d,{response:m,output:u}}catch(m){let u=Oh(m);i=Ca(m);try{o=await r.refreshRetryTokenForRetry(o,u)}catch{throw i.$metadata||(i.$metadata={}),i.$metadata.attempts=c+1,i.$metadata.totalRetryDelay=d,i}c=o.getRetryCount();let y=o.getRetryDelay();d+=y,await new Promise(p=>setTimeout(p,y))}}else return r=r,r!=null&&r.mode&&(n.userAgent=[...n.userAgent||[],["cfg/retry-mode",r.mode]]),r.retry(t,s)},Nh=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",Oh=e=>{let t={errorType:Dh(e)},n=kh(e.$response);return n&&(t.retryAfterHint=n),t},Dh=e=>un(e)?"THROTTLING":Gs(e)?"TRANSIENT":hc(e)?"SERVER_ERROR":"CLIENT_ERROR",Mh={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},ft=e=>({applyToStack:t=>{t.add(Ph(e),Mh)}}),kh=e=>{if(!xe.isInstance(e))return;let t=Object.keys(e.headers).find(a=>a.toLowerCase()==="retry-after");if(!t)return;let n=e.headers[t],s=Number(n);return Number.isNaN(s)?new Date(n):new Date(s*1e3)};var J=class extends Error{constructor(t,n=!0){super(t),this.tryNextLink=n,this.name="ProviderError",Object.setPrototypeOf(this,J.prototype)}static from(t,n=!0){return Object.assign(new this(t.message,n),t)}};var I=class extends J{constructor(t,n=!0){super(t,n),this.tryNextLink=n,this.name="CredentialsProviderError",Object.setPrototypeOf(this,I.prototype)}};var Y=class extends J{constructor(t,n=!0){super(t,n),this.tryNextLink=n,this.name="TokenProviderError",Object.setPrototypeOf(this,Y.prototype)}};function Js(...e){return()=>{let t=Promise.reject(new J("No providers in chain"));for(let n of e)t=t.catch(s=>{if(s!=null&&s.tryNextLink)return n();throw s});return t}}var _c=e=>()=>Promise.resolve(e);var yt=(e,t,n)=>{let s,r,a,o=!1,i=async()=>{r||(r=e());try{s=await r,a=!0,o=!1}finally{r=void 0}return s};return t===void 0?async c=>((!a||c!=null&&c.forceRefresh)&&(s=await i()),s):async c=>((!a||c!=null&&c.forceRefresh)&&(s=await i()),o?s:n&&!n(s)?(o=!0,s):(t(s)&&await i(),s))};var Ac={},Lh={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),Ac[e]=t,Lh[t]=e}function Le(e){let t="";for(let n=0;n<e.byteLength;n++)t+=Ac[e[n]];return t}var Ys=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";var Xs=require("buffer"),Dt=(e,t=0,n=e.byteLength-t)=>{if(!Ys(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return Xs.Buffer.from(e,t,n)},pn=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?Xs.Buffer.from(e,t):Xs.Buffer.from(e)};var _e=e=>{let t=pn(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)};var Ae=e=>typeof e=="string"?_e(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e);var pt=e=>Dt(e.buffer,e.byteOffset,e.byteLength).toString("utf8");var vc="X-Amz-Algorithm",bc="X-Amz-Credential",Ra="X-Amz-Date",Pc="X-Amz-SignedHeaders",Nc="X-Amz-Expires",_a="X-Amz-Signature",Aa="X-Amz-Security-Token";var va="authorization",ba=Ra.toLowerCase(),Fh="date",Oc=[va,ba,Fh],Dc=_a.toLowerCase(),os="x-amz-content-sha256",Mc=Aa.toLowerCase();var kc={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Lc=/^proxy-/,Fc=/^sec-/;var Qs="AWS4-HMAC-SHA256";var $c="AWS4-HMAC-SHA256-PAYLOAD",Vc="UNSIGNED-PAYLOAD",zc=50,Pa="aws4_request",Uc=60*60*24*7;var Zs={},Na=[],er=(e,t,n)=>`${e}/${t}/${n}/${Pa}`,Bc=async(e,t,n,s,r)=>{let a=await Wc(e,t.secretAccessKey,t.accessKeyId),o=`${n}:${s}:${r}:${Le(a)}:${t.sessionToken}`;if(o in Zs)return Zs[o];for(Na.push(o);Na.length>zc;)delete Zs[Na.shift()];let i=`AWS4${t.secretAccessKey}`;for(let c of[n,s,r,Pa])i=await Wc(e,i,c);return Zs[o]=i};var Wc=(e,t,n)=>{let s=new e(t);return s.update(Ae(n)),s.digest()};var tr=({headers:e},t,n)=>{let s={};for(let r of Object.keys(e).sort()){if(e[r]==null)continue;let a=r.toLowerCase();(a in kc||t!=null&&t.has(a)||Lc.test(a)||Fc.test(a))&&(!n||n&&!n.has(a))||(s[a]=e[r].trim().replace(/\s+/g," "))}return s};var ve=e=>encodeURIComponent(e).replace(/[!'()*]/g,$h),$h=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;var Oa=({query:e={}})=>{let t=[],n={};for(let s of Object.keys(e).sort()){if(s.toLowerCase()===Dc)continue;t.push(s);let r=e[s];typeof r=="string"?n[s]=`${ve(s)}=${ve(r)}`:Array.isArray(r)&&(n[s]=r.slice(0).sort().reduce((a,o)=>a.concat([`${ve(s)}=${ve(o)}`]),[]).join("&"))}return t.map(s=>n[s]).filter(s=>s).join("&")};var is=async({headers:e,body:t},n)=>{for(let s of Object.keys(e))if(s.toLowerCase()===os)return e[s];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||Ys(t)){let s=new n;return s.update(Ae(t)),Le(await s.digest())}return Vc};var Gc=(e,t)=>{e=e.toLowerCase();for(let n of Object.keys(t))if(e===n.toLowerCase())return!0;return!1};var nr=({headers:e,query:t,...n})=>({...n,headers:{...e},query:t?Vh(t):void 0}),Vh=e=>Object.keys(e).reduce((t,n)=>{let s=e[n];return{...t,[n]:Array.isArray(s)?[...s]:s}},{});var Da=(e,t={})=>{var r;let{headers:n,query:s={}}=typeof e.clone=="function"?e.clone():nr(e);for(let a of Object.keys(n)){let o=a.toLowerCase();o.slice(0,6)==="x-amz-"&&!((r=t.unhoistableHeaders)!=null&&r.has(o))&&(s[a]=n[a],delete n[a])}return{...e,headers:n,query:s}};var sr=e=>{e=typeof e.clone=="function"?e.clone():nr(e);for(let t of Object.keys(e.headers))Oc.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e};var qc=e=>zh(e).toISOString().replace(/\.\d{3}Z$/,"Z"),zh=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;var cs=class{constructor({applyChecksum:t,credentials:n,region:s,service:r,sha256:a,uriEscapePath:o=!0}){this.service=r,this.sha256=a,this.uriEscapePath=o,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=L(s),this.credentialProvider=L(n)}async presign(t,n={}){let{signingDate:s=new Date,expiresIn:r=3600,unsignableHeaders:a,unhoistableHeaders:o,signableHeaders:i,signingRegion:c,signingService:d}=n,l=await this.credentialProvider();this.validateResolvedCredentials(l);let m=c??await this.regionProvider(),{longDate:u,shortDate:y}=rr(s);if(r>Uc)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let p=er(y,m,d??this.service),h=Da(sr(t),{unhoistableHeaders:o});l.sessionToken&&(h.query[Aa]=l.sessionToken),h.query[vc]=Qs,h.query[bc]=`${l.accessKeyId}/${p}`,h.query[Ra]=u,h.query[Nc]=r.toString(10);let E=tr(h,a,i);return h.query[Pc]=Hc(E),h.query[_a]=await this.getSignature(u,p,this.getSigningKey(l,m,y,d),this.createCanonicalRequest(h,E,await is(t,this.sha256))),h}async sign(t,n){return typeof t=="string"?this.signString(t,n):t.headers&&t.payload?this.signEvent(t,n):this.signRequest(t,n)}async signEvent({headers:t,payload:n},{signingDate:s=new Date,priorSignature:r,signingRegion:a,signingService:o}){let i=a??await this.regionProvider(),{shortDate:c,longDate:d}=rr(s),l=er(c,i,o??this.service),m=await is({headers:{},body:n},this.sha256),u=new this.sha256;u.update(t);let y=Le(await u.digest()),p=[$c,d,l,r,y,m].join(`
`);return this.signString(p,{signingDate:s,signingRegion:i,signingService:o})}async signString(t,{signingDate:n=new Date,signingRegion:s,signingService:r}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let o=s??await this.regionProvider(),{shortDate:i}=rr(n),c=new this.sha256(await this.getSigningKey(a,o,i,r));return c.update(Ae(t)),Le(await c.digest())}async signRequest(t,{signingDate:n=new Date,signableHeaders:s,unsignableHeaders:r,signingRegion:a,signingService:o}={}){let i=await this.credentialProvider();this.validateResolvedCredentials(i);let c=a??await this.regionProvider(),d=sr(t),{longDate:l,shortDate:m}=rr(n),u=er(m,c,o??this.service);d.headers[ba]=l,i.sessionToken&&(d.headers[Mc]=i.sessionToken);let y=await is(d,this.sha256);!Gc(os,d.headers)&&this.applyChecksum&&(d.headers[os]=y);let p=tr(d,r,s),h=await this.getSignature(l,u,this.getSigningKey(i,c,m,o),this.createCanonicalRequest(d,p,y));return d.headers[va]=`${Qs} Credential=${i.accessKeyId}/${u}, SignedHeaders=${Hc(p)}, Signature=${h}`,d}createCanonicalRequest(t,n,s){let r=Object.keys(n).sort();return`${t.method}
${this.getCanonicalPath(t)}
${Oa(t)}
${r.map(a=>`${a}:${n[a]}`).join(`
`)}

${r.join(";")}
${s}`}async createStringToSign(t,n,s){let r=new this.sha256;r.update(Ae(s));let a=await r.digest();return`${Qs}
${t}
${n}
${Le(a)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let n=[];for(let a of t.split("/"))(a==null?void 0:a.length)!==0&&a!=="."&&(a===".."?n.pop():n.push(a));let s=`${t!=null&&t.startsWith("/")?"/":""}${n.join("/")}${n.length>0&&(t!=null&&t.endsWith("/"))?"/":""}`;return encodeURIComponent(s).replace(/%2F/g,"/")}return t}async getSignature(t,n,s,r){let a=await this.createStringToSign(t,n,r),o=new this.sha256(await s);return o.update(Ae(a)),Le(await o.digest())}getSigningKey(t,n,s,r){return Bc(this.sha256,t,s,n,r||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}},rr=e=>{let t=qc(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},Hc=e=>Object.keys(e).sort().join(";");var Uh=3e5,ar=e=>{let t=e.credentials?Wh(e.credentials):e.credentialDefaultProvider(e),{signingEscapePath:n=!0,systemClockOffset:s=e.systemClockOffset||0,sha256:r}=e,a;return e.signer?a=L(e.signer):e.regionInfoProvider?a=()=>L(e.region)().then(async o=>[await e.regionInfoProvider(o,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},o]).then(([o,i])=>{let{signingRegion:c,signingService:d}=o;e.signingRegion=e.signingRegion||c||i,e.signingName=e.signingName||d||e.serviceId;let l={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:r,uriEscapePath:n},m=e.signerConstructor||cs;return new m(l)}):a=async o=>{o=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await L(e.region)(),properties:{}},o);let i=o.signingRegion,c=o.signingName;e.signingRegion=e.signingRegion||i,e.signingName=e.signingName||c||e.serviceId;let d={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:r,uriEscapePath:n},l=e.signerConstructor||cs;return new l(d)},{...e,systemClockOffset:s,signingEscapePath:n,credentials:t,signer:a}};var Wh=e=>typeof e=="function"?yt(e,t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<Uh,t=>t.expiration!==void 0):L(e);var or=e=>new Date(Date.now()+e);var jc=(e,t)=>Math.abs(or(t).getTime()-e)>=3e5;var Ma=(e,t)=>{let n=Date.parse(e);return jc(n,t)?n-Date.now():t};var Bh=e=>(t,n)=>async function(s){var d,l,m,u;if(!_.isInstance(s.request))return t(s);let r=(m=(l=(d=n.endpointV2)==null?void 0:d.properties)==null?void 0:l.authSchemes)==null?void 0:m[0],a=(r==null?void 0:r.name)==="sigv4a"?(u=r==null?void 0:r.signingRegionSet)==null?void 0:u.join(","):void 0,o=await e.signer(r),i=await t({...s,request:await o.sign(s.request,{signingDate:or(e.systemClockOffset),signingRegion:a||n.signing_region,signingService:n.signing_service})}).catch(y=>{let p=y.ServerTime??Kc(y.$response);throw p&&(e.systemClockOffset=Ma(p,e.systemClockOffset)),y}),c=Kc(i.response);return c&&(e.systemClockOffset=Ma(c,e.systemClockOffset)),i},Kc=e=>{var t,n;return xe.isInstance(e)?((t=e.headers)==null?void 0:t.date)??((n=e.headers)==null?void 0:n.Date):void 0},Gh={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},ir=e=>({applyToStack:t=>{t.addRelativeTo(Bh(e),Gh)}});function ht(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}var ka={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}}],version:"1.1"};var Jc=ka,Yc="",Hh=e=>{let{partitions:t}=Jc;for(let s of t){let{regions:r,outputs:a}=s;for(let[o,i]of Object.entries(r))if(o===e)return{...a,...i}}for(let s of t){let{regionRegex:r,outputs:a}=s;if(new RegExp(r).test(e))return{...a}}let n=t.find(s=>s.id==="aws");if(!n)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...n.outputs}},Xc=(e,t="")=>{Jc=e,Yc=t},jh=()=>{Xc(ka,"")},La=()=>Yc;var Fe="endpoints";function re(e){return typeof e!="object"||e==null?e:"ref"in e?`$${re(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(re).join(", ")})`:JSON.stringify(e,null,2)}var A=class extends Error{constructor(t){super(t),this.name="EndpointError"}};var za={};Br(za,{aws:()=>Fa,booleanEquals:()=>Xh,getAttr:()=>$a,isSet:()=>Qh,isValidHostLabel:()=>dr,not:()=>Zh,parseURL:()=>ew,stringEquals:()=>tw,substring:()=>nw,uriEncode:()=>sw});var Fa={};Br(Fa,{getUserAgentPrefix:()=>La,isVirtualHostableS3Bucket:()=>Qc,parseArn:()=>Yh,partition:()=>Hh,setPartitionInfo:()=>Xc,useDefaultPartitionInfo:()=>jh});var Kh=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),cr=e=>Kh.test(e)||e.startsWith("[")&&e.endsWith("]");var Jh=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),dr=(e,t=!1)=>{if(!t)return Jh.test(e);let n=e.split(".");for(let s of n)if(!dr(s))return!1;return!0};var Qc=(e,t=!1)=>{if(t){for(let n of e.split("."))if(!Qc(n))return!1;return!0}return!(!dr(e)||e.length<3||e.length>63||e!==e.toLowerCase()||cr(e))};var Yh=e=>{let t=e.split(":");if(t.length<6)return null;let[n,s,r,a,o,...i]=t;return n!=="arn"||s===""||r===""||i[0]===""?null:{partition:s,service:r,region:a,accountId:o,resourceId:i[0].includes("/")?i[0].split("/"):i}};var Xh=(e,t)=>e===t;var Zc=e=>{let t=e.split("."),n=[];for(let s of t){let r=s.indexOf("[");if(r!==-1){if(s.indexOf("]")!==s.length-1)throw new A(`Path: '${e}' does not end with ']'`);let a=s.slice(r+1,-1);if(Number.isNaN(parseInt(a)))throw new A(`Invalid array index: '${a}' in path: '${e}'`);r!==0&&n.push(s.slice(0,r)),n.push(a)}else n.push(s)}return n};var $a=(e,t)=>Zc(t).reduce((n,s)=>{if(typeof n!="object")throw new A(`Index '${s}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(n)?n[parseInt(s)]:n[s]},e);var Qh=e=>e!=null;var Zh=e=>!e;var ed;(function(e){e.HEADER="header",e.QUERY="query"})(ed||(ed={}));var td;(function(e){e.AAAA="AAAA",e.A="A"})(td||(td={}));var hn;(function(e){e.HTTP="http",e.HTTPS="https"})(hn||(hn={}));var nd;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(nd||(nd={}));var Va={[hn.HTTP]:80,[hn.HTTPS]:443},ew=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:u,port:y,protocol:p="",path:h="",query:E={}}=e,we=new URL(`${p}//${u}${y?`:${y}`:""}${h}`);return we.search=Object.entries(E).map(([bo,le])=>`${bo}=${le}`).join("&"),we}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let n=t.href,{host:s,hostname:r,pathname:a,protocol:o,search:i}=t;if(i)return null;let c=o.slice(0,-1);if(!Object.values(hn).includes(c))return null;let d=cr(r),l=n.includes(`${s}:${Va[c]}`)||typeof e=="string"&&e.includes(`${s}:${Va[c]}`),m=`${s}${l?`:${Va[c]}`:""}`;return{scheme:c,authority:m,path:a,normalizedPath:a.endsWith("/")?a:`${a}/`,isIp:d}};var tw=(e,t)=>e===t;var nw=(e,t,n,s)=>t>=n||e.length<n?null:s?e.substring(e.length-n,e.length-t):e.substring(t,n);var sw=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`);var lr=(e,t)=>{let n=[],s={...t.endpointParams,...t.referenceRecord},r=0;for(;r<e.length;){let a=e.indexOf("{",r);if(a===-1){n.push(e.slice(r));break}n.push(e.slice(r,a));let o=e.indexOf("}",a);if(o===-1){n.push(e.slice(a));break}e[a+1]==="{"&&e[o+1]==="}"&&(n.push(e.slice(a+1,o)),r=o+2);let i=e.substring(a+1,o);if(i.includes("#")){let[c,d]=i.split("#");n.push($a(s[c],d))}else n.push(s[i]);r=o+1}return n.join("")};var sd=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e];var wt=(e,t,n)=>{if(typeof e=="string")return lr(e,n);if(e.fn)return mr(e,n);if(e.ref)return sd(e,n);throw new A(`'${t}': ${String(e)} is not a string, function or reference.`)};var mr=({fn:e,argv:t},n)=>{let s=t.map(r=>["boolean","number"].includes(typeof r)?r:wt(r,"arg",n));return e.split(".").reduce((r,a)=>r[a],za)(...s)};var rd=({assign:e,...t},n)=>{var r,a;if(e&&e in n.referenceRecord)throw new A(`'${e}' is already defined in Reference Record.`);let s=mr(t,n);return(a=(r=n.logger)==null?void 0:r.debug)==null||a.call(r,Fe,`evaluateCondition: ${re(t)} = ${re(s)}`),{result:s===""?!0:!!s,...e!=null&&{toAssign:{name:e,value:s}}}};var wn=(e=[],t)=>{var s,r;let n={};for(let a of e){let{result:o,toAssign:i}=rd(a,{...t,referenceRecord:{...t.referenceRecord,...n}});if(!o)return{result:o};i&&(n[i.name]=i.value,(r=(s=t.logger)==null?void 0:s.debug)==null||r.call(s,Fe,`assign: ${i.name} := ${re(i.value)}`))}return{result:!0,referenceRecord:n}};var ad=(e,t)=>Object.entries(e).reduce((n,[s,r])=>({...n,[s]:r.map(a=>{let o=wt(a,"Header value entry",t);if(typeof o!="string")throw new A(`Header '${s}' value '${o}' is not a string`);return o})}),{});var Ua=(e,t)=>{if(Array.isArray(e))return e.map(n=>Ua(n,t));switch(typeof e){case"string":return lr(e,t);case"object":if(e===null)throw new A(`Unexpected endpoint property: ${e}`);return ur(e,t);case"boolean":return e;default:throw new A(`Unexpected endpoint property type: ${typeof e}`)}};var ur=(e,t)=>Object.entries(e).reduce((n,[s,r])=>({...n,[s]:Ua(r,t)}),{});var od=(e,t)=>{let n=wt(e,"Endpoint URL",t);if(typeof n=="string")try{return new URL(n)}catch(s){throw console.error(`Failed to construct URL with ${n}`,s),s}throw new A(`Endpoint URL must be a string, got ${typeof n}`)};var id=(e,t)=>{var l,m;let{conditions:n,endpoint:s}=e,{result:r,referenceRecord:a}=wn(n,t);if(!r)return;let o={...t,referenceRecord:{...t.referenceRecord,...a}},{url:i,properties:c,headers:d}=s;return(m=(l=t.logger)==null?void 0:l.debug)==null||m.call(l,Fe,`Resolving endpoint from template: ${re(s)}`),{...d!=null&&{headers:ad(d,o)},...c!=null&&{properties:ur(c,o)},url:od(i,o)}};var cd=(e,t)=>{let{conditions:n,error:s}=e,{result:r,referenceRecord:a}=wn(n,t);if(r)throw new A(wt(s,"Error",{...t,referenceRecord:{...t.referenceRecord,...a}}))};var dd=(e,t)=>{let{conditions:n,rules:s}=e,{result:r,referenceRecord:a}=wn(n,t);if(r)return fr(s,{...t,referenceRecord:{...t.referenceRecord,...a}})};var fr=(e,t)=>{for(let n of e)if(n.type==="endpoint"){let s=id(n,t);if(s)return s}else if(n.type==="error")cd(n,t);else if(n.type==="tree"){let s=dd(n,t);if(s)return s}else throw new A(`Unknown endpoint rule: ${n}`);throw new A("Rules evaluation failed")};var Et=(e,t)=>{var d,l,m,u,y;let{endpointParams:n,logger:s}=t,{parameters:r,rules:a}=e;(l=(d=t.logger)==null?void 0:d.debug)==null||l.call(d,Fe,`Initial EndpointParams: ${re(n)}`);let o=Object.entries(r).filter(([,p])=>p.default!=null).map(([p,h])=>[p,h.default]);if(o.length>0)for(let[p,h]of o)n[p]=n[p]??h;let i=Object.entries(r).filter(([,p])=>p.required).map(([p])=>p);for(let p of i)if(n[p]==null)throw new A(`Missing required parameter: '${p}'`);let c=fr(a,{endpointParams:n,logger:s,referenceRecord:{}});if((m=t.endpointParams)!=null&&m.Endpoint)try{let p=new URL(t.endpointParams.Endpoint),{protocol:h,port:E}=p;c.url.protocol=h,c.url.port=E}catch{}return(y=(u=t.logger)==null?void 0:u.debug)==null||y.call(u,Fe,`Resolved endpoint: ${re(c)}`),c};var Wa="user-agent",yr="x-amz-user-agent",Ba=" ",ld=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g;var rw=e=>(t,n)=>async s=>{var u,y;let{request:r}=s;if(!_.isInstance(r))return t(s);let{headers:a}=r,o=((u=n==null?void 0:n.userAgent)==null?void 0:u.map(Ga))||[],i=(await e.defaultUserAgentProvider()).map(Ga),c=((y=e==null?void 0:e.customUserAgent)==null?void 0:y.map(Ga))||[],d=La(),l=(d?[d]:[]).concat([...i,...o,...c]).join(Ba),m=[...i.filter(p=>p.startsWith("aws-sdk-")),...c].join(Ba);return e.runtime!=="browser"?(m&&(a[yr]=a[yr]?`${a[Wa]} ${m}`:m),a[Wa]=l):a[yr]=l,t({...s,request:r})},Ga=([e,t])=>{let n=e.indexOf("/"),s=e.substring(0,n),r=e.substring(n+1);return s==="api"&&(r=r.toLowerCase()),[s,r,t].filter(a=>a&&a.length>0).map(a=>a==null?void 0:a.replace(ld,"_")).join("/")},aw={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},It=e=>({applyToStack:t=>{t.add(rw(e),aw)}});var md=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"ssm"});var ud={name:"@aws-sdk/client-ssm",description:"AWS SDK for JavaScript Ssm Client for Node.js, Browser and React Native",version:"3.312.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo ssm"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.312.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/credential-provider-node":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-signing":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.310.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.310.0","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.310.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.310.0","@aws-sdk/util-defaults-mode-node":"3.310.0","@aws-sdk/util-endpoints":"3.310.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0","@aws-sdk/util-waiter":"3.310.0",tslib:"^2.5.0",uuid:"^8.3.2"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31","@types/uuid":"^8.3.0",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-ssm",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-ssm"}};var Gd=Xn(Bd());var B=class extends se{constructor(t){super(t),Object.setPrototypeOf(this,B.prototype)}};var En=class extends B{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,En.prototype)}},In=class extends B{constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,In.prototype)}},gn=class extends B{constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,gn.prototype)}},Sn=class extends B{constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,Sn.prototype)}},xn=class extends B{constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,xn.prototype)}},Tn=class extends B{constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,Tn.prototype)}},Cn=class extends B{constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,Cn.prototype)}};var qd=async(e,t)=>{let n=sl,s;return s=al({...fE(e,t),Action:"AssumeRole",Version:"2011-06-15"}),nl(t,n,"/",void 0,s)};var Hd=async(e,t)=>{let n=sl,s;return s=al({...yE(e,t),Action:"AssumeRoleWithWebIdentity",Version:"2011-06-15"}),nl(t,n,"/",void 0,s)};var jd=async(e,t)=>{if(e.statusCode>=300)return cE(e,t);let n=await to(e.body,t),s={};s=IE(n.AssumeRoleResult,t);let r={$metadata:Ve(e),...s};return Promise.resolve(r)},cE=async(e,t)=>{let n={...e,body:await rl(e.body,t)},s=ol(e,n.body);switch(s){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Jd(n,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Yd(n,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Xd(n,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Qd(n,t);default:let r=n.body;Se({output:e,parsedBody:r.Error,exceptionCtor:B,errorCode:s})}};var Kd=async(e,t)=>{if(e.statusCode>=300)return dE(e,t);let n=await to(e.body,t),s={};s=gE(n.AssumeRoleWithWebIdentityResult,t);let r={$metadata:Ve(e),...s};return Promise.resolve(r)},dE=async(e,t)=>{let n={...e,body:await rl(e.body,t)},s=ol(e,n.body);switch(s){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Jd(n,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await lE(n,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await mE(n,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await uE(n,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Yd(n,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Xd(n,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Qd(n,t);default:let r=n.body;Se({output:e,parsedBody:r.Error,exceptionCtor:B,errorCode:s})}};var Jd=async(e,t)=>{let n=e.body,s=SE(n.Error,t),r=new En({$metadata:Ve(e),...s});return g(r,n)},lE=async(e,t)=>{let n=e.body,s=xE(n.Error,t),r=new Cn({$metadata:Ve(e),...s});return g(r,n)},mE=async(e,t)=>{let n=e.body,s=TE(n.Error,t),r=new xn({$metadata:Ve(e),...s});return g(r,n)};var uE=async(e,t)=>{let n=e.body,s=CE(n.Error,t),r=new Tn({$metadata:Ve(e),...s});return g(r,n)},Yd=async(e,t)=>{let n=e.body,s=RE(n.Error,t),r=new In({$metadata:Ve(e),...s});return g(r,n)},Xd=async(e,t)=>{let n=e.body,s=_E(n.Error,t),r=new gn({$metadata:Ve(e),...s});return g(r,n)},Qd=async(e,t)=>{let n=e.body,s=AE(n.Error,t),r=new Sn({$metadata:Ve(e),...s});return g(r,n)},fE=(e,t)=>{var s,r,a;let n={};if(e.RoleArn!=null&&(n.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(n.RoleSessionName=e.RoleSessionName),e.PolicyArns!=null){let o=Zd(e.PolicyArns,t);((s=e.PolicyArns)==null?void 0:s.length)===0&&(n.PolicyArns=[]),Object.entries(o).forEach(([i,c])=>{let d=`PolicyArns.${i}`;n[d]=c})}if(e.Policy!=null&&(n.Policy=e.Policy),e.DurationSeconds!=null&&(n.DurationSeconds=e.DurationSeconds),e.Tags!=null){let o=EE(e.Tags,t);((r=e.Tags)==null?void 0:r.length)===0&&(n.Tags=[]),Object.entries(o).forEach(([i,c])=>{let d=`Tags.${i}`;n[d]=c})}if(e.TransitiveTagKeys!=null){let o=wE(e.TransitiveTagKeys,t);((a=e.TransitiveTagKeys)==null?void 0:a.length)===0&&(n.TransitiveTagKeys=[]),Object.entries(o).forEach(([i,c])=>{let d=`TransitiveTagKeys.${i}`;n[d]=c})}return e.ExternalId!=null&&(n.ExternalId=e.ExternalId),e.SerialNumber!=null&&(n.SerialNumber=e.SerialNumber),e.TokenCode!=null&&(n.TokenCode=e.TokenCode),e.SourceIdentity!=null&&(n.SourceIdentity=e.SourceIdentity),n};var yE=(e,t)=>{var s;let n={};if(e.RoleArn!=null&&(n.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(n.RoleSessionName=e.RoleSessionName),e.WebIdentityToken!=null&&(n.WebIdentityToken=e.WebIdentityToken),e.ProviderId!=null&&(n.ProviderId=e.ProviderId),e.PolicyArns!=null){let r=Zd(e.PolicyArns,t);((s=e.PolicyArns)==null?void 0:s.length)===0&&(n.PolicyArns=[]),Object.entries(r).forEach(([a,o])=>{let i=`PolicyArns.${a}`;n[i]=o})}return e.Policy!=null&&(n.Policy=e.Policy),e.DurationSeconds!=null&&(n.DurationSeconds=e.DurationSeconds),n};var Zd=(e,t)=>{let n={},s=1;for(let r of e){if(r===null)continue;let a=pE(r,t);Object.entries(a).forEach(([o,i])=>{n[`member.${s}.${o}`]=i}),s++}return n},pE=(e,t)=>{let n={};return e.arn!=null&&(n.arn=e.arn),n},hE=(e,t)=>{let n={};return e.Key!=null&&(n.Key=e.Key),e.Value!=null&&(n.Value=e.Value),n},wE=(e,t)=>{let n={},s=1;for(let r of e)r!==null&&(n[`member.${s}`]=r,s++);return n},EE=(e,t)=>{let n={},s=1;for(let r of e){if(r===null)continue;let a=hE(r,t);Object.entries(a).forEach(([o,i])=>{n[`member.${s}.${o}`]=i}),s++}return n},el=(e,t)=>{let n={};return e.AssumedRoleId!==void 0&&(n.AssumedRoleId=f(e.AssumedRoleId)),e.Arn!==void 0&&(n.Arn=f(e.Arn)),n},IE=(e,t)=>{let n={};return e.Credentials!==void 0&&(n.Credentials=tl(e.Credentials,t)),e.AssumedRoleUser!==void 0&&(n.AssumedRoleUser=el(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(n.PackedPolicySize=wa(e.PackedPolicySize)),e.SourceIdentity!==void 0&&(n.SourceIdentity=f(e.SourceIdentity)),n};var gE=(e,t)=>{let n={};return e.Credentials!==void 0&&(n.Credentials=tl(e.Credentials,t)),e.SubjectFromWebIdentityToken!==void 0&&(n.SubjectFromWebIdentityToken=f(e.SubjectFromWebIdentityToken)),e.AssumedRoleUser!==void 0&&(n.AssumedRoleUser=el(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(n.PackedPolicySize=wa(e.PackedPolicySize)),e.Provider!==void 0&&(n.Provider=f(e.Provider)),e.Audience!==void 0&&(n.Audience=f(e.Audience)),e.SourceIdentity!==void 0&&(n.SourceIdentity=f(e.SourceIdentity)),n},tl=(e,t)=>{let n={};return e.AccessKeyId!==void 0&&(n.AccessKeyId=f(e.AccessKeyId)),e.SecretAccessKey!==void 0&&(n.SecretAccessKey=f(e.SecretAccessKey)),e.SessionToken!==void 0&&(n.SessionToken=f(e.SessionToken)),e.Expiration!==void 0&&(n.Expiration=fe(Ki(e.Expiration))),n};var SE=(e,t)=>{let n={};return e.message!==void 0&&(n.message=f(e.message)),n};var xE=(e,t)=>{let n={};return e.message!==void 0&&(n.message=f(e.message)),n},TE=(e,t)=>{let n={};return e.message!==void 0&&(n.message=f(e.message)),n};var CE=(e,t)=>{let n={};return e.message!==void 0&&(n.message=f(e.message)),n},RE=(e,t)=>{let n={};return e.message!==void 0&&(n.message=f(e.message)),n},_E=(e,t)=>{let n={};return e.message!==void 0&&(n.message=f(e.message)),n},AE=(e,t)=>{let n={};return e.message!==void 0&&(n.message=f(e.message)),n},Ve=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),vE=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),bE=(e,t)=>vE(e,t).then(n=>t.utf8Encoder(n)),nl=async(e,t,n,s,r)=>{let{hostname:a,protocol:o="https",port:i,path:c}=await e.endpoint(),d={protocol:o,hostname:a,port:i,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+n:c+n,headers:t};return s!==void 0&&(d.hostname=s),r!==void 0&&(d.body=r),new _(d)},sl={"content-type":"application/x-www-form-urlencoded"},to=(e,t)=>bE(e,t).then(n=>{if(n.length){let s=new Gd.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});s.addEntity("#xD","\r"),s.addEntity("#10",`
`);let r=s.parse(n),a="#text",o=Object.keys(r)[0],i=r[o];return i[a]&&(i[o]=i[a],delete i[a]),Ia(i)}return{}}),rl=async(e,t)=>{let n=await to(e,t);return n.Error&&(n.Error.message=n.Error.message??n.Error.Message),n},al=e=>Object.entries(e).map(([t,n])=>Ws(t)+"="+Ws(n)).join("&"),ol=(e,t)=>{var n;if(((n=t.Error)==null?void 0:n.Code)!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"};var Rn=class extends K{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,n,s){this.middlewareStack.use(te(n,this.serialize,this.deserialize)),this.middlewareStack.use(ne(n,Rn.getEndpointParameterInstructions())),this.middlewareStack.use(ir(n));let r=t.concat(this.middlewareStack),{logger:a}=n,c={logger:a,clientName:"STSClient",commandName:"AssumeRoleCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=n;return r.resolve(l=>d.handle(l.request,s||{}),c)}serialize(t,n){return qd(t,n)}deserialize(t,n){return jd(t,n)}};var _n=class extends K{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,n,s){this.middlewareStack.use(te(n,this.serialize,this.deserialize)),this.middlewareStack.use(ne(n,_n.getEndpointParameterInstructions()));let r=t.concat(this.middlewareStack),{logger:a}=n,c={logger:a,clientName:"STSClient",commandName:"AssumeRoleWithWebIdentityCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=n;return r.resolve(l=>d.handle(l.request,s||{}),c)}serialize(t,n){return Hd(t,n)}deserialize(t,n){return Kd(t,n)}};var il=(e,{stsClientCtor:t})=>ar({...e,stsClientCtor:t});var cl=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"});var dl={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.312.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"yarn test:unit","test:unit":"jest"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/credential-provider-node":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-sdk-sts":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-signing":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.310.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.310.0","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.310.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.310.0","@aws-sdk/util-defaults-mode-node":"3.310.0","@aws-sdk/util-endpoints":"3.310.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0","fast-xml-parser":"4.1.2",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}};var ll="us-east-1",ml=e=>typeof e!="function"?e===void 0?ll:e:async()=>{try{return await e()}catch{return ll}},no=(e,t)=>{let n,s;return async(r,a)=>{if(s=r,!n){let{logger:i,region:c,requestHandler:d}=e;n=new t({logger:i,credentialDefaultProvider:()=>async()=>s,region:ml(c||e.region),...d?{requestHandler:d}:{}})}let{Credentials:o}=await n.send(new Rn(a));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${a.RoleArn}`);return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration}}},so=(e,t)=>{let n;return async s=>{if(!n){let{logger:a,region:o,requestHandler:i}=e;n=new t({logger:a,region:ml(o||e.region),...i?{requestHandler:i}:{}})}let{Credentials:r}=await n.send(new _n(s));if(!r||!r.AccessKeyId||!r.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${s.RoleArn}`);return{accessKeyId:r.AccessKeyId,secretAccessKey:r.SecretAccessKey,sessionToken:r.SessionToken,expiration:r.Expiration}}},ul=e=>t=>e({roleAssumer:no(t,t.stsClientCtor),roleAssumerWithWebIdentity:so(t,t.stsClientCtor),...t});var NE="AWS_ACCESS_KEY_ID",OE="AWS_SECRET_ACCESS_KEY",DE="AWS_SESSION_TOKEN",ME="AWS_CREDENTIAL_EXPIRATION",pr=()=>async()=>{let e=process.env[NE],t=process.env[OE],n=process.env[DE],s=process.env[ME];if(e&&t)return{accessKeyId:e,secretAccessKey:t,...n&&{sessionToken:n},...s&&{expiration:new Date(s)}};throw new I("Unable to find environment variable credentials.")};var fl=require("os"),yl=require("path"),An=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:n,HOMEDRIVE:s=`C:${yl.sep}`}=process.env;return e||t||(n?`${s}${n}`:(0,fl.homedir)())};var ro="AWS_PROFILE",kE="default",ae=e=>e.profile||process.env[ro]||kE;var pl=require("crypto"),hl=require("path");var hr=e=>{let n=(0,pl.createHash)("sha1").update(e).digest("hex");return(0,hl.join)(An(),".aws","sso","cache",`${n}.json`)};var wl=require("fs");var{readFile:LE}=wl.promises,wr=async e=>{let t=hr(e),n=await LE(t,"utf8");return JSON.parse(n)};var El=require("path");var FE="AWS_CONFIG_FILE",Er=()=>process.env[FE]||(0,El.join)(An(),".aws","config");var Il=require("path");var $E="AWS_SHARED_CREDENTIALS_FILE",gl=()=>process.env[$E]||(0,Il.join)(An(),".aws","credentials");var Sl=/^profile\s(["'])?([^\1]+)\1$/,xl=e=>Object.entries(e).filter(([t])=>Sl.test(t)).reduce((t,[n,s])=>({...t,[Sl.exec(n)[2]]:s}),{...e.default&&{default:e.default}});var VE=["__proto__","profile __proto__"],ms=e=>{let t={},n;for(let s of e.split(/\r?\n/))if(s=s.split(/(^|\s)[;#]/)[0].trim(),s[0]==="["&&s[s.length-1]==="]"){if(n=s.substring(1,s.length-1),VE.includes(n))throw new Error(`Found invalid profile name "${n}"`)}else if(n){let a=s.indexOf("="),o=0,i=s.length-1;if(a!==-1&&a!==o&&a!==i){let[d,l]=[s.substring(0,a).trim(),s.substring(a+1).trim()];t[n]=t[n]||{},t[n][d]=l}}return t};var Tl=require("fs"),{readFile:zE}=Tl.promises,ao={},us=(e,t)=>((!ao[e]||t!=null&&t.ignoreCache)&&(ao[e]=zE(e,"utf8")),ao[e]);var Cl=()=>({}),Ir=async(e={})=>{let{filepath:t=gl(),configFilepath:n=Er()}=e,s=await Promise.all([us(n,{ignoreCache:e.ignoreCache}).then(ms).then(xl).catch(Cl),us(t,{ignoreCache:e.ignoreCache}).then(ms).catch(Cl)]);return{configFile:s[0],credentialsFile:s[1]}};var Rl=/^sso-session\s(["'])?([^\1]+)\1$/,_l=e=>Object.entries(e).filter(([t])=>Rl.test(t)).reduce((t,[n,s])=>({...t,[Rl.exec(n)[2]]:s}),{});var UE=()=>({}),gr=async(e={})=>us(e.configFilepath??Er()).then(ms).then(_l).catch(UE);var Al=(...e)=>{let t={};for(let n of e)for(let[s,r]of Object.entries(n))t[s]!==void 0?Object.assign(t[s],r):t[s]=r;return t};var St=async e=>{let t=await Ir(e);return Al(t.configFile,t.credentialsFile)};var Nl=require("url");var vl=require("buffer"),bl=require("http");function ze(e){return new Promise((t,n)=>{var r;let s=(0,bl.request)({method:"GET",...e,hostname:(r=e.hostname)==null?void 0:r.replace(/^\[(.+)\]$/,"$1")});s.on("error",a=>{n(Object.assign(new J("Unable to connect to instance metadata service"),a)),s.destroy()}),s.on("timeout",()=>{n(new J("TimeoutError from instance metadata service")),s.destroy()}),s.on("response",a=>{let{statusCode:o=400}=a;(o<200||300<=o)&&(n(Object.assign(new J("Error response received from instance metadata service"),{statusCode:o})),s.destroy());let i=[];a.on("data",c=>{i.push(c)}),a.on("end",()=>{t(vl.Buffer.concat(i)),s.destroy()})}),s.end()})}var Sr=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",xr=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)});var Tr=({maxRetries:e=0,timeout:t=1e3})=>({maxRetries:e,timeout:t});var fs=(e,t)=>{let n=e();for(let s=0;s<t;s++)n=n.catch(e);return n};var ys="AWS_CONTAINER_CREDENTIALS_FULL_URI",ps="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",Pl="AWS_CONTAINER_AUTHORIZATION_TOKEN",Cr=(e={})=>{let{timeout:t,maxRetries:n}=Tr(e);return()=>fs(async()=>{let s=await HE(),r=JSON.parse(await WE(t,s));if(!Sr(r))throw new I("Invalid response received from instance metadata service.");return xr(r)},n)},WE=async(e,t)=>(process.env[Pl]&&(t.headers={...t.headers,Authorization:process.env[Pl]}),(await ze({...t,timeout:e})).toString()),BE="169.254.170.2",GE={localhost:!0,"127.0.0.1":!0},qE={"http:":!0,"https:":!0},HE=async()=>{if(process.env[ps])return{hostname:BE,path:process.env[ps]};if(process.env[ys]){let e=(0,Nl.parse)(process.env[ys]);if(!e.hostname||!(e.hostname in GE))throw new I(`${e.hostname} is not a valid container metadata service hostname`,!1);if(!e.protocol||!(e.protocol in qE))throw new I(`${e.protocol} is not a valid container metadata service protocol`,!1);return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new I(`The container metadata credential provider cannot be used unless the ${ps} or ${ys} environment variable is set`,!1)};var Ol=e=>async()=>{try{let t=e(process.env);if(t===void 0)throw new Error;return t}catch(t){throw new I(t.message||`Cannot load config from environment variables with getter: ${e}`)}};var Dl=(e,{preferredFile:t="config",...n}={})=>async()=>{let s=ae(n),{configFile:r,credentialsFile:a}=await Ir(n),o=a[s]||{},i=r[s]||{},c=t==="config"?{...o,...i}:{...i,...o};try{let d=e(c);if(d===void 0)throw new Error;return d}catch(d){throw new I(d.message||`Cannot load config for profile ${s} in SDK configuration files with getter: ${e}`)}};var jE=e=>typeof e=="function",Ml=e=>jE(e)?async()=>await e():_c(e);var x=({environmentVariableSelector:e,configFileSelector:t,default:n},s={})=>yt(Js(Ol(e),Dl(t,s),Ml(n)));var hs;(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(hs||(hs={}));var KE="AWS_EC2_METADATA_SERVICE_ENDPOINT",JE="ec2_metadata_service_endpoint",kl={environmentVariableSelector:e=>e[KE],configFileSelector:e=>e[JE],default:void 0};var xt;(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(xt||(xt={}));var YE="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",XE="ec2_metadata_service_endpoint_mode",Ll={environmentVariableSelector:e=>e[YE],configFileSelector:e=>e[XE],default:xt.IPv4};var ws=async()=>j(await QE()||await ZE()),QE=async()=>x(kl)(),ZE=async()=>{let e=await x(Ll)();switch(e){case xt.IPv4:return hs.IPv4;case xt.IPv6:return hs.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(xt)}`)}};var eI="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",oo=(e,t)=>{let n=300+Math.floor(Math.random()*300),s=new Date(Date.now()+n*1e3);t.warn("Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(newExpiration)}.\nFor more information, please visit: "+eI);let r=e.originalExpiration??e.expiration;return{...e,...r?{originalExpiration:r}:{},expiration:s}};var Fl=(e,t={})=>{let n=(t==null?void 0:t.logger)||console,s;return async()=>{let r;try{r=await e(),r.expiration&&r.expiration.getTime()<Date.now()&&(r=oo(r,n))}catch(a){if(s)n.warn("Credential renew failed: ",a),r=oo(s,n);else throw a}return s=r,r}};var $l="/latest/meta-data/iam/security-credentials/",tI="/latest/api/token",Rr=(e={})=>Fl(nI(e),{logger:e.logger}),nI=e=>{let t=!1,{timeout:n,maxRetries:s}=Tr(e),r=async(a,o)=>{let i=(await fs(async()=>{let c;try{c=await rI(o)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},a)).trim();return fs(async()=>{let c;try{c=await aI(i,o)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},a)};return async()=>{let a=await ws();if(t)return r(s,{...a,timeout:n});{let o;try{o=(await sI({...a,timeout:n})).toString()}catch(i){if((i==null?void 0:i.statusCode)===400)throw Object.assign(i,{message:"EC2 Metadata token request returned error"});return(i.message==="TimeoutError"||[403,404,405].includes(i.statusCode))&&(t=!0),r(s,{...a,timeout:n})}return r(s,{...a,headers:{"x-aws-ec2-metadata-token":o},timeout:n})}}},sI=async e=>ze({...e,path:tI,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),rI=async e=>(await ze({...e,path:$l})).toString(),aI=async(e,t)=>{let n=JSON.parse((await ze({...t,path:$l+e})).toString());if(!Sr(n))throw new I("Invalid response received from instance metadata service.");return xr(n)};var Vl=(e,t)=>{let n={EcsContainer:Cr,Ec2InstanceMetadata:Rr,Environment:pr};if(e in n)return n[e]();throw new I(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`)};var zl=e=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(oI(e)||iI(e)),oI=e=>typeof e.source_profile=="string"&&typeof e.credential_source>"u",iI=e=>typeof e.credential_source=="string"&&typeof e.source_profile>"u",Ul=async(e,t,n,s={})=>{let r=t[e];if(!n.roleAssumer)throw new I(`Profile ${e} requires a role to be assumed, but no role assumption callback was provided.`,!1);let{source_profile:a}=r;if(a&&a in s)throw new I(`Detected a cycle attempting to resolve credentials for profile ${ae(n)}. Profiles visited: `+Object.keys(s).join(", "),!1);let o=a?_r(a,t,n,{...s,[a]:!0}):Vl(r.credential_source,e)(),i={RoleArn:r.role_arn,RoleSessionName:r.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:r.external_id},{mfa_serial:c}=r;if(c){if(!n.mfaCodeProvider)throw new I(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,!1);i.SerialNumber=c,i.TokenCode=await n.mfaCodeProvider(c)}let d=await o;return n.roleAssumer(d,i)};var Bl=require("child_process"),Gl=require("util");var Wl=(e,t)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let n=new Date;if(new Date(t.Expiration)<n)throw Error(`Profile ${e} credential_process returned expired credentials.`)}return{accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)}}};var ql=async(e,t)=>{let n=t[e];if(t[e]){let s=n.credential_process;if(s!==void 0){let r=(0,Gl.promisify)(Bl.exec);try{let{stdout:a}=await r(s),o;try{o=JSON.parse(a.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return Wl(e,o)}catch(a){throw new I(a.message)}}else throw new I(`Profile ${e} did not contain credential_process.`)}else throw new I(`Profile ${e} could not be found in shared credentials file.`)};var Ar=(e={})=>async()=>{let t=await St(e);return ql(ae(e),t)};var Hl=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",jl=async(e,t)=>Ar({...e,profile:t})();var Es=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string");var ye=class extends se{constructor(t){super(t),Object.setPrototypeOf(this,ye.prototype)}};var vn=class extends ye{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,vn.prototype)}},bn=class extends ye{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,bn.prototype)}},Pn=class extends ye{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,Pn.prototype)}},Nn=class extends ye{constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,Nn.prototype)}},Kl=e=>({...e,...e.accessToken&&{accessToken:Qe}}),cI=e=>({...e,...e.secretAccessKey&&{secretAccessKey:Qe},...e.sessionToken&&{sessionToken:Qe}}),Jl=e=>({...e,...e.roleCredentials&&{roleCredentials:cI(e.roleCredentials)}});var Yl=async(e,t)=>{let{hostname:n,protocol:s="https",port:r,path:a}=await t.endpoint(),o=kt({},wI,{"x-amz-sso_bearer_token":e.accessToken}),i=`${a!=null&&a.endsWith("/")?a.slice(0,-1):a||""}/federation/credentials`,c=kt({role_name:[,fe(e.roleName,"roleName")],account_id:[,fe(e.accountId,"accountId")]}),d;return new _({protocol:s,hostname:n,port:r,method:"GET",headers:o,path:i,query:c,body:d})};var Xl=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return dI(e,t);let n=kt({$metadata:Is(e)}),s=fe(Us(await Ql(e.body,t)),"body");return s.roleCredentials!=null&&(n.roleCredentials=yI(s.roleCredentials,t)),n},dI=async(e,t)=>{let n={...e,body:await EI(e.body,t)},s=II(e,n.body);switch(s){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await lI(n,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await mI(n,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await uI(n,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await fI(n,t);default:let r=n.body;Se({output:e,parsedBody:r,exceptionCtor:ye,errorCode:s})}};var kt=rs,lI=async(e,t)=>{let n=kt({}),s=e.body;s.message!=null&&(n.message=f(s.message));let r=new vn({$metadata:Is(e),...n});return g(r,e.body)},mI=async(e,t)=>{let n=kt({}),s=e.body;s.message!=null&&(n.message=f(s.message));let r=new bn({$metadata:Is(e),...n});return g(r,e.body)},uI=async(e,t)=>{let n=kt({}),s=e.body;s.message!=null&&(n.message=f(s.message));let r=new Pn({$metadata:Is(e),...n});return g(r,e.body)},fI=async(e,t)=>{let n=kt({}),s=e.body;s.message!=null&&(n.message=f(s.message));let r=new Nn({$metadata:Is(e),...n});return g(r,e.body)};var yI=(e,t)=>({accessKeyId:f(e.accessKeyId),expiration:ts(e.expiration),secretAccessKey:f(e.secretAccessKey),sessionToken:f(e.sessionToken)});var Is=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),pI=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),hI=(e,t)=>pI(e,t).then(n=>t.utf8Encoder(n)),wI=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),Ql=(e,t)=>hI(e,t).then(n=>n.length?JSON.parse(n):{}),EI=async(e,t)=>{let n=await Ql(e,t);return n.message=n.message??n.Message,n},II=(e,t)=>{let n=(a,o)=>Object.keys(a).find(i=>i.toLowerCase()===o.toLowerCase()),s=a=>{let o=a;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o},r=n(e.headers,"x-amzn-errortype");if(r!==void 0)return s(e.headers[r]);if(t.code!==void 0)return s(t.code);if(t.__type!==void 0)return s(t.__type)};var On=class extends K{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,n,s){this.middlewareStack.use(te(n,this.serialize,this.deserialize)),this.middlewareStack.use(ne(n,On.getEndpointParameterInstructions()));let r=t.concat(this.middlewareStack),{logger:a}=n,c={logger:a,clientName:"SSOClient",commandName:"GetRoleCredentialsCommand",inputFilterSensitiveLog:Kl,outputFilterSensitiveLog:Jl},{requestHandler:d}=n;return r.resolve(l=>d.handle(l.request,s||{}),c)}serialize(t,n){return Yl(t,n)}deserialize(t,n){return Xl(t,n)}};var Zl=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"});var em={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.310.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.310.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.310.0","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.310.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.310.0","@aws-sdk/util-defaults-mode-node":"3.310.0","@aws-sdk/util-endpoints":"3.310.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}};var nm=require("buffer"),vr=require("crypto"),be=class{constructor(t,n){this.algorithmIdentifier=t,this.secret=n,this.reset()}update(t,n){this.hash.update(Ae(tm(t,n)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,vr.createHmac)(this.algorithmIdentifier,tm(this.secret)):(0,vr.createHash)(this.algorithmIdentifier)}};function tm(e,t){return nm.Buffer.isBuffer(e)?e:typeof e=="string"?pn(e,t):ArrayBuffer.isView(e)?Dt(e.buffer,e.byteOffset,e.byteLength):Dt(e)}function io(e){let t=[];for(let n of Object.keys(e).sort()){let s=e[n];if(n=ve(n),Array.isArray(s))for(let r=0,a=s.length;r<a;r++)t.push(`${n}=${ve(s[r])}`);else{let r=n;(s||typeof s=="string")&&(r+=`=${ve(s)}`),t.push(r)}}return t.join("&")}var br=require("http"),Pr=require("https");var sm=["ECONNRESET","EPIPE","ETIMEDOUT"];var co=e=>{let t={};for(let n of Object.keys(e)){let s=e[n];t[n]=Array.isArray(s)?s.join(","):s}return t};var am=require("stream");function lo(e,t){(t.headers.Expect||t.headers.expect)==="100-continue"?e.on("continue",()=>{rm(e,t.body)}):rm(e,t.body)}function rm(e,t){t instanceof am.Readable?t.pipe(e):t?e.end(Buffer.from(t)):e.end()}var om=0,Pe=class{constructor(t){this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((n,s)=>{typeof t=="function"?t().then(r=>{n(this.resolveDefaultConfig(r))}).catch(s):n(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{requestTimeout:n,connectionTimeout:s,socketTimeout:r,httpAgent:a,httpsAgent:o}=t||{},i=!0,c=50;return{connectionTimeout:s,socketTimeout:r,requestTimeout:n??s??r??om,httpAgent:a||new br.Agent({keepAlive:i,maxSockets:c}),httpsAgent:o||new Pr.Agent({keepAlive:i,maxSockets:c})}}destroy(){var t,n,s,r;(n=(t=this.config)==null?void 0:t.httpAgent)==null||n.destroy(),(r=(s=this.config)==null?void 0:s.httpsAgent)==null||r.destroy()}async handle(t,{abortSignal:n}={}){return this.config||(this.config=await this.configProvider),new Promise((s,r)=>{var m;if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(n!=null&&n.aborted){let u=new Error("Request aborted");u.name="AbortError",r(u);return}let a=t.protocol==="https:",o=io(t.query||{}),i={headers:t.headers,host:t.hostname,method:t.method,path:o?`${t.path}?${o}`:t.path,port:t.port,agent:a?this.config.httpsAgent:this.config.httpAgent},d=(a?Pr.request:br.request)(i,u=>{let y=new xe({statusCode:u.statusCode||-1,headers:co(u.headers),body:u});s({response:y})});d.on("error",u=>{sm.includes(u.code)?r(Object.assign(u,{name:"TimeoutError"})):r(u)});let l=((m=this.config)==null?void 0:m.requestTimeout)??om;d.setTimeout(l,()=>{d.destroy(),r(Object.assign(new Error(`Connection timed out after ${l} ms`),{name:"TimeoutError"}))}),n&&(n.onabort=()=>{d.abort();let u=new Error("Request aborted");u.name="AbortError",r(u)}),lo(d,t)})}};var mo=class{constructor(t){this.sessions=[],this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(n=>n!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let n of this.sessions)n===t&&(n.destroyed||n.destroy())}};var im=require("stream"),Nr=class extends im.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(t,n,s){this.bufferedBytes.push(t),s()}};var Tt=e=>new Promise((t,n)=>{let s=new Nr;e.pipe(s),e.on("error",r=>{s.end(),n(r)}),s.on("error",n),s.on("finish",function(){let r=new Uint8Array(Buffer.concat(this.bufferedBytes));t(r)})});var Or=require("fs"),Ct=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.from(e).length;if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.path=="string"||Buffer.isBuffer(e.path))return(0,Or.lstatSync)(e.path).size;if(typeof e.fd=="number")return(0,Or.fstatSync)(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)};var Dr=require("os"),gs=require("process");var cm=()=>{try{return typeof require=="function"&&typeof module<"u"&&require("aws-crt")?["md/crt-avail"]:null}catch{return null}};var SI="AWS_SDK_UA_APP_ID",xI="sdk-ua-app-id",Rt=({serviceId:e,clientVersion:t})=>{let n=[["aws-sdk-js",t],[`os/${(0,Dr.platform)()}`,(0,Dr.release)()],["lang/js"],["md/nodejs",`${gs.versions.node}`]],s=cm();s&&n.push(s),e&&n.push([`api/${e}`,t]),gs.env.AWS_EXECUTION_ENV&&n.push([`exec-env/${gs.env.AWS_EXECUTION_ENV}`]);let r=x({environmentVariableSelector:o=>o[SI],configFileSelector:o=>o[xI],default:void 0})(),a;return async()=>{if(!a){let o=await r;a=o?[...n,[`app/${o}`]]:[...n]}return a}};var TI=/^[A-Za-z0-9+/]*={0,2}$/,_t=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!TI.exec(e))throw new TypeError("Invalid base64 string.");let t=pn(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};var At=e=>Dt(e.buffer,e.byteOffset,e.byteLength).toString("base64");var hm="required",Ue="fn",We="argv",Dn="ref",uo="PartitionResult",Ne="tree",Ss="error",xs="endpoint",dm={[hm]:!1,type:"String"},lm={[hm]:!0,default:!1,type:"Boolean"},wm={[Dn]:"Endpoint"},Em={[Ue]:"booleanEquals",[We]:[{[Dn]:"UseFIPS"},!0]},Im={[Ue]:"booleanEquals",[We]:[{[Dn]:"UseDualStack"},!0]},Oe={},mm={[Ue]:"booleanEquals",[We]:[!0,{[Ue]:"getAttr",[We]:[{[Dn]:uo},"supportsFIPS"]}]},um={[Ue]:"booleanEquals",[We]:[!0,{[Ue]:"getAttr",[We]:[{[Dn]:uo},"supportsDualStack"]}]},fm=[wm],ym=[Em],pm=[Im],CI={version:"1.0",parameters:{Region:dm,UseDualStack:lm,UseFIPS:lm,Endpoint:dm},rules:[{conditions:[{[Ue]:"aws.partition",[We]:[{[Dn]:"Region"}],assign:uo}],type:Ne,rules:[{conditions:[{[Ue]:"isSet",[We]:fm},{[Ue]:"parseURL",[We]:fm,assign:"url"}],type:Ne,rules:[{conditions:ym,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ss},{type:Ne,rules:[{conditions:pm,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ss},{endpoint:{url:wm,properties:Oe,headers:Oe},type:xs}]}]},{conditions:[Em,Im],type:Ne,rules:[{conditions:[mm,um],type:Ne,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Oe,headers:Oe},type:xs}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ss}]},{conditions:ym,type:Ne,rules:[{conditions:[mm],type:Ne,rules:[{type:Ne,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Oe,headers:Oe},type:xs}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Ss}]},{conditions:pm,type:Ne,rules:[{conditions:[um],type:Ne,rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Oe,headers:Oe},type:xs}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Ss}]},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Oe,headers:Oe},type:xs}]}]},gm=CI;var Sm=(e,t={})=>Et(gm,{endpointParams:e,logger:t.logger});var xm=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??_t,base64Encoder:(e==null?void 0:e.base64Encoder)??At,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Sm,logger:(e==null?void 0:e.logger)??new Ie,serviceId:(e==null?void 0:e.serviceId)??"SSO",urlParser:(e==null?void 0:e.urlParser)??j,utf8Decoder:(e==null?void 0:e.utf8Decoder)??_e,utf8Encoder:(e==null?void 0:e.utf8Encoder)??pt});var Tm="AWS_EXECUTION_ENV",fo="AWS_REGION",yo="AWS_DEFAULT_REGION",Cm="AWS_EC2_METADATA_DISABLED",Rm=["in-region","cross-region","mobile","standard","legacy"],_m="/latest/meta-data/placement/region";var RI="AWS_DEFAULTS_MODE",_I="defaults_mode",Am={environmentVariableSelector:e=>e[RI],configFileSelector:e=>e[_I],default:"legacy"};var vt=({region:e=x(Te),defaultsMode:t=x(Am)}={})=>yt(async()=>{let n=typeof t=="function"?await t():t;switch(n==null?void 0:n.toLowerCase()){case"auto":return AI(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(n==null?void 0:n.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Rm.join(", ")}, got ${n}`)}}),AI=async e=>{if(e){let t=typeof e=="function"?await e():e,n=await vI();return n?t===n?"in-region":"cross-region":"standard"}return"standard"},vI=async()=>{if(process.env[Tm]&&(process.env[fo]||process.env[yo]))return process.env[fo]??process.env[yo];if(!process.env[Cm])try{let e=await ws();return(await ze({...e,path:_m})).toString()}catch{}};var vm=e=>{et(process.version);let t=vt(e),n=()=>t().then(Ze),s=xm(e);return{...s,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Ct,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Rt({serviceId:s.serviceId,clientVersion:em.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??x(lt),region:(e==null?void 0:e.region)??x(Te,rt),requestHandler:(e==null?void 0:e.requestHandler)??new Pe(n),retryMode:(e==null?void 0:e.retryMode)??x({...ut,default:async()=>(await n()).retryMode||Re}),sha256:(e==null?void 0:e.sha256)??be.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??Tt,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??x(nt),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??x(st)}};var Mr=class extends ge{constructor(t){let n=vm(t),s=Zl(n),r=at(s),a=Xe(r),o=mt(a),i=o,c=ht(i);super(c),this.config=c,this.middlewareStack.use(ft(this.config)),this.middlewareStack.use(ot(this.config)),this.middlewareStack.use(it(this.config)),this.middlewareStack.use(ct(this.config)),this.middlewareStack.use(dt(this.config)),this.middlewareStack.use(It(this.config))}destroy(){super.destroy()}};var Mn="To refresh this SSO session run 'aws sso login' with the corresponding profile.";var M=class extends se{constructor(t){super(t),Object.setPrototypeOf(this,M.prototype)}};var kn=class extends M{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,kn.prototype),this.error=t.error,this.error_description=t.error_description}},Ln=class extends M{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,Ln.prototype),this.error=t.error,this.error_description=t.error_description}},Fn=class extends M{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,Fn.prototype),this.error=t.error,this.error_description=t.error_description}},$n=class extends M{constructor(t){super({name:"InternalServerException",$fault:"server",...t}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,$n.prototype),this.error=t.error,this.error_description=t.error_description}},Vn=class extends M{constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,Vn.prototype),this.error=t.error,this.error_description=t.error_description}},zn=class extends M{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,zn.prototype),this.error=t.error,this.error_description=t.error_description}},Un=class extends M{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,Un.prototype),this.error=t.error,this.error_description=t.error_description}},Wn=class extends M{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,Wn.prototype),this.error=t.error,this.error_description=t.error_description}},Bn=class extends M{constructor(t){super({name:"SlowDownException",$fault:"client",...t}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,Bn.prototype),this.error=t.error,this.error_description=t.error_description}},Gn=class extends M{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,Gn.prototype),this.error=t.error,this.error_description=t.error_description}},qn=class extends M{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,qn.prototype),this.error=t.error,this.error_description=t.error_description}};var bm=async(e,t)=>{let{hostname:n,protocol:s="https",port:r,path:a}=await t.endpoint(),o={"content-type":"application/json"},i=`${a!=null&&a.endsWith("/")?a.slice(0,-1):a||""}/token`,c;return c=JSON.stringify({...e.clientId!=null&&{clientId:e.clientId},...e.clientSecret!=null&&{clientSecret:e.clientSecret},...e.code!=null&&{code:e.code},...e.deviceCode!=null&&{deviceCode:e.deviceCode},...e.grantType!=null&&{grantType:e.grantType},...e.redirectUri!=null&&{redirectUri:e.redirectUri},...e.refreshToken!=null&&{refreshToken:e.refreshToken},...e.scope!=null&&{scope:UI(e.scope,t)}}),new _({protocol:s,hostname:n,port:r,method:"POST",headers:o,path:i,body:c})};var Pm=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return bI(e,t);let n=oe({$metadata:ie(e)}),s=fe(Us(await Nm(e.body,t)),"body");return s.accessToken!=null&&(n.accessToken=f(s.accessToken)),s.expiresIn!=null&&(n.expiresIn=ue(s.expiresIn)),s.idToken!=null&&(n.idToken=f(s.idToken)),s.refreshToken!=null&&(n.refreshToken=f(s.refreshToken)),s.tokenType!=null&&(n.tokenType=f(s.tokenType)),n},bI=async(e,t)=>{let n={...e,body:await GI(e.body,t)},s=qI(e,n.body);switch(s){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await PI(n,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await NI(n,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await OI(n,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await DI(n,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await MI(n,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await kI(n,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await LI(n,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await FI(n,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await $I(n,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await VI(n,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await zI(n,t);default:let r=n.body;Se({output:e,parsedBody:r,exceptionCtor:M,errorCode:s})}};var oe=rs,PI=async(e,t)=>{let n=oe({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new kn({$metadata:ie(e),...n});return g(r,e.body)},NI=async(e,t)=>{let n=oe({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new Ln({$metadata:ie(e),...n});return g(r,e.body)},OI=async(e,t)=>{let n=oe({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new Fn({$metadata:ie(e),...n});return g(r,e.body)},DI=async(e,t)=>{let n=oe({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new $n({$metadata:ie(e),...n});return g(r,e.body)},MI=async(e,t)=>{let n=oe({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new Vn({$metadata:ie(e),...n});return g(r,e.body)};var kI=async(e,t)=>{let n=oe({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new zn({$metadata:ie(e),...n});return g(r,e.body)},LI=async(e,t)=>{let n=oe({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new Un({$metadata:ie(e),...n});return g(r,e.body)},FI=async(e,t)=>{let n=oe({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new Wn({$metadata:ie(e),...n});return g(r,e.body)},$I=async(e,t)=>{let n=oe({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new Bn({$metadata:ie(e),...n});return g(r,e.body)},VI=async(e,t)=>{let n=oe({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new Gn({$metadata:ie(e),...n});return g(r,e.body)},zI=async(e,t)=>{let n=oe({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new qn({$metadata:ie(e),...n});return g(r,e.body)},UI=(e,t)=>e.filter(n=>n!=null).map(n=>n),ie=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),WI=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),BI=(e,t)=>WI(e,t).then(n=>t.utf8Encoder(n));var Nm=(e,t)=>BI(e,t).then(n=>n.length?JSON.parse(n):{}),GI=async(e,t)=>{let n=await Nm(e,t);return n.message=n.message??n.Message,n},qI=(e,t)=>{let n=(a,o)=>Object.keys(a).find(i=>i.toLowerCase()===o.toLowerCase()),s=a=>{let o=a;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o},r=n(e.headers,"x-amzn-errortype");if(r!==void 0)return s(e.headers[r]);if(t.code!==void 0)return s(t.code);if(t.__type!==void 0)return s(t.__type)};var Hn=class extends K{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,n,s){this.middlewareStack.use(te(n,this.serialize,this.deserialize)),this.middlewareStack.use(ne(n,Hn.getEndpointParameterInstructions()));let r=t.concat(this.middlewareStack),{logger:a}=n,c={logger:a,clientName:"SSOOIDCClient",commandName:"CreateTokenCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=n;return r.resolve(l=>d.handle(l.request,s||{}),c)}serialize(t,n){return bm(t,n)}deserialize(t,n){return Pm(t,n)}};var Om=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssooidc"});var Dm={name:"@aws-sdk/client-sso-oidc",description:"AWS SDK for JavaScript Sso Oidc Client for Node.js, Browser and React Native",version:"3.310.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso-oidc"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.310.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.310.0","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.310.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.310.0","@aws-sdk/util-defaults-mode-node":"3.310.0","@aws-sdk/util-endpoints":"3.310.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso-oidc",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso-oidc"}};var Um="required",Be="fn",Ge="argv",jn="ref",ho="PartitionResult",De="tree",Ts="error",Cs="endpoint",Mm={[Um]:!1,type:"String"},km={[Um]:!0,default:!1,type:"Boolean"},Wm={[jn]:"Endpoint"},Bm={[Be]:"booleanEquals",[Ge]:[{[jn]:"UseFIPS"},!0]},Gm={[Be]:"booleanEquals",[Ge]:[{[jn]:"UseDualStack"},!0]},Me={},Lm={[Be]:"booleanEquals",[Ge]:[!0,{[Be]:"getAttr",[Ge]:[{[jn]:ho},"supportsFIPS"]}]},Fm={[Be]:"booleanEquals",[Ge]:[!0,{[Be]:"getAttr",[Ge]:[{[jn]:ho},"supportsDualStack"]}]},$m=[Wm],Vm=[Bm],zm=[Gm],jI={version:"1.0",parameters:{Region:Mm,UseDualStack:km,UseFIPS:km,Endpoint:Mm},rules:[{conditions:[{[Be]:"aws.partition",[Ge]:[{[jn]:"Region"}],assign:ho}],type:De,rules:[{conditions:[{[Be]:"isSet",[Ge]:$m},{[Be]:"parseURL",[Ge]:$m,assign:"url"}],type:De,rules:[{conditions:Vm,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ts},{type:De,rules:[{conditions:zm,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ts},{endpoint:{url:Wm,properties:Me,headers:Me},type:Cs}]}]},{conditions:[Bm,Gm],type:De,rules:[{conditions:[Lm,Fm],type:De,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Me,headers:Me},type:Cs}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ts}]},{conditions:Vm,type:De,rules:[{conditions:[Lm],type:De,rules:[{type:De,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Me,headers:Me},type:Cs}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Ts}]},{conditions:zm,type:De,rules:[{conditions:[Fm],type:De,rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Me,headers:Me},type:Cs}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Ts}]},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Me,headers:Me},type:Cs}]}]},qm=jI;var Hm=(e,t={})=>Et(qm,{endpointParams:e,logger:t.logger});var jm=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??_t,base64Encoder:(e==null?void 0:e.base64Encoder)??At,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Hm,logger:(e==null?void 0:e.logger)??new Ie,serviceId:(e==null?void 0:e.serviceId)??"SSO OIDC",urlParser:(e==null?void 0:e.urlParser)??j,utf8Decoder:(e==null?void 0:e.utf8Decoder)??_e,utf8Encoder:(e==null?void 0:e.utf8Encoder)??pt});var Km=e=>{et(process.version);let t=vt(e),n=()=>t().then(Ze),s=jm(e);return{...s,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Ct,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Rt({serviceId:s.serviceId,clientVersion:Dm.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??x(lt),region:(e==null?void 0:e.region)??x(Te,rt),requestHandler:(e==null?void 0:e.requestHandler)??new Pe(n),retryMode:(e==null?void 0:e.retryMode)??x({...ut,default:async()=>(await n()).retryMode||Re}),sha256:(e==null?void 0:e.sha256)??be.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??Tt,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??x(nt),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??x(st)}};var kr=class extends ge{constructor(t){let n=Km(t),s=Om(n),r=at(s),a=Xe(r),o=mt(a),i=o,c=ht(i);super(c),this.config=c,this.middlewareStack.use(ft(this.config)),this.middlewareStack.use(ot(this.config)),this.middlewareStack.use(it(this.config)),this.middlewareStack.use(ct(this.config)),this.middlewareStack.use(dt(this.config)),this.middlewareStack.use(It(this.config))}destroy(){super.destroy()}};var wo={},Jm=e=>{if(wo[e])return wo[e];let t=new kr({region:e});return wo[e]=t,t};var Ym=(e,t)=>Jm(t).send(new Hn({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}));var Eo=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new Y(`Token is expired. ${Mn}`,!1)};var bt=(e,t,n=!1)=>{if(typeof t>"u")throw new Y(`Value not present for '${e}' in SSO Token${n?". Cannot refresh":""}. ${Mn}`,!1)};var Xm=require("fs"),{writeFile:KI}=Xm.promises,Qm=(e,t)=>{let n=hr(e),s=JSON.stringify(t,null,2);return KI(n,s)};var Zm=new Date(0),eu=(e={})=>async()=>{let t=await St(e),n=ae(e),s=t[n];if(s){if(!s.sso_session)throw new Y(`Profile '${n}' is missing required property 'sso_session'.`)}else throw new Y(`Profile '${n}' could not be found in shared credentials file.`,!1);let r=s.sso_session,o=(await gr(e))[r];if(!o)throw new Y(`Sso session '${r}' could not be found in shared credentials file.`,!1);for(let y of["sso_start_url","sso_region"])if(!o[y])throw new Y(`Sso session '${r}' is missing required property '${y}'.`,!1);let i=o.sso_start_url,c=o.sso_region,d;try{d=await wr(r)}catch{throw new Y(`The SSO session token associated with profile=${n} was not found or is invalid. ${Mn}`,!1)}bt("accessToken",d.accessToken),bt("expiresAt",d.expiresAt);let{accessToken:l,expiresAt:m}=d,u={token:l,expiration:new Date(m)};if(u.expiration.getTime()-Date.now()>3e5)return u;if(Date.now()-Zm.getTime()<30*1e3)return Eo(u),u;bt("clientId",d.clientId,!0),bt("clientSecret",d.clientSecret,!0),bt("refreshToken",d.refreshToken,!0);try{Zm.setTime(Date.now());let y=await Ym(d,c);bt("accessToken",y.accessToken),bt("expiresIn",y.expiresIn);let p=new Date(Date.now()+y.expiresIn*1e3);try{await Qm(r,{...d,accessToken:y.accessToken,expiresAt:p.toISOString(),refreshToken:y.refreshToken})}catch{}return{token:y.accessToken,expiration:p}}catch{return Eo(u),u}};var YI=15*60*1e3,Rs=!1,Io=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:n,ssoRegion:s,ssoRoleName:r,ssoClient:a,profile:o})=>{let i,c="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let E=await eu({profile:o})();i={accessToken:E.token,expiresAt:new Date(E.expiration).toISOString()}}catch(E){throw new I(E.message,Rs)}else try{i=await wr(e)}catch{throw new I(`The SSO session associated with this profile is invalid. ${c}`,Rs)}if(new Date(i.expiresAt).getTime()-Date.now()<=YI)throw new I(`The SSO session associated with this profile has expired. ${c}`,Rs);let{accessToken:d}=i,l=a||new Mr({region:s}),m;try{m=await l.send(new On({accountId:n,roleName:r,accessToken:d}))}catch(E){throw I.from(E,Rs)}let{roleCredentials:{accessKeyId:u,secretAccessKey:y,sessionToken:p,expiration:h}={}}=m;if(!u||!y||!p||!h)throw new I("SSO returns an invalid temporary credential.",Rs);return{accessKeyId:u,secretAccessKey:y,sessionToken:p,expiration:new Date(h)}};var Lr=e=>{let{sso_start_url:t,sso_account_id:n,sso_region:s,sso_role_name:r}=e;if(!t||!n||!s||!r)throw new I(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,!1);return e};var Fr=(e={})=>async()=>{let{ssoStartUrl:t,ssoAccountId:n,ssoRegion:s,ssoRoleName:r,ssoClient:a,ssoSession:o}=e,i=ae(e);if(!t&&!n&&!s&&!r&&!o){let d=(await St(e))[i];if(!d)throw new I(`Profile ${i} was not found.`);if(!Es(d))throw new I(`Profile ${i} is not configured with SSO credentials.`);if(d!=null&&d.sso_session){let E=(await gr(e))[d.sso_session],we=` configurations in profile ${i} and sso-session ${d.sso_session}`;if(s&&s!==E.sso_region)throw new I("Conflicting SSO region"+we,!1);if(t&&t!==E.sso_start_url)throw new I("Conflicting SSO start_url"+we,!1);d.sso_region=E.sso_region,d.sso_start_url=E.sso_start_url}let{sso_start_url:l,sso_account_id:m,sso_region:u,sso_role_name:y,sso_session:p}=Lr(d);return Io({ssoStartUrl:l,ssoSession:p,ssoAccountId:m,ssoRegion:u,ssoRoleName:y,ssoClient:a,profile:i})}else{if(!t||!n||!s||!r)throw new I('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"');return Io({ssoStartUrl:t,ssoSession:o,ssoAccountId:n,ssoRegion:s,ssoRoleName:r,ssoClient:a,profile:i})}};var tu=e=>{let{sso_start_url:t,sso_account_id:n,sso_session:s,sso_region:r,sso_role_name:a}=Lr(e);return Fr({ssoStartUrl:t,ssoAccountId:n,ssoSession:s,ssoRegion:r,ssoRoleName:a})()};var go=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1,So=e=>Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token});var su=require("fs");var nu=e=>()=>{let{roleArn:t,roleSessionName:n,webIdentityToken:s,providerId:r,policyArns:a,policy:o,durationSeconds:i,roleAssumerWithWebIdentity:c}=e;if(!c)throw new I(`Role Arn '${t}' needs to be assumed with web identity, but no role assumption callback was provided.`,!1);return c({RoleArn:t,RoleSessionName:n??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:s,ProviderId:r,PolicyArns:a,Policy:o,DurationSeconds:i})};var XI="AWS_WEB_IDENTITY_TOKEN_FILE",QI="AWS_ROLE_ARN",ZI="AWS_ROLE_SESSION_NAME",$r=(e={})=>async()=>eg(e),eg=e=>{let t=(e==null?void 0:e.webIdentityTokenFile)??process.env[XI],n=(e==null?void 0:e.roleArn)??process.env[QI],s=(e==null?void 0:e.roleSessionName)??process.env[ZI];if(!t||!n)throw new I("Web identity configuration not specified");return nu({...e,webIdentityToken:(0,su.readFileSync)(t,{encoding:"ascii"}),roleArn:n,roleSessionName:s})()};var ru=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,au=async(e,t)=>$r({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity})();var _r=async(e,t,n,s={})=>{let r=t[e];if(Object.keys(s).length>0&&go(r))return So(r);if(zl(r))return Ul(e,t,n,s);if(go(r))return So(r);if(ru(r))return au(r,n);if(Hl(r))return jl(n,e);if(Es(r))return tu(r);throw new I(`Profile ${e} could not be found or parsed in shared credentials file.`)};var ou=(e={})=>async()=>{let t=await St(e);return _r(ae(e),t,e)};var tg="AWS_EC2_METADATA_DISABLED",iu=e=>process.env[ps]||process.env[ys]?Cr(e):process.env[tg]?async()=>{throw new I("EC2 Instance Metadata Service access disabled")}:Rr(e);var Vr=(e={})=>yt(Js(...e.profile||process.env[ro]?[]:[pr()],Fr(e),ou(e),Ar(e),$r(e),iu(e),async()=>{throw new I("Could not load credentials from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);var hu="required",S="type",T="fn",C="argv",Pt="ref",Lt="properties",Ft="headers";var To="PartitionResult",ce="tree",$t="booleanEquals",F="stringEquals",wu="sigv4",Eu="us-east-1",Iu="sts",P="endpoint",gu="https://sts.{Region}.{PartitionResult#dnsSuffix}",_s="error",Co="getAttr",cu={[hu]:!1,[S]:"String"},xo={[hu]:!0,default:!1,[S]:"Boolean"},$={[Pt]:"Region"},Su={[Pt]:"UseFIPS"},xu={[Pt]:"UseDualStack"},du={[T]:"isSet",[C]:[{[Pt]:"Endpoint"}]},Tu={[Pt]:"Endpoint"},z={url:"https://sts.amazonaws.com",[Lt]:{authSchemes:[{name:wu,signingRegion:Eu,signingName:Iu}]},[Ft]:{}},qe={},lu={conditions:[{[T]:F,[C]:[$,"aws-global"]}],[P]:z,[S]:P},Cu={[T]:$t,[C]:[Su,!0]},Ru={[T]:$t,[C]:[xu,!0]},mu={[T]:$t,[C]:[!0,{[T]:Co,[C]:[{[Pt]:To},"supportsFIPS"]}]},_u={[Pt]:To},uu={[T]:$t,[C]:[!0,{[T]:Co,[C]:[_u,"supportsDualStack"]}]},fu={url:gu,[Lt]:{},[Ft]:{}},ng=[Tu],yu=[Cu],pu=[Ru],sg={version:"1.0",parameters:{Region:cu,UseDualStack:xo,UseFIPS:xo,Endpoint:cu,UseGlobalEndpoint:xo},rules:[{conditions:[{[T]:"aws.partition",[C]:[$],assign:To}],[S]:ce,rules:[{conditions:[{[T]:$t,[C]:[{[Pt]:"UseGlobalEndpoint"},!0]},{[T]:$t,[C]:[Su,!1]},{[T]:$t,[C]:[xu,!1]},{[T]:"not",[C]:[du]}],[S]:ce,rules:[{conditions:[{[T]:F,[C]:[$,"ap-northeast-1"]}],endpoint:z,[S]:P},{conditions:[{[T]:F,[C]:[$,"ap-south-1"]}],endpoint:z,[S]:P},{conditions:[{[T]:F,[C]:[$,"ap-southeast-1"]}],endpoint:z,[S]:P},{conditions:[{[T]:F,[C]:[$,"ap-southeast-2"]}],endpoint:z,[S]:P},lu,{conditions:[{[T]:F,[C]:[$,"ca-central-1"]}],endpoint:z,[S]:P},{conditions:[{[T]:F,[C]:[$,"eu-central-1"]}],endpoint:z,[S]:P},{conditions:[{[T]:F,[C]:[$,"eu-north-1"]}],endpoint:z,[S]:P},{conditions:[{[T]:F,[C]:[$,"eu-west-1"]}],endpoint:z,[S]:P},{conditions:[{[T]:F,[C]:[$,"eu-west-2"]}],endpoint:z,[S]:P},{conditions:[{[T]:F,[C]:[$,"eu-west-3"]}],endpoint:z,[S]:P},{conditions:[{[T]:F,[C]:[$,"sa-east-1"]}],endpoint:z,[S]:P},{conditions:[{[T]:F,[C]:[$,Eu]}],endpoint:z,[S]:P},{conditions:[{[T]:F,[C]:[$,"us-east-2"]}],endpoint:z,[S]:P},{conditions:[{[T]:F,[C]:[$,"us-west-1"]}],endpoint:z,[S]:P},{conditions:[{[T]:F,[C]:[$,"us-west-2"]}],endpoint:z,[S]:P},{endpoint:{url:gu,[Lt]:{authSchemes:[{name:wu,signingRegion:"{Region}",signingName:Iu}]},[Ft]:qe},[S]:P}]},{conditions:[du,{[T]:"parseURL",[C]:ng,assign:"url"}],[S]:ce,rules:[{conditions:yu,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[S]:_s},{[S]:ce,rules:[{conditions:pu,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[S]:_s},{endpoint:{url:Tu,[Lt]:qe,[Ft]:qe},[S]:P}]}]},{conditions:[Cu,Ru],[S]:ce,rules:[{conditions:[mu,uu],[S]:ce,rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[Lt]:qe,[Ft]:qe},[S]:P}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[S]:_s}]},{conditions:yu,[S]:ce,rules:[{conditions:[mu],[S]:ce,rules:[{[S]:ce,rules:[{conditions:[{[T]:F,[C]:["aws-us-gov",{[T]:Co,[C]:[_u,"name"]}]}],endpoint:fu,[S]:P},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",[Lt]:qe,[Ft]:qe},[S]:P}]}]},{error:"FIPS is enabled but this partition does not support FIPS",[S]:_s}]},{conditions:pu,[S]:ce,rules:[{conditions:[uu],[S]:ce,rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",[Lt]:qe,[Ft]:qe},[S]:P}]},{error:"DualStack is enabled but this partition does not support DualStack",[S]:_s}]},{[S]:ce,rules:[lu,{endpoint:fu,[S]:P}]}]}]},Au=sg;var vu=(e,t={})=>Et(Au,{endpointParams:e,logger:t.logger});var bu=e=>({apiVersion:"2011-06-15",base64Decoder:(e==null?void 0:e.base64Decoder)??_t,base64Encoder:(e==null?void 0:e.base64Encoder)??At,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??vu,logger:(e==null?void 0:e.logger)??new Ie,serviceId:(e==null?void 0:e.serviceId)??"STS",urlParser:(e==null?void 0:e.urlParser)??j,utf8Decoder:(e==null?void 0:e.utf8Decoder)??_e,utf8Encoder:(e==null?void 0:e.utf8Encoder)??pt});var Pu=e=>{et(process.version);let t=vt(e),n=()=>t().then(Ze),s=bu(e);return{...s,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Ct,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??ul(Vr),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Rt({serviceId:s.serviceId,clientVersion:dl.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??x(lt),region:(e==null?void 0:e.region)??x(Te,rt),requestHandler:(e==null?void 0:e.requestHandler)??new Pe(n),retryMode:(e==null?void 0:e.retryMode)??x({...ut,default:async()=>(await n()).retryMode||Re}),sha256:(e==null?void 0:e.sha256)??be.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??Tt,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??x(nt),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??x(st)}};var Vt=class extends ge{constructor(t){let n=Pu(t),s=cl(n),r=at(s),a=Xe(r),o=mt(a),i=o,c=il(i,{stsClientCtor:Vt}),d=ht(c);super(d),this.config=d,this.middlewareStack.use(ft(this.config)),this.middlewareStack.use(ot(this.config)),this.middlewareStack.use(it(this.config)),this.middlewareStack.use(ct(this.config)),this.middlewareStack.use(dt(this.config)),this.middlewareStack.use(It(this.config))}destroy(){super.destroy()}};var Nu=(e,t)=>t?class extends e{constructor(s){super(s);for(let r of t)this.middlewareStack.use(r)}}:e,rg=(e={},t)=>no(e,Nu(Vt,t)),ag=(e={},t)=>so(e,Nu(Vt,t)),Ou=e=>t=>e({roleAssumer:rg(t),roleAssumerWithWebIdentity:ag(t),...t});var Wu="required",pe="fn",he="argv",Yn="ref",Du="isSet",G="tree",Kn="error",Jn="endpoint",Ro="PartitionResult",_o="getAttr",Mu={[Wu]:!1,type:"String"},ku={[Wu]:!0,default:!1,type:"Boolean"},Lu={[Yn]:"Endpoint"},Bu={[pe]:"booleanEquals",[he]:[{[Yn]:"UseFIPS"},!0]},Gu={[pe]:"booleanEquals",[he]:[{[Yn]:"UseDualStack"},!0]},de={},Fu={[pe]:"booleanEquals",[he]:[!0,{[pe]:_o,[he]:[{[Yn]:Ro},"supportsFIPS"]}]},qu={[Yn]:Ro},$u={[pe]:"booleanEquals",[he]:[!0,{[pe]:_o,[he]:[qu,"supportsDualStack"]}]},Vu=[Bu],zu=[Gu],Uu=[{[Yn]:"Region"}],og={version:"1.0",parameters:{Region:Mu,UseDualStack:ku,UseFIPS:ku,Endpoint:Mu},rules:[{conditions:[{[pe]:Du,[he]:[Lu]}],type:G,rules:[{conditions:Vu,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Kn},{type:G,rules:[{conditions:zu,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Kn},{endpoint:{url:Lu,properties:de,headers:de},type:Jn}]}]},{type:G,rules:[{conditions:[{[pe]:Du,[he]:Uu}],type:G,rules:[{conditions:[{[pe]:"aws.partition",[he]:Uu,assign:Ro}],type:G,rules:[{conditions:[Bu,Gu],type:G,rules:[{conditions:[Fu,$u],type:G,rules:[{type:G,rules:[{endpoint:{url:"https://ssm-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:de,headers:de},type:Jn}]}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Kn}]},{conditions:Vu,type:G,rules:[{conditions:[Fu],type:G,rules:[{type:G,rules:[{conditions:[{[pe]:"stringEquals",[he]:["aws-us-gov",{[pe]:_o,[he]:[qu,"name"]}]}],endpoint:{url:"https://ssm.{Region}.amazonaws.com",properties:de,headers:de},type:Jn},{endpoint:{url:"https://ssm-fips.{Region}.{PartitionResult#dnsSuffix}",properties:de,headers:de},type:Jn}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Kn}]},{conditions:zu,type:G,rules:[{conditions:[$u],type:G,rules:[{type:G,rules:[{endpoint:{url:"https://ssm.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:de,headers:de},type:Jn}]}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Kn}]},{type:G,rules:[{endpoint:{url:"https://ssm.{Region}.{PartitionResult#dnsSuffix}",properties:de,headers:de},type:Jn}]}]}]},{error:"Invalid Configuration: Missing Region",type:Kn}]}]},Hu=og;var ju=(e,t={})=>Et(Hu,{endpointParams:e,logger:t.logger});var Ku=e=>({apiVersion:"2014-11-06",base64Decoder:(e==null?void 0:e.base64Decoder)??_t,base64Encoder:(e==null?void 0:e.base64Encoder)??At,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??ju,logger:(e==null?void 0:e.logger)??new Ie,serviceId:(e==null?void 0:e.serviceId)??"SSM",urlParser:(e==null?void 0:e.urlParser)??j,utf8Decoder:(e==null?void 0:e.utf8Decoder)??_e,utf8Encoder:(e==null?void 0:e.utf8Encoder)??pt});var Ju=e=>{et(process.version);let t=vt(e),n=()=>t().then(Ze),s=Ku(e);return{...s,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Ct,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??Ou(Vr),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Rt({serviceId:s.serviceId,clientVersion:ud.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??x(lt),region:(e==null?void 0:e.region)??x(Te,rt),requestHandler:(e==null?void 0:e.requestHandler)??new Pe(n),retryMode:(e==null?void 0:e.retryMode)??x({...ut,default:async()=>(await n()).retryMode||Re}),sha256:(e==null?void 0:e.sha256)??be.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??Tt,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??x(nt),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??x(st)}};var zr=class extends ge{constructor(t){let n=Ju(t),s=md(n),r=at(s),a=Xe(r),o=mt(a),i=o,c=ar(i),d=ht(c);super(d),this.config=d,this.middlewareStack.use(ft(this.config)),this.middlewareStack.use(ot(this.config)),this.middlewareStack.use(it(this.config)),this.middlewareStack.use(ct(this.config)),this.middlewareStack.use(dt(this.config)),this.middlewareStack.use(ir(this.config)),this.middlewareStack.use(It(this.config))}destroy(){super.destroy()}};var Ao="\x1B[38;5;6m",vo="\x1B[38;2;255;0;0m",Yu=new zr({});async function ig(){var e;try{let t=(0,v.getInput)("command",{required:!0}),n=(0,v.getInput)("instance-id")||process.env.SSM_COMMAND_INSTANCE_ID,s=(0,v.getBooleanInput)("powershell");if(n===void 0){(0,v.setFailed)(Error("An instance ID must be provided."));return}let r=await Yu.send(new ln({DocumentName:s?"AWS-RunPowerShellScript":"AWS-RunShellScript",InstanceIds:[n],Parameters:{commands:[t]}}));(0,v.debug)(`SendCommandOutput: ${JSON.stringify(r,null,2)}`);let a=(e=r.Command)==null?void 0:e.CommandId;if(r.$metadata.httpStatusCode!==200||!a)return;(0,v.info)("Waiting for remote command invocation to complete...");let o=await Xu(n,a);o!==void 0&&(0,v.setOutput)("exit-code",o),(0,v.info)(`Remote command invocation has completed with exit code: ${o}`)}catch(t){t instanceof Error&&(0,v.setFailed)(t)}}async function Xu(e,t){await cg(5);let n=await Yu.send(new dn({InstanceId:e,CommandId:t}));return(0,v.debug)(`GetCommandInvocationOutput: ${JSON.stringify(n,null,2)}`),["Failed","Cancelled","TimedOut"].includes(n.Status??"")?((0,v.info)(`Remote command invocation ended unexpectedly with status: "${n.Status}". Standard error content is printed below.`),(0,v.info)(vo+"----- BEGIN STDERR CONTENT -----"),(0,v.info)(vo+(n.StandardErrorContent??"").trim()),(0,v.info)(vo+"----- END STDERR CONTENT -----"),n.ResponseCode??-1):n.Status==="Success"?((0,v.info)("Remote command invocation completed successfully. Standard output content is printed below."),(0,v.info)(Ao+"----- BEGIN STDOUT CONTENT -----"),(0,v.info)(Ao+(n.StandardOutputContent??"").trim()),(0,v.info)(Ao+"----- END STDOUT CONTENT -----"),n.ResponseCode??-1):((0,v.info)("Still waiting..."),Xu(e,t))}function cg(e){return new Promise(t=>setTimeout(t,e*1e3))}ig();
