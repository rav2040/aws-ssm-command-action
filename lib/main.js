"use strict";var sf=Object.create;var bs=Object.defineProperty;var rf=Object.getOwnPropertyDescriptor;var of=Object.getOwnPropertyNames;var af=Object.getPrototypeOf,cf=Object.prototype.hasOwnProperty;var U=(e,t)=>()=>(e&&(t=e(e=0)),t);var A=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Gr=(e,t)=>{for(var n in t)bs(e,n,{get:t[n],enumerable:!0})},Pa=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of of(t))!cf.call(e,r)&&r!==n&&bs(e,r,{get:()=>t[r],enumerable:!(s=rf(t,r))||s.enumerable});return e};var Ut=(e,t,n)=>(n=e!=null?sf(af(e)):{},Pa(t||!e||!e.__esModule?bs(n,"default",{value:e,enumerable:!0}):n,e)),df=e=>Pa(bs({},"__esModule",{value:!0}),e);var vs=A(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.toCommandProperties=Bt.toCommandValue=void 0;function lf(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}Bt.toCommandValue=lf;function mf(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}Bt.toCommandProperties=mf});var Ma=A(Q=>{"use strict";var uf=Q&&Q.__createBinding||(Object.create?function(e,t,n,s){s===void 0&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){s===void 0&&(s=n),e[s]=t[n]}),ff=Q&&Q.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),yf=Q&&Q.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&uf(t,e,n);return ff(t,e),t};Object.defineProperty(Q,"__esModule",{value:!0});Q.issue=Q.issueCommand=void 0;var pf=yf(require("os")),Oa=vs();function Da(e,t,n){let s=new qr(e,t,n);process.stdout.write(s.toString()+pf.EOL)}Q.issueCommand=Da;function hf(e,t=""){Da(e,{},t)}Q.issue=hf;var Na="::",qr=class{constructor(t,n,s){t||(t="missing.command"),this.command=t,this.properties=n,this.message=s}toString(){let t=Na+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let n=!0;for(let s in this.properties)if(this.properties.hasOwnProperty(s)){let r=this.properties[s];r&&(n?n=!1:t+=",",t+=`${s}=${Ef(r)}`)}}return t+=`${Na}${wf(this.message)}`,t}};function wf(e){return Oa.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function Ef(e){return Oa.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});function Zn(){return Ps>Ns.length-16&&(ka.default.randomFillSync(Ns),Ps=0),Ns.slice(Ps,Ps+=16)}var ka,Ns,Ps,Hr=U(()=>{ka=Ut(require("crypto")),Ns=new Uint8Array(256),Ps=Ns.length});var La,Fa=U(()=>{La=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function If(e){return typeof e=="string"&&La.test(e)}var je,es=U(()=>{Fa();je=If});function gf(e,t=0){let n=(k[e[t+0]]+k[e[t+1]]+k[e[t+2]]+k[e[t+3]]+"-"+k[e[t+4]]+k[e[t+5]]+"-"+k[e[t+6]]+k[e[t+7]]+"-"+k[e[t+8]]+k[e[t+9]]+"-"+k[e[t+10]]+k[e[t+11]]+k[e[t+12]]+k[e[t+13]]+k[e[t+14]]+k[e[t+15]]).toLowerCase();if(!je(n))throw TypeError("Stringified UUID is invalid");return n}var k,Ke,ts=U(()=>{es();k=[];for(let e=0;e<256;++e)k.push((e+256).toString(16).substr(1));Ke=gf});function Sf(e,t,n){let s=t&&n||0,r=t||new Array(16);e=e||{};let o=e.node||$a,a=e.clockseq!==void 0?e.clockseq:jr;if(o==null||a==null){let u=e.random||(e.rng||Zn)();o==null&&(o=$a=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),a==null&&(a=jr=(u[6]<<8|u[7])&16383)}let i=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:Jr+1,d=i-Kr+(c-Jr)/1e4;if(d<0&&e.clockseq===void 0&&(a=a+1&16383),(d<0||i>Kr)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Kr=i,Jr=c,jr=a,i+=122192928e5;let l=((i&268435455)*1e4+c)%4294967296;r[s++]=l>>>24&255,r[s++]=l>>>16&255,r[s++]=l>>>8&255,r[s++]=l&255;let m=i/4294967296*1e4&268435455;r[s++]=m>>>8&255,r[s++]=m&255,r[s++]=m>>>24&15|16,r[s++]=m>>>16&255,r[s++]=a>>>8|128,r[s++]=a&255;for(let u=0;u<6;++u)r[s+u]=o[u];return t||Ke(r)}var $a,jr,Kr,Jr,Va,za=U(()=>{Hr();ts();Kr=0,Jr=0;Va=Sf});function xf(e){if(!je(e))throw TypeError("Invalid UUID");let t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=t&255,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=t&255,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=t&255,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=t&255,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=t&255,n}var Os,Yr=U(()=>{es();Os=xf});function Tf(e){e=unescape(encodeURIComponent(e));let t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}function Ds(e,t,n){function s(r,o,a,i){if(typeof r=="string"&&(r=Tf(r)),typeof o=="string"&&(o=Os(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+r.length);if(c.set(o),c.set(r,o.length),c=n(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,a){i=i||0;for(let d=0;d<16;++d)a[i+d]=c[d];return a}return Ke(c)}try{s.name=e}catch{}return s.DNS=Cf,s.URL=_f,s}var Cf,_f,Xr=U(()=>{ts();Yr();Cf="6ba7b810-9dad-11d1-80b4-00c04fd430c8",_f="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function Rf(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Ua.default.createHash("md5").update(e).digest()}var Ua,Ba,Wa=U(()=>{Ua=Ut(require("crypto"));Ba=Rf});var Af,Ga,qa=U(()=>{Xr();Wa();Af=Ds("v3",48,Ba),Ga=Af});function bf(e,t,n){e=e||{};let s=e.random||(e.rng||Zn)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){n=n||0;for(let r=0;r<16;++r)t[n+r]=s[r];return t}return Ke(s)}var Ms,Ha=U(()=>{Hr();ts();Ms=bf});function vf(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),ja.default.createHash("sha1").update(e).digest()}var ja,Ka,Ja=U(()=>{ja=Ut(require("crypto"));Ka=vf});var Pf,Ya,Xa=U(()=>{Xr();Ja();Pf=Ds("v5",80,Ka),Ya=Pf});var Qa,Za=U(()=>{Qa="00000000-0000-0000-0000-000000000000"});function Nf(e){if(!je(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var ei,ti=U(()=>{es();ei=Nf});var ni={};Gr(ni,{NIL:()=>Qa,parse:()=>Os,stringify:()=>Ke,v1:()=>Va,v3:()=>Ga,v4:()=>Ms,v5:()=>Ya,validate:()=>je,version:()=>ei});var Qr=U(()=>{za();qa();Ha();Xa();Za();ti();es();ts();Yr()});var ai=A(Z=>{"use strict";var Of=Z&&Z.__createBinding||(Object.create?function(e,t,n,s){s===void 0&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){s===void 0&&(s=n),e[s]=t[n]}),Df=Z&&Z.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ri=Z&&Z.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&Of(t,e,n);return Df(t,e),t};Object.defineProperty(Z,"__esModule",{value:!0});Z.prepareKeyValueMessage=Z.issueFileCommand=void 0;var si=ri(require("fs")),Zr=ri(require("os")),Mf=(Qr(),df(ni)),oi=vs();function kf(e,t){let n=process.env[`GITHUB_${e}`];if(!n)throw new Error(`Unable to find environment variable for file command ${e}`);if(!si.existsSync(n))throw new Error(`Missing file at path: ${n}`);si.appendFileSync(n,`${oi.toCommandValue(t)}${Zr.EOL}`,{encoding:"utf8"})}Z.issueFileCommand=kf;function Lf(e,t){let n=`ghadelimiter_${Mf.v4()}`,s=oi.toCommandValue(t);if(e.includes(n))throw new Error(`Unexpected input: name should not contain the delimiter "${n}"`);if(s.includes(n))throw new Error(`Unexpected input: value should not contain the delimiter "${n}"`);return`${e}<<${n}${Zr.EOL}${s}${Zr.EOL}${n}`}Z.prepareKeyValueMessage=Lf});var ci=A(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.checkBypass=Wt.getProxyUrl=void 0;function Ff(e){let t=e.protocol==="https:";if(ii(e))return;let n=(()=>t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(n)return new URL(n)}Wt.getProxyUrl=Ff;function ii(e){if(!e.hostname)return!1;let t=e.hostname;if($f(t))return!0;let n=process.env.no_proxy||process.env.NO_PROXY||"";if(!n)return!1;let s;e.port?s=Number(e.port):e.protocol==="http:"?s=80:e.protocol==="https:"&&(s=443);let r=[e.hostname.toUpperCase()];typeof s=="number"&&r.push(`${r[0]}:${s}`);for(let o of n.split(",").map(a=>a.trim().toUpperCase()).filter(a=>a))if(o==="*"||r.some(a=>a===o||a.endsWith(`.${o}`)||o.startsWith(".")&&a.endsWith(`${o}`)))return!0;return!1}Wt.checkBypass=ii;function $f(e){let t=e.toLowerCase();return t==="localhost"||t.startsWith("127.")||t.startsWith("[::1]")||t.startsWith("[0:0:0:0:0:0:0:1]")}});var ui=A(Gt=>{"use strict";var sS=require("net"),Vf=require("tls"),eo=require("http"),di=require("https"),zf=require("events"),rS=require("assert"),Uf=require("util");Gt.httpOverHttp=Bf;Gt.httpsOverHttp=Wf;Gt.httpOverHttps=Gf;Gt.httpsOverHttps=qf;function Bf(e){var t=new Le(e);return t.request=eo.request,t}function Wf(e){var t=new Le(e);return t.request=eo.request,t.createSocket=li,t.defaultPort=443,t}function Gf(e){var t=new Le(e);return t.request=di.request,t}function qf(e){var t=new Le(e);return t.request=di.request,t.createSocket=li,t.defaultPort=443,t}function Le(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||eo.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(s,r,o,a){for(var i=mi(r,o,a),c=0,d=t.requests.length;c<d;++c){var l=t.requests[c];if(l.host===i.host&&l.port===i.port){t.requests.splice(c,1),l.request.onSocket(s);return}}s.destroy(),t.removeSocket(s)})}Uf.inherits(Le,zf.EventEmitter);Le.prototype.addRequest=function(t,n,s,r){var o=this,a=to({request:t},o.options,mi(n,s,r));if(o.sockets.length>=this.maxSockets){o.requests.push(a);return}o.createSocket(a,function(i){i.on("free",c),i.on("close",d),i.on("agentRemove",d),t.onSocket(i);function c(){o.emit("free",i,a)}function d(l){o.removeSocket(i),i.removeListener("free",c),i.removeListener("close",d),i.removeListener("agentRemove",d)}})};Le.prototype.createSocket=function(t,n){var s=this,r={};s.sockets.push(r);var o=to({},s.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(o.localAddress=t.localAddress),o.proxyAuth&&(o.headers=o.headers||{},o.headers["Proxy-Authorization"]="Basic "+new Buffer(o.proxyAuth).toString("base64")),Je("making CONNECT request");var a=s.request(o);a.useChunkedEncodingByDefault=!1,a.once("response",i),a.once("upgrade",c),a.once("connect",d),a.once("error",l),a.end();function i(m){m.upgrade=!0}function c(m,u,y){process.nextTick(function(){d(m,u,y)})}function d(m,u,y){if(a.removeAllListeners(),u.removeAllListeners(),m.statusCode!==200){Je("tunneling socket could not be established, statusCode=%d",m.statusCode),u.destroy();var p=new Error("tunneling socket could not be established, statusCode="+m.statusCode);p.code="ECONNRESET",t.request.emit("error",p),s.removeSocket(r);return}if(y.length>0){Je("got illegal response body from proxy"),u.destroy();var p=new Error("got illegal response body from proxy");p.code="ECONNRESET",t.request.emit("error",p),s.removeSocket(r);return}return Je("tunneling connection has established"),s.sockets[s.sockets.indexOf(r)]=u,n(u)}function l(m){a.removeAllListeners(),Je(`tunneling socket could not be established, cause=%s
`,m.message,m.stack);var u=new Error("tunneling socket could not be established, cause="+m.message);u.code="ECONNRESET",t.request.emit("error",u),s.removeSocket(r)}};Le.prototype.removeSocket=function(t){var n=this.sockets.indexOf(t);if(n!==-1){this.sockets.splice(n,1);var s=this.requests.shift();s&&this.createSocket(s,function(r){s.request.onSocket(r)})}};function li(e,t){var n=this;Le.prototype.createSocket.call(n,e,function(s){var r=e.request.getHeader("host"),o=to({},n.options,{socket:s,servername:r?r.replace(/:.*$/,""):e.host}),a=Vf.connect(0,o);n.sockets[n.sockets.indexOf(s)]=a,t(a)})}function mi(e,t,n){return typeof e=="string"?{host:e,port:t,localAddress:n}:e}function to(e){for(var t=1,n=arguments.length;t<n;++t){var s=arguments[t];if(typeof s=="object")for(var r=Object.keys(s),o=0,a=r.length;o<a;++o){var i=r[o];s[i]!==void 0&&(e[i]=s[i])}}return e}var Je;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?Je=function(){var e=Array.prototype.slice.call(arguments);typeof e[0]=="string"?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:Je=function(){};Gt.debug=Je});var yi=A((aS,fi)=>{fi.exports=ui()});var hi=A(_=>{"use strict";var Hf=_&&_.__createBinding||(Object.create?function(e,t,n,s){s===void 0&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){s===void 0&&(s=n),e[s]=t[n]}),jf=_&&_.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Vs=_&&_.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&Hf(t,e,n);return jf(t,e),t},D=_&&_.__awaiter||function(e,t,n,s){function r(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function i(l){try{d(s.next(l))}catch(m){a(m)}}function c(l){try{d(s.throw(l))}catch(m){a(m)}}function d(l){l.done?o(l.value):r(l.value).then(i,c)}d((s=s.apply(e,t||[])).next())})};Object.defineProperty(_,"__esModule",{value:!0});_.HttpClient=_.isHttps=_.HttpClientResponse=_.HttpClientError=_.getProxyUrl=_.MediaTypes=_.Headers=_.HttpCodes=void 0;var ks=Vs(require("http")),no=Vs(require("https")),pi=Vs(ci()),Ls=Vs(yi()),me;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})(me=_.HttpCodes||(_.HttpCodes={}));var B;(function(e){e.Accept="accept",e.ContentType="content-type"})(B=_.Headers||(_.Headers={}));var Ye;(function(e){e.ApplicationJson="application/json"})(Ye=_.MediaTypes||(_.MediaTypes={}));function Kf(e){let t=pi.getProxyUrl(new URL(e));return t?t.href:""}_.getProxyUrl=Kf;var Jf=[me.MovedPermanently,me.ResourceMoved,me.SeeOther,me.TemporaryRedirect,me.PermanentRedirect],Yf=[me.BadGateway,me.ServiceUnavailable,me.GatewayTimeout],Xf=["OPTIONS","GET","DELETE","HEAD"],Qf=10,Zf=5,qt=class extends Error{constructor(t,n){super(t),this.name="HttpClientError",this.statusCode=n,Object.setPrototypeOf(this,qt.prototype)}};_.HttpClientError=qt;var $s=class{constructor(t){this.message=t}readBody(){return D(this,void 0,void 0,function*(){return new Promise(t=>D(this,void 0,void 0,function*(){let n=Buffer.alloc(0);this.message.on("data",s=>{n=Buffer.concat([n,s])}),this.message.on("end",()=>{t(n.toString())})}))})}};_.HttpClientResponse=$s;function ey(e){return new URL(e).protocol==="https:"}_.isHttps=ey;var so=class{constructor(t,n,s){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=n||[],this.requestOptions=s,s&&(s.ignoreSslError!=null&&(this._ignoreSslError=s.ignoreSslError),this._socketTimeout=s.socketTimeout,s.allowRedirects!=null&&(this._allowRedirects=s.allowRedirects),s.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=s.allowRedirectDowngrade),s.maxRedirects!=null&&(this._maxRedirects=Math.max(s.maxRedirects,0)),s.keepAlive!=null&&(this._keepAlive=s.keepAlive),s.allowRetries!=null&&(this._allowRetries=s.allowRetries),s.maxRetries!=null&&(this._maxRetries=s.maxRetries))}options(t,n){return D(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,n||{})})}get(t,n){return D(this,void 0,void 0,function*(){return this.request("GET",t,null,n||{})})}del(t,n){return D(this,void 0,void 0,function*(){return this.request("DELETE",t,null,n||{})})}post(t,n,s){return D(this,void 0,void 0,function*(){return this.request("POST",t,n,s||{})})}patch(t,n,s){return D(this,void 0,void 0,function*(){return this.request("PATCH",t,n,s||{})})}put(t,n,s){return D(this,void 0,void 0,function*(){return this.request("PUT",t,n,s||{})})}head(t,n){return D(this,void 0,void 0,function*(){return this.request("HEAD",t,null,n||{})})}sendStream(t,n,s,r){return D(this,void 0,void 0,function*(){return this.request(t,n,s,r)})}getJson(t,n={}){return D(this,void 0,void 0,function*(){n[B.Accept]=this._getExistingOrDefaultHeader(n,B.Accept,Ye.ApplicationJson);let s=yield this.get(t,n);return this._processResponse(s,this.requestOptions)})}postJson(t,n,s={}){return D(this,void 0,void 0,function*(){let r=JSON.stringify(n,null,2);s[B.Accept]=this._getExistingOrDefaultHeader(s,B.Accept,Ye.ApplicationJson),s[B.ContentType]=this._getExistingOrDefaultHeader(s,B.ContentType,Ye.ApplicationJson);let o=yield this.post(t,r,s);return this._processResponse(o,this.requestOptions)})}putJson(t,n,s={}){return D(this,void 0,void 0,function*(){let r=JSON.stringify(n,null,2);s[B.Accept]=this._getExistingOrDefaultHeader(s,B.Accept,Ye.ApplicationJson),s[B.ContentType]=this._getExistingOrDefaultHeader(s,B.ContentType,Ye.ApplicationJson);let o=yield this.put(t,r,s);return this._processResponse(o,this.requestOptions)})}patchJson(t,n,s={}){return D(this,void 0,void 0,function*(){let r=JSON.stringify(n,null,2);s[B.Accept]=this._getExistingOrDefaultHeader(s,B.Accept,Ye.ApplicationJson),s[B.ContentType]=this._getExistingOrDefaultHeader(s,B.ContentType,Ye.ApplicationJson);let o=yield this.patch(t,r,s);return this._processResponse(o,this.requestOptions)})}request(t,n,s,r){return D(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let o=new URL(n),a=this._prepareRequest(t,o,r),i=this._allowRetries&&Xf.includes(t)?this._maxRetries+1:1,c=0,d;do{if(d=yield this.requestRaw(a,s),d&&d.message&&d.message.statusCode===me.Unauthorized){let m;for(let u of this.handlers)if(u.canHandleAuthentication(d)){m=u;break}return m?m.handleAuthentication(this,a,s):d}let l=this._maxRedirects;for(;d.message.statusCode&&Jf.includes(d.message.statusCode)&&this._allowRedirects&&l>0;){let m=d.message.headers.location;if(!m)break;let u=new URL(m);if(o.protocol==="https:"&&o.protocol!==u.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield d.readBody(),u.hostname!==o.hostname)for(let y in r)y.toLowerCase()==="authorization"&&delete r[y];a=this._prepareRequest(t,u,r),d=yield this.requestRaw(a,s),l--}if(!d.message.statusCode||!Yf.includes(d.message.statusCode))return d;c+=1,c<i&&(yield d.readBody(),yield this._performExponentialBackoff(c))}while(c<i);return d})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,n){return D(this,void 0,void 0,function*(){return new Promise((s,r)=>{function o(a,i){a?r(a):i?s(i):r(new Error("Unknown error"))}this.requestRawWithCallback(t,n,o)})})}requestRawWithCallback(t,n,s){typeof n=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(n,"utf8"));let r=!1;function o(c,d){r||(r=!0,s(c,d))}let a=t.httpModule.request(t.options,c=>{let d=new $s(c);o(void 0,d)}),i;a.on("socket",c=>{i=c}),a.setTimeout(this._socketTimeout||3*6e4,()=>{i&&i.end(),o(new Error(`Request timeout: ${t.options.path}`))}),a.on("error",function(c){o(c)}),n&&typeof n=="string"&&a.write(n,"utf8"),n&&typeof n!="string"?(n.on("close",function(){a.end()}),n.pipe(a)):a.end()}getAgent(t){let n=new URL(t);return this._getAgent(n)}_prepareRequest(t,n,s){let r={};r.parsedUrl=n;let o=r.parsedUrl.protocol==="https:";r.httpModule=o?no:ks;let a=o?443:80;if(r.options={},r.options.host=r.parsedUrl.hostname,r.options.port=r.parsedUrl.port?parseInt(r.parsedUrl.port):a,r.options.path=(r.parsedUrl.pathname||"")+(r.parsedUrl.search||""),r.options.method=t,r.options.headers=this._mergeHeaders(s),this.userAgent!=null&&(r.options.headers["user-agent"]=this.userAgent),r.options.agent=this._getAgent(r.parsedUrl),this.handlers)for(let i of this.handlers)i.prepareRequest(r.options);return r}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},Fs(this.requestOptions.headers),Fs(t||{})):Fs(t||{})}_getExistingOrDefaultHeader(t,n,s){let r;return this.requestOptions&&this.requestOptions.headers&&(r=Fs(this.requestOptions.headers)[n]),t[n]||r||s}_getAgent(t){let n,s=pi.getProxyUrl(t),r=s&&s.hostname;if(this._keepAlive&&r&&(n=this._proxyAgent),this._keepAlive&&!r&&(n=this._agent),n)return n;let o=t.protocol==="https:",a=100;if(this.requestOptions&&(a=this.requestOptions.maxSockets||ks.globalAgent.maxSockets),s&&s.hostname){let i={maxSockets:a,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(s.username||s.password)&&{proxyAuth:`${s.username}:${s.password}`}),{host:s.hostname,port:s.port})},c,d=s.protocol==="https:";o?c=d?Ls.httpsOverHttps:Ls.httpsOverHttp:c=d?Ls.httpOverHttps:Ls.httpOverHttp,n=c(i),this._proxyAgent=n}if(this._keepAlive&&!n){let i={keepAlive:this._keepAlive,maxSockets:a};n=o?new no.Agent(i):new ks.Agent(i),this._agent=n}return n||(n=o?no.globalAgent:ks.globalAgent),o&&this._ignoreSslError&&(n.options=Object.assign(n.options||{},{rejectUnauthorized:!1})),n}_performExponentialBackoff(t){return D(this,void 0,void 0,function*(){t=Math.min(Qf,t);let n=Zf*Math.pow(2,t);return new Promise(s=>setTimeout(()=>s(),n))})}_processResponse(t,n){return D(this,void 0,void 0,function*(){return new Promise((s,r)=>D(this,void 0,void 0,function*(){let o=t.message.statusCode||0,a={statusCode:o,result:null,headers:{}};o===me.NotFound&&s(a);function i(l,m){if(typeof m=="string"){let u=new Date(m);if(!isNaN(u.valueOf()))return u}return m}let c,d;try{d=yield t.readBody(),d&&d.length>0&&(n&&n.deserializeDates?c=JSON.parse(d,i):c=JSON.parse(d),a.result=c),a.headers=t.message.headers}catch{}if(o>299){let l;c&&c.message?l=c.message:d&&d.length>0?l=d:l=`Failed request: (${o})`;let m=new qt(l,o);m.result=a.result,r(m)}else s(a)}))})}};_.HttpClient=so;var Fs=e=>Object.keys(e).reduce((t,n)=>(t[n.toLowerCase()]=e[n],t),{})});var wi=A(Ee=>{"use strict";var io=Ee&&Ee.__awaiter||function(e,t,n,s){function r(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function i(l){try{d(s.next(l))}catch(m){a(m)}}function c(l){try{d(s.throw(l))}catch(m){a(m)}}function d(l){l.done?o(l.value):r(l.value).then(i,c)}d((s=s.apply(e,t||[])).next())})};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.PersonalAccessTokenCredentialHandler=Ee.BearerCredentialHandler=Ee.BasicCredentialHandler=void 0;var ro=class{constructor(t,n){this.username=t,this.password=n}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return io(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Ee.BasicCredentialHandler=ro;var oo=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return io(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Ee.BearerCredentialHandler=oo;var ao=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return io(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Ee.PersonalAccessTokenCredentialHandler=ao});var gi=A(Ht=>{"use strict";var Ei=Ht&&Ht.__awaiter||function(e,t,n,s){function r(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function i(l){try{d(s.next(l))}catch(m){a(m)}}function c(l){try{d(s.throw(l))}catch(m){a(m)}}function d(l){l.done?o(l.value):r(l.value).then(i,c)}d((s=s.apply(e,t||[])).next())})};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.OidcClient=void 0;var ty=hi(),ny=wi(),Ii=co(),Xe=class{static createHttpClient(t=!0,n=10){let s={allowRetries:t,maxRetries:n};return new ty.HttpClient("actions/oidc-client",[new ny.BearerCredentialHandler(Xe.getRequestToken())],s)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var n;return Ei(this,void 0,void 0,function*(){let o=(n=(yield Xe.createHttpClient().getJson(t).catch(a=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${a.statusCode}
 
        Error Message: ${a.result.message}`)})).result)===null||n===void 0?void 0:n.value;if(!o)throw new Error("Response json body do not have ID Token field");return o})}static getIDToken(t){return Ei(this,void 0,void 0,function*(){try{let n=Xe.getIDTokenUrl();if(t){let r=encodeURIComponent(t);n=`${n}&audience=${r}`}Ii.debug(`ID token url is ${n}`);let s=yield Xe.getCall(n);return Ii.setSecret(s),s}catch(n){throw new Error(`Error message: ${n.message}`)}})}};Ht.OidcClient=Xe});var fo=A(q=>{"use strict";var lo=q&&q.__awaiter||function(e,t,n,s){function r(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function i(l){try{d(s.next(l))}catch(m){a(m)}}function c(l){try{d(s.throw(l))}catch(m){a(m)}}function d(l){l.done?o(l.value):r(l.value).then(i,c)}d((s=s.apply(e,t||[])).next())})};Object.defineProperty(q,"__esModule",{value:!0});q.summary=q.markdownSummary=q.SUMMARY_DOCS_URL=q.SUMMARY_ENV_VAR=void 0;var sy=require("os"),mo=require("fs"),{access:ry,appendFile:oy,writeFile:ay}=mo.promises;q.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";q.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var uo=class{constructor(){this._buffer=""}filePath(){return lo(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[q.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${q.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield ry(t,mo.constants.R_OK|mo.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,n,s={}){let r=Object.entries(s).map(([o,a])=>` ${o}="${a}"`).join("");return n?`<${t}${r}>${n}</${t}>`:`<${t}${r}>`}write(t){return lo(this,void 0,void 0,function*(){let n=!!(t!=null&&t.overwrite),s=yield this.filePath();return yield(n?ay:oy)(s,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return lo(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,n=!1){return this._buffer+=t,n?this.addEOL():this}addEOL(){return this.addRaw(sy.EOL)}addCodeBlock(t,n){let s=Object.assign({},n&&{lang:n}),r=this.wrap("pre",this.wrap("code",t),s);return this.addRaw(r).addEOL()}addList(t,n=!1){let s=n?"ol":"ul",r=t.map(a=>this.wrap("li",a)).join(""),o=this.wrap(s,r);return this.addRaw(o).addEOL()}addTable(t){let n=t.map(r=>{let o=r.map(a=>{if(typeof a=="string")return this.wrap("td",a);let{header:i,data:c,colspan:d,rowspan:l}=a,m=i?"th":"td",u=Object.assign(Object.assign({},d&&{colspan:d}),l&&{rowspan:l});return this.wrap(m,c,u)}).join("");return this.wrap("tr",o)}).join(""),s=this.wrap("table",n);return this.addRaw(s).addEOL()}addDetails(t,n){let s=this.wrap("details",this.wrap("summary",t)+n);return this.addRaw(s).addEOL()}addImage(t,n,s){let{width:r,height:o}=s||{},a=Object.assign(Object.assign({},r&&{width:r}),o&&{height:o}),i=this.wrap("img",null,Object.assign({src:t,alt:n},a));return this.addRaw(i).addEOL()}addHeading(t,n){let s=`h${n}`,r=["h1","h2","h3","h4","h5","h6"].includes(s)?s:"h1",o=this.wrap(r,t);return this.addRaw(o).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,n){let s=Object.assign({},n&&{cite:n}),r=this.wrap("blockquote",t,s);return this.addRaw(r).addEOL()}addLink(t,n){let s=this.wrap("a",t,{href:n});return this.addRaw(s).addEOL()}},Si=new uo;q.markdownSummary=Si;q.summary=Si});var xi=A(H=>{"use strict";var iy=H&&H.__createBinding||(Object.create?function(e,t,n,s){s===void 0&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){s===void 0&&(s=n),e[s]=t[n]}),cy=H&&H.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),dy=H&&H.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&iy(t,e,n);return cy(t,e),t};Object.defineProperty(H,"__esModule",{value:!0});H.toPlatformPath=H.toWin32Path=H.toPosixPath=void 0;var ly=dy(require("path"));function my(e){return e.replace(/[\\]/g,"/")}H.toPosixPath=my;function uy(e){return e.replace(/[/]/g,"\\")}H.toWin32Path=uy;function fy(e){return e.replace(/[/\\]/g,ly.sep)}H.toPlatformPath=fy});var co=A(w=>{"use strict";var yy=w&&w.__createBinding||(Object.create?function(e,t,n,s){s===void 0&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){s===void 0&&(s=n),e[s]=t[n]}),py=w&&w.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ti=w&&w.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&yy(t,e,n);return py(t,e),t},Ci=w&&w.__awaiter||function(e,t,n,s){function r(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function i(l){try{d(s.next(l))}catch(m){a(m)}}function c(l){try{d(s.throw(l))}catch(m){a(m)}}function d(l){l.done?o(l.value):r(l.value).then(i,c)}d((s=s.apply(e,t||[])).next())})};Object.defineProperty(w,"__esModule",{value:!0});w.getIDToken=w.getState=w.saveState=w.group=w.endGroup=w.startGroup=w.info=w.notice=w.warning=w.error=w.debug=w.isDebug=w.setFailed=w.setCommandEcho=w.setOutput=w.getBooleanInput=w.getMultilineInput=w.getInput=w.addPath=w.setSecret=w.exportVariable=w.ExitCode=void 0;var ee=Ma(),Ot=ai(),jt=vs(),_i=Ti(require("os")),hy=Ti(require("path")),wy=gi(),Ri;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(Ri=w.ExitCode||(w.ExitCode={}));function Ey(e,t){let n=jt.toCommandValue(t);if(process.env[e]=n,process.env.GITHUB_ENV||"")return Ot.issueFileCommand("ENV",Ot.prepareKeyValueMessage(e,t));ee.issueCommand("set-env",{name:e},n)}w.exportVariable=Ey;function Iy(e){ee.issueCommand("add-mask",{},e)}w.setSecret=Iy;function gy(e){process.env.GITHUB_PATH||""?Ot.issueFileCommand("PATH",e):ee.issueCommand("add-path",{},e),process.env.PATH=`${e}${hy.delimiter}${process.env.PATH}`}w.addPath=gy;function yo(e,t){let n=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!n)throw new Error(`Input required and not supplied: ${e}`);return t&&t.trimWhitespace===!1?n:n.trim()}w.getInput=yo;function Sy(e,t){let n=yo(e,t).split(`
`).filter(s=>s!=="");return t&&t.trimWhitespace===!1?n:n.map(s=>s.trim())}w.getMultilineInput=Sy;function xy(e,t){let n=["true","True","TRUE"],s=["false","False","FALSE"],r=yo(e,t);if(n.includes(r))return!0;if(s.includes(r))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}w.getBooleanInput=xy;function Ty(e,t){if(process.env.GITHUB_OUTPUT||"")return Ot.issueFileCommand("OUTPUT",Ot.prepareKeyValueMessage(e,t));process.stdout.write(_i.EOL),ee.issueCommand("set-output",{name:e},jt.toCommandValue(t))}w.setOutput=Ty;function Cy(e){ee.issue("echo",e?"on":"off")}w.setCommandEcho=Cy;function _y(e){process.exitCode=Ri.Failure,Ai(e)}w.setFailed=_y;function Ry(){return process.env.RUNNER_DEBUG==="1"}w.isDebug=Ry;function Ay(e){ee.issueCommand("debug",{},e)}w.debug=Ay;function Ai(e,t={}){ee.issueCommand("error",jt.toCommandProperties(t),e instanceof Error?e.toString():e)}w.error=Ai;function by(e,t={}){ee.issueCommand("warning",jt.toCommandProperties(t),e instanceof Error?e.toString():e)}w.warning=by;function vy(e,t={}){ee.issueCommand("notice",jt.toCommandProperties(t),e instanceof Error?e.toString():e)}w.notice=vy;function Py(e){process.stdout.write(e+_i.EOL)}w.info=Py;function bi(e){ee.issue("group",e)}w.startGroup=bi;function vi(){ee.issue("endgroup")}w.endGroup=vi;function Ny(e,t){return Ci(this,void 0,void 0,function*(){bi(e);let n;try{n=yield t()}finally{vi()}return n})}w.group=Ny;function Oy(e,t){if(process.env.GITHUB_STATE||"")return Ot.issueFileCommand("STATE",Ot.prepareKeyValueMessage(e,t));ee.issueCommand("save-state",{name:e},jt.toCommandValue(t))}w.saveState=Oy;function Dy(e){return process.env[`STATE_${e}`]||""}w.getState=Dy;function My(e){return Ci(this,void 0,void 0,function*(){return yield wy.OidcClient.getIDToken(e)})}w.getIDToken=My;var ky=fo();Object.defineProperty(w,"summary",{enumerable:!0,get:function(){return ky.summary}});var Ly=fo();Object.defineProperty(w,"markdownSummary",{enumerable:!0,get:function(){return Ly.markdownSummary}});var po=xi();Object.defineProperty(w,"toPosixPath",{enumerable:!0,get:function(){return po.toPosixPath}});Object.defineProperty(w,"toWin32Path",{enumerable:!0,get:function(){return po.toWin32Path}});Object.defineProperty(w,"toPlatformPath",{enumerable:!0,get:function(){return po.toPlatformPath}})});var jo=A(Ve=>{"use strict";var ud=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",lw=ud+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",fd="["+ud+"]["+lw+"]*",mw=new RegExp("^"+fd+"$"),uw=function(e,t){let n=[],s=t.exec(e);for(;s;){let r=[];r.startIndex=t.lastIndex-s[0].length;let o=s.length;for(let a=0;a<o;a++)r.push(s[a]);n.push(r),s=t.exec(e)}return n},fw=function(e){let t=mw.exec(e);return!(t===null||typeof t>"u")};Ve.isExist=function(e){return typeof e<"u"};Ve.isEmptyObject=function(e){return Object.keys(e).length===0};Ve.merge=function(e,t,n){if(t){let s=Object.keys(t),r=s.length;for(let o=0;o<r;o++)n==="strict"?e[s[o]]=[t[s[o]]]:e[s[o]]=t[s[o]]}};Ve.getValue=function(e){return Ve.isExist(e)?e:""};Ve.isName=fw;Ve.getAllMatches=uw;Ve.nameRegexp=fd});var Jo=A(Ed=>{"use strict";var Ko=jo(),yw={allowBooleanAttributes:!1,unpairedTags:[]};Ed.validate=function(e,t){t=Object.assign({},yw,t);let n=[],s=!1,r=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let o=0;o<e.length;o++)if(e[o]==="<"&&e[o+1]==="?"){if(o+=2,o=pd(e,o),o.err)return o}else if(e[o]==="<"){let a=o;if(o++,e[o]==="!"){o=hd(e,o);continue}else{let i=!1;e[o]==="/"&&(i=!0,o++);let c="";for(;o<e.length&&e[o]!==">"&&e[o]!==" "&&e[o]!=="	"&&e[o]!==`
`&&e[o]!=="\r";o++)c+=e[o];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),o--),!xw(c)){let m;return c.trim().length===0?m="Invalid space after '<'.":m="Tag '"+c+"' is an invalid name.",O("InvalidTag",m,X(e,o))}let d=ww(e,o);if(d===!1)return O("InvalidAttr","Attributes for '"+c+"' have open quote.",X(e,o));let l=d.value;if(o=d.index,l[l.length-1]==="/"){let m=o-l.length;l=l.substring(0,l.length-1);let u=wd(l,t);if(u===!0)s=!0;else return O(u.err.code,u.err.msg,X(e,m+u.err.line))}else if(i)if(d.tagClosed){if(l.trim().length>0)return O("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",X(e,a));{let m=n.pop();if(c!==m.tagName){let u=X(e,m.tagStartPos);return O("InvalidTag","Expected closing tag '"+m.tagName+"' (opened in line "+u.line+", col "+u.col+") instead of closing tag '"+c+"'.",X(e,a))}n.length==0&&(r=!0)}}else return O("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",X(e,o));else{let m=wd(l,t);if(m!==!0)return O(m.err.code,m.err.msg,X(e,o-l.length+m.err.line));if(r===!0)return O("InvalidXml","Multiple possible root nodes found.",X(e,o));t.unpairedTags.indexOf(c)!==-1||n.push({tagName:c,tagStartPos:a}),s=!0}for(o++;o<e.length;o++)if(e[o]==="<")if(e[o+1]==="!"){o++,o=hd(e,o);continue}else if(e[o+1]==="?"){if(o=pd(e,++o),o.err)return o}else break;else if(e[o]==="&"){let m=gw(e,o);if(m==-1)return O("InvalidChar","char '&' is not expected.",X(e,o));o=m}else if(r===!0&&!yd(e[o]))return O("InvalidXml","Extra text at the end",X(e,o));e[o]==="<"&&o--}}else{if(yd(e[o]))continue;return O("InvalidChar","char '"+e[o]+"' is not expected.",X(e,o))}if(s){if(n.length==1)return O("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",X(e,n[0].tagStartPos));if(n.length>0)return O("InvalidXml","Invalid '"+JSON.stringify(n.map(o=>o.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return O("InvalidXml","Start tag expected.",1);return!0};function yd(e){return e===" "||e==="	"||e===`
`||e==="\r"}function pd(e,t){let n=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let s=e.substr(n,t-n);if(t>5&&s==="xml")return O("InvalidXml","XML declaration allowed only at the start of the document.",X(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function hd(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let n=1;for(t+=8;t<e.length;t++)if(e[t]==="<")n++;else if(e[t]===">"&&(n--,n===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var pw='"',hw="'";function ww(e,t){let n="",s="",r=!1;for(;t<e.length;t++){if(e[t]===pw||e[t]===hw)s===""?s=e[t]:s!==e[t]||(s="");else if(e[t]===">"&&s===""){r=!0;break}n+=e[t]}return s!==""?!1:{value:n,index:t,tagClosed:r}}var Ew=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function wd(e,t){let n=Ko.getAllMatches(e,Ew),s={};for(let r=0;r<n.length;r++){if(n[r][1].length===0)return O("InvalidAttr","Attribute '"+n[r][2]+"' has no space in starting.",ls(n[r]));if(n[r][3]!==void 0&&n[r][4]===void 0)return O("InvalidAttr","Attribute '"+n[r][2]+"' is without value.",ls(n[r]));if(n[r][3]===void 0&&!t.allowBooleanAttributes)return O("InvalidAttr","boolean attribute '"+n[r][2]+"' is not allowed.",ls(n[r]));let o=n[r][2];if(!Sw(o))return O("InvalidAttr","Attribute '"+o+"' is an invalid name.",ls(n[r]));if(!s.hasOwnProperty(o))s[o]=1;else return O("InvalidAttr","Attribute '"+o+"' is repeated.",ls(n[r]))}return!0}function Iw(e,t){let n=/\d/;for(e[t]==="x"&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(n))break}return-1}function gw(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,Iw(e,t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(e[t]===";")break;return-1}return t}function O(e,t,n){return{err:{code:e,msg:t,line:n.line||n,col:n.col}}}function Sw(e){return Ko.isName(e)}function xw(e){return Ko.isName(e)}function X(e,t){let n=e.substring(0,t).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function ls(e){return e.startIndex+e[1].length}});var gd=A(Yo=>{var Id={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1},Tw=function(e){return Object.assign({},Id,e)};Yo.buildOptions=Tw;Yo.defaultOptions=Id});var xd=A((GO,Sd)=>{"use strict";var Xo=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,n){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:n})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,[":@"]:t[":@"]}):this.child.push({[t.tagname]:t.child})}};Sd.exports=Xo});var Cd=A((qO,Td)=>{function Cw(e,t){let n={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let s=1,r=!1,o=!1,a=!1,i="";for(;t<e.length;t++)if(e[t]==="<"&&!a){if(r&&e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y")t+=7,o=!0;else if(r&&e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T")t+=8;else if(r&&e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T")t+=8;else if(r&&e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N")t+=9;else if(e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-")a=!0;else throw new Error("Invalid DOCTYPE");s++,i=""}else if(e[t]===">"){if(a?e[t-1]==="-"&&e[t-2]==="-"&&(a=!1,s--):(o&&(Rw(i,n),o=!1),s--),s===0)break}else e[t]==="["?r=!0:i+=e[t];if(s!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:n,i:t}}var _w=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function Rw(e,t){let n=_w.exec(e);n&&(t[n[1]]={regx:RegExp(`&${n[1]};`,"g"),val:n[3]})}Td.exports=Cw});var Rd=A((HO,_d)=>{var Aw=/^[-+]?0x[a-fA-F0-9]+$/,bw=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var vw={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Pw(e,t={}){if(t=Object.assign({},vw,t),!e||typeof e!="string")return e;let n=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(n))return e;if(t.hex&&Aw.test(n))return Number.parseInt(n,16);{let s=bw.exec(n);if(s){let r=s[1],o=s[2],a=Nw(s[3]),i=s[4]||s[6];if(!t.leadingZeros&&o.length>0&&r&&n[2]!==".")return e;if(!t.leadingZeros&&o.length>0&&!r&&n[1]!==".")return e;{let c=Number(n),d=""+c;return d.search(/[eE]/)!==-1||i?t.eNotation?c:e:n.indexOf(".")!==-1?d==="0"&&a===""||d===a||r&&d==="-"+a?c:e:o?a===d||r+a===d?c:e:n===d||n===r+d?c:e}}else return e}}function Nw(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}_d.exports=Pw});var bd=A((KO,Ad)=>{"use strict";var ta=jo(),ms=xd(),Ow=Cd(),Dw=Rd(),jO="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,ta.nameRegexp),Qo=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=Mw,this.parseXml=Vw,this.parseTextData=kw,this.resolveNameSpace=Lw,this.buildAttributesMap=$w,this.isItStopNode=Bw,this.replaceEntitiesValue=zw,this.readStopNodeData=Gw,this.saveTextToParentTag=Uw}};function Mw(e){let t=Object.keys(e);for(let n=0;n<t.length;n++){let s=t[n];this.lastEntities[s]={regex:new RegExp("&"+s+";","g"),val:e[s]}}}function kw(e,t,n,s,r,o,a){if(e!==void 0&&(this.options.trimValues&&!s&&(e=e.trim()),e.length>0)){a||(e=this.replaceEntitiesValue(e));let i=this.options.tagValueProcessor(t,e,n,r,o);return i==null?e:typeof i!=typeof e||i!==e?i:this.options.trimValues?ea(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?ea(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function Lw(e){if(this.options.removeNSPrefix){let t=e.split(":"),n=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=n+t[1])}return e}var Fw=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function $w(e,t){if(!this.options.ignoreAttributes&&typeof e=="string"){let n=ta.getAllMatches(e,Fw),s=n.length,r={};for(let o=0;o<s;o++){let a=this.resolveNameSpace(n[o][1]),i=n[o][4],c=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(c=this.options.transformAttributeName(c)),c==="__proto__"&&(c="#__proto__"),i!==void 0){this.options.trimValues&&(i=i.trim()),i=this.replaceEntitiesValue(i);let d=this.options.attributeValueProcessor(a,i,t);d==null?r[c]=i:typeof d!=typeof i||d!==i?r[c]=d:r[c]=ea(i,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(r[c]=!0)}if(!Object.keys(r).length)return;if(this.options.attributesGroupName){let o={};return o[this.options.attributesGroupName]=r,o}return r}}var Vw=function(e){e=e.replace(/\r\n?/g,`
`);let t=new ms("!xml"),n=t,s="",r="";for(let o=0;o<e.length;o++)if(e[o]==="<")if(e[o+1]==="/"){let i=kt(e,">",o,"Closing Tag is not closed."),c=e.substring(o+2,i).trim();if(this.options.removeNSPrefix){let d=c.indexOf(":");d!==-1&&(c=c.substr(d+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),n&&(s=this.saveTextToParentTag(s,n,r)),r=r.substr(0,r.lastIndexOf(".")),n=this.tagsNodeStack.pop(),s="",o=i}else if(e[o+1]==="?"){let i=Zo(e,o,!1,"?>");if(!i)throw new Error("Pi Tag is not closed.");if(s=this.saveTextToParentTag(s,n,r),!(this.options.ignoreDeclaration&&i.tagName==="?xml"||this.options.ignorePiTags)){let c=new ms(i.tagName);c.add(this.options.textNodeName,""),i.tagName!==i.tagExp&&i.attrExpPresent&&(c[":@"]=this.buildAttributesMap(i.tagExp,r)),n.addChild(c)}o=i.closeIndex+1}else if(e.substr(o+1,3)==="!--"){let i=kt(e,"-->",o+4,"Comment is not closed.");if(this.options.commentPropName){let c=e.substring(o+4,i-2);s=this.saveTextToParentTag(s,n,r),n.add(this.options.commentPropName,[{[this.options.textNodeName]:c}])}o=i}else if(e.substr(o+1,2)==="!D"){let i=Ow(e,o);this.docTypeEntities=i.entities,o=i.i}else if(e.substr(o+1,2)==="!["){let i=kt(e,"]]>",o,"CDATA is not closed.")-2,c=e.substring(o+9,i);if(s=this.saveTextToParentTag(s,n,r),this.options.cdataPropName)n.add(this.options.cdataPropName,[{[this.options.textNodeName]:c}]);else{let d=this.parseTextData(c,n.tagname,r,!0,!1,!0);d==null&&(d=""),n.add(this.options.textNodeName,d)}o=i+2}else{let i=Zo(e,o,this.options.removeNSPrefix),c=i.tagName,d=i.tagExp,l=i.attrExpPresent,m=i.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),n&&s&&n.tagname!=="!xml"&&(s=this.saveTextToParentTag(s,n,r,!1)),c!==t.tagname&&(r+=r?"."+c:c);let u=n;if(u&&this.options.unpairedTags.indexOf(u.tagname)!==-1&&(n=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,r,c)){let y="";if(d.length>0&&d.lastIndexOf("/")===d.length-1)o=i.closeIndex;else if(this.options.unpairedTags.indexOf(c)!==-1)o=i.closeIndex;else{let h=this.readStopNodeData(e,c,m+1);if(!h)throw new Error(`Unexpected end of ${c}`);o=h.i,y=h.tagContent}let p=new ms(c);c!==d&&l&&(p[":@"]=this.buildAttributesMap(d,r)),y&&(y=this.parseTextData(y,c,r,!0,l,!0,!0)),r=r.substr(0,r.lastIndexOf(".")),p.add(this.options.textNodeName,y),n.addChild(p)}else{if(d.length>0&&d.lastIndexOf("/")===d.length-1){c[c.length-1]==="/"?(c=c.substr(0,c.length-1),d=c):d=d.substr(0,d.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));let y=new ms(c);c!==d&&l&&(y[":@"]=this.buildAttributesMap(d,r)),r=r.substr(0,r.lastIndexOf(".")),n.addChild(y)}else{let y=new ms(c);this.tagsNodeStack.push(n),c!==d&&l&&(y[":@"]=this.buildAttributesMap(d,r)),n.addChild(y),n=y}s="",o=m}}else s+=e[o];return t.child},zw=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let n=this.docTypeEntities[t];e=e.replace(n.regx,n.val)}for(let t in this.lastEntities){let n=this.lastEntities[t];e=e.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let n=this.htmlEntities[t];e=e.replace(n.regex,n.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function Uw(e,t,n,s){return e&&(s===void 0&&(s=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,n,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,s),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function Bw(e,t,n){let s="*."+n;for(let r in e){let o=e[r];if(s===o||t===o)return!0}return!1}function Ww(e,t,n=">"){let s,r="";for(let o=t;o<e.length;o++){let a=e[o];if(s)a===s&&(s="");else if(a==='"'||a==="'")s=a;else if(a===n[0])if(n[1]){if(e[o+1]===n[1])return{data:r,index:o}}else return{data:r,index:o};else a==="	"&&(a=" ");r+=a}}function kt(e,t,n,s){let r=e.indexOf(t,n);if(r===-1)throw new Error(s);return r+t.length-1}function Zo(e,t,n,s=">"){let r=Ww(e,t+1,s);if(!r)return;let o=r.data,a=r.index,i=o.search(/\s/),c=o,d=!0;if(i!==-1&&(c=o.substr(0,i).replace(/\s\s*$/,""),o=o.substr(i+1)),n){let l=c.indexOf(":");l!==-1&&(c=c.substr(l+1),d=c!==r.data.substr(l+1))}return{tagName:c,tagExp:o,closeIndex:a,attrExpPresent:d}}function Gw(e,t,n){let s=n,r=1;for(;n<e.length;n++)if(e[n]==="<")if(e[n+1]==="/"){let o=kt(e,">",n,`${t} is not closed`);if(e.substring(n+2,o).trim()===t&&(r--,r===0))return{tagContent:e.substring(s,n),i:o};n=o}else if(e[n+1]==="?")n=kt(e,"?>",n+1,"StopNode is not closed.");else if(e.substr(n+1,3)==="!--")n=kt(e,"-->",n+3,"StopNode is not closed.");else if(e.substr(n+1,2)==="![")n=kt(e,"]]>",n,"StopNode is not closed.")-2;else{let o=Zo(e,n,">");o&&((o&&o.tagName)===t&&o.tagExp[o.tagExp.length-1]!=="/"&&r++,n=o.closeIndex)}}function ea(e,t,n){if(t&&typeof e=="string"){let s=e.trim();return s==="true"?!0:s==="false"?!1:Dw(e,n)}else return ta.isExist(e)?e:""}Ad.exports=Qo});var Nd=A(Pd=>{"use strict";function qw(e,t){return vd(e,t)}function vd(e,t,n){let s,r={};for(let o=0;o<e.length;o++){let a=e[o],i=Hw(a),c="";if(n===void 0?c=i:c=n+"."+i,i===t.textNodeName)s===void 0?s=a[i]:s+=""+a[i];else{if(i===void 0)continue;if(a[i]){let d=vd(a[i],t,c),l=Kw(d,t);a[":@"]?jw(d,a[":@"],c,t):Object.keys(d).length===1&&d[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?d=d[t.textNodeName]:Object.keys(d).length===0&&(t.alwaysCreateTextNode?d[t.textNodeName]="":d=""),r[i]!==void 0&&r.hasOwnProperty(i)?(Array.isArray(r[i])||(r[i]=[r[i]]),r[i].push(d)):t.isArray(i,c,l)?r[i]=[d]:r[i]=d}}}return typeof s=="string"?s.length>0&&(r[t.textNodeName]=s):s!==void 0&&(r[t.textNodeName]=s),r}function Hw(e){let t=Object.keys(e);for(let n=0;n<t.length;n++){let s=t[n];if(s!==":@")return s}}function jw(e,t,n,s){if(t){let r=Object.keys(t),o=r.length;for(let a=0;a<o;a++){let i=r[a];s.isArray(i,n+"."+i,!0,!0)?e[i]=[t[i]]:e[i]=t[i]}}}function Kw(e,t){let n=Object.keys(e).length;return!!(n===0||n===1&&e[t.textNodeName])}Pd.prettify=qw});var Dd=A((YO,Od)=>{var{buildOptions:Jw}=gd(),Yw=bd(),{prettify:Xw}=Nd(),Qw=Jo(),na=class{constructor(t){this.externalEntities={},this.options=Jw(t)}parse(t,n){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(n){n===!0&&(n={});let o=Qw.validate(t,n);if(o!==!0)throw Error(`${o.err.msg}:${o.err.line}:${o.err.col}`)}let s=new Yw(this.options);s.addExternalEntities(this.externalEntities);let r=s.parseXml(t);return this.options.preserveOrder||r===void 0?r:Xw(r,this.options)}addEntity(t,n){if(n.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(n==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=n}};Od.exports=na});var $d=A((XO,Fd)=>{var Zw=`
`;function eE(e,t){let n="";return t.format&&t.indentBy.length>0&&(n=Zw),kd(e,t,"",n)}function kd(e,t,n,s){let r="",o=!1;for(let a=0;a<e.length;a++){let i=e[a],c=tE(i),d="";if(n.length===0?d=c:d=`${n}.${c}`,c===t.textNodeName){let p=i[c];nE(d,t)||(p=t.tagValueProcessor(c,p),p=Ld(p,t)),o&&(r+=s),r+=p,o=!1;continue}else if(c===t.cdataPropName){o&&(r+=s),r+=`<![CDATA[${i[c][0][t.textNodeName]}]]>`,o=!1;continue}else if(c===t.commentPropName){r+=s+`<!--${i[c][0][t.textNodeName]}-->`,o=!0;continue}else if(c[0]==="?"){let p=Md(i[":@"],t),h=c==="?xml"?"":s,E=i[c][0][t.textNodeName];E=E.length!==0?" "+E:"",r+=h+`<${c}${E}${p}?>`,o=!0;continue}let l=s;l!==""&&(l+=t.indentBy);let m=Md(i[":@"],t),u=s+`<${c}${m}`,y=kd(i[c],t,d,l);t.unpairedTags.indexOf(c)!==-1?t.suppressUnpairedNode?r+=u+">":r+=u+"/>":(!y||y.length===0)&&t.suppressEmptyNode?r+=u+"/>":y&&y.endsWith(">")?r+=u+`>${y}${s}</${c}>`:(r+=u+">",y&&s!==""&&(y.includes("/>")||y.includes("</"))?r+=s+t.indentBy+y+s:r+=y,r+=`</${c}>`),o=!0}return r}function tE(e){let t=Object.keys(e);for(let n=0;n<t.length;n++){let s=t[n];if(s!==":@")return s}}function Md(e,t){let n="";if(e&&!t.ignoreAttributes)for(let s in e){let r=t.attributeValueProcessor(s,e[s]);r=Ld(r,t),r===!0&&t.suppressBooleanAttributes?n+=` ${s.substr(t.attributeNamePrefix.length)}`:n+=` ${s.substr(t.attributeNamePrefix.length)}="${r}"`}return n}function nE(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let n=e.substr(e.lastIndexOf(".")+1);for(let s in t.stopNodes)if(t.stopNodes[s]===e||t.stopNodes[s]==="*."+n)return!0;return!1}function Ld(e,t){if(e&&e.length>0&&t.processEntities)for(let n=0;n<t.entities.length;n++){let s=t.entities[n];e=e.replace(s.regex,s.val)}return e}Fd.exports=eE});var zd=A((QO,Vd)=>{"use strict";var sE=$d(),rE={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[]};function St(e){this.options=Object.assign({},rE,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=iE),this.processTextOrObjNode=oE,this.options.format?(this.indentate=aE,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}St.prototype.build=function(e){return this.options.preserveOrder?sE(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};St.prototype.j2x=function(e,t){let n="",s="";for(let r in e)if(!(typeof e[r]>"u"))if(e[r]===null)r[0]==="?"?s+=this.indentate(t)+"<"+r+"?"+this.tagEndChar:s+=this.indentate(t)+"<"+r+"/"+this.tagEndChar;else if(e[r]instanceof Date)s+=this.buildTextValNode(e[r],r,"",t);else if(typeof e[r]!="object"){let o=this.isAttribute(r);if(o)n+=this.buildAttrPairStr(o,""+e[r]);else if(r===this.options.textNodeName){let a=this.options.tagValueProcessor(r,""+e[r]);s+=this.replaceEntitiesValue(a)}else s+=this.buildTextValNode(e[r],r,"",t)}else if(Array.isArray(e[r])){let o=e[r].length;for(let a=0;a<o;a++){let i=e[r][a];typeof i>"u"||(i===null?r[0]==="?"?s+=this.indentate(t)+"<"+r+"?"+this.tagEndChar:s+=this.indentate(t)+"<"+r+"/"+this.tagEndChar:typeof i=="object"?s+=this.processTextOrObjNode(i,r,t):s+=this.buildTextValNode(i,r,"",t))}}else if(this.options.attributesGroupName&&r===this.options.attributesGroupName){let o=Object.keys(e[r]),a=o.length;for(let i=0;i<a;i++)n+=this.buildAttrPairStr(o[i],""+e[r][o[i]])}else s+=this.processTextOrObjNode(e[r],r,t);return{attrStr:n,val:s}};St.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function oE(e,t,n){let s=this.j2x(e,n+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,s.attrStr,n):this.buildObjectNode(s.val,t,s.attrStr,n)}St.prototype.buildObjectNode=function(e,t,n,s){if(e==="")return t[0]==="?"?this.indentate(s)+"<"+t+n+"?"+this.tagEndChar:this.indentate(s)+"<"+t+n+this.closeTag(t)+this.tagEndChar;{let r="</"+t+this.tagEndChar,o="";return t[0]==="?"&&(o="?",r=""),n&&e.indexOf("<")===-1?this.indentate(s)+"<"+t+n+o+">"+e+r:this.options.commentPropName!==!1&&t===this.options.commentPropName&&o.length===0?this.indentate(s)+`<!--${e}-->`+this.newLine:this.indentate(s)+"<"+t+n+o+this.tagEndChar+e+this.indentate(s)+r}};St.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};St.prototype.buildTextValNode=function(e,t,n,s){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(s)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(s)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(s)+"<"+t+n+"?"+this.tagEndChar;{let r=this.options.tagValueProcessor(t,e);return r=this.replaceEntitiesValue(r),r===""?this.indentate(s)+"<"+t+n+this.closeTag(t)+this.tagEndChar:this.indentate(s)+"<"+t+n+">"+r+"</"+t+this.tagEndChar}};St.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let n=this.options.entities[t];e=e.replace(n.regex,n.val)}return e};function aE(e){return this.options.indentBy.repeat(e)}function iE(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}Vd.exports=St});var Bd=A((ZO,Ud)=>{"use strict";var cE=Jo(),dE=Dd(),lE=zd();Ud.exports={XMLParser:dE,XMLValidator:cE,XMLBuilder:lE}});var Qu=A((Vz,Xu)=>{"use strict";var Ju=(e=0)=>t=>`\x1B[${38+e};5;${t}m`,Yu=(e=0)=>(t,n,s)=>`\x1B[${38+e};2;${t};${n};${s}m`;function lg(){let e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(let[n,s]of Object.entries(t)){for(let[r,o]of Object.entries(s))t[r]={open:`\x1B[${o[0]}m`,close:`\x1B[${o[1]}m`},s[r]=t[r],e.set(o[0],o[1]);Object.defineProperty(t,n,{value:s,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="\x1B[39m",t.bgColor.close="\x1B[49m",t.color.ansi256=Ju(),t.color.ansi16m=Yu(),t.bgColor.ansi256=Ju(10),t.bgColor.ansi16m=Yu(10),Object.defineProperties(t,{rgbToAnsi256:{value:(n,s,r)=>n===s&&s===r?n<8?16:n>248?231:Math.round((n-8)/247*24)+232:16+36*Math.round(n/255*5)+6*Math.round(s/255*5)+Math.round(r/255*5),enumerable:!1},hexToRgb:{value:n=>{let s=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(n.toString(16));if(!s)return[0,0,0];let{colorString:r}=s.groups;r.length===3&&(r=r.split("").map(a=>a+a).join(""));let o=Number.parseInt(r,16);return[o>>16&255,o>>8&255,o&255]},enumerable:!1},hexToAnsi256:{value:n=>t.rgbToAnsi256(...t.hexToRgb(n)),enumerable:!1}}),t}Object.defineProperty(Xu,"exports",{enumerable:!0,get:lg})});var P=Ut(co());var Pi=async e=>{let t=(e==null?void 0:e.Bucket)||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Uy(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!zy(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},Fy=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,$y=/(\d+\.){3}\d+/,Vy=/\.\./;var zy=e=>Fy.test(e)&&!$y.test(e)&&!Vy.test(e),Uy=e=>{let[t,n,s,r,o,a]=e.split(":"),i=t==="arn"&&e.split(":").length>=6,c=[t,n,s,o,a].filter(Boolean).length===5;if(i&&!c)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return t==="arn"&&!!n&&!!s&&!!o&&!!a};var Ni=(e,t,n)=>{let s=async()=>{let r=n[e]??n[t];return typeof r=="function"?r():r};return e==="endpoint"||t==="endpoint"?async()=>{let r=await s();if(r&&typeof r=="object"){if("url"in r)return r.url.href;if("hostname"in r){let{protocol:o,hostname:a,port:i,path:c}=r;return`${o}//${a}${i?":"+i:""}${c}`}}return r}:s};var Oi=async(e,t,n,s)=>{let r=await By(e,t,n);if(typeof n.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return n.endpointProvider(r,s)},By=async(e,t,n)=>{var o;let s={},r=((o=t==null?void 0:t.getEndpointParameterInstructions)==null?void 0:o.call(t))||{};for(let[a,i]of Object.entries(r))switch(i.type){case"staticContextParams":s[a]=i.value;break;case"contextParams":s[a]=e[i.name];break;case"clientContextParams":case"builtInParams":s[a]=await Ni(i.name,a,n)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(r).length===0&&Object.assign(s,n),String(n.serviceId).toLowerCase()==="s3"&&await Pi(s),s};function Di(e){let t={};if(e=e.replace(/^\?/,""),e)for(let n of e.split("&")){let[s,r=null]=n.split("=");s=decodeURIComponent(s),r&&(r=decodeURIComponent(r)),s in t?Array.isArray(t[s])?t[s].push(r):t[s]=[t[s],r]:t[s]=r}return t}var j=e=>{if(typeof e=="string")return j(new URL(e));let{hostname:t,pathname:n,port:s,protocol:r,search:o}=e,a;return o&&(a=Di(o)),{hostname:t,port:s?parseInt(s):void 0,protocol:r,path:n,query:a}};var Mi=e=>typeof e=="object"?"url"in e?j(e.url):e:j(e);var ki=({config:e,instructions:t})=>(n,s)=>async r=>{var i,c;let o=await Oi(r.input,{getEndpointParameterInstructions(){return t}},{...e},s);s.endpointV2=o,s.authSchemes=(i=o.properties)==null?void 0:i.authSchemes;let a=(c=s.authSchemes)==null?void 0:c[0];return a&&(s.signing_region=a.signingRegion,s.signing_service=a.signingName),n({...r})};var Li=(e,t)=>(n,s)=>async r=>{let{response:o}=await n(r);try{let a=await t(o,e);return{response:o,output:a}}catch(a){if(Object.defineProperty(a,"$response",{value:o}),!("$metadata"in a)){let i="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";a.message+=`
  `+i}throw a}};var Fi=(e,t)=>(n,s)=>async r=>{var i;let o=(i=s.endpointV2)!=null&&i.url&&e.urlParser?async()=>e.urlParser(s.endpointV2.url):e.endpoint;if(!o)throw new Error("No valid endpoint provider available.");let a=await t(r.input,{...e,endpoint:o});return n({...r,request:a})};var Wy={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},ho={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function te(e,t,n){return{applyToStack:s=>{s.add(Li(e,n),Wy),s.add(Fi(e,t),ho)}}}var Gy={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:ho.name},ne=(e,t)=>({applyToStack:n=>{n.addRelativeTo(ki({config:e,instructions:t}),Gy)}});var L=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};var Qe=e=>{let t=e.tls??!0,{endpoint:n}=e,s=n!=null?async()=>Mi(await L(n)()):void 0;return{...e,endpoint:s,tls:t,isCustomEndpoint:!!n,useDualstackEndpoint:L(e.useDualstackEndpoint??!1),useFipsEndpoint:L(e.useFipsEndpoint??!1)}};var Ie=class{trace(){}debug(){}info(){}warn(){}error(){}};var Kt=()=>{let e=[],t=[],n=new Set,s=l=>l.sort((m,u)=>$i[u.step]-$i[m.step]||Vi[u.priority||"normal"]-Vi[m.priority||"normal"]),r=l=>{let m=!1,u=y=>y.name&&y.name===l?(m=!0,n.delete(l),!1):!0;return e=e.filter(u),t=t.filter(u),m},o=l=>{let m=!1,u=y=>y.middleware===l?(m=!0,y.name&&n.delete(y.name),!1):!0;return e=e.filter(u),t=t.filter(u),m},a=l=>(e.forEach(m=>{l.add(m.middleware,{...m})}),t.forEach(m=>{l.addRelativeTo(m.middleware,{...m})}),l),i=l=>{let m=[];return l.before.forEach(u=>{u.before.length===0&&u.after.length===0?m.push(u):m.push(...i(u))}),m.push(l),l.after.reverse().forEach(u=>{u.before.length===0&&u.after.length===0?m.push(u):m.push(...i(u))}),m},c=(l=!1)=>{let m=[],u=[],y={};return e.forEach(h=>{let E={...h,before:[],after:[]};E.name&&(y[E.name]=E),m.push(E)}),t.forEach(h=>{let E={...h,before:[],after:[]};E.name&&(y[E.name]=E),u.push(E)}),u.forEach(h=>{if(h.toMiddleware){let E=y[h.toMiddleware];if(E===void 0){if(l)return;throw new Error(`${h.toMiddleware} is not found when adding ${h.name||"anonymous"} middleware ${h.relation} ${h.toMiddleware}`)}h.relation==="after"&&E.after.push(h),h.relation==="before"&&E.before.push(h)}}),s(m).map(i).reduce((h,E)=>(h.push(...E),h),[])},d={add:(l,m={})=>{let{name:u,override:y}=m,p={step:"initialize",priority:"normal",middleware:l,...m};if(u){if(n.has(u)){if(!y)throw new Error(`Duplicate middleware name '${u}'`);let h=e.findIndex(we=>we.name===u),E=e[h];if(E.step!==p.step||E.priority!==p.priority)throw new Error(`"${u}" middleware with ${E.priority} priority in ${E.step} step cannot be overridden by same-name middleware with ${p.priority} priority in ${p.step} step.`);e.splice(h,1)}n.add(u)}e.push(p)},addRelativeTo:(l,m)=>{let{name:u,override:y}=m,p={middleware:l,...m};if(u){if(n.has(u)){if(!y)throw new Error(`Duplicate middleware name '${u}'`);let h=t.findIndex(we=>we.name===u),E=t[h];if(E.toMiddleware!==p.toMiddleware||E.relation!==p.relation)throw new Error(`"${u}" middleware ${E.relation} "${E.toMiddleware}" middleware cannot be overridden by same-name middleware ${p.relation} "${p.toMiddleware}" middleware.`);t.splice(h,1)}n.add(u)}t.push(p)},clone:()=>a(Kt()),use:l=>{l.applyToStack(d)},remove:l=>typeof l=="string"?r(l):o(l),removeByTag:l=>{let m=!1,u=y=>{let{tags:p,name:h}=y;return p&&p.includes(l)?(h&&n.delete(h),m=!0,!1):!0};return e=e.filter(u),t=t.filter(u),m},concat:l=>{let m=a(Kt());return m.use(l),m},applyToStack:a,identify:()=>c(!0).map(l=>l.name+": "+(l.tags||[]).join(",")),resolve:(l,m)=>{for(let u of c().map(y=>y.middleware).reverse())l=u(l,m);return l}};return d},$i={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Vi={high:3,normal:2,low:1};var ge=class{constructor(t){this.middlewareStack=Kt(),this.config=t}send(t,n,s){let r=typeof n!="function"?n:void 0,o=typeof n=="function"?n:s,a=t.resolveMiddleware(this.middlewareStack,this.config,r);if(o)a(t).then(i=>o(null,i.output),i=>o(i)).catch(()=>{});else return a(t).then(i=>i.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}};var K=class{constructor(){this.middlewareStack=Kt()}};var Ze="***SensitiveInformation***";var wo=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&Us.warn(zs(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){let t=e.toLowerCase();if((t==="false"||t==="true")&&Us.warn(zs(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},Jt=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&Us.warn(zs(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},qy=Math.ceil(34028234663852886e22),zi=e=>{let t=Jt(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>qy)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},ns=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}};var ue=e=>Eo(e,32),Ui=e=>Eo(e,16),Bi=e=>Eo(e,8),Eo=(e,t)=>{let n=ns(e);if(n!==void 0&&Hy(n,t)!==n)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return n},Hy=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},fe=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},Bs=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},f=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return Us.warn(zs(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}};var Wi=e=>Jt(typeof e=="string"?ss(e):e);var Gi=e=>zi(typeof e=="string"?ss(e):e),jy=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,ss=e=>{let t=e.match(jy);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)};var Io=e=>ue(typeof e=="string"?ss(e):e),qi=e=>Ui(typeof e=="string"?ss(e):e),Hi=e=>Bi(typeof e=="string"?ss(e):e),zs=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),Us={warn:console.warn};var Ky=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var mx=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/);var Jy=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),ji=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=Jy.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[n,s,r,o,a,i,c,d,l]=t,m=qi(Ki(s)),u=rs(r,"month",1,12),y=rs(o,"day",1,31),p=Yy(m,u,y,{hours:a,minutes:i,seconds:c,fractionalMilliseconds:d});return l.toUpperCase()!="Z"&&p.setTime(p.getTime()-tp(l)),p},ux=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),fx=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),yx=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/);var go=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=Wi(e);else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},Yy=(e,t,n,s)=>{let r=t-1;return Qy(e,r,n),new Date(Date.UTC(e,r,n,rs(s.hours,"hour",0,23),rs(s.minutes,"minute",0,59),rs(s.seconds,"seconds",0,60),ep(s.fractionalMilliseconds)))};var px=50*365*24*60*60*1e3;var Xy=[31,28,31,30,31,30,31,31,30,31,30,31],Qy=(e,t,n)=>{let s=Xy[t];if(t===1&&Zy(e)&&(s=29),n>s)throw new TypeError(`Invalid day for ${Ky[t]} in ${e}: ${n}`)},Zy=e=>e%4===0&&(e%100!==0||e%400===0),rs=(e,t,n,s)=>{let r=Hi(Ki(e));if(r<n||r>s)throw new TypeError(`${t} must be between ${n} and ${s}, inclusive`);return r},ep=e=>e==null?0:Gi("0."+e)*1e3,tp=e=>{let t=e[0],n=1;if(t=="+")n=1;else if(t=="-")n=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let s=Number(e.substring(1,3)),r=Number(e.substring(4,6));return n*(s*60+r)*60*1e3},Ki=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};var se=class extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,se.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}},g=(e,t={})=>{Object.entries(t).filter(([,s])=>s!==void 0).forEach(([s,r])=>{(e[s]==null||e[s]==="")&&(e[s]=r)});let n=e.message||e.Message||"UnknownError";return e.message=n,delete e.Message,e};var Se=({output:e,parsedBody:t,exceptionCtor:n,errorCode:s})=>{let r=np(e),o=r.httpStatusCode?r.httpStatusCode+"":void 0,a=new n({name:(t==null?void 0:t.code)||(t==null?void 0:t.Code)||s||o||"UnknownError",$fault:"client",$metadata:r});throw g(a,t)},np=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});var et=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};var Ji=!1,tt=e=>{e&&!Ji&&parseInt(e.substring(1,e.indexOf(".")))<14&&(Ji=!0)};function Ws(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var So=e=>{let t="#text";for(let n in e)e.hasOwnProperty(n)&&e[n][t]!==void 0?e[n]=e[n][t]:typeof e[n]=="object"&&e[n]!==null&&(e[n]=So(e[n]));return e};var xo=function(){let e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),n=new t;return Object.setPrototypeOf(n,e.prototype),n};xo.prototype=Object.create(String.prototype,{constructor:{value:xo,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(xo,String);function os(e,t,n){let s,r,o;if(typeof t>"u"&&typeof n>"u")s={},o=e;else{if(s=e,typeof t=="function")return r=t,o=n,sp(s,r,o);o=t}for(let a of Object.keys(o)){if(!Array.isArray(o[a])){s[a]=o[a];continue}rp(s,null,o,a)}return s}var sp=(e,t,n)=>os(e,Object.entries(n).reduce((s,[r,o])=>(Array.isArray(o)?s[r]=o:typeof o=="function"?s[r]=[t,o()]:s[r]=[t,o],s),{})),rp=(e,t,n,s)=>{if(t!==null){let a=n[s];typeof a=="function"&&(a=[,a]);let[i=op,c=ap,d=s]=a;(typeof i=="function"&&i(t[d])||typeof i!="function"&&i)&&(e[s]=c(t[d]));return}let[r,o]=n[s];if(typeof o=="function"){let a,i=r===void 0&&(a=o())!=null,c=typeof r=="function"&&!!r(void 0)||typeof r!="function"&&!!r;i?e[s]=a:c&&(e[s]=o())}else{let a=r===void 0&&o!=null,i=typeof r=="function"&&!!r(o)||typeof r!="function"&&!!r;(a||i)&&(e[s]=o)}},op=e=>e!=null,ap=e=>e;var To;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(To||(To={}));var R=class{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/"}static isInstance(t){if(!t)return!1;let n=t;return"method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&typeof n.query=="object"&&typeof n.headers=="object"}clone(){let t=new R({...this,headers:{...this.headers}});return t.query&&(t.query=ip(t.query)),t}};function ip(e){return Object.keys(e).reduce((t,n)=>{let s=e[n];return{...t,[n]:Array.isArray(s)?[...s]:s}},{})}var xe=class{constructor(t){this.statusCode=t.statusCode,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let n=t;return typeof n.statusCode=="number"&&typeof n.headers=="object"}};var N=class extends se{constructor(t){super(t),Object.setPrototypeOf(this,N.prototype)}};var Yt=class extends N{constructor(t){super({name:"InternalServerError",$fault:"server",...t}),this.name="InternalServerError",this.$fault="server",Object.setPrototypeOf(this,Yt.prototype),this.Message=t.Message}};var Xt=class extends N{constructor(t){super({name:"DuplicateInstanceId",$fault:"client",...t}),this.name="DuplicateInstanceId",this.$fault="client",Object.setPrototypeOf(this,Xt.prototype)}},Qt=class extends N{constructor(t){super({name:"InvalidCommandId",$fault:"client",...t}),this.name="InvalidCommandId",this.$fault="client",Object.setPrototypeOf(this,Qt.prototype)}},Zt=class extends N{constructor(t){super({name:"InvalidInstanceId",$fault:"client",...t}),this.name="InvalidInstanceId",this.$fault="client",Object.setPrototypeOf(this,Zt.prototype),this.Message=t.Message}};var en=class extends N{constructor(t){super({name:"InvalidParameters",$fault:"client",...t}),this.name="InvalidParameters",this.$fault="client",Object.setPrototypeOf(this,en.prototype),this.Message=t.Message}};var tn=class extends N{constructor(t){super({name:"InvalidDocument",$fault:"client",...t}),this.name="InvalidDocument",this.$fault="client",Object.setPrototypeOf(this,tn.prototype),this.Message=t.Message}},nn=class extends N{constructor(t){super({name:"InvalidDocumentVersion",$fault:"client",...t}),this.name="InvalidDocumentVersion",this.$fault="client",Object.setPrototypeOf(this,nn.prototype),this.Message=t.Message}};var sn=class extends N{constructor(t){super({name:"UnsupportedPlatformType",$fault:"client",...t}),this.name="UnsupportedPlatformType",this.$fault="client",Object.setPrototypeOf(this,sn.prototype),this.Message=t.Message}};var rn=class extends N{constructor(t){super({name:"MaxDocumentSizeExceeded",$fault:"client",...t}),this.name="MaxDocumentSizeExceeded",this.$fault="client",Object.setPrototypeOf(this,rn.prototype),this.Message=t.Message}};var on=class extends N{constructor(t){super({name:"InvalidPluginName",$fault:"client",...t}),this.name="InvalidPluginName",this.$fault="client",Object.setPrototypeOf(this,on.prototype)}},an=class extends N{constructor(t){super({name:"InvocationDoesNotExist",$fault:"client",...t}),this.name="InvocationDoesNotExist",this.$fault="client",Object.setPrototypeOf(this,an.prototype)}};var cn=class extends N{constructor(t){super({name:"InvalidNotificationConfig",$fault:"client",...t}),this.name="InvalidNotificationConfig",this.$fault="client",Object.setPrototypeOf(this,cn.prototype),this.Message=t.Message}},dn=class extends N{constructor(t){super({name:"InvalidOutputFolder",$fault:"client",...t}),this.name="InvalidOutputFolder",this.$fault="client",Object.setPrototypeOf(this,dn.prototype)}},ln=class extends N{constructor(t){super({name:"InvalidRole",$fault:"client",...t}),this.name="InvalidRole",this.$fault="client",Object.setPrototypeOf(this,ln.prototype),this.Message=t.Message}};var cp=e=>({...e,...e.Parameters&&{Parameters:Ze}});var Yi=e=>({...e,...e.Parameters&&{Parameters:Ze}}),Xi=e=>({...e,...e.Command&&{Command:cp(e.Command)}});var Qi=async(e,t)=>{let n=ac("GetCommandInvocation"),s;return s=JSON.stringify(Ap(e,t)),oc(t,n,"/",void 0,s)};var Zi=async(e,t)=>{let n=ac("SendCommand"),s;return s=JSON.stringify(Dp(e,t)),oc(t,n,"/",void 0,s)};var ec=async(e,t)=>{if(e.statusCode>=300)return dp(e,t);let n=await Co(e.body,t),s={};s=Gp(n,t);let r={$metadata:V(e),...s};return Promise.resolve(r)},dp=async(e,t)=>{let n={...e,body:await ic(e.body,t)},s=cc(e,n.body);switch(s){case"InternalServerError":case"com.amazonaws.ssm#InternalServerError":throw await nc(n,t);case"InvalidCommandId":case"com.amazonaws.ssm#InvalidCommandId":throw await up(n,t);case"InvalidInstanceId":case"com.amazonaws.ssm#InvalidInstanceId":throw await sc(n,t);case"InvalidPluginName":case"com.amazonaws.ssm#InvalidPluginName":throw await Ep(n,t);case"InvocationDoesNotExist":case"com.amazonaws.ssm#InvocationDoesNotExist":throw await gp(n,t);default:let r=n.body;Se({output:e,parsedBody:r,exceptionCtor:N,errorCode:s})}};var tc=async(e,t)=>{if(e.statusCode>=300)return lp(e,t);let n=await Co(e.body,t),s={};s=ch(n,t);let r={$metadata:V(e),...s};return Promise.resolve(r)},lp=async(e,t)=>{let n={...e,body:await ic(e.body,t)},s=cc(e,n.body);switch(s){case"DuplicateInstanceId":case"com.amazonaws.ssm#DuplicateInstanceId":throw await mp(n,t);case"InternalServerError":case"com.amazonaws.ssm#InternalServerError":throw await nc(n,t);case"InvalidDocument":case"com.amazonaws.ssm#InvalidDocument":throw await fp(n,t);case"InvalidDocumentVersion":case"com.amazonaws.ssm#InvalidDocumentVersion":throw await yp(n,t);case"InvalidInstanceId":case"com.amazonaws.ssm#InvalidInstanceId":throw await sc(n,t);case"InvalidNotificationConfig":case"com.amazonaws.ssm#InvalidNotificationConfig":throw await pp(n,t);case"InvalidOutputFolder":case"com.amazonaws.ssm#InvalidOutputFolder":throw await hp(n,t);case"InvalidParameters":case"com.amazonaws.ssm#InvalidParameters":throw await wp(n,t);case"InvalidRole":case"com.amazonaws.ssm#InvalidRole":throw await Ip(n,t);case"MaxDocumentSizeExceeded":case"com.amazonaws.ssm#MaxDocumentSizeExceeded":throw await Sp(n,t);case"UnsupportedPlatformType":case"com.amazonaws.ssm#UnsupportedPlatformType":throw await xp(n,t);default:let r=n.body;Se({output:e,parsedBody:r,exceptionCtor:N,errorCode:s})}};var mp=async(e,t)=>{let n=e.body,s=Wp(n,t),r=new Xt({$metadata:V(e),...s});return g(r,n)};var nc=async(e,t)=>{let n=e.body,s=Hp(n,t),r=new Yt({$metadata:V(e),...s});return g(r,n)};var up=async(e,t)=>{let n=e.body,s=jp(n,t),r=new Qt({$metadata:V(e),...s});return g(r,n)};var fp=async(e,t)=>{let n=e.body,s=Kp(n,t),r=new tn({$metadata:V(e),...s});return g(r,n)};var yp=async(e,t)=>{let n=e.body,s=Jp(n,t),r=new nn({$metadata:V(e),...s});return g(r,n)};var sc=async(e,t)=>{let n=e.body,s=Yp(n,t),r=new Zt({$metadata:V(e),...s});return g(r,n)};var pp=async(e,t)=>{let n=e.body,s=Xp(n,t),r=new cn({$metadata:V(e),...s});return g(r,n)};var hp=async(e,t)=>{let n=e.body,s=Qp(n,t),r=new dn({$metadata:V(e),...s});return g(r,n)};var wp=async(e,t)=>{let n=e.body,s=Zp(n,t),r=new en({$metadata:V(e),...s});return g(r,n)};var Ep=async(e,t)=>{let n=e.body,s=eh(n,t),r=new on({$metadata:V(e),...s});return g(r,n)};var Ip=async(e,t)=>{let n=e.body,s=th(n,t),r=new ln({$metadata:V(e),...s});return g(r,n)};var gp=async(e,t)=>{let n=e.body,s=nh(n,t),r=new an({$metadata:V(e),...s});return g(r,n)};var Sp=async(e,t)=>{let n=e.body,s=sh(n,t),r=new rn({$metadata:V(e),...s});return g(r,n)};var xp=async(e,t)=>{let n=e.body,s=uh(n,t),r=new sn({$metadata:V(e),...s});return g(r,n)};var Tp=(e,t)=>({...e.Name!=null&&{Name:e.Name}}),Cp=(e,t)=>({...e.Alarms!=null&&{Alarms:_p(e.Alarms,t)},...e.IgnorePollAlarmFailure!=null&&{IgnorePollAlarmFailure:e.IgnorePollAlarmFailure}}),_p=(e,t)=>e.filter(n=>n!=null).map(n=>Tp(n,t));var Rp=(e,t)=>({...e.CloudWatchLogGroupName!=null&&{CloudWatchLogGroupName:e.CloudWatchLogGroupName},...e.CloudWatchOutputEnabled!=null&&{CloudWatchOutputEnabled:e.CloudWatchOutputEnabled}});var Ap=(e,t)=>({...e.CommandId!=null&&{CommandId:e.CommandId},...e.InstanceId!=null&&{InstanceId:e.InstanceId},...e.PluginName!=null&&{PluginName:e.PluginName}});var bp=(e,t)=>e.filter(n=>n!=null).map(n=>n);var vp=(e,t)=>({...e.NotificationArn!=null&&{NotificationArn:e.NotificationArn},...e.NotificationEvents!=null&&{NotificationEvents:Pp(e.NotificationEvents,t)},...e.NotificationType!=null&&{NotificationType:e.NotificationType}}),Pp=(e,t)=>e.filter(n=>n!=null).map(n=>n);var Np=(e,t)=>Object.entries(e).reduce((n,[s,r])=>(r===null||(n[s]=Op(r,t)),n),{});var Op=(e,t)=>e.filter(n=>n!=null).map(n=>n);var Dp=(e,t)=>({...e.AlarmConfiguration!=null&&{AlarmConfiguration:Cp(e.AlarmConfiguration,t)},...e.CloudWatchOutputConfig!=null&&{CloudWatchOutputConfig:Rp(e.CloudWatchOutputConfig,t)},...e.Comment!=null&&{Comment:e.Comment},...e.DocumentHash!=null&&{DocumentHash:e.DocumentHash},...e.DocumentHashType!=null&&{DocumentHashType:e.DocumentHashType},...e.DocumentName!=null&&{DocumentName:e.DocumentName},...e.DocumentVersion!=null&&{DocumentVersion:e.DocumentVersion},...e.InstanceIds!=null&&{InstanceIds:bp(e.InstanceIds,t)},...e.MaxConcurrency!=null&&{MaxConcurrency:e.MaxConcurrency},...e.MaxErrors!=null&&{MaxErrors:e.MaxErrors},...e.NotificationConfig!=null&&{NotificationConfig:vp(e.NotificationConfig,t)},...e.OutputS3BucketName!=null&&{OutputS3BucketName:e.OutputS3BucketName},...e.OutputS3KeyPrefix!=null&&{OutputS3KeyPrefix:e.OutputS3KeyPrefix},...e.OutputS3Region!=null&&{OutputS3Region:e.OutputS3Region},...e.Parameters!=null&&{Parameters:Np(e.Parameters,t)},...e.ServiceRoleArn!=null&&{ServiceRoleArn:e.ServiceRoleArn},...e.Targets!=null&&{Targets:kp(e.Targets,t)},...e.TimeoutSeconds!=null&&{TimeoutSeconds:e.TimeoutSeconds}});var Mp=(e,t)=>({...e.Key!=null&&{Key:e.Key},...e.Values!=null&&{Values:Lp(e.Values,t)}});var kp=(e,t)=>e.filter(n=>n!=null).map(n=>Mp(n,t)),Lp=(e,t)=>e.filter(n=>n!=null).map(n=>n);var Fp=(e,t)=>({Name:f(e.Name)}),$p=(e,t)=>({Alarms:e.Alarms!=null?Vp(e.Alarms,t):void 0,IgnorePollAlarmFailure:wo(e.IgnorePollAlarmFailure)}),Vp=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>s===null?null:Fp(s,t)),zp=(e,t)=>({Name:f(e.Name),State:f(e.State)}),Up=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>s===null?null:zp(s,t));var rc=(e,t)=>({CloudWatchLogGroupName:f(e.CloudWatchLogGroupName),CloudWatchOutputEnabled:wo(e.CloudWatchOutputEnabled)}),Bp=(e,t)=>({AlarmConfiguration:e.AlarmConfiguration!=null?$p(e.AlarmConfiguration,t):void 0,CloudWatchOutputConfig:e.CloudWatchOutputConfig!=null?rc(e.CloudWatchOutputConfig,t):void 0,CommandId:f(e.CommandId),Comment:f(e.Comment),CompletedCount:ue(e.CompletedCount),DeliveryTimedOutCount:ue(e.DeliveryTimedOutCount),DocumentName:f(e.DocumentName),DocumentVersion:f(e.DocumentVersion),ErrorCount:ue(e.ErrorCount),ExpiresAfter:e.ExpiresAfter!=null?fe(go(Jt(e.ExpiresAfter))):void 0,InstanceIds:e.InstanceIds!=null?qp(e.InstanceIds,t):void 0,MaxConcurrency:f(e.MaxConcurrency),MaxErrors:f(e.MaxErrors),NotificationConfig:e.NotificationConfig!=null?rh(e.NotificationConfig,t):void 0,OutputS3BucketName:f(e.OutputS3BucketName),OutputS3KeyPrefix:f(e.OutputS3KeyPrefix),OutputS3Region:f(e.OutputS3Region),Parameters:e.Parameters!=null?ah(e.Parameters,t):void 0,RequestedDateTime:e.RequestedDateTime!=null?fe(go(Jt(e.RequestedDateTime))):void 0,ServiceRole:f(e.ServiceRole),Status:f(e.Status),StatusDetails:f(e.StatusDetails),TargetCount:ue(e.TargetCount),Targets:e.Targets!=null?lh(e.Targets,t):void 0,TimeoutSeconds:ue(e.TimeoutSeconds),TriggeredAlarms:e.TriggeredAlarms!=null?Up(e.TriggeredAlarms,t):void 0});var Wp=(e,t)=>({});var Gp=(e,t)=>({CloudWatchOutputConfig:e.CloudWatchOutputConfig!=null?rc(e.CloudWatchOutputConfig,t):void 0,CommandId:f(e.CommandId),Comment:f(e.Comment),DocumentName:f(e.DocumentName),DocumentVersion:f(e.DocumentVersion),ExecutionElapsedTime:f(e.ExecutionElapsedTime),ExecutionEndDateTime:f(e.ExecutionEndDateTime),ExecutionStartDateTime:f(e.ExecutionStartDateTime),InstanceId:f(e.InstanceId),PluginName:f(e.PluginName),ResponseCode:ue(e.ResponseCode),StandardErrorContent:f(e.StandardErrorContent),StandardErrorUrl:f(e.StandardErrorUrl),StandardOutputContent:f(e.StandardOutputContent),StandardOutputUrl:f(e.StandardOutputUrl),Status:f(e.Status),StatusDetails:f(e.StatusDetails)});var qp=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>s===null?null:f(s));var Hp=(e,t)=>({Message:f(e.Message)});var jp=(e,t)=>({});var Kp=(e,t)=>({Message:f(e.Message)});var Jp=(e,t)=>({Message:f(e.Message)});var Yp=(e,t)=>({Message:f(e.Message)});var Xp=(e,t)=>({Message:f(e.Message)});var Qp=(e,t)=>({});var Zp=(e,t)=>({Message:f(e.Message)});var eh=(e,t)=>({});var th=(e,t)=>({Message:f(e.Message)});var nh=(e,t)=>({});var sh=(e,t)=>({Message:f(e.Message)});var rh=(e,t)=>({NotificationArn:f(e.NotificationArn),NotificationEvents:e.NotificationEvents!=null?oh(e.NotificationEvents,t):void 0,NotificationType:f(e.NotificationType)}),oh=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>s===null?null:f(s));var ah=(e,t)=>Object.entries(e).reduce((n,[s,r])=>(r===null||(n[s]=ih(r,t)),n),{}),ih=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>s===null?null:f(s));var ch=(e,t)=>({Command:e.Command!=null?Bp(e.Command,t):void 0});var dh=(e,t)=>({Key:f(e.Key),Values:e.Values!=null?mh(e.Values,t):void 0});var lh=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>s===null?null:dh(s,t)),mh=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>s===null?null:f(s));var uh=(e,t)=>({Message:f(e.Message)});var V=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),fh=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),yh=(e,t)=>fh(e,t).then(n=>t.utf8Encoder(n)),oc=async(e,t,n,s,r)=>{let{hostname:o,protocol:a="https",port:i,path:c}=await e.endpoint(),d={protocol:a,hostname:o,port:i,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+n:c+n,headers:t};return s!==void 0&&(d.hostname=s),r!==void 0&&(d.body=r),new R(d)};function ac(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`AmazonSSM.${e}`}}var Co=(e,t)=>yh(e,t).then(n=>n.length?JSON.parse(n):{}),ic=async(e,t)=>{let n=await Co(e,t);return n.message=n.message??n.Message,n},cc=(e,t)=>{let n=(o,a)=>Object.keys(o).find(i=>i.toLowerCase()===a.toLowerCase()),s=o=>{let a=o;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},r=n(e.headers,"x-amzn-errortype");if(r!==void 0)return s(e.headers[r]);if(t.code!==void 0)return s(t.code);if(t.__type!==void 0)return s(t.__type)};var mn=class extends K{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,n,s){this.middlewareStack.use(te(n,this.serialize,this.deserialize)),this.middlewareStack.use(ne(n,mn.getEndpointParameterInstructions()));let r=t.concat(this.middlewareStack),{logger:o}=n,c={logger:o,clientName:"SSMClient",commandName:"GetCommandInvocationCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=n;return r.resolve(l=>d.handle(l.request,s||{}),c)}serialize(t,n){return Qi(t,n)}deserialize(t,n){return ec(t,n)}};var un=class extends K{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,n,s){this.middlewareStack.use(te(n,this.serialize,this.deserialize)),this.middlewareStack.use(ne(n,un.getEndpointParameterInstructions()));let r=t.concat(this.middlewareStack),{logger:o}=n,c={logger:o,clientName:"SSMClient",commandName:"SendCommandCommand",inputFilterSensitiveLog:Yi,outputFilterSensitiveLog:Xi},{requestHandler:d}=n;return r.resolve(l=>d.handle(l.request,s||{}),c)}serialize(t,n){return Zi(t,n)}deserialize(t,n){return tc(t,n)}};var nt;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(nt||(nt={}));var fn=(e,t,n)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${n} "${t}". Expected "true" or "false", got ${e[t]}.`)}};var ph="AWS_USE_DUALSTACK_ENDPOINT",hh="use_dualstack_endpoint";var st={environmentVariableSelector:e=>fn(e,ph,nt.ENV),configFileSelector:e=>fn(e,hh,nt.CONFIG),default:!1};var wh="AWS_USE_FIPS_ENDPOINT",Eh="use_fips_endpoint";var rt={environmentVariableSelector:e=>fn(e,wh,nt.ENV),configFileSelector:e=>fn(e,Eh,nt.CONFIG),default:!1};var Ih="AWS_REGION",gh="region",Te={environmentVariableSelector:e=>e[Ih],configFileSelector:e=>e[gh],default:()=>{throw new Error("Region is missing")}},ot={preferredFile:"credentials"};var Gs=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips"));var _o=e=>Gs(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e;var at=e=>{let{region:t,useFipsEndpoint:n}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return _o(t);let s=await t();return _o(s)},useFipsEndpoint:async()=>{let s=typeof t=="string"?t:await t();return Gs(s)?!0:typeof n!="function"?Promise.resolve(!!n):n()}}};var dc="content-length";function Sh(e){return t=>async n=>{let s=n.request;if(R.isInstance(s)){let{body:r,headers:o}=s;if(r&&Object.keys(o).map(a=>a.toLowerCase()).indexOf(dc)===-1)try{let a=e(r);s.headers={...s.headers,[dc]:String(a)}}catch{}}return t({...n,request:s})}}var xh={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},it=e=>({applyToStack:t=>{t.add(Sh(e.bodyLengthChecker),xh)}});var Th=e=>t=>async n=>{if(!R.isInstance(n.request))return t(n);let{request:s}=n,{handlerProtocol:r=""}=e.requestHandler.metadata||{};if(r.indexOf("h2")>=0&&!s.headers[":authority"])delete s.headers.host,s.headers[":authority"]="";else if(!s.headers.host){let o=s.hostname;s.port!=null&&(o+=`:${s.port}`),s.headers.host=o}return t(n)},Ch={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},ct=e=>({applyToStack:t=>{t.add(Th(e),Ch)}});var _h=()=>(e,t)=>async n=>{var s,r;try{let o=await e(n),{clientName:a,commandName:i,logger:c,dynamoDbDocumentClientOptions:d={}}=t,{overrideInputFilterSensitiveLog:l,overrideOutputFilterSensitiveLog:m}=d,u=l??t.inputFilterSensitiveLog,y=m??t.outputFilterSensitiveLog,{$metadata:p,...h}=o.output;return(s=c==null?void 0:c.info)==null||s.call(c,{clientName:a,commandName:i,input:u(n.input),output:y(h),metadata:p}),o}catch(o){let{clientName:a,commandName:i,logger:c,dynamoDbDocumentClientOptions:d={}}=t,{overrideInputFilterSensitiveLog:l}=d,m=l??t.inputFilterSensitiveLog;throw(r=c==null?void 0:c.error)==null||r.call(c,{clientName:a,commandName:i,input:m(n.input),error:o,metadata:o.$metadata}),o}},Rh={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},dt=e=>({applyToStack:t=>{t.add(_h(),Rh)}});var lc="X-Amzn-Trace-Id",Ah="AWS_LAMBDA_FUNCTION_NAME",bh="_X_AMZN_TRACE_ID",vh=e=>t=>async n=>{let{request:s}=n;if(!R.isInstance(s)||e.runtime!=="node"||s.headers.hasOwnProperty(lc))return t(n);let r=process.env[Ah],o=process.env[bh],a=i=>typeof i=="string"&&i.length>0;return a(r)&&a(o)&&(s.headers[lc]=o),t({...n,request:s})},Ph={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},lt=e=>({applyToStack:t=>{t.add(vh(e),Ph)}});var Ce;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(Ce||(Ce={}));var Dt=3,_e="STANDARD";var mc=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],uc=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],fc=[500,502,503,504],yc=["ECONNRESET","EPIPE","ETIMEDOUT"];var yn=e=>{var t,n;return((t=e.$metadata)==null?void 0:t.httpStatusCode)===429||mc.includes(e.name)||((n=e.$retryable)==null?void 0:n.throttling)==!0},qs=e=>{var t;return uc.includes(e.name)||yc.includes((e==null?void 0:e.code)||"")||fc.includes(((t=e.$metadata)==null?void 0:t.httpStatusCode)||0)},pc=e=>{var t;if(((t=e.$metadata)==null?void 0:t.httpStatusCode)!==void 0){let n=e.$metadata.httpStatusCode;return 500<=n&&n<=599&&!qs(e)}return!1};var as=class{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(t==null?void 0:t.beta)??.7,this.minCapacity=(t==null?void 0:t.minCapacity)??1,this.minFillRate=(t==null?void 0:t.minFillRate)??.5,this.scaleConstant=(t==null?void 0:t.scaleConstant)??.4,this.smooth=(t==null?void 0:t.smooth)??.8;let n=this.getCurrentTimeInSeconds();this.lastThrottleTime=n,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let n=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(s=>setTimeout(s,n))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let n=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+n),this.lastTimestamp=t}updateClientSendingRate(t){let n;if(this.updateMeasuredRate(),yn(t)){let r=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=r,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),n=this.cubicThrottle(r),this.enableTokenBucket()}else this.calculateTimeWindow(),n=this.cubicSuccess(this.getCurrentTimeInSeconds());let s=Math.min(n,2*this.measuredTxRate);this.updateTokenBucketRate(s)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),n=Math.floor(t*2)/2;if(this.requestCount++,n>this.lastTxRateBucket){let s=this.requestCount/(n-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(s*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=n}}getPrecise(t){return parseFloat(t.toFixed(8))}};var Hs="amz-sdk-invocation-id",js="amz-sdk-request";var hc=()=>{let e=100;return{computeNextBackoffDelay:s=>Math.floor(Math.min(2e4,Math.random()*2**s*e)),setDelayBase:s=>{e=s}}};var Sc=(e,t,n,s)=>{let r=e,o=(s==null?void 0:s.retryCost)??5,a=(s==null?void 0:s.timeoutRetryCost)??10,i=(s==null?void 0:s.retryBackoffStrategy)??hc(),c=e,d=Math.min(2e4,t),l,m=n??0,u=le=>le==="TRANSIENT"?a:o,y=()=>m,p=()=>d,h=()=>l,E=le=>u(le)<=c;return{getRetryCount:y,getRetryDelay:p,getLastRetryCost:h,hasRetryTokens:E,getRetryTokenCount:le=>{let Br=le.errorType;if(!E(Br))throw new Error("No retry token available");let Wr=u(Br),tf=Br==="THROTTLING"?500:100;i.setDelayBase(tf);let va=i.computeNextBackoffDelay(m);if(le.retryAfterHint){let nf=le.retryAfterHint.getTime()-Date.now();d=Math.max(nf||0,va)}else d=va;return m++,l=Wr,c-=Wr,Wr},releaseRetryTokens:le=>{c+=le??1,c=Math.min(c,r)}}};var hn=class{constructor(t){this.maxAttemptsProvider=t,this.mode=Ce.STANDARD,this.retryToken=Sc(500,100),this.maxAttemptsProvider=t}async acquireInitialRetryToken(t){return this.retryToken}async refreshRetryTokenForRetry(t,n){let s=await this.getMaxAttempts();if(this.shouldRetry(t,n,s))return t.getRetryTokenCount(n),t;throw new Error("No retry token available")}recordSuccess(t){this.retryToken.releaseRetryTokens(t.getLastRetryCost())}async getMaxAttempts(){let t;try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Dt}`),Dt}}shouldRetry(t,n,s){return t.getRetryCount()<s&&t.hasRetryTokens(n.errorType)&&this.isRetryableError(n.errorType)}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}};var Js=class{constructor(t,n){this.maxAttemptsProvider=t,this.mode=Ce.ADAPTIVE;let{rateLimiter:s}=n??{};this.rateLimiter=s??new as,this.standardRetryStrategy=new hn(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,n){return this.rateLimiter.updateClientSendingRate(n),this.standardRetryStrategy.refreshRetryTokenForRetry(t,n)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}};var Ro=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`);var Tc="AWS_MAX_ATTEMPTS",Cc="max_attempts",mt={environmentVariableSelector:e=>{let t=e[Tc];if(!t)return;let n=parseInt(t);if(Number.isNaN(n))throw new Error(`Environment variable ${Tc} mast be a number, got "${t}"`);return n},configFileSelector:e=>{let t=e[Cc];if(!t)return;let n=parseInt(t);if(Number.isNaN(n))throw new Error(`Shared config file entry ${Cc} mast be a number, got "${t}"`);return n},default:Dt},ut=e=>{let{retryStrategy:t}=e,n=L(e.maxAttempts??Dt);return{...e,maxAttempts:n,retryStrategy:async()=>t||(await L(e.retryMode)()===Ce.ADAPTIVE?new Js(n):new hn(n))}},Nh="AWS_RETRY_MODE",Oh="retry_mode",ft={environmentVariableSelector:e=>e[Nh],configFileSelector:e=>e[Oh],default:_e};Qr();var Dh=e=>(t,n)=>async s=>{let r=await e.retryStrategy(),o=await e.maxAttempts();if(Mh(r)){r=r;let a=await r.acquireInitialRetryToken(n.partition_id),i=new Error,c=0,d=0,{request:l}=s;for(R.isInstance(l)&&(l.headers[Hs]=Ms());;)try{R.isInstance(l)&&(l.headers[js]=`attempt=${c+1}; max=${o}`);let{response:m,output:u}=await t(s);return r.recordSuccess(a),u.$metadata.attempts=c+1,u.$metadata.totalRetryDelay=d,{response:m,output:u}}catch(m){let u=kh(m);i=Ro(m);try{a=await r.refreshRetryTokenForRetry(a,u)}catch{throw i.$metadata||(i.$metadata={}),i.$metadata.attempts=c+1,i.$metadata.totalRetryDelay=d,i}c=a.getRetryCount();let y=a.getRetryDelay();d+=y,await new Promise(p=>setTimeout(p,y))}}else return r=r,r!=null&&r.mode&&(n.userAgent=[...n.userAgent||[],["cfg/retry-mode",r.mode]]),r.retry(t,s)},Mh=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",kh=e=>{let t={errorType:Lh(e)},n=$h(e.$response);return n&&(t.retryAfterHint=n),t},Lh=e=>yn(e)?"THROTTLING":qs(e)?"TRANSIENT":pc(e)?"SERVER_ERROR":"CLIENT_ERROR",Fh={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},yt=e=>({applyToStack:t=>{t.add(Dh(e),Fh)}}),$h=e=>{if(!xe.isInstance(e))return;let t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;let n=e.headers[t],s=Number(n);return Number.isNaN(s)?new Date(n):new Date(s*1e3)};var J=class extends Error{constructor(t,n=!0){super(t),this.tryNextLink=n,this.name="ProviderError",Object.setPrototypeOf(this,J.prototype)}static from(t,n=!0){return Object.assign(new this(t.message,n),t)}};var I=class extends J{constructor(t,n=!0){super(t,n),this.tryNextLink=n,this.name="CredentialsProviderError",Object.setPrototypeOf(this,I.prototype)}};var Y=class extends J{constructor(t,n=!0){super(t,n),this.tryNextLink=n,this.name="TokenProviderError",Object.setPrototypeOf(this,Y.prototype)}};function Ys(...e){return()=>{let t=Promise.reject(new J("No providers in chain"));for(let n of e)t=t.catch(s=>{if(s!=null&&s.tryNextLink)return n();throw s});return t}}var _c=e=>()=>Promise.resolve(e);var pt=(e,t,n)=>{let s,r,o,a=!1,i=async()=>{r||(r=e());try{s=await r,o=!0,a=!1}finally{r=void 0}return s};return t===void 0?async c=>((!o||c!=null&&c.forceRefresh)&&(s=await i()),s):async c=>((!o||c!=null&&c.forceRefresh)&&(s=await i()),a?s:n&&!n(s)?(a=!0,s):(t(s)&&await i(),s))};var Rc={},Vh={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),Rc[e]=t,Vh[t]=e}function Fe(e){let t="";for(let n=0;n<e.byteLength;n++)t+=Rc[e[n]];return t}var Xs=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";var Qs=require("buffer"),Mt=(e,t=0,n=e.byteLength-t)=>{if(!Xs(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return Qs.Buffer.from(e,t,n)},wn=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?Qs.Buffer.from(e,t):Qs.Buffer.from(e)};var Re=e=>{let t=wn(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)};var Ae=e=>typeof e=="string"?Re(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e);var ht=e=>Mt(e.buffer,e.byteOffset,e.byteLength).toString("utf8");var Ac="X-Amz-Algorithm",bc="X-Amz-Credential",Ao="X-Amz-Date",vc="X-Amz-SignedHeaders",Pc="X-Amz-Expires",bo="X-Amz-Signature",vo="X-Amz-Security-Token";var Po="authorization",No=Ao.toLowerCase(),zh="date",Nc=[Po,No,zh],Oc=bo.toLowerCase(),is="x-amz-content-sha256",Dc=vo.toLowerCase();var Mc={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},kc=/^proxy-/,Lc=/^sec-/;var Zs="AWS4-HMAC-SHA256";var Fc="AWS4-HMAC-SHA256-PAYLOAD",$c="UNSIGNED-PAYLOAD",Vc=50,Oo="aws4_request",zc=60*60*24*7;var er={},Do=[],tr=(e,t,n)=>`${e}/${t}/${n}/${Oo}`,Bc=async(e,t,n,s,r)=>{let o=await Uc(e,t.secretAccessKey,t.accessKeyId),a=`${n}:${s}:${r}:${Fe(o)}:${t.sessionToken}`;if(a in er)return er[a];for(Do.push(a);Do.length>Vc;)delete er[Do.shift()];let i=`AWS4${t.secretAccessKey}`;for(let c of[n,s,r,Oo])i=await Uc(e,i,c);return er[a]=i};var Uc=(e,t,n)=>{let s=new e(t);return s.update(Ae(n)),s.digest()};var nr=({headers:e},t,n)=>{let s={};for(let r of Object.keys(e).sort()){if(e[r]==null)continue;let o=r.toLowerCase();(o in Mc||t!=null&&t.has(o)||kc.test(o)||Lc.test(o))&&(!n||n&&!n.has(o))||(s[o]=e[r].trim().replace(/\s+/g," "))}return s};var be=e=>encodeURIComponent(e).replace(/[!'()*]/g,Uh),Uh=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;var Mo=({query:e={}})=>{let t=[],n={};for(let s of Object.keys(e).sort()){if(s.toLowerCase()===Oc)continue;t.push(s);let r=e[s];typeof r=="string"?n[s]=`${be(s)}=${be(r)}`:Array.isArray(r)&&(n[s]=r.slice(0).sort().reduce((o,a)=>o.concat([`${be(s)}=${be(a)}`]),[]).join("&"))}return t.map(s=>n[s]).filter(s=>s).join("&")};var cs=async({headers:e,body:t},n)=>{for(let s of Object.keys(e))if(s.toLowerCase()===is)return e[s];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||Xs(t)){let s=new n;return s.update(Ae(t)),Fe(await s.digest())}return $c};var Wc=(e,t)=>{e=e.toLowerCase();for(let n of Object.keys(t))if(e===n.toLowerCase())return!0;return!1};var sr=({headers:e,query:t,...n})=>({...n,headers:{...e},query:t?Bh(t):void 0}),Bh=e=>Object.keys(e).reduce((t,n)=>{let s=e[n];return{...t,[n]:Array.isArray(s)?[...s]:s}},{});var ko=(e,t={})=>{var r;let{headers:n,query:s={}}=typeof e.clone=="function"?e.clone():sr(e);for(let o of Object.keys(n)){let a=o.toLowerCase();a.slice(0,6)==="x-amz-"&&!((r=t.unhoistableHeaders)!=null&&r.has(a))&&(s[o]=n[o],delete n[o])}return{...e,headers:n,query:s}};var rr=e=>{e=typeof e.clone=="function"?e.clone():sr(e);for(let t of Object.keys(e.headers))Nc.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e};var Gc=e=>Wh(e).toISOString().replace(/\.\d{3}Z$/,"Z"),Wh=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;var ds=class{constructor({applyChecksum:t,credentials:n,region:s,service:r,sha256:o,uriEscapePath:a=!0}){this.service=r,this.sha256=o,this.uriEscapePath=a,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=L(s),this.credentialProvider=L(n)}async presign(t,n={}){let{signingDate:s=new Date,expiresIn:r=3600,unsignableHeaders:o,unhoistableHeaders:a,signableHeaders:i,signingRegion:c,signingService:d}=n,l=await this.credentialProvider();this.validateResolvedCredentials(l);let m=c??await this.regionProvider(),{longDate:u,shortDate:y}=or(s);if(r>zc)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let p=tr(y,m,d??this.service),h=ko(rr(t),{unhoistableHeaders:a});l.sessionToken&&(h.query[vo]=l.sessionToken),h.query[Ac]=Zs,h.query[bc]=`${l.accessKeyId}/${p}`,h.query[Ao]=u,h.query[Pc]=r.toString(10);let E=nr(h,o,i);return h.query[vc]=qc(E),h.query[bo]=await this.getSignature(u,p,this.getSigningKey(l,m,y,d),this.createCanonicalRequest(h,E,await cs(t,this.sha256))),h}async sign(t,n){return typeof t=="string"?this.signString(t,n):t.headers&&t.payload?this.signEvent(t,n):this.signRequest(t,n)}async signEvent({headers:t,payload:n},{signingDate:s=new Date,priorSignature:r,signingRegion:o,signingService:a}){let i=o??await this.regionProvider(),{shortDate:c,longDate:d}=or(s),l=tr(c,i,a??this.service),m=await cs({headers:{},body:n},this.sha256),u=new this.sha256;u.update(t);let y=Fe(await u.digest()),p=[Fc,d,l,r,y,m].join(`
`);return this.signString(p,{signingDate:s,signingRegion:i,signingService:a})}async signString(t,{signingDate:n=new Date,signingRegion:s,signingService:r}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let a=s??await this.regionProvider(),{shortDate:i}=or(n),c=new this.sha256(await this.getSigningKey(o,a,i,r));return c.update(Ae(t)),Fe(await c.digest())}async signRequest(t,{signingDate:n=new Date,signableHeaders:s,unsignableHeaders:r,signingRegion:o,signingService:a}={}){let i=await this.credentialProvider();this.validateResolvedCredentials(i);let c=o??await this.regionProvider(),d=rr(t),{longDate:l,shortDate:m}=or(n),u=tr(m,c,a??this.service);d.headers[No]=l,i.sessionToken&&(d.headers[Dc]=i.sessionToken);let y=await cs(d,this.sha256);!Wc(is,d.headers)&&this.applyChecksum&&(d.headers[is]=y);let p=nr(d,r,s),h=await this.getSignature(l,u,this.getSigningKey(i,c,m,a),this.createCanonicalRequest(d,p,y));return d.headers[Po]=`${Zs} Credential=${i.accessKeyId}/${u}, SignedHeaders=${qc(p)}, Signature=${h}`,d}createCanonicalRequest(t,n,s){let r=Object.keys(n).sort();return`${t.method}
${this.getCanonicalPath(t)}
${Mo(t)}
${r.map(o=>`${o}:${n[o]}`).join(`
`)}

${r.join(";")}
${s}`}async createStringToSign(t,n,s){let r=new this.sha256;r.update(Ae(s));let o=await r.digest();return`${Zs}
${t}
${n}
${Fe(o)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let n=[];for(let o of t.split("/"))(o==null?void 0:o.length)!==0&&o!=="."&&(o===".."?n.pop():n.push(o));let s=`${t!=null&&t.startsWith("/")?"/":""}${n.join("/")}${n.length>0&&(t!=null&&t.endsWith("/"))?"/":""}`;return encodeURIComponent(s).replace(/%2F/g,"/")}return t}async getSignature(t,n,s,r){let o=await this.createStringToSign(t,n,r),a=new this.sha256(await s);return a.update(Ae(o)),Fe(await a.digest())}getSigningKey(t,n,s,r){return Bc(this.sha256,t,s,n,r||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}},or=e=>{let t=Gc(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},qc=e=>Object.keys(e).sort().join(";");var Gh=3e5,ar=e=>{let t=e.credentials?qh(e.credentials):e.credentialDefaultProvider(e),{signingEscapePath:n=!0,systemClockOffset:s=e.systemClockOffset||0,sha256:r}=e,o;return e.signer?o=L(e.signer):e.regionInfoProvider?o=()=>L(e.region)().then(async a=>[await e.regionInfoProvider(a,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},a]).then(([a,i])=>{let{signingRegion:c,signingService:d}=a;e.signingRegion=e.signingRegion||c||i,e.signingName=e.signingName||d||e.serviceId;let l={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:r,uriEscapePath:n},m=e.signerConstructor||ds;return new m(l)}):o=async a=>{a=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await L(e.region)(),properties:{}},a);let i=a.signingRegion,c=a.signingName;e.signingRegion=e.signingRegion||i,e.signingName=e.signingName||c||e.serviceId;let d={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:r,uriEscapePath:n},l=e.signerConstructor||ds;return new l(d)},{...e,systemClockOffset:s,signingEscapePath:n,credentials:t,signer:o}};var qh=e=>typeof e=="function"?pt(e,t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<Gh,t=>t.expiration!==void 0):L(e);var ir=e=>new Date(Date.now()+e);var Hc=(e,t)=>Math.abs(ir(t).getTime()-e)>=3e5;var Lo=(e,t)=>{let n=Date.parse(e);return Hc(n,t)?n-Date.now():t};var Hh=e=>(t,n)=>async function(s){var d,l,m,u;if(!R.isInstance(s.request))return t(s);let r=(m=(l=(d=n.endpointV2)==null?void 0:d.properties)==null?void 0:l.authSchemes)==null?void 0:m[0],o=(r==null?void 0:r.name)==="sigv4a"?(u=r==null?void 0:r.signingRegionSet)==null?void 0:u.join(","):void 0,a=await e.signer(r),i=await t({...s,request:await a.sign(s.request,{signingDate:ir(e.systemClockOffset),signingRegion:o||n.signing_region,signingService:n.signing_service})}).catch(y=>{let p=y.ServerTime??jc(y.$response);throw p&&(e.systemClockOffset=Lo(p,e.systemClockOffset)),y}),c=jc(i.response);return c&&(e.systemClockOffset=Lo(c,e.systemClockOffset)),i},jc=e=>{var t,n;return xe.isInstance(e)?((t=e.headers)==null?void 0:t.date)??((n=e.headers)==null?void 0:n.Date):void 0},jh={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},cr=e=>({applyToStack:t=>{t.addRelativeTo(Hh(e),jh)}});function wt(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}var Fo={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}}],version:"1.1"};var Kc=Fo,Jc="",Jh=e=>{let{partitions:t}=Kc;for(let s of t){let{regions:r,outputs:o}=s;for(let[a,i]of Object.entries(r))if(a===e)return{...o,...i}}for(let s of t){let{regionRegex:r,outputs:o}=s;if(new RegExp(r).test(e))return{...o}}let n=t.find(s=>s.id==="aws");if(!n)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...n.outputs}},Yc=(e,t="")=>{Kc=e,Jc=t},Yh=()=>{Yc(Fo,"")},$o=()=>Jc;var $e="endpoints";function re(e){return typeof e!="object"||e==null?e:"ref"in e?`$${re(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(re).join(", ")})`:JSON.stringify(e,null,2)}var b=class extends Error{constructor(t){super(t),this.name="EndpointError"}};var Bo={};Gr(Bo,{aws:()=>Vo,booleanEquals:()=>ew,getAttr:()=>zo,isSet:()=>tw,isValidHostLabel:()=>lr,not:()=>nw,parseURL:()=>sw,stringEquals:()=>rw,substring:()=>ow,uriEncode:()=>aw});var Vo={};Gr(Vo,{getUserAgentPrefix:()=>$o,isVirtualHostableS3Bucket:()=>Xc,parseArn:()=>Zh,partition:()=>Jh,setPartitionInfo:()=>Yc,useDefaultPartitionInfo:()=>Yh});var Xh=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),dr=e=>Xh.test(e)||e.startsWith("[")&&e.endsWith("]");var Qh=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),lr=(e,t=!1)=>{if(!t)return Qh.test(e);let n=e.split(".");for(let s of n)if(!lr(s))return!1;return!0};var Xc=(e,t=!1)=>{if(t){for(let n of e.split("."))if(!Xc(n))return!1;return!0}return!(!lr(e)||e.length<3||e.length>63||e!==e.toLowerCase()||dr(e))};var Zh=e=>{let t=e.split(":");if(t.length<6)return null;let[n,s,r,o,a,...i]=t;return n!=="arn"||s===""||r===""||i[0]===""?null:{partition:s,service:r,region:o,accountId:a,resourceId:i[0].includes("/")?i[0].split("/"):i}};var ew=(e,t)=>e===t;var Qc=e=>{let t=e.split("."),n=[];for(let s of t){let r=s.indexOf("[");if(r!==-1){if(s.indexOf("]")!==s.length-1)throw new b(`Path: '${e}' does not end with ']'`);let o=s.slice(r+1,-1);if(Number.isNaN(parseInt(o)))throw new b(`Invalid array index: '${o}' in path: '${e}'`);r!==0&&n.push(s.slice(0,r)),n.push(o)}else n.push(s)}return n};var zo=(e,t)=>Qc(t).reduce((n,s)=>{if(typeof n!="object")throw new b(`Index '${s}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(n)?n[parseInt(s)]:n[s]},e);var tw=e=>e!=null;var nw=e=>!e;var Zc;(function(e){e.HEADER="header",e.QUERY="query"})(Zc||(Zc={}));var ed;(function(e){e.AAAA="AAAA",e.A="A"})(ed||(ed={}));var En;(function(e){e.HTTP="http",e.HTTPS="https"})(En||(En={}));var td;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(td||(td={}));var Uo={[En.HTTP]:80,[En.HTTPS]:443},sw=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:u,port:y,protocol:p="",path:h="",query:E={}}=e,we=new URL(`${p}//${u}${y?`:${y}`:""}${h}`);return we.search=Object.entries(E).map(([ba,le])=>`${ba}=${le}`).join("&"),we}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let n=t.href,{host:s,hostname:r,pathname:o,protocol:a,search:i}=t;if(i)return null;let c=a.slice(0,-1);if(!Object.values(En).includes(c))return null;let d=dr(r),l=n.includes(`${s}:${Uo[c]}`)||typeof e=="string"&&e.includes(`${s}:${Uo[c]}`),m=`${s}${l?`:${Uo[c]}`:""}`;return{scheme:c,authority:m,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:d}};var rw=(e,t)=>e===t;var ow=(e,t,n,s)=>t>=n||e.length<n?null:s?e.substring(e.length-n,e.length-t):e.substring(t,n);var aw=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`);var mr=(e,t)=>{let n=[],s={...t.endpointParams,...t.referenceRecord},r=0;for(;r<e.length;){let o=e.indexOf("{",r);if(o===-1){n.push(e.slice(r));break}n.push(e.slice(r,o));let a=e.indexOf("}",o);if(a===-1){n.push(e.slice(o));break}e[o+1]==="{"&&e[a+1]==="}"&&(n.push(e.slice(o+1,a)),r=a+2);let i=e.substring(o+1,a);if(i.includes("#")){let[c,d]=i.split("#");n.push(zo(s[c],d))}else n.push(s[i]);r=a+1}return n.join("")};var nd=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e];var Et=(e,t,n)=>{if(typeof e=="string")return mr(e,n);if(e.fn)return ur(e,n);if(e.ref)return nd(e,n);throw new b(`'${t}': ${String(e)} is not a string, function or reference.`)};var ur=({fn:e,argv:t},n)=>{let s=t.map(r=>["boolean","number"].includes(typeof r)?r:Et(r,"arg",n));return e.split(".").reduce((r,o)=>r[o],Bo)(...s)};var sd=({assign:e,...t},n)=>{var r,o;if(e&&e in n.referenceRecord)throw new b(`'${e}' is already defined in Reference Record.`);let s=ur(t,n);return(o=(r=n.logger)==null?void 0:r.debug)==null||o.call(r,$e,`evaluateCondition: ${re(t)} = ${re(s)}`),{result:s===""?!0:!!s,...e!=null&&{toAssign:{name:e,value:s}}}};var In=(e=[],t)=>{var s,r;let n={};for(let o of e){let{result:a,toAssign:i}=sd(o,{...t,referenceRecord:{...t.referenceRecord,...n}});if(!a)return{result:a};i&&(n[i.name]=i.value,(r=(s=t.logger)==null?void 0:s.debug)==null||r.call(s,$e,`assign: ${i.name} := ${re(i.value)}`))}return{result:!0,referenceRecord:n}};var rd=(e,t)=>Object.entries(e).reduce((n,[s,r])=>({...n,[s]:r.map(o=>{let a=Et(o,"Header value entry",t);if(typeof a!="string")throw new b(`Header '${s}' value '${a}' is not a string`);return a})}),{});var Wo=(e,t)=>{if(Array.isArray(e))return e.map(n=>Wo(n,t));switch(typeof e){case"string":return mr(e,t);case"object":if(e===null)throw new b(`Unexpected endpoint property: ${e}`);return fr(e,t);case"boolean":return e;default:throw new b(`Unexpected endpoint property type: ${typeof e}`)}};var fr=(e,t)=>Object.entries(e).reduce((n,[s,r])=>({...n,[s]:Wo(r,t)}),{});var od=(e,t)=>{let n=Et(e,"Endpoint URL",t);if(typeof n=="string")try{return new URL(n)}catch(s){throw console.error(`Failed to construct URL with ${n}`,s),s}throw new b(`Endpoint URL must be a string, got ${typeof n}`)};var ad=(e,t)=>{var l,m;let{conditions:n,endpoint:s}=e,{result:r,referenceRecord:o}=In(n,t);if(!r)return;let a={...t,referenceRecord:{...t.referenceRecord,...o}},{url:i,properties:c,headers:d}=s;return(m=(l=t.logger)==null?void 0:l.debug)==null||m.call(l,$e,`Resolving endpoint from template: ${re(s)}`),{...d!=null&&{headers:rd(d,a)},...c!=null&&{properties:fr(c,a)},url:od(i,a)}};var id=(e,t)=>{let{conditions:n,error:s}=e,{result:r,referenceRecord:o}=In(n,t);if(r)throw new b(Et(s,"Error",{...t,referenceRecord:{...t.referenceRecord,...o}}))};var cd=(e,t)=>{let{conditions:n,rules:s}=e,{result:r,referenceRecord:o}=In(n,t);if(r)return yr(s,{...t,referenceRecord:{...t.referenceRecord,...o}})};var yr=(e,t)=>{for(let n of e)if(n.type==="endpoint"){let s=ad(n,t);if(s)return s}else if(n.type==="error")id(n,t);else if(n.type==="tree"){let s=cd(n,t);if(s)return s}else throw new b(`Unknown endpoint rule: ${n}`);throw new b("Rules evaluation failed")};var It=(e,t)=>{var d,l,m,u,y;let{endpointParams:n,logger:s}=t,{parameters:r,rules:o}=e;(l=(d=t.logger)==null?void 0:d.debug)==null||l.call(d,$e,`Initial EndpointParams: ${re(n)}`);let a=Object.entries(r).filter(([,p])=>p.default!=null).map(([p,h])=>[p,h.default]);if(a.length>0)for(let[p,h]of a)n[p]=n[p]??h;let i=Object.entries(r).filter(([,p])=>p.required).map(([p])=>p);for(let p of i)if(n[p]==null)throw new b(`Missing required parameter: '${p}'`);let c=yr(o,{endpointParams:n,logger:s,referenceRecord:{}});if((m=t.endpointParams)!=null&&m.Endpoint)try{let p=new URL(t.endpointParams.Endpoint),{protocol:h,port:E}=p;c.url.protocol=h,c.url.port=E}catch{}return(y=(u=t.logger)==null?void 0:u.debug)==null||y.call(u,$e,`Resolved endpoint: ${re(c)}`),c};var Go="user-agent",pr="x-amz-user-agent",qo=" ",dd=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g;var iw=e=>(t,n)=>async s=>{var u,y;let{request:r}=s;if(!R.isInstance(r))return t(s);let{headers:o}=r,a=((u=n==null?void 0:n.userAgent)==null?void 0:u.map(Ho))||[],i=(await e.defaultUserAgentProvider()).map(Ho),c=((y=e==null?void 0:e.customUserAgent)==null?void 0:y.map(Ho))||[],d=$o(),l=(d?[d]:[]).concat([...i,...a,...c]).join(qo),m=[...i.filter(p=>p.startsWith("aws-sdk-")),...c].join(qo);return e.runtime!=="browser"?(m&&(o[pr]=o[pr]?`${o[Go]} ${m}`:m),o[Go]=l):o[pr]=l,t({...s,request:r})},Ho=([e,t])=>{let n=e.indexOf("/"),s=e.substring(0,n),r=e.substring(n+1);return s==="api"&&(r=r.toLowerCase()),[s,r,t].filter(o=>o&&o.length>0).map(o=>o==null?void 0:o.replace(dd,"_")).join("/")},cw={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},gt=e=>({applyToStack:t=>{t.add(iw(e),cw)}});var ld=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"ssm"});var md={name:"@aws-sdk/client-ssm",description:"AWS SDK for JavaScript Ssm Client for Node.js, Browser and React Native",version:"3.312.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo ssm"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.312.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/credential-provider-node":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-signing":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.310.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.310.0","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.310.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.310.0","@aws-sdk/util-defaults-mode-node":"3.310.0","@aws-sdk/util-endpoints":"3.310.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0","@aws-sdk/util-waiter":"3.310.0",tslib:"^2.5.0",uuid:"^8.3.2"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31","@types/uuid":"^8.3.0",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-ssm",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-ssm"}};var Wd=Ut(Bd());var W=class extends se{constructor(t){super(t),Object.setPrototypeOf(this,W.prototype)}};var gn=class extends W{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,gn.prototype)}},Sn=class extends W{constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,Sn.prototype)}},xn=class extends W{constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,xn.prototype)}},Tn=class extends W{constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,Tn.prototype)}},Cn=class extends W{constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,Cn.prototype)}},_n=class extends W{constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,_n.prototype)}},Rn=class extends W{constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,Rn.prototype)}};var Gd=async(e,t)=>{let n=nl,s;return s=rl({...hE(e,t),Action:"AssumeRole",Version:"2011-06-15"}),tl(t,n,"/",void 0,s)};var qd=async(e,t)=>{let n=nl,s;return s=rl({...wE(e,t),Action:"AssumeRoleWithWebIdentity",Version:"2011-06-15"}),tl(t,n,"/",void 0,s)};var Hd=async(e,t)=>{if(e.statusCode>=300)return mE(e,t);let n=await sa(e.body,t),s={};s=xE(n.AssumeRoleResult,t);let r={$metadata:ze(e),...s};return Promise.resolve(r)},mE=async(e,t)=>{let n={...e,body:await sl(e.body,t)},s=ol(e,n.body);switch(s){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Kd(n,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Jd(n,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Yd(n,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Xd(n,t);default:let r=n.body;Se({output:e,parsedBody:r.Error,exceptionCtor:W,errorCode:s})}};var jd=async(e,t)=>{if(e.statusCode>=300)return uE(e,t);let n=await sa(e.body,t),s={};s=TE(n.AssumeRoleWithWebIdentityResult,t);let r={$metadata:ze(e),...s};return Promise.resolve(r)},uE=async(e,t)=>{let n={...e,body:await sl(e.body,t)},s=ol(e,n.body);switch(s){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Kd(n,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await fE(n,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await yE(n,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await pE(n,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Jd(n,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Yd(n,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Xd(n,t);default:let r=n.body;Se({output:e,parsedBody:r.Error,exceptionCtor:W,errorCode:s})}};var Kd=async(e,t)=>{let n=e.body,s=CE(n.Error,t),r=new gn({$metadata:ze(e),...s});return g(r,n)},fE=async(e,t)=>{let n=e.body,s=_E(n.Error,t),r=new Rn({$metadata:ze(e),...s});return g(r,n)},yE=async(e,t)=>{let n=e.body,s=RE(n.Error,t),r=new Cn({$metadata:ze(e),...s});return g(r,n)};var pE=async(e,t)=>{let n=e.body,s=AE(n.Error,t),r=new _n({$metadata:ze(e),...s});return g(r,n)},Jd=async(e,t)=>{let n=e.body,s=bE(n.Error,t),r=new Sn({$metadata:ze(e),...s});return g(r,n)},Yd=async(e,t)=>{let n=e.body,s=vE(n.Error,t),r=new xn({$metadata:ze(e),...s});return g(r,n)},Xd=async(e,t)=>{let n=e.body,s=PE(n.Error,t),r=new Tn({$metadata:ze(e),...s});return g(r,n)},hE=(e,t)=>{var s,r,o;let n={};if(e.RoleArn!=null&&(n.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(n.RoleSessionName=e.RoleSessionName),e.PolicyArns!=null){let a=Qd(e.PolicyArns,t);((s=e.PolicyArns)==null?void 0:s.length)===0&&(n.PolicyArns=[]),Object.entries(a).forEach(([i,c])=>{let d=`PolicyArns.${i}`;n[d]=c})}if(e.Policy!=null&&(n.Policy=e.Policy),e.DurationSeconds!=null&&(n.DurationSeconds=e.DurationSeconds),e.Tags!=null){let a=SE(e.Tags,t);((r=e.Tags)==null?void 0:r.length)===0&&(n.Tags=[]),Object.entries(a).forEach(([i,c])=>{let d=`Tags.${i}`;n[d]=c})}if(e.TransitiveTagKeys!=null){let a=gE(e.TransitiveTagKeys,t);((o=e.TransitiveTagKeys)==null?void 0:o.length)===0&&(n.TransitiveTagKeys=[]),Object.entries(a).forEach(([i,c])=>{let d=`TransitiveTagKeys.${i}`;n[d]=c})}return e.ExternalId!=null&&(n.ExternalId=e.ExternalId),e.SerialNumber!=null&&(n.SerialNumber=e.SerialNumber),e.TokenCode!=null&&(n.TokenCode=e.TokenCode),e.SourceIdentity!=null&&(n.SourceIdentity=e.SourceIdentity),n};var wE=(e,t)=>{var s;let n={};if(e.RoleArn!=null&&(n.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(n.RoleSessionName=e.RoleSessionName),e.WebIdentityToken!=null&&(n.WebIdentityToken=e.WebIdentityToken),e.ProviderId!=null&&(n.ProviderId=e.ProviderId),e.PolicyArns!=null){let r=Qd(e.PolicyArns,t);((s=e.PolicyArns)==null?void 0:s.length)===0&&(n.PolicyArns=[]),Object.entries(r).forEach(([o,a])=>{let i=`PolicyArns.${o}`;n[i]=a})}return e.Policy!=null&&(n.Policy=e.Policy),e.DurationSeconds!=null&&(n.DurationSeconds=e.DurationSeconds),n};var Qd=(e,t)=>{let n={},s=1;for(let r of e){if(r===null)continue;let o=EE(r,t);Object.entries(o).forEach(([a,i])=>{n[`member.${s}.${a}`]=i}),s++}return n},EE=(e,t)=>{let n={};return e.arn!=null&&(n.arn=e.arn),n},IE=(e,t)=>{let n={};return e.Key!=null&&(n.Key=e.Key),e.Value!=null&&(n.Value=e.Value),n},gE=(e,t)=>{let n={},s=1;for(let r of e)r!==null&&(n[`member.${s}`]=r,s++);return n},SE=(e,t)=>{let n={},s=1;for(let r of e){if(r===null)continue;let o=IE(r,t);Object.entries(o).forEach(([a,i])=>{n[`member.${s}.${a}`]=i}),s++}return n},Zd=(e,t)=>{let n={};return e.AssumedRoleId!==void 0&&(n.AssumedRoleId=f(e.AssumedRoleId)),e.Arn!==void 0&&(n.Arn=f(e.Arn)),n},xE=(e,t)=>{let n={};return e.Credentials!==void 0&&(n.Credentials=el(e.Credentials,t)),e.AssumedRoleUser!==void 0&&(n.AssumedRoleUser=Zd(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(n.PackedPolicySize=Io(e.PackedPolicySize)),e.SourceIdentity!==void 0&&(n.SourceIdentity=f(e.SourceIdentity)),n};var TE=(e,t)=>{let n={};return e.Credentials!==void 0&&(n.Credentials=el(e.Credentials,t)),e.SubjectFromWebIdentityToken!==void 0&&(n.SubjectFromWebIdentityToken=f(e.SubjectFromWebIdentityToken)),e.AssumedRoleUser!==void 0&&(n.AssumedRoleUser=Zd(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(n.PackedPolicySize=Io(e.PackedPolicySize)),e.Provider!==void 0&&(n.Provider=f(e.Provider)),e.Audience!==void 0&&(n.Audience=f(e.Audience)),e.SourceIdentity!==void 0&&(n.SourceIdentity=f(e.SourceIdentity)),n},el=(e,t)=>{let n={};return e.AccessKeyId!==void 0&&(n.AccessKeyId=f(e.AccessKeyId)),e.SecretAccessKey!==void 0&&(n.SecretAccessKey=f(e.SecretAccessKey)),e.SessionToken!==void 0&&(n.SessionToken=f(e.SessionToken)),e.Expiration!==void 0&&(n.Expiration=fe(ji(e.Expiration))),n};var CE=(e,t)=>{let n={};return e.message!==void 0&&(n.message=f(e.message)),n};var _E=(e,t)=>{let n={};return e.message!==void 0&&(n.message=f(e.message)),n},RE=(e,t)=>{let n={};return e.message!==void 0&&(n.message=f(e.message)),n};var AE=(e,t)=>{let n={};return e.message!==void 0&&(n.message=f(e.message)),n},bE=(e,t)=>{let n={};return e.message!==void 0&&(n.message=f(e.message)),n},vE=(e,t)=>{let n={};return e.message!==void 0&&(n.message=f(e.message)),n},PE=(e,t)=>{let n={};return e.message!==void 0&&(n.message=f(e.message)),n},ze=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),NE=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),OE=(e,t)=>NE(e,t).then(n=>t.utf8Encoder(n)),tl=async(e,t,n,s,r)=>{let{hostname:o,protocol:a="https",port:i,path:c}=await e.endpoint(),d={protocol:a,hostname:o,port:i,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+n:c+n,headers:t};return s!==void 0&&(d.hostname=s),r!==void 0&&(d.body=r),new R(d)},nl={"content-type":"application/x-www-form-urlencoded"},sa=(e,t)=>OE(e,t).then(n=>{if(n.length){let s=new Wd.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});s.addEntity("#xD","\r"),s.addEntity("#10",`
`);let r=s.parse(n),o="#text",a=Object.keys(r)[0],i=r[a];return i[o]&&(i[a]=i[o],delete i[o]),So(i)}return{}}),sl=async(e,t)=>{let n=await sa(e,t);return n.Error&&(n.Error.message=n.Error.message??n.Error.Message),n},rl=e=>Object.entries(e).map(([t,n])=>Ws(t)+"="+Ws(n)).join("&"),ol=(e,t)=>{var n;if(((n=t.Error)==null?void 0:n.Code)!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"};var An=class extends K{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,n,s){this.middlewareStack.use(te(n,this.serialize,this.deserialize)),this.middlewareStack.use(ne(n,An.getEndpointParameterInstructions())),this.middlewareStack.use(cr(n));let r=t.concat(this.middlewareStack),{logger:o}=n,c={logger:o,clientName:"STSClient",commandName:"AssumeRoleCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=n;return r.resolve(l=>d.handle(l.request,s||{}),c)}serialize(t,n){return Gd(t,n)}deserialize(t,n){return Hd(t,n)}};var bn=class extends K{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,n,s){this.middlewareStack.use(te(n,this.serialize,this.deserialize)),this.middlewareStack.use(ne(n,bn.getEndpointParameterInstructions()));let r=t.concat(this.middlewareStack),{logger:o}=n,c={logger:o,clientName:"STSClient",commandName:"AssumeRoleWithWebIdentityCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=n;return r.resolve(l=>d.handle(l.request,s||{}),c)}serialize(t,n){return qd(t,n)}deserialize(t,n){return jd(t,n)}};var al=(e,{stsClientCtor:t})=>ar({...e,stsClientCtor:t});var il=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"});var cl={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.312.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"yarn test:unit","test:unit":"jest"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/credential-provider-node":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-sdk-sts":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-signing":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.310.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.310.0","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.310.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.310.0","@aws-sdk/util-defaults-mode-node":"3.310.0","@aws-sdk/util-endpoints":"3.310.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0","fast-xml-parser":"4.1.2",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}};var dl="us-east-1",ll=e=>typeof e!="function"?e===void 0?dl:e:async()=>{try{return await e()}catch{return dl}},ra=(e,t)=>{let n,s;return async(r,o)=>{if(s=r,!n){let{logger:i,region:c,requestHandler:d}=e;n=new t({logger:i,credentialDefaultProvider:()=>async()=>s,region:ll(c||e.region),...d?{requestHandler:d}:{}})}let{Credentials:a}=await n.send(new An(o));if(!a||!a.AccessKeyId||!a.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);return{accessKeyId:a.AccessKeyId,secretAccessKey:a.SecretAccessKey,sessionToken:a.SessionToken,expiration:a.Expiration}}},oa=(e,t)=>{let n;return async s=>{if(!n){let{logger:o,region:a,requestHandler:i}=e;n=new t({logger:o,region:ll(a||e.region),...i?{requestHandler:i}:{}})}let{Credentials:r}=await n.send(new bn(s));if(!r||!r.AccessKeyId||!r.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${s.RoleArn}`);return{accessKeyId:r.AccessKeyId,secretAccessKey:r.SecretAccessKey,sessionToken:r.SessionToken,expiration:r.Expiration}}},ml=e=>t=>e({roleAssumer:ra(t,t.stsClientCtor),roleAssumerWithWebIdentity:oa(t,t.stsClientCtor),...t});var ME="AWS_ACCESS_KEY_ID",kE="AWS_SECRET_ACCESS_KEY",LE="AWS_SESSION_TOKEN",FE="AWS_CREDENTIAL_EXPIRATION",hr=()=>async()=>{let e=process.env[ME],t=process.env[kE],n=process.env[LE],s=process.env[FE];if(e&&t)return{accessKeyId:e,secretAccessKey:t,...n&&{sessionToken:n},...s&&{expiration:new Date(s)}};throw new I("Unable to find environment variable credentials.")};var ul=require("os"),fl=require("path"),vn=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:n,HOMEDRIVE:s=`C:${fl.sep}`}=process.env;return e||t||(n?`${s}${n}`:(0,ul.homedir)())};var aa="AWS_PROFILE",$E="default",oe=e=>e.profile||process.env[aa]||$E;var yl=require("crypto"),pl=require("path");var wr=e=>{let n=(0,yl.createHash)("sha1").update(e).digest("hex");return(0,pl.join)(vn(),".aws","sso","cache",`${n}.json`)};var hl=require("fs");var{readFile:VE}=hl.promises,Er=async e=>{let t=wr(e),n=await VE(t,"utf8");return JSON.parse(n)};var wl=require("path");var zE="AWS_CONFIG_FILE",Ir=()=>process.env[zE]||(0,wl.join)(vn(),".aws","config");var El=require("path");var UE="AWS_SHARED_CREDENTIALS_FILE",Il=()=>process.env[UE]||(0,El.join)(vn(),".aws","credentials");var gl=/^profile\s(["'])?([^\1]+)\1$/,Sl=e=>Object.entries(e).filter(([t])=>gl.test(t)).reduce((t,[n,s])=>({...t,[gl.exec(n)[2]]:s}),{...e.default&&{default:e.default}});var BE=["__proto__","profile __proto__"],us=e=>{let t={},n;for(let s of e.split(/\r?\n/))if(s=s.split(/(^|\s)[;#]/)[0].trim(),s[0]==="["&&s[s.length-1]==="]"){if(n=s.substring(1,s.length-1),BE.includes(n))throw new Error(`Found invalid profile name "${n}"`)}else if(n){let o=s.indexOf("="),a=0,i=s.length-1;if(o!==-1&&o!==a&&o!==i){let[d,l]=[s.substring(0,o).trim(),s.substring(o+1).trim()];t[n]=t[n]||{},t[n][d]=l}}return t};var xl=require("fs"),{readFile:WE}=xl.promises,ia={},fs=(e,t)=>((!ia[e]||t!=null&&t.ignoreCache)&&(ia[e]=WE(e,"utf8")),ia[e]);var Tl=()=>({}),gr=async(e={})=>{let{filepath:t=Il(),configFilepath:n=Ir()}=e,s=await Promise.all([fs(n,{ignoreCache:e.ignoreCache}).then(us).then(Sl).catch(Tl),fs(t,{ignoreCache:e.ignoreCache}).then(us).catch(Tl)]);return{configFile:s[0],credentialsFile:s[1]}};var Cl=/^sso-session\s(["'])?([^\1]+)\1$/,_l=e=>Object.entries(e).filter(([t])=>Cl.test(t)).reduce((t,[n,s])=>({...t,[Cl.exec(n)[2]]:s}),{});var GE=()=>({}),Sr=async(e={})=>fs(e.configFilepath??Ir()).then(us).then(_l).catch(GE);var Rl=(...e)=>{let t={};for(let n of e)for(let[s,r]of Object.entries(n))t[s]!==void 0?Object.assign(t[s],r):t[s]=r;return t};var xt=async e=>{let t=await gr(e);return Rl(t.configFile,t.credentialsFile)};var Pl=require("url");var Al=require("buffer"),bl=require("http");function Ue(e){return new Promise((t,n)=>{var r;let s=(0,bl.request)({method:"GET",...e,hostname:(r=e.hostname)==null?void 0:r.replace(/^\[(.+)\]$/,"$1")});s.on("error",o=>{n(Object.assign(new J("Unable to connect to instance metadata service"),o)),s.destroy()}),s.on("timeout",()=>{n(new J("TimeoutError from instance metadata service")),s.destroy()}),s.on("response",o=>{let{statusCode:a=400}=o;(a<200||300<=a)&&(n(Object.assign(new J("Error response received from instance metadata service"),{statusCode:a})),s.destroy());let i=[];o.on("data",c=>{i.push(c)}),o.on("end",()=>{t(Al.Buffer.concat(i)),s.destroy()})}),s.end()})}var xr=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",Tr=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)});var Cr=({maxRetries:e=0,timeout:t=1e3})=>({maxRetries:e,timeout:t});var ys=(e,t)=>{let n=e();for(let s=0;s<t;s++)n=n.catch(e);return n};var ps="AWS_CONTAINER_CREDENTIALS_FULL_URI",hs="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",vl="AWS_CONTAINER_AUTHORIZATION_TOKEN",_r=(e={})=>{let{timeout:t,maxRetries:n}=Cr(e);return()=>ys(async()=>{let s=await JE(),r=JSON.parse(await qE(t,s));if(!xr(r))throw new I("Invalid response received from instance metadata service.");return Tr(r)},n)},qE=async(e,t)=>(process.env[vl]&&(t.headers={...t.headers,Authorization:process.env[vl]}),(await Ue({...t,timeout:e})).toString()),HE="169.254.170.2",jE={localhost:!0,"127.0.0.1":!0},KE={"http:":!0,"https:":!0},JE=async()=>{if(process.env[hs])return{hostname:HE,path:process.env[hs]};if(process.env[ps]){let e=(0,Pl.parse)(process.env[ps]);if(!e.hostname||!(e.hostname in jE))throw new I(`${e.hostname} is not a valid container metadata service hostname`,!1);if(!e.protocol||!(e.protocol in KE))throw new I(`${e.protocol} is not a valid container metadata service protocol`,!1);return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new I(`The container metadata credential provider cannot be used unless the ${hs} or ${ps} environment variable is set`,!1)};var Nl=e=>async()=>{try{let t=e(process.env);if(t===void 0)throw new Error;return t}catch(t){throw new I(t.message||`Cannot load config from environment variables with getter: ${e}`)}};var Ol=(e,{preferredFile:t="config",...n}={})=>async()=>{let s=oe(n),{configFile:r,credentialsFile:o}=await gr(n),a=o[s]||{},i=r[s]||{},c=t==="config"?{...a,...i}:{...i,...a};try{let d=e(c);if(d===void 0)throw new Error;return d}catch(d){throw new I(d.message||`Cannot load config for profile ${s} in SDK configuration files with getter: ${e}`)}};var YE=e=>typeof e=="function",Dl=e=>YE(e)?async()=>await e():_c(e);var x=({environmentVariableSelector:e,configFileSelector:t,default:n},s={})=>pt(Ys(Nl(e),Ol(t,s),Dl(n)));var ws;(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(ws||(ws={}));var XE="AWS_EC2_METADATA_SERVICE_ENDPOINT",QE="ec2_metadata_service_endpoint",Ml={environmentVariableSelector:e=>e[XE],configFileSelector:e=>e[QE],default:void 0};var Tt;(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(Tt||(Tt={}));var ZE="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",eI="ec2_metadata_service_endpoint_mode",kl={environmentVariableSelector:e=>e[ZE],configFileSelector:e=>e[eI],default:Tt.IPv4};var Es=async()=>j(await tI()||await nI()),tI=async()=>x(Ml)(),nI=async()=>{let e=await x(kl)();switch(e){case Tt.IPv4:return ws.IPv4;case Tt.IPv6:return ws.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(Tt)}`)}};var sI="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",ca=(e,t)=>{let n=300+Math.floor(Math.random()*300),s=new Date(Date.now()+n*1e3);t.warn("Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(newExpiration)}.\nFor more information, please visit: "+sI);let r=e.originalExpiration??e.expiration;return{...e,...r?{originalExpiration:r}:{},expiration:s}};var Ll=(e,t={})=>{let n=(t==null?void 0:t.logger)||console,s;return async()=>{let r;try{r=await e(),r.expiration&&r.expiration.getTime()<Date.now()&&(r=ca(r,n))}catch(o){if(s)n.warn("Credential renew failed: ",o),r=ca(s,n);else throw o}return s=r,r}};var Fl="/latest/meta-data/iam/security-credentials/",rI="/latest/api/token",Rr=(e={})=>Ll(oI(e),{logger:e.logger}),oI=e=>{let t=!1,{timeout:n,maxRetries:s}=Cr(e),r=async(o,a)=>{let i=(await ys(async()=>{let c;try{c=await iI(a)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},o)).trim();return ys(async()=>{let c;try{c=await cI(i,a)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},o)};return async()=>{let o=await Es();if(t)return r(s,{...o,timeout:n});{let a;try{a=(await aI({...o,timeout:n})).toString()}catch(i){if((i==null?void 0:i.statusCode)===400)throw Object.assign(i,{message:"EC2 Metadata token request returned error"});return(i.message==="TimeoutError"||[403,404,405].includes(i.statusCode))&&(t=!0),r(s,{...o,timeout:n})}return r(s,{...o,headers:{"x-aws-ec2-metadata-token":a},timeout:n})}}},aI=async e=>Ue({...e,path:rI,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),iI=async e=>(await Ue({...e,path:Fl})).toString(),cI=async(e,t)=>{let n=JSON.parse((await Ue({...t,path:Fl+e})).toString());if(!xr(n))throw new I("Invalid response received from instance metadata service.");return Tr(n)};var $l=(e,t)=>{let n={EcsContainer:_r,Ec2InstanceMetadata:Rr,Environment:hr};if(e in n)return n[e]();throw new I(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`)};var Vl=e=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(dI(e)||lI(e)),dI=e=>typeof e.source_profile=="string"&&typeof e.credential_source>"u",lI=e=>typeof e.credential_source=="string"&&typeof e.source_profile>"u",zl=async(e,t,n,s={})=>{let r=t[e];if(!n.roleAssumer)throw new I(`Profile ${e} requires a role to be assumed, but no role assumption callback was provided.`,!1);let{source_profile:o}=r;if(o&&o in s)throw new I(`Detected a cycle attempting to resolve credentials for profile ${oe(n)}. Profiles visited: `+Object.keys(s).join(", "),!1);let a=o?Ar(o,t,n,{...s,[o]:!0}):$l(r.credential_source,e)(),i={RoleArn:r.role_arn,RoleSessionName:r.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:r.external_id},{mfa_serial:c}=r;if(c){if(!n.mfaCodeProvider)throw new I(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,!1);i.SerialNumber=c,i.TokenCode=await n.mfaCodeProvider(c)}let d=await a;return n.roleAssumer(d,i)};var Bl=require("child_process"),Wl=require("util");var Ul=(e,t)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let n=new Date;if(new Date(t.Expiration)<n)throw Error(`Profile ${e} credential_process returned expired credentials.`)}return{accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)}}};var Gl=async(e,t)=>{let n=t[e];if(t[e]){let s=n.credential_process;if(s!==void 0){let r=(0,Wl.promisify)(Bl.exec);try{let{stdout:o}=await r(s),a;try{a=JSON.parse(o.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return Ul(e,a)}catch(o){throw new I(o.message)}}else throw new I(`Profile ${e} did not contain credential_process.`)}else throw new I(`Profile ${e} could not be found in shared credentials file.`)};var br=(e={})=>async()=>{let t=await xt(e);return Gl(oe(e),t)};var ql=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",Hl=async(e,t)=>br({...e,profile:t})();var Is=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string");var ye=class extends se{constructor(t){super(t),Object.setPrototypeOf(this,ye.prototype)}};var Pn=class extends ye{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,Pn.prototype)}},Nn=class extends ye{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,Nn.prototype)}},On=class extends ye{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,On.prototype)}},Dn=class extends ye{constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,Dn.prototype)}},jl=e=>({...e,...e.accessToken&&{accessToken:Ze}}),mI=e=>({...e,...e.secretAccessKey&&{secretAccessKey:Ze},...e.sessionToken&&{sessionToken:Ze}}),Kl=e=>({...e,...e.roleCredentials&&{roleCredentials:mI(e.roleCredentials)}});var Jl=async(e,t)=>{let{hostname:n,protocol:s="https",port:r,path:o}=await t.endpoint(),a=Lt({},gI,{"x-amz-sso_bearer_token":e.accessToken}),i=`${o!=null&&o.endsWith("/")?o.slice(0,-1):o||""}/federation/credentials`,c=Lt({role_name:[,fe(e.roleName,"roleName")],account_id:[,fe(e.accountId,"accountId")]}),d;return new R({protocol:s,hostname:n,port:r,method:"GET",headers:a,path:i,query:c,body:d})};var Yl=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return uI(e,t);let n=Lt({$metadata:gs(e)}),s=fe(Bs(await Xl(e.body,t)),"body");return s.roleCredentials!=null&&(n.roleCredentials=wI(s.roleCredentials,t)),n},uI=async(e,t)=>{let n={...e,body:await SI(e.body,t)},s=xI(e,n.body);switch(s){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await fI(n,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await yI(n,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await pI(n,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await hI(n,t);default:let r=n.body;Se({output:e,parsedBody:r,exceptionCtor:ye,errorCode:s})}};var Lt=os,fI=async(e,t)=>{let n=Lt({}),s=e.body;s.message!=null&&(n.message=f(s.message));let r=new Pn({$metadata:gs(e),...n});return g(r,e.body)},yI=async(e,t)=>{let n=Lt({}),s=e.body;s.message!=null&&(n.message=f(s.message));let r=new Nn({$metadata:gs(e),...n});return g(r,e.body)},pI=async(e,t)=>{let n=Lt({}),s=e.body;s.message!=null&&(n.message=f(s.message));let r=new On({$metadata:gs(e),...n});return g(r,e.body)},hI=async(e,t)=>{let n=Lt({}),s=e.body;s.message!=null&&(n.message=f(s.message));let r=new Dn({$metadata:gs(e),...n});return g(r,e.body)};var wI=(e,t)=>({accessKeyId:f(e.accessKeyId),expiration:ns(e.expiration),secretAccessKey:f(e.secretAccessKey),sessionToken:f(e.sessionToken)});var gs=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),EI=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),II=(e,t)=>EI(e,t).then(n=>t.utf8Encoder(n)),gI=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),Xl=(e,t)=>II(e,t).then(n=>n.length?JSON.parse(n):{}),SI=async(e,t)=>{let n=await Xl(e,t);return n.message=n.message??n.Message,n},xI=(e,t)=>{let n=(o,a)=>Object.keys(o).find(i=>i.toLowerCase()===a.toLowerCase()),s=o=>{let a=o;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},r=n(e.headers,"x-amzn-errortype");if(r!==void 0)return s(e.headers[r]);if(t.code!==void 0)return s(t.code);if(t.__type!==void 0)return s(t.__type)};var Mn=class extends K{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,n,s){this.middlewareStack.use(te(n,this.serialize,this.deserialize)),this.middlewareStack.use(ne(n,Mn.getEndpointParameterInstructions()));let r=t.concat(this.middlewareStack),{logger:o}=n,c={logger:o,clientName:"SSOClient",commandName:"GetRoleCredentialsCommand",inputFilterSensitiveLog:jl,outputFilterSensitiveLog:Kl},{requestHandler:d}=n;return r.resolve(l=>d.handle(l.request,s||{}),c)}serialize(t,n){return Jl(t,n)}deserialize(t,n){return Yl(t,n)}};var Ql=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"});var Zl={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.310.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.310.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.310.0","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.310.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.310.0","@aws-sdk/util-defaults-mode-node":"3.310.0","@aws-sdk/util-endpoints":"3.310.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}};var tm=require("buffer"),vr=require("crypto"),ve=class{constructor(t,n){this.algorithmIdentifier=t,this.secret=n,this.reset()}update(t,n){this.hash.update(Ae(em(t,n)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,vr.createHmac)(this.algorithmIdentifier,em(this.secret)):(0,vr.createHash)(this.algorithmIdentifier)}};function em(e,t){return tm.Buffer.isBuffer(e)?e:typeof e=="string"?wn(e,t):ArrayBuffer.isView(e)?Mt(e.buffer,e.byteOffset,e.byteLength):Mt(e)}function da(e){let t=[];for(let n of Object.keys(e).sort()){let s=e[n];if(n=be(n),Array.isArray(s))for(let r=0,o=s.length;r<o;r++)t.push(`${n}=${be(s[r])}`);else{let r=n;(s||typeof s=="string")&&(r+=`=${be(s)}`),t.push(r)}}return t.join("&")}var Pr=require("http"),Nr=require("https");var nm=["ECONNRESET","EPIPE","ETIMEDOUT"];var la=e=>{let t={};for(let n of Object.keys(e)){let s=e[n];t[n]=Array.isArray(s)?s.join(","):s}return t};var rm=require("stream");function ma(e,t){(t.headers.Expect||t.headers.expect)==="100-continue"?e.on("continue",()=>{sm(e,t.body)}):sm(e,t.body)}function sm(e,t){t instanceof rm.Readable?t.pipe(e):t?e.end(Buffer.from(t)):e.end()}var om=0,Pe=class{constructor(t){this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((n,s)=>{typeof t=="function"?t().then(r=>{n(this.resolveDefaultConfig(r))}).catch(s):n(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{requestTimeout:n,connectionTimeout:s,socketTimeout:r,httpAgent:o,httpsAgent:a}=t||{},i=!0,c=50;return{connectionTimeout:s,socketTimeout:r,requestTimeout:n??s??r??om,httpAgent:o||new Pr.Agent({keepAlive:i,maxSockets:c}),httpsAgent:a||new Nr.Agent({keepAlive:i,maxSockets:c})}}destroy(){var t,n,s,r;(n=(t=this.config)==null?void 0:t.httpAgent)==null||n.destroy(),(r=(s=this.config)==null?void 0:s.httpsAgent)==null||r.destroy()}async handle(t,{abortSignal:n}={}){return this.config||(this.config=await this.configProvider),new Promise((s,r)=>{var m;if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(n!=null&&n.aborted){let u=new Error("Request aborted");u.name="AbortError",r(u);return}let o=t.protocol==="https:",a=da(t.query||{}),i={headers:t.headers,host:t.hostname,method:t.method,path:a?`${t.path}?${a}`:t.path,port:t.port,agent:o?this.config.httpsAgent:this.config.httpAgent},d=(o?Nr.request:Pr.request)(i,u=>{let y=new xe({statusCode:u.statusCode||-1,headers:la(u.headers),body:u});s({response:y})});d.on("error",u=>{nm.includes(u.code)?r(Object.assign(u,{name:"TimeoutError"})):r(u)});let l=((m=this.config)==null?void 0:m.requestTimeout)??om;d.setTimeout(l,()=>{d.destroy(),r(Object.assign(new Error(`Connection timed out after ${l} ms`),{name:"TimeoutError"}))}),n&&(n.onabort=()=>{d.abort();let u=new Error("Request aborted");u.name="AbortError",r(u)}),ma(d,t)})}};var ua=class{constructor(t){this.sessions=[],this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(n=>n!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let n of this.sessions)n===t&&(n.destroyed||n.destroy())}};var am=require("stream"),Or=class extends am.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(t,n,s){this.bufferedBytes.push(t),s()}};var Ct=e=>new Promise((t,n)=>{let s=new Or;e.pipe(s),e.on("error",r=>{s.end(),n(r)}),s.on("error",n),s.on("finish",function(){let r=new Uint8Array(Buffer.concat(this.bufferedBytes));t(r)})});var Dr=require("fs"),_t=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.from(e).length;if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.path=="string"||Buffer.isBuffer(e.path))return(0,Dr.lstatSync)(e.path).size;if(typeof e.fd=="number")return(0,Dr.fstatSync)(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)};var Mr=require("os"),Ss=require("process");var im=()=>{try{return typeof require=="function"&&typeof module<"u"&&require("aws-crt")?["md/crt-avail"]:null}catch{return null}};var CI="AWS_SDK_UA_APP_ID",_I="sdk-ua-app-id",Rt=({serviceId:e,clientVersion:t})=>{let n=[["aws-sdk-js",t],[`os/${(0,Mr.platform)()}`,(0,Mr.release)()],["lang/js"],["md/nodejs",`${Ss.versions.node}`]],s=im();s&&n.push(s),e&&n.push([`api/${e}`,t]),Ss.env.AWS_EXECUTION_ENV&&n.push([`exec-env/${Ss.env.AWS_EXECUTION_ENV}`]);let r=x({environmentVariableSelector:a=>a[CI],configFileSelector:a=>a[_I],default:void 0})(),o;return async()=>{if(!o){let a=await r;o=a?[...n,[`app/${a}`]]:[...n]}return o}};var RI=/^[A-Za-z0-9+/]*={0,2}$/,At=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!RI.exec(e))throw new TypeError("Invalid base64 string.");let t=wn(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};var bt=e=>Mt(e.buffer,e.byteOffset,e.byteLength).toString("base64");var pm="required",Be="fn",We="argv",kn="ref",fa="PartitionResult",Ne="tree",xs="error",Ts="endpoint",cm={[pm]:!1,type:"String"},dm={[pm]:!0,default:!1,type:"Boolean"},hm={[kn]:"Endpoint"},wm={[Be]:"booleanEquals",[We]:[{[kn]:"UseFIPS"},!0]},Em={[Be]:"booleanEquals",[We]:[{[kn]:"UseDualStack"},!0]},Oe={},lm={[Be]:"booleanEquals",[We]:[!0,{[Be]:"getAttr",[We]:[{[kn]:fa},"supportsFIPS"]}]},mm={[Be]:"booleanEquals",[We]:[!0,{[Be]:"getAttr",[We]:[{[kn]:fa},"supportsDualStack"]}]},um=[hm],fm=[wm],ym=[Em],AI={version:"1.0",parameters:{Region:cm,UseDualStack:dm,UseFIPS:dm,Endpoint:cm},rules:[{conditions:[{[Be]:"aws.partition",[We]:[{[kn]:"Region"}],assign:fa}],type:Ne,rules:[{conditions:[{[Be]:"isSet",[We]:um},{[Be]:"parseURL",[We]:um,assign:"url"}],type:Ne,rules:[{conditions:fm,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:xs},{type:Ne,rules:[{conditions:ym,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:xs},{endpoint:{url:hm,properties:Oe,headers:Oe},type:Ts}]}]},{conditions:[wm,Em],type:Ne,rules:[{conditions:[lm,mm],type:Ne,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Oe,headers:Oe},type:Ts}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:xs}]},{conditions:fm,type:Ne,rules:[{conditions:[lm],type:Ne,rules:[{type:Ne,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Oe,headers:Oe},type:Ts}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:xs}]},{conditions:ym,type:Ne,rules:[{conditions:[mm],type:Ne,rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Oe,headers:Oe},type:Ts}]},{error:"DualStack is enabled but this partition does not support DualStack",type:xs}]},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Oe,headers:Oe},type:Ts}]}]},Im=AI;var gm=(e,t={})=>It(Im,{endpointParams:e,logger:t.logger});var Sm=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??At,base64Encoder:(e==null?void 0:e.base64Encoder)??bt,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??gm,logger:(e==null?void 0:e.logger)??new Ie,serviceId:(e==null?void 0:e.serviceId)??"SSO",urlParser:(e==null?void 0:e.urlParser)??j,utf8Decoder:(e==null?void 0:e.utf8Decoder)??Re,utf8Encoder:(e==null?void 0:e.utf8Encoder)??ht});var xm="AWS_EXECUTION_ENV",ya="AWS_REGION",pa="AWS_DEFAULT_REGION",Tm="AWS_EC2_METADATA_DISABLED",Cm=["in-region","cross-region","mobile","standard","legacy"],_m="/latest/meta-data/placement/region";var bI="AWS_DEFAULTS_MODE",vI="defaults_mode",Rm={environmentVariableSelector:e=>e[bI],configFileSelector:e=>e[vI],default:"legacy"};var vt=({region:e=x(Te),defaultsMode:t=x(Rm)}={})=>pt(async()=>{let n=typeof t=="function"?await t():t;switch(n==null?void 0:n.toLowerCase()){case"auto":return PI(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(n==null?void 0:n.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Cm.join(", ")}, got ${n}`)}}),PI=async e=>{if(e){let t=typeof e=="function"?await e():e,n=await NI();return n?t===n?"in-region":"cross-region":"standard"}return"standard"},NI=async()=>{if(process.env[xm]&&(process.env[ya]||process.env[pa]))return process.env[ya]??process.env[pa];if(!process.env[Tm])try{let e=await Es();return(await Ue({...e,path:_m})).toString()}catch{}};var Am=e=>{tt(process.version);let t=vt(e),n=()=>t().then(et),s=Sm(e);return{...s,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??_t,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Rt({serviceId:s.serviceId,clientVersion:Zl.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??x(mt),region:(e==null?void 0:e.region)??x(Te,ot),requestHandler:(e==null?void 0:e.requestHandler)??new Pe(n),retryMode:(e==null?void 0:e.retryMode)??x({...ft,default:async()=>(await n()).retryMode||_e}),sha256:(e==null?void 0:e.sha256)??ve.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??Ct,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??x(st),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??x(rt)}};var kr=class extends ge{constructor(t){let n=Am(t),s=Ql(n),r=at(s),o=Qe(r),a=ut(o),i=a,c=wt(i);super(c),this.config=c,this.middlewareStack.use(yt(this.config)),this.middlewareStack.use(it(this.config)),this.middlewareStack.use(ct(this.config)),this.middlewareStack.use(dt(this.config)),this.middlewareStack.use(lt(this.config)),this.middlewareStack.use(gt(this.config))}destroy(){super.destroy()}};var Ln="To refresh this SSO session run 'aws sso login' with the corresponding profile.";var M=class extends se{constructor(t){super(t),Object.setPrototypeOf(this,M.prototype)}};var Fn=class extends M{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,Fn.prototype),this.error=t.error,this.error_description=t.error_description}},$n=class extends M{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,$n.prototype),this.error=t.error,this.error_description=t.error_description}},Vn=class extends M{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,Vn.prototype),this.error=t.error,this.error_description=t.error_description}},zn=class extends M{constructor(t){super({name:"InternalServerException",$fault:"server",...t}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,zn.prototype),this.error=t.error,this.error_description=t.error_description}},Un=class extends M{constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,Un.prototype),this.error=t.error,this.error_description=t.error_description}},Bn=class extends M{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,Bn.prototype),this.error=t.error,this.error_description=t.error_description}},Wn=class extends M{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,Wn.prototype),this.error=t.error,this.error_description=t.error_description}},Gn=class extends M{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,Gn.prototype),this.error=t.error,this.error_description=t.error_description}},qn=class extends M{constructor(t){super({name:"SlowDownException",$fault:"client",...t}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,qn.prototype),this.error=t.error,this.error_description=t.error_description}},Hn=class extends M{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,Hn.prototype),this.error=t.error,this.error_description=t.error_description}},jn=class extends M{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,jn.prototype),this.error=t.error,this.error_description=t.error_description}};var bm=async(e,t)=>{let{hostname:n,protocol:s="https",port:r,path:o}=await t.endpoint(),a={"content-type":"application/json"},i=`${o!=null&&o.endsWith("/")?o.slice(0,-1):o||""}/token`,c;return c=JSON.stringify({...e.clientId!=null&&{clientId:e.clientId},...e.clientSecret!=null&&{clientSecret:e.clientSecret},...e.code!=null&&{code:e.code},...e.deviceCode!=null&&{deviceCode:e.deviceCode},...e.grantType!=null&&{grantType:e.grantType},...e.redirectUri!=null&&{redirectUri:e.redirectUri},...e.refreshToken!=null&&{refreshToken:e.refreshToken},...e.scope!=null&&{scope:GI(e.scope,t)}}),new R({protocol:s,hostname:n,port:r,method:"POST",headers:a,path:i,body:c})};var vm=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return OI(e,t);let n=ae({$metadata:ie(e)}),s=fe(Bs(await Pm(e.body,t)),"body");return s.accessToken!=null&&(n.accessToken=f(s.accessToken)),s.expiresIn!=null&&(n.expiresIn=ue(s.expiresIn)),s.idToken!=null&&(n.idToken=f(s.idToken)),s.refreshToken!=null&&(n.refreshToken=f(s.refreshToken)),s.tokenType!=null&&(n.tokenType=f(s.tokenType)),n},OI=async(e,t)=>{let n={...e,body:await jI(e.body,t)},s=KI(e,n.body);switch(s){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await DI(n,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await MI(n,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await kI(n,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await LI(n,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await FI(n,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await $I(n,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await VI(n,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await zI(n,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await UI(n,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await BI(n,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await WI(n,t);default:let r=n.body;Se({output:e,parsedBody:r,exceptionCtor:M,errorCode:s})}};var ae=os,DI=async(e,t)=>{let n=ae({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new Fn({$metadata:ie(e),...n});return g(r,e.body)},MI=async(e,t)=>{let n=ae({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new $n({$metadata:ie(e),...n});return g(r,e.body)},kI=async(e,t)=>{let n=ae({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new Vn({$metadata:ie(e),...n});return g(r,e.body)},LI=async(e,t)=>{let n=ae({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new zn({$metadata:ie(e),...n});return g(r,e.body)},FI=async(e,t)=>{let n=ae({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new Un({$metadata:ie(e),...n});return g(r,e.body)};var $I=async(e,t)=>{let n=ae({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new Bn({$metadata:ie(e),...n});return g(r,e.body)},VI=async(e,t)=>{let n=ae({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new Wn({$metadata:ie(e),...n});return g(r,e.body)},zI=async(e,t)=>{let n=ae({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new Gn({$metadata:ie(e),...n});return g(r,e.body)},UI=async(e,t)=>{let n=ae({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new qn({$metadata:ie(e),...n});return g(r,e.body)},BI=async(e,t)=>{let n=ae({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new Hn({$metadata:ie(e),...n});return g(r,e.body)},WI=async(e,t)=>{let n=ae({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new jn({$metadata:ie(e),...n});return g(r,e.body)},GI=(e,t)=>e.filter(n=>n!=null).map(n=>n),ie=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),qI=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),HI=(e,t)=>qI(e,t).then(n=>t.utf8Encoder(n));var Pm=(e,t)=>HI(e,t).then(n=>n.length?JSON.parse(n):{}),jI=async(e,t)=>{let n=await Pm(e,t);return n.message=n.message??n.Message,n},KI=(e,t)=>{let n=(o,a)=>Object.keys(o).find(i=>i.toLowerCase()===a.toLowerCase()),s=o=>{let a=o;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},r=n(e.headers,"x-amzn-errortype");if(r!==void 0)return s(e.headers[r]);if(t.code!==void 0)return s(t.code);if(t.__type!==void 0)return s(t.__type)};var Kn=class extends K{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,n,s){this.middlewareStack.use(te(n,this.serialize,this.deserialize)),this.middlewareStack.use(ne(n,Kn.getEndpointParameterInstructions()));let r=t.concat(this.middlewareStack),{logger:o}=n,c={logger:o,clientName:"SSOOIDCClient",commandName:"CreateTokenCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=n;return r.resolve(l=>d.handle(l.request,s||{}),c)}serialize(t,n){return bm(t,n)}deserialize(t,n){return vm(t,n)}};var Nm=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssooidc"});var Om={name:"@aws-sdk/client-sso-oidc",description:"AWS SDK for JavaScript Sso Oidc Client for Node.js, Browser and React Native",version:"3.310.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso-oidc"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.310.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.310.0","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.310.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.310.0","@aws-sdk/util-defaults-mode-node":"3.310.0","@aws-sdk/util-endpoints":"3.310.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso-oidc",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso-oidc"}};var zm="required",Ge="fn",qe="argv",Jn="ref",wa="PartitionResult",De="tree",Cs="error",_s="endpoint",Dm={[zm]:!1,type:"String"},Mm={[zm]:!0,default:!1,type:"Boolean"},Um={[Jn]:"Endpoint"},Bm={[Ge]:"booleanEquals",[qe]:[{[Jn]:"UseFIPS"},!0]},Wm={[Ge]:"booleanEquals",[qe]:[{[Jn]:"UseDualStack"},!0]},Me={},km={[Ge]:"booleanEquals",[qe]:[!0,{[Ge]:"getAttr",[qe]:[{[Jn]:wa},"supportsFIPS"]}]},Lm={[Ge]:"booleanEquals",[qe]:[!0,{[Ge]:"getAttr",[qe]:[{[Jn]:wa},"supportsDualStack"]}]},Fm=[Um],$m=[Bm],Vm=[Wm],YI={version:"1.0",parameters:{Region:Dm,UseDualStack:Mm,UseFIPS:Mm,Endpoint:Dm},rules:[{conditions:[{[Ge]:"aws.partition",[qe]:[{[Jn]:"Region"}],assign:wa}],type:De,rules:[{conditions:[{[Ge]:"isSet",[qe]:Fm},{[Ge]:"parseURL",[qe]:Fm,assign:"url"}],type:De,rules:[{conditions:$m,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Cs},{type:De,rules:[{conditions:Vm,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Cs},{endpoint:{url:Um,properties:Me,headers:Me},type:_s}]}]},{conditions:[Bm,Wm],type:De,rules:[{conditions:[km,Lm],type:De,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Me,headers:Me},type:_s}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Cs}]},{conditions:$m,type:De,rules:[{conditions:[km],type:De,rules:[{type:De,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Me,headers:Me},type:_s}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Cs}]},{conditions:Vm,type:De,rules:[{conditions:[Lm],type:De,rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Me,headers:Me},type:_s}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Cs}]},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Me,headers:Me},type:_s}]}]},Gm=YI;var qm=(e,t={})=>It(Gm,{endpointParams:e,logger:t.logger});var Hm=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??At,base64Encoder:(e==null?void 0:e.base64Encoder)??bt,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??qm,logger:(e==null?void 0:e.logger)??new Ie,serviceId:(e==null?void 0:e.serviceId)??"SSO OIDC",urlParser:(e==null?void 0:e.urlParser)??j,utf8Decoder:(e==null?void 0:e.utf8Decoder)??Re,utf8Encoder:(e==null?void 0:e.utf8Encoder)??ht});var jm=e=>{tt(process.version);let t=vt(e),n=()=>t().then(et),s=Hm(e);return{...s,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??_t,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Rt({serviceId:s.serviceId,clientVersion:Om.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??x(mt),region:(e==null?void 0:e.region)??x(Te,ot),requestHandler:(e==null?void 0:e.requestHandler)??new Pe(n),retryMode:(e==null?void 0:e.retryMode)??x({...ft,default:async()=>(await n()).retryMode||_e}),sha256:(e==null?void 0:e.sha256)??ve.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??Ct,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??x(st),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??x(rt)}};var Lr=class extends ge{constructor(t){let n=jm(t),s=Nm(n),r=at(s),o=Qe(r),a=ut(o),i=a,c=wt(i);super(c),this.config=c,this.middlewareStack.use(yt(this.config)),this.middlewareStack.use(it(this.config)),this.middlewareStack.use(ct(this.config)),this.middlewareStack.use(dt(this.config)),this.middlewareStack.use(lt(this.config)),this.middlewareStack.use(gt(this.config))}destroy(){super.destroy()}};var Ea={},Km=e=>{if(Ea[e])return Ea[e];let t=new Lr({region:e});return Ea[e]=t,t};var Jm=(e,t)=>Km(t).send(new Kn({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}));var Ia=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new Y(`Token is expired. ${Ln}`,!1)};var Pt=(e,t,n=!1)=>{if(typeof t>"u")throw new Y(`Value not present for '${e}' in SSO Token${n?". Cannot refresh":""}. ${Ln}`,!1)};var Ym=require("fs"),{writeFile:XI}=Ym.promises,Xm=(e,t)=>{let n=wr(e),s=JSON.stringify(t,null,2);return XI(n,s)};var Qm=new Date(0),Zm=(e={})=>async()=>{let t=await xt(e),n=oe(e),s=t[n];if(s){if(!s.sso_session)throw new Y(`Profile '${n}' is missing required property 'sso_session'.`)}else throw new Y(`Profile '${n}' could not be found in shared credentials file.`,!1);let r=s.sso_session,a=(await Sr(e))[r];if(!a)throw new Y(`Sso session '${r}' could not be found in shared credentials file.`,!1);for(let y of["sso_start_url","sso_region"])if(!a[y])throw new Y(`Sso session '${r}' is missing required property '${y}'.`,!1);let i=a.sso_start_url,c=a.sso_region,d;try{d=await Er(r)}catch{throw new Y(`The SSO session token associated with profile=${n} was not found or is invalid. ${Ln}`,!1)}Pt("accessToken",d.accessToken),Pt("expiresAt",d.expiresAt);let{accessToken:l,expiresAt:m}=d,u={token:l,expiration:new Date(m)};if(u.expiration.getTime()-Date.now()>3e5)return u;if(Date.now()-Qm.getTime()<30*1e3)return Ia(u),u;Pt("clientId",d.clientId,!0),Pt("clientSecret",d.clientSecret,!0),Pt("refreshToken",d.refreshToken,!0);try{Qm.setTime(Date.now());let y=await Jm(d,c);Pt("accessToken",y.accessToken),Pt("expiresIn",y.expiresIn);let p=new Date(Date.now()+y.expiresIn*1e3);try{await Xm(r,{...d,accessToken:y.accessToken,expiresAt:p.toISOString(),refreshToken:y.refreshToken})}catch{}return{token:y.accessToken,expiration:p}}catch{return Ia(u),u}};var ZI=15*60*1e3,Rs=!1,ga=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:n,ssoRegion:s,ssoRoleName:r,ssoClient:o,profile:a})=>{let i,c="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let E=await Zm({profile:a})();i={accessToken:E.token,expiresAt:new Date(E.expiration).toISOString()}}catch(E){throw new I(E.message,Rs)}else try{i=await Er(e)}catch{throw new I(`The SSO session associated with this profile is invalid. ${c}`,Rs)}if(new Date(i.expiresAt).getTime()-Date.now()<=ZI)throw new I(`The SSO session associated with this profile has expired. ${c}`,Rs);let{accessToken:d}=i,l=o||new kr({region:s}),m;try{m=await l.send(new Mn({accountId:n,roleName:r,accessToken:d}))}catch(E){throw I.from(E,Rs)}let{roleCredentials:{accessKeyId:u,secretAccessKey:y,sessionToken:p,expiration:h}={}}=m;if(!u||!y||!p||!h)throw new I("SSO returns an invalid temporary credential.",Rs);return{accessKeyId:u,secretAccessKey:y,sessionToken:p,expiration:new Date(h)}};var Fr=e=>{let{sso_start_url:t,sso_account_id:n,sso_region:s,sso_role_name:r}=e;if(!t||!n||!s||!r)throw new I(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,!1);return e};var $r=(e={})=>async()=>{let{ssoStartUrl:t,ssoAccountId:n,ssoRegion:s,ssoRoleName:r,ssoClient:o,ssoSession:a}=e,i=oe(e);if(!t&&!n&&!s&&!r&&!a){let d=(await xt(e))[i];if(!d)throw new I(`Profile ${i} was not found.`);if(!Is(d))throw new I(`Profile ${i} is not configured with SSO credentials.`);if(d!=null&&d.sso_session){let E=(await Sr(e))[d.sso_session],we=` configurations in profile ${i} and sso-session ${d.sso_session}`;if(s&&s!==E.sso_region)throw new I("Conflicting SSO region"+we,!1);if(t&&t!==E.sso_start_url)throw new I("Conflicting SSO start_url"+we,!1);d.sso_region=E.sso_region,d.sso_start_url=E.sso_start_url}let{sso_start_url:l,sso_account_id:m,sso_region:u,sso_role_name:y,sso_session:p}=Fr(d);return ga({ssoStartUrl:l,ssoSession:p,ssoAccountId:m,ssoRegion:u,ssoRoleName:y,ssoClient:o,profile:i})}else{if(!t||!n||!s||!r)throw new I('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"');return ga({ssoStartUrl:t,ssoSession:a,ssoAccountId:n,ssoRegion:s,ssoRoleName:r,ssoClient:o,profile:i})}};var eu=e=>{let{sso_start_url:t,sso_account_id:n,sso_session:s,sso_region:r,sso_role_name:o}=Fr(e);return $r({ssoStartUrl:t,ssoAccountId:n,ssoSession:s,ssoRegion:r,ssoRoleName:o})()};var Sa=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1,xa=e=>Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token});var nu=require("fs");var tu=e=>()=>{let{roleArn:t,roleSessionName:n,webIdentityToken:s,providerId:r,policyArns:o,policy:a,durationSeconds:i,roleAssumerWithWebIdentity:c}=e;if(!c)throw new I(`Role Arn '${t}' needs to be assumed with web identity, but no role assumption callback was provided.`,!1);return c({RoleArn:t,RoleSessionName:n??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:s,ProviderId:r,PolicyArns:o,Policy:a,DurationSeconds:i})};var eg="AWS_WEB_IDENTITY_TOKEN_FILE",tg="AWS_ROLE_ARN",ng="AWS_ROLE_SESSION_NAME",Vr=(e={})=>async()=>sg(e),sg=e=>{let t=(e==null?void 0:e.webIdentityTokenFile)??process.env[eg],n=(e==null?void 0:e.roleArn)??process.env[tg],s=(e==null?void 0:e.roleSessionName)??process.env[ng];if(!t||!n)throw new I("Web identity configuration not specified");return tu({...e,webIdentityToken:(0,nu.readFileSync)(t,{encoding:"ascii"}),roleArn:n,roleSessionName:s})()};var su=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,ru=async(e,t)=>Vr({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity})();var Ar=async(e,t,n,s={})=>{let r=t[e];if(Object.keys(s).length>0&&Sa(r))return xa(r);if(Vl(r))return zl(e,t,n,s);if(Sa(r))return xa(r);if(su(r))return ru(r,n);if(ql(r))return Hl(n,e);if(Is(r))return eu(r);throw new I(`Profile ${e} could not be found or parsed in shared credentials file.`)};var ou=(e={})=>async()=>{let t=await xt(e);return Ar(oe(e),t,e)};var rg="AWS_EC2_METADATA_DISABLED",au=e=>process.env[hs]||process.env[ps]?_r(e):process.env[rg]?async()=>{throw new I("EC2 Instance Metadata Service access disabled")}:Rr(e);var zr=(e={})=>pt(Ys(...e.profile||process.env[aa]?[]:[hr()],$r(e),ou(e),br(e),Vr(e),au(e),async()=>{throw new I("Could not load credentials from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);var pu="required",S="type",T="fn",C="argv",Nt="ref",Ft="properties",$t="headers";var Ca="PartitionResult",ce="tree",Vt="booleanEquals",F="stringEquals",hu="sigv4",wu="us-east-1",Eu="sts",v="endpoint",Iu="https://sts.{Region}.{PartitionResult#dnsSuffix}",As="error",_a="getAttr",iu={[pu]:!1,[S]:"String"},Ta={[pu]:!0,default:!1,[S]:"Boolean"},$={[Nt]:"Region"},gu={[Nt]:"UseFIPS"},Su={[Nt]:"UseDualStack"},cu={[T]:"isSet",[C]:[{[Nt]:"Endpoint"}]},xu={[Nt]:"Endpoint"},z={url:"https://sts.amazonaws.com",[Ft]:{authSchemes:[{name:hu,signingRegion:wu,signingName:Eu}]},[$t]:{}},He={},du={conditions:[{[T]:F,[C]:[$,"aws-global"]}],[v]:z,[S]:v},Tu={[T]:Vt,[C]:[gu,!0]},Cu={[T]:Vt,[C]:[Su,!0]},lu={[T]:Vt,[C]:[!0,{[T]:_a,[C]:[{[Nt]:Ca},"supportsFIPS"]}]},_u={[Nt]:Ca},mu={[T]:Vt,[C]:[!0,{[T]:_a,[C]:[_u,"supportsDualStack"]}]},uu={url:Iu,[Ft]:{},[$t]:{}},og=[xu],fu=[Tu],yu=[Cu],ag={version:"1.0",parameters:{Region:iu,UseDualStack:Ta,UseFIPS:Ta,Endpoint:iu,UseGlobalEndpoint:Ta},rules:[{conditions:[{[T]:"aws.partition",[C]:[$],assign:Ca}],[S]:ce,rules:[{conditions:[{[T]:Vt,[C]:[{[Nt]:"UseGlobalEndpoint"},!0]},{[T]:Vt,[C]:[gu,!1]},{[T]:Vt,[C]:[Su,!1]},{[T]:"not",[C]:[cu]}],[S]:ce,rules:[{conditions:[{[T]:F,[C]:[$,"ap-northeast-1"]}],endpoint:z,[S]:v},{conditions:[{[T]:F,[C]:[$,"ap-south-1"]}],endpoint:z,[S]:v},{conditions:[{[T]:F,[C]:[$,"ap-southeast-1"]}],endpoint:z,[S]:v},{conditions:[{[T]:F,[C]:[$,"ap-southeast-2"]}],endpoint:z,[S]:v},du,{conditions:[{[T]:F,[C]:[$,"ca-central-1"]}],endpoint:z,[S]:v},{conditions:[{[T]:F,[C]:[$,"eu-central-1"]}],endpoint:z,[S]:v},{conditions:[{[T]:F,[C]:[$,"eu-north-1"]}],endpoint:z,[S]:v},{conditions:[{[T]:F,[C]:[$,"eu-west-1"]}],endpoint:z,[S]:v},{conditions:[{[T]:F,[C]:[$,"eu-west-2"]}],endpoint:z,[S]:v},{conditions:[{[T]:F,[C]:[$,"eu-west-3"]}],endpoint:z,[S]:v},{conditions:[{[T]:F,[C]:[$,"sa-east-1"]}],endpoint:z,[S]:v},{conditions:[{[T]:F,[C]:[$,wu]}],endpoint:z,[S]:v},{conditions:[{[T]:F,[C]:[$,"us-east-2"]}],endpoint:z,[S]:v},{conditions:[{[T]:F,[C]:[$,"us-west-1"]}],endpoint:z,[S]:v},{conditions:[{[T]:F,[C]:[$,"us-west-2"]}],endpoint:z,[S]:v},{endpoint:{url:Iu,[Ft]:{authSchemes:[{name:hu,signingRegion:"{Region}",signingName:Eu}]},[$t]:He},[S]:v}]},{conditions:[cu,{[T]:"parseURL",[C]:og,assign:"url"}],[S]:ce,rules:[{conditions:fu,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[S]:As},{[S]:ce,rules:[{conditions:yu,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[S]:As},{endpoint:{url:xu,[Ft]:He,[$t]:He},[S]:v}]}]},{conditions:[Tu,Cu],[S]:ce,rules:[{conditions:[lu,mu],[S]:ce,rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[Ft]:He,[$t]:He},[S]:v}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[S]:As}]},{conditions:fu,[S]:ce,rules:[{conditions:[lu],[S]:ce,rules:[{[S]:ce,rules:[{conditions:[{[T]:F,[C]:["aws-us-gov",{[T]:_a,[C]:[_u,"name"]}]}],endpoint:uu,[S]:v},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",[Ft]:He,[$t]:He},[S]:v}]}]},{error:"FIPS is enabled but this partition does not support FIPS",[S]:As}]},{conditions:yu,[S]:ce,rules:[{conditions:[mu],[S]:ce,rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",[Ft]:He,[$t]:He},[S]:v}]},{error:"DualStack is enabled but this partition does not support DualStack",[S]:As}]},{[S]:ce,rules:[du,{endpoint:uu,[S]:v}]}]}]},Ru=ag;var Au=(e,t={})=>It(Ru,{endpointParams:e,logger:t.logger});var bu=e=>({apiVersion:"2011-06-15",base64Decoder:(e==null?void 0:e.base64Decoder)??At,base64Encoder:(e==null?void 0:e.base64Encoder)??bt,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Au,logger:(e==null?void 0:e.logger)??new Ie,serviceId:(e==null?void 0:e.serviceId)??"STS",urlParser:(e==null?void 0:e.urlParser)??j,utf8Decoder:(e==null?void 0:e.utf8Decoder)??Re,utf8Encoder:(e==null?void 0:e.utf8Encoder)??ht});var vu=e=>{tt(process.version);let t=vt(e),n=()=>t().then(et),s=bu(e);return{...s,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??_t,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??ml(zr),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Rt({serviceId:s.serviceId,clientVersion:cl.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??x(mt),region:(e==null?void 0:e.region)??x(Te,ot),requestHandler:(e==null?void 0:e.requestHandler)??new Pe(n),retryMode:(e==null?void 0:e.retryMode)??x({...ft,default:async()=>(await n()).retryMode||_e}),sha256:(e==null?void 0:e.sha256)??ve.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??Ct,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??x(st),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??x(rt)}};var zt=class extends ge{constructor(t){let n=vu(t),s=il(n),r=at(s),o=Qe(r),a=ut(o),i=a,c=al(i,{stsClientCtor:zt}),d=wt(c);super(d),this.config=d,this.middlewareStack.use(yt(this.config)),this.middlewareStack.use(it(this.config)),this.middlewareStack.use(ct(this.config)),this.middlewareStack.use(dt(this.config)),this.middlewareStack.use(lt(this.config)),this.middlewareStack.use(gt(this.config))}destroy(){super.destroy()}};var Pu=(e,t)=>t?class extends e{constructor(s){super(s);for(let r of t)this.middlewareStack.use(r)}}:e,ig=(e={},t)=>ra(e,Pu(zt,t)),cg=(e={},t)=>oa(e,Pu(zt,t)),Nu=e=>t=>e({roleAssumer:ig(t),roleAssumerWithWebIdentity:cg(t),...t});var Uu="required",pe="fn",he="argv",Qn="ref",Ou="isSet",G="tree",Yn="error",Xn="endpoint",Ra="PartitionResult",Aa="getAttr",Du={[Uu]:!1,type:"String"},Mu={[Uu]:!0,default:!1,type:"Boolean"},ku={[Qn]:"Endpoint"},Bu={[pe]:"booleanEquals",[he]:[{[Qn]:"UseFIPS"},!0]},Wu={[pe]:"booleanEquals",[he]:[{[Qn]:"UseDualStack"},!0]},de={},Lu={[pe]:"booleanEquals",[he]:[!0,{[pe]:Aa,[he]:[{[Qn]:Ra},"supportsFIPS"]}]},Gu={[Qn]:Ra},Fu={[pe]:"booleanEquals",[he]:[!0,{[pe]:Aa,[he]:[Gu,"supportsDualStack"]}]},$u=[Bu],Vu=[Wu],zu=[{[Qn]:"Region"}],dg={version:"1.0",parameters:{Region:Du,UseDualStack:Mu,UseFIPS:Mu,Endpoint:Du},rules:[{conditions:[{[pe]:Ou,[he]:[ku]}],type:G,rules:[{conditions:$u,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Yn},{type:G,rules:[{conditions:Vu,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Yn},{endpoint:{url:ku,properties:de,headers:de},type:Xn}]}]},{type:G,rules:[{conditions:[{[pe]:Ou,[he]:zu}],type:G,rules:[{conditions:[{[pe]:"aws.partition",[he]:zu,assign:Ra}],type:G,rules:[{conditions:[Bu,Wu],type:G,rules:[{conditions:[Lu,Fu],type:G,rules:[{type:G,rules:[{endpoint:{url:"https://ssm-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:de,headers:de},type:Xn}]}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Yn}]},{conditions:$u,type:G,rules:[{conditions:[Lu],type:G,rules:[{type:G,rules:[{conditions:[{[pe]:"stringEquals",[he]:["aws-us-gov",{[pe]:Aa,[he]:[Gu,"name"]}]}],endpoint:{url:"https://ssm.{Region}.amazonaws.com",properties:de,headers:de},type:Xn},{endpoint:{url:"https://ssm-fips.{Region}.{PartitionResult#dnsSuffix}",properties:de,headers:de},type:Xn}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Yn}]},{conditions:Vu,type:G,rules:[{conditions:[Fu],type:G,rules:[{type:G,rules:[{endpoint:{url:"https://ssm.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:de,headers:de},type:Xn}]}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Yn}]},{type:G,rules:[{endpoint:{url:"https://ssm.{Region}.{PartitionResult#dnsSuffix}",properties:de,headers:de},type:Xn}]}]}]},{error:"Invalid Configuration: Missing Region",type:Yn}]}]},qu=dg;var Hu=(e,t={})=>It(qu,{endpointParams:e,logger:t.logger});var ju=e=>({apiVersion:"2014-11-06",base64Decoder:(e==null?void 0:e.base64Decoder)??At,base64Encoder:(e==null?void 0:e.base64Encoder)??bt,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Hu,logger:(e==null?void 0:e.logger)??new Ie,serviceId:(e==null?void 0:e.serviceId)??"SSM",urlParser:(e==null?void 0:e.urlParser)??j,utf8Decoder:(e==null?void 0:e.utf8Decoder)??Re,utf8Encoder:(e==null?void 0:e.utf8Encoder)??ht});var Ku=e=>{tt(process.version);let t=vt(e),n=()=>t().then(et),s=ju(e);return{...s,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??_t,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??Nu(zr),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Rt({serviceId:s.serviceId,clientVersion:md.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??x(mt),region:(e==null?void 0:e.region)??x(Te,ot),requestHandler:(e==null?void 0:e.requestHandler)??new Pe(n),retryMode:(e==null?void 0:e.retryMode)??x({...ft,default:async()=>(await n()).retryMode||_e}),sha256:(e==null?void 0:e.sha256)??ve.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??Ct,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??x(st),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??x(rt)}};var Ur=class extends ge{constructor(t){let n=Ku(t),s=ld(n),r=at(s),o=Qe(r),a=ut(o),i=a,c=ar(i),d=wt(c);super(d),this.config=d,this.middlewareStack.use(yt(this.config)),this.middlewareStack.use(it(this.config)),this.middlewareStack.use(ct(this.config)),this.middlewareStack.use(dt(this.config)),this.middlewareStack.use(lt(this.config)),this.middlewareStack.use(cr(this.config)),this.middlewareStack.use(gt(this.config))}destroy(){super.destroy()}};var ke=Ut(Qu()),Zu=new Ur({});async function mg(){var e;try{let t=(0,P.getInput)("command",{required:!0}),n=(0,P.getInput)("instance-id")||process.env.SSM_COMMAND_INSTANCE_ID,s=(0,P.getBooleanInput)("powershell");if(n===void 0){(0,P.setFailed)(Error("An instance ID must be provided."));return}let r=await Zu.send(new un({DocumentName:s?"AWS-RunPowerShellScript":"AWS-RunShellScript",InstanceIds:[n],Parameters:{commands:[t]}}));(0,P.debug)(`SendCommandOutput: ${JSON.stringify(r,null,2)}`);let o=(e=r.Command)==null?void 0:e.CommandId;if(r.$metadata.httpStatusCode!==200||!o)return;(0,P.info)("Waiting for remote command invocation to complete...");let a=await ef(n,o);a!==void 0&&(0,P.setOutput)("exit-code",a),(0,P.info)(`Remote command invocation has completed with exit code: ${a}`)}catch(t){t instanceof Error&&(0,P.setFailed)(t)}}async function ef(e,t){await yg(5);let n=await Zu.send(new mn({InstanceId:e,CommandId:t}));return(0,P.debug)(`GetCommandInvocationOutput: ${JSON.stringify(n,null,2)}`),["Success","Failed","Cancelled","TimedOut"].includes(n.Status??"")?((0,P.info)(`Remote command invocation completed with status: "${n.Status}". Output is printed below.`),ug(n.StandardOutputContent??""),fg(n.StandardOutputContent??""),n.ResponseCode??-1):((0,P.info)("Still waiting..."),ef(e,t))}function ug(e){(0,P.info)(ke.default.cyan.open+"----- BEGIN STDOUT CONTENT -----"),e.trim().split(/\r?\n/).forEach(t=>(0,P.info)(ke.default.cyan.open+t)),(0,P.info)(ke.default.cyan.open+"----- END STDOUT CONTENT -----")}function fg(e){(0,P.info)(ke.default.red.open+ke.default.bold.open+"----- BEGIN STDERR CONTENT -----"),e.trim().split(/\r?\n/).forEach(t=>(0,P.info)(ke.default.red.open+ke.default.bold.open+t)),(0,P.info)(ke.default.red.open+ke.default.bold.open+"----- END STDERR CONTENT -----")}function yg(e){return new Promise(t=>setTimeout(t,e*1e3))}mg();
