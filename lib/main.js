"use strict";var fE=Object.create;var No=Object.defineProperty;var yE=Object.getOwnPropertyDescriptor;var pE=Object.getOwnPropertyNames;var hE=Object.getPrototypeOf,wE=Object.prototype.hasOwnProperty;var Oe=(e,t)=>()=>(e&&(t=e(e=0)),t);var M=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Xa=(e,t)=>{for(var s in t)No(e,s,{get:t[s],enumerable:!0})},dd=(e,t,s,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of pE(t))!wE.call(e,r)&&r!==s&&No(e,r,{get:()=>t[r],enumerable:!(n=yE(t,r))||n.enumerable});return e};var Ns=(e,t,s)=>(s=e!=null?fE(hE(e)):{},dd(t||!e||!e.__esModule?No(s,"default",{value:e,enumerable:!0}):s,e)),EE=e=>dd(No({},"__esModule",{value:!0}),e);var Oo=M(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});Qs.toCommandProperties=Qs.toCommandValue=void 0;function gE(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}Qs.toCommandValue=gE;function IE(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}Qs.toCommandProperties=IE});var fd=M(qe=>{"use strict";var SE=qe&&qe.__createBinding||(Object.create?function(e,t,s,n){n===void 0&&(n=s),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,n){n===void 0&&(n=s),e[n]=t[s]}),xE=qe&&qe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),CE=qe&&qe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var s in e)s!=="default"&&Object.hasOwnProperty.call(e,s)&&SE(t,e,s);return xE(t,e),t};Object.defineProperty(qe,"__esModule",{value:!0});qe.issue=qe.issueCommand=void 0;var TE=CE(require("os")),md=Oo();function ud(e,t,s){let n=new Za(e,t,s);process.stdout.write(n.toString()+TE.EOL)}qe.issueCommand=ud;function bE(e,t=""){ud(e,{},t)}qe.issue=bE;var ld="::",Za=class{constructor(t,s,n){t||(t="missing.command"),this.command=t,this.properties=s,this.message=n}toString(){let t=ld+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let s=!0;for(let n in this.properties)if(this.properties.hasOwnProperty(n)){let r=this.properties[n];r&&(s?s=!1:t+=",",t+=`${n}=${RE(r)}`)}}return t+=`${ld}${_E(this.message)}`,t}};function _E(e){return md.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function RE(e){return md.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});function Hr(){return Do>Mo.length-16&&(yd.default.randomFillSync(Mo),Do=0),Mo.slice(Do,Do+=16)}var yd,Mo,Do,ei=Oe(()=>{yd=Ns(require("crypto")),Mo=new Uint8Array(256),Do=Mo.length});var pd,hd=Oe(()=>{pd=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function vE(e){return typeof e=="string"&&pd.test(e)}var ts,Kr=Oe(()=>{hd();ts=vE});function PE(e,t=0){let s=(te[e[t+0]]+te[e[t+1]]+te[e[t+2]]+te[e[t+3]]+"-"+te[e[t+4]]+te[e[t+5]]+"-"+te[e[t+6]]+te[e[t+7]]+"-"+te[e[t+8]]+te[e[t+9]]+"-"+te[e[t+10]]+te[e[t+11]]+te[e[t+12]]+te[e[t+13]]+te[e[t+14]]+te[e[t+15]]).toLowerCase();if(!ts(s))throw TypeError("Stringified UUID is invalid");return s}var te,ss,Jr=Oe(()=>{Kr();te=[];for(let e=0;e<256;++e)te.push((e+256).toString(16).substr(1));ss=PE});function AE(e,t,s){let n=t&&s||0,r=t||new Array(16);e=e||{};let o=e.node||wd,a=e.clockseq!==void 0?e.clockseq:ti;if(o==null||a==null){let u=e.random||(e.rng||Hr)();o==null&&(o=wd=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),a==null&&(a=ti=(u[6]<<8|u[7])&16383)}let i=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:ni+1,d=i-si+(c-ni)/1e4;if(d<0&&e.clockseq===void 0&&(a=a+1&16383),(d<0||i>si)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");si=i,ni=c,ti=a,i+=122192928e5;let l=((i&268435455)*1e4+c)%4294967296;r[n++]=l>>>24&255,r[n++]=l>>>16&255,r[n++]=l>>>8&255,r[n++]=l&255;let m=i/4294967296*1e4&268435455;r[n++]=m>>>8&255,r[n++]=m&255,r[n++]=m>>>24&15|16,r[n++]=m>>>16&255,r[n++]=a>>>8|128,r[n++]=a&255;for(let u=0;u<6;++u)r[n+u]=o[u];return t||ss(r)}var wd,ti,si,ni,Ed,gd=Oe(()=>{ei();Jr();si=0,ni=0;Ed=AE});function NE(e){if(!ts(e))throw TypeError("Invalid UUID");let t,s=new Uint8Array(16);return s[0]=(t=parseInt(e.slice(0,8),16))>>>24,s[1]=t>>>16&255,s[2]=t>>>8&255,s[3]=t&255,s[4]=(t=parseInt(e.slice(9,13),16))>>>8,s[5]=t&255,s[6]=(t=parseInt(e.slice(14,18),16))>>>8,s[7]=t&255,s[8]=(t=parseInt(e.slice(19,23),16))>>>8,s[9]=t&255,s[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,s[11]=t/4294967296&255,s[12]=t>>>24&255,s[13]=t>>>16&255,s[14]=t>>>8&255,s[15]=t&255,s}var ko,ri=Oe(()=>{Kr();ko=NE});function OE(e){e=unescape(encodeURIComponent(e));let t=[];for(let s=0;s<e.length;++s)t.push(e.charCodeAt(s));return t}function Lo(e,t,s){function n(r,o,a,i){if(typeof r=="string"&&(r=OE(r)),typeof o=="string"&&(o=ko(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+r.length);if(c.set(o),c.set(r,o.length),c=s(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,a){i=i||0;for(let d=0;d<16;++d)a[i+d]=c[d];return a}return ss(c)}try{n.name=e}catch{}return n.DNS=DE,n.URL=ME,n}var DE,ME,oi=Oe(()=>{Jr();ri();DE="6ba7b810-9dad-11d1-80b4-00c04fd430c8",ME="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function kE(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Id.default.createHash("md5").update(e).digest()}var Id,Sd,xd=Oe(()=>{Id=Ns(require("crypto"));Sd=kE});var LE,Cd,Td=Oe(()=>{oi();xd();LE=Lo("v3",48,Sd),Cd=LE});function FE(e,t,s){e=e||{};let n=e.random||(e.rng||Hr)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){s=s||0;for(let r=0;r<16;++r)t[s+r]=n[r];return t}return ss(n)}var Fo,bd=Oe(()=>{ei();Jr();Fo=FE});function zE(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),_d.default.createHash("sha1").update(e).digest()}var _d,Rd,vd=Oe(()=>{_d=Ns(require("crypto"));Rd=zE});var $E,Pd,Ad=Oe(()=>{oi();vd();$E=Lo("v5",80,Rd),Pd=$E});var Nd,Od=Oe(()=>{Nd="00000000-0000-0000-0000-000000000000"});function UE(e){if(!ts(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var Dd,Md=Oe(()=>{Kr();Dd=UE});var kd={};Xa(kd,{NIL:()=>Nd,parse:()=>ko,stringify:()=>ss,v1:()=>Ed,v3:()=>Cd,v4:()=>Fo,v5:()=>Pd,validate:()=>ts,version:()=>Dd});var ai=Oe(()=>{gd();Td();bd();Ad();Od();Md();Kr();Jr();ri()});var $d=M(je=>{"use strict";var VE=je&&je.__createBinding||(Object.create?function(e,t,s,n){n===void 0&&(n=s),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,n){n===void 0&&(n=s),e[n]=t[s]}),BE=je&&je.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Fd=je&&je.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var s in e)s!=="default"&&Object.hasOwnProperty.call(e,s)&&VE(t,e,s);return BE(t,e),t};Object.defineProperty(je,"__esModule",{value:!0});je.prepareKeyValueMessage=je.issueFileCommand=void 0;var Ld=Fd(require("fs")),ii=Fd(require("os")),WE=(ai(),EE(kd)),zd=Oo();function GE(e,t){let s=process.env[`GITHUB_${e}`];if(!s)throw new Error(`Unable to find environment variable for file command ${e}`);if(!Ld.existsSync(s))throw new Error(`Missing file at path: ${s}`);Ld.appendFileSync(s,`${zd.toCommandValue(t)}${ii.EOL}`,{encoding:"utf8"})}je.issueFileCommand=GE;function qE(e,t){let s=`ghadelimiter_${WE.v4()}`,n=zd.toCommandValue(t);if(e.includes(s))throw new Error(`Unexpected input: name should not contain the delimiter "${s}"`);if(n.includes(s))throw new Error(`Unexpected input: value should not contain the delimiter "${s}"`);return`${e}<<${s}${ii.EOL}${n}${ii.EOL}${s}`}je.prepareKeyValueMessage=qE});var Vd=M(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});Xs.checkBypass=Xs.getProxyUrl=void 0;function jE(e){let t=e.protocol==="https:";if(Ud(e))return;let s=(()=>t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(s)return new URL(s)}Xs.getProxyUrl=jE;function Ud(e){if(!e.hostname)return!1;let t=e.hostname;if(HE(t))return!0;let s=process.env.no_proxy||process.env.NO_PROXY||"";if(!s)return!1;let n;e.port?n=Number(e.port):e.protocol==="http:"?n=80:e.protocol==="https:"&&(n=443);let r=[e.hostname.toUpperCase()];typeof n=="number"&&r.push(`${r[0]}:${n}`);for(let o of s.split(",").map(a=>a.trim().toUpperCase()).filter(a=>a))if(o==="*"||r.some(a=>a===o||a.endsWith(`.${o}`)||o.startsWith(".")&&a.endsWith(`${o}`)))return!0;return!1}Xs.checkBypass=Ud;function HE(e){let t=e.toLowerCase();return t==="localhost"||t.startsWith("127.")||t.startsWith("[::1]")||t.startsWith("[0:0:0:0:0:0:0:1]")}});var qd=M(Zs=>{"use strict";var Sv=require("net"),KE=require("tls"),ci=require("http"),Bd=require("https"),JE=require("events"),xv=require("assert"),YE=require("util");Zs.httpOverHttp=QE;Zs.httpsOverHttp=XE;Zs.httpOverHttps=ZE;Zs.httpsOverHttps=eg;function QE(e){var t=new $t(e);return t.request=ci.request,t}function XE(e){var t=new $t(e);return t.request=ci.request,t.createSocket=Wd,t.defaultPort=443,t}function ZE(e){var t=new $t(e);return t.request=Bd.request,t}function eg(e){var t=new $t(e);return t.request=Bd.request,t.createSocket=Wd,t.defaultPort=443,t}function $t(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||ci.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(n,r,o,a){for(var i=Gd(r,o,a),c=0,d=t.requests.length;c<d;++c){var l=t.requests[c];if(l.host===i.host&&l.port===i.port){t.requests.splice(c,1),l.request.onSocket(n);return}}n.destroy(),t.removeSocket(n)})}YE.inherits($t,JE.EventEmitter);$t.prototype.addRequest=function(t,s,n,r){var o=this,a=di({request:t},o.options,Gd(s,n,r));if(o.sockets.length>=this.maxSockets){o.requests.push(a);return}o.createSocket(a,function(i){i.on("free",c),i.on("close",d),i.on("agentRemove",d),t.onSocket(i);function c(){o.emit("free",i,a)}function d(l){o.removeSocket(i),i.removeListener("free",c),i.removeListener("close",d),i.removeListener("agentRemove",d)}})};$t.prototype.createSocket=function(t,s){var n=this,r={};n.sockets.push(r);var o=di({},n.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(o.localAddress=t.localAddress),o.proxyAuth&&(o.headers=o.headers||{},o.headers["Proxy-Authorization"]="Basic "+new Buffer(o.proxyAuth).toString("base64")),ns("making CONNECT request");var a=n.request(o);a.useChunkedEncodingByDefault=!1,a.once("response",i),a.once("upgrade",c),a.once("connect",d),a.once("error",l),a.end();function i(m){m.upgrade=!0}function c(m,u,y){process.nextTick(function(){d(m,u,y)})}function d(m,u,y){if(a.removeAllListeners(),u.removeAllListeners(),m.statusCode!==200){ns("tunneling socket could not be established, statusCode=%d",m.statusCode),u.destroy();var p=new Error("tunneling socket could not be established, statusCode="+m.statusCode);p.code="ECONNRESET",t.request.emit("error",p),n.removeSocket(r);return}if(y.length>0){ns("got illegal response body from proxy"),u.destroy();var p=new Error("got illegal response body from proxy");p.code="ECONNRESET",t.request.emit("error",p),n.removeSocket(r);return}return ns("tunneling connection has established"),n.sockets[n.sockets.indexOf(r)]=u,s(u)}function l(m){a.removeAllListeners(),ns(`tunneling socket could not be established, cause=%s
`,m.message,m.stack);var u=new Error("tunneling socket could not be established, cause="+m.message);u.code="ECONNRESET",t.request.emit("error",u),n.removeSocket(r)}};$t.prototype.removeSocket=function(t){var s=this.sockets.indexOf(t);if(s!==-1){this.sockets.splice(s,1);var n=this.requests.shift();n&&this.createSocket(n,function(r){n.request.onSocket(r)})}};function Wd(e,t){var s=this;$t.prototype.createSocket.call(s,e,function(n){var r=e.request.getHeader("host"),o=di({},s.options,{socket:n,servername:r?r.replace(/:.*$/,""):e.host}),a=KE.connect(0,o);s.sockets[s.sockets.indexOf(n)]=a,t(a)})}function Gd(e,t,s){return typeof e=="string"?{host:e,port:t,localAddress:s}:e}function di(e){for(var t=1,s=arguments.length;t<s;++t){var n=arguments[t];if(typeof n=="object")for(var r=Object.keys(n),o=0,a=r.length;o<a;++o){var i=r[o];n[i]!==void 0&&(e[i]=n[i])}}return e}var ns;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?ns=function(){var e=Array.prototype.slice.call(arguments);typeof e[0]=="string"?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:ns=function(){};Zs.debug=ns});var Hd=M((Tv,jd)=>{jd.exports=qd()});var Jd=M(O=>{"use strict";var tg=O&&O.__createBinding||(Object.create?function(e,t,s,n){n===void 0&&(n=s),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,n){n===void 0&&(n=s),e[n]=t[s]}),sg=O&&O.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Bo=O&&O.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var s in e)s!=="default"&&Object.hasOwnProperty.call(e,s)&&tg(t,e,s);return sg(t,e),t},K=O&&O.__awaiter||function(e,t,s,n){function r(o){return o instanceof s?o:new s(function(a){a(o)})}return new(s||(s=Promise))(function(o,a){function i(l){try{d(n.next(l))}catch(m){a(m)}}function c(l){try{d(n.throw(l))}catch(m){a(m)}}function d(l){l.done?o(l.value):r(l.value).then(i,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(O,"__esModule",{value:!0});O.HttpClient=O.isHttps=O.HttpClientResponse=O.HttpClientError=O.getProxyUrl=O.MediaTypes=O.Headers=O.HttpCodes=void 0;var zo=Bo(require("http")),li=Bo(require("https")),Kd=Bo(Vd()),$o=Bo(Hd()),ct;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})(ct=O.HttpCodes||(O.HttpCodes={}));var De;(function(e){e.Accept="accept",e.ContentType="content-type"})(De=O.Headers||(O.Headers={}));var rs;(function(e){e.ApplicationJson="application/json"})(rs=O.MediaTypes||(O.MediaTypes={}));function ng(e){let t=Kd.getProxyUrl(new URL(e));return t?t.href:""}O.getProxyUrl=ng;var rg=[ct.MovedPermanently,ct.ResourceMoved,ct.SeeOther,ct.TemporaryRedirect,ct.PermanentRedirect],og=[ct.BadGateway,ct.ServiceUnavailable,ct.GatewayTimeout],ag=["OPTIONS","GET","DELETE","HEAD"],ig=10,cg=5,en=class extends Error{constructor(t,s){super(t),this.name="HttpClientError",this.statusCode=s,Object.setPrototypeOf(this,en.prototype)}};O.HttpClientError=en;var Vo=class{constructor(t){this.message=t}readBody(){return K(this,void 0,void 0,function*(){return new Promise(t=>K(this,void 0,void 0,function*(){let s=Buffer.alloc(0);this.message.on("data",n=>{s=Buffer.concat([s,n])}),this.message.on("end",()=>{t(s.toString())})}))})}};O.HttpClientResponse=Vo;function dg(e){return new URL(e).protocol==="https:"}O.isHttps=dg;var mi=class{constructor(t,s,n){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=s||[],this.requestOptions=n,n&&(n.ignoreSslError!=null&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,n.allowRedirects!=null&&(this._allowRedirects=n.allowRedirects),n.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),n.maxRedirects!=null&&(this._maxRedirects=Math.max(n.maxRedirects,0)),n.keepAlive!=null&&(this._keepAlive=n.keepAlive),n.allowRetries!=null&&(this._allowRetries=n.allowRetries),n.maxRetries!=null&&(this._maxRetries=n.maxRetries))}options(t,s){return K(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,s||{})})}get(t,s){return K(this,void 0,void 0,function*(){return this.request("GET",t,null,s||{})})}del(t,s){return K(this,void 0,void 0,function*(){return this.request("DELETE",t,null,s||{})})}post(t,s,n){return K(this,void 0,void 0,function*(){return this.request("POST",t,s,n||{})})}patch(t,s,n){return K(this,void 0,void 0,function*(){return this.request("PATCH",t,s,n||{})})}put(t,s,n){return K(this,void 0,void 0,function*(){return this.request("PUT",t,s,n||{})})}head(t,s){return K(this,void 0,void 0,function*(){return this.request("HEAD",t,null,s||{})})}sendStream(t,s,n,r){return K(this,void 0,void 0,function*(){return this.request(t,s,n,r)})}getJson(t,s={}){return K(this,void 0,void 0,function*(){s[De.Accept]=this._getExistingOrDefaultHeader(s,De.Accept,rs.ApplicationJson);let n=yield this.get(t,s);return this._processResponse(n,this.requestOptions)})}postJson(t,s,n={}){return K(this,void 0,void 0,function*(){let r=JSON.stringify(s,null,2);n[De.Accept]=this._getExistingOrDefaultHeader(n,De.Accept,rs.ApplicationJson),n[De.ContentType]=this._getExistingOrDefaultHeader(n,De.ContentType,rs.ApplicationJson);let o=yield this.post(t,r,n);return this._processResponse(o,this.requestOptions)})}putJson(t,s,n={}){return K(this,void 0,void 0,function*(){let r=JSON.stringify(s,null,2);n[De.Accept]=this._getExistingOrDefaultHeader(n,De.Accept,rs.ApplicationJson),n[De.ContentType]=this._getExistingOrDefaultHeader(n,De.ContentType,rs.ApplicationJson);let o=yield this.put(t,r,n);return this._processResponse(o,this.requestOptions)})}patchJson(t,s,n={}){return K(this,void 0,void 0,function*(){let r=JSON.stringify(s,null,2);n[De.Accept]=this._getExistingOrDefaultHeader(n,De.Accept,rs.ApplicationJson),n[De.ContentType]=this._getExistingOrDefaultHeader(n,De.ContentType,rs.ApplicationJson);let o=yield this.patch(t,r,n);return this._processResponse(o,this.requestOptions)})}request(t,s,n,r){return K(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let o=new URL(s),a=this._prepareRequest(t,o,r),i=this._allowRetries&&ag.includes(t)?this._maxRetries+1:1,c=0,d;do{if(d=yield this.requestRaw(a,n),d&&d.message&&d.message.statusCode===ct.Unauthorized){let m;for(let u of this.handlers)if(u.canHandleAuthentication(d)){m=u;break}return m?m.handleAuthentication(this,a,n):d}let l=this._maxRedirects;for(;d.message.statusCode&&rg.includes(d.message.statusCode)&&this._allowRedirects&&l>0;){let m=d.message.headers.location;if(!m)break;let u=new URL(m);if(o.protocol==="https:"&&o.protocol!==u.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield d.readBody(),u.hostname!==o.hostname)for(let y in r)y.toLowerCase()==="authorization"&&delete r[y];a=this._prepareRequest(t,u,r),d=yield this.requestRaw(a,n),l--}if(!d.message.statusCode||!og.includes(d.message.statusCode))return d;c+=1,c<i&&(yield d.readBody(),yield this._performExponentialBackoff(c))}while(c<i);return d})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,s){return K(this,void 0,void 0,function*(){return new Promise((n,r)=>{function o(a,i){a?r(a):i?n(i):r(new Error("Unknown error"))}this.requestRawWithCallback(t,s,o)})})}requestRawWithCallback(t,s,n){typeof s=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(s,"utf8"));let r=!1;function o(c,d){r||(r=!0,n(c,d))}let a=t.httpModule.request(t.options,c=>{let d=new Vo(c);o(void 0,d)}),i;a.on("socket",c=>{i=c}),a.setTimeout(this._socketTimeout||3*6e4,()=>{i&&i.end(),o(new Error(`Request timeout: ${t.options.path}`))}),a.on("error",function(c){o(c)}),s&&typeof s=="string"&&a.write(s,"utf8"),s&&typeof s!="string"?(s.on("close",function(){a.end()}),s.pipe(a)):a.end()}getAgent(t){let s=new URL(t);return this._getAgent(s)}_prepareRequest(t,s,n){let r={};r.parsedUrl=s;let o=r.parsedUrl.protocol==="https:";r.httpModule=o?li:zo;let a=o?443:80;if(r.options={},r.options.host=r.parsedUrl.hostname,r.options.port=r.parsedUrl.port?parseInt(r.parsedUrl.port):a,r.options.path=(r.parsedUrl.pathname||"")+(r.parsedUrl.search||""),r.options.method=t,r.options.headers=this._mergeHeaders(n),this.userAgent!=null&&(r.options.headers["user-agent"]=this.userAgent),r.options.agent=this._getAgent(r.parsedUrl),this.handlers)for(let i of this.handlers)i.prepareRequest(r.options);return r}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},Uo(this.requestOptions.headers),Uo(t||{})):Uo(t||{})}_getExistingOrDefaultHeader(t,s,n){let r;return this.requestOptions&&this.requestOptions.headers&&(r=Uo(this.requestOptions.headers)[s]),t[s]||r||n}_getAgent(t){let s,n=Kd.getProxyUrl(t),r=n&&n.hostname;if(this._keepAlive&&r&&(s=this._proxyAgent),this._keepAlive&&!r&&(s=this._agent),s)return s;let o=t.protocol==="https:",a=100;if(this.requestOptions&&(a=this.requestOptions.maxSockets||zo.globalAgent.maxSockets),n&&n.hostname){let i={maxSockets:a,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})},c,d=n.protocol==="https:";o?c=d?$o.httpsOverHttps:$o.httpsOverHttp:c=d?$o.httpOverHttps:$o.httpOverHttp,s=c(i),this._proxyAgent=s}if(this._keepAlive&&!s){let i={keepAlive:this._keepAlive,maxSockets:a};s=o?new li.Agent(i):new zo.Agent(i),this._agent=s}return s||(s=o?li.globalAgent:zo.globalAgent),o&&this._ignoreSslError&&(s.options=Object.assign(s.options||{},{rejectUnauthorized:!1})),s}_performExponentialBackoff(t){return K(this,void 0,void 0,function*(){t=Math.min(ig,t);let s=cg*Math.pow(2,t);return new Promise(n=>setTimeout(()=>n(),s))})}_processResponse(t,s){return K(this,void 0,void 0,function*(){return new Promise((n,r)=>K(this,void 0,void 0,function*(){let o=t.message.statusCode||0,a={statusCode:o,result:null,headers:{}};o===ct.NotFound&&n(a);function i(l,m){if(typeof m=="string"){let u=new Date(m);if(!isNaN(u.valueOf()))return u}return m}let c,d;try{d=yield t.readBody(),d&&d.length>0&&(s&&s.deserializeDates?c=JSON.parse(d,i):c=JSON.parse(d),a.result=c),a.headers=t.message.headers}catch{}if(o>299){let l;c&&c.message?l=c.message:d&&d.length>0?l=d:l=`Failed request: (${o})`;let m=new en(l,o);m.result=a.result,r(m)}else n(a)}))})}};O.HttpClient=mi;var Uo=e=>Object.keys(e).reduce((t,s)=>(t[s.toLowerCase()]=e[s],t),{})});var Yd=M(ht=>{"use strict";var pi=ht&&ht.__awaiter||function(e,t,s,n){function r(o){return o instanceof s?o:new s(function(a){a(o)})}return new(s||(s=Promise))(function(o,a){function i(l){try{d(n.next(l))}catch(m){a(m)}}function c(l){try{d(n.throw(l))}catch(m){a(m)}}function d(l){l.done?o(l.value):r(l.value).then(i,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(ht,"__esModule",{value:!0});ht.PersonalAccessTokenCredentialHandler=ht.BearerCredentialHandler=ht.BasicCredentialHandler=void 0;var ui=class{constructor(t,s){this.username=t,this.password=s}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return pi(this,void 0,void 0,function*(){throw new Error("not implemented")})}};ht.BasicCredentialHandler=ui;var fi=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return pi(this,void 0,void 0,function*(){throw new Error("not implemented")})}};ht.BearerCredentialHandler=fi;var yi=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return pi(this,void 0,void 0,function*(){throw new Error("not implemented")})}};ht.PersonalAccessTokenCredentialHandler=yi});var Zd=M(tn=>{"use strict";var Qd=tn&&tn.__awaiter||function(e,t,s,n){function r(o){return o instanceof s?o:new s(function(a){a(o)})}return new(s||(s=Promise))(function(o,a){function i(l){try{d(n.next(l))}catch(m){a(m)}}function c(l){try{d(n.throw(l))}catch(m){a(m)}}function d(l){l.done?o(l.value):r(l.value).then(i,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(tn,"__esModule",{value:!0});tn.OidcClient=void 0;var lg=Jd(),mg=Yd(),Xd=hi(),os=class{static createHttpClient(t=!0,s=10){let n={allowRetries:t,maxRetries:s};return new lg.HttpClient("actions/oidc-client",[new mg.BearerCredentialHandler(os.getRequestToken())],n)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var s;return Qd(this,void 0,void 0,function*(){let o=(s=(yield os.createHttpClient().getJson(t).catch(a=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${a.statusCode}
 
        Error Message: ${a.result.message}`)})).result)===null||s===void 0?void 0:s.value;if(!o)throw new Error("Response json body do not have ID Token field");return o})}static getIDToken(t){return Qd(this,void 0,void 0,function*(){try{let s=os.getIDTokenUrl();if(t){let r=encodeURIComponent(t);s=`${s}&audience=${r}`}Xd.debug(`ID token url is ${s}`);let n=yield os.getCall(s);return Xd.setSecret(n),n}catch(s){throw new Error(`Error message: ${s.message}`)}})}};tn.OidcClient=os});var Ii=M(Fe=>{"use strict";var wi=Fe&&Fe.__awaiter||function(e,t,s,n){function r(o){return o instanceof s?o:new s(function(a){a(o)})}return new(s||(s=Promise))(function(o,a){function i(l){try{d(n.next(l))}catch(m){a(m)}}function c(l){try{d(n.throw(l))}catch(m){a(m)}}function d(l){l.done?o(l.value):r(l.value).then(i,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.summary=Fe.markdownSummary=Fe.SUMMARY_DOCS_URL=Fe.SUMMARY_ENV_VAR=void 0;var ug=require("os"),Ei=require("fs"),{access:fg,appendFile:yg,writeFile:pg}=Ei.promises;Fe.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";Fe.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var gi=class{constructor(){this._buffer=""}filePath(){return wi(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[Fe.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${Fe.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield fg(t,Ei.constants.R_OK|Ei.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,s,n={}){let r=Object.entries(n).map(([o,a])=>` ${o}="${a}"`).join("");return s?`<${t}${r}>${s}</${t}>`:`<${t}${r}>`}write(t){return wi(this,void 0,void 0,function*(){let s=!!(t!=null&&t.overwrite),n=yield this.filePath();return yield(s?pg:yg)(n,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return wi(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,s=!1){return this._buffer+=t,s?this.addEOL():this}addEOL(){return this.addRaw(ug.EOL)}addCodeBlock(t,s){let n=Object.assign({},s&&{lang:s}),r=this.wrap("pre",this.wrap("code",t),n);return this.addRaw(r).addEOL()}addList(t,s=!1){let n=s?"ol":"ul",r=t.map(a=>this.wrap("li",a)).join(""),o=this.wrap(n,r);return this.addRaw(o).addEOL()}addTable(t){let s=t.map(r=>{let o=r.map(a=>{if(typeof a=="string")return this.wrap("td",a);let{header:i,data:c,colspan:d,rowspan:l}=a,m=i?"th":"td",u=Object.assign(Object.assign({},d&&{colspan:d}),l&&{rowspan:l});return this.wrap(m,c,u)}).join("");return this.wrap("tr",o)}).join(""),n=this.wrap("table",s);return this.addRaw(n).addEOL()}addDetails(t,s){let n=this.wrap("details",this.wrap("summary",t)+s);return this.addRaw(n).addEOL()}addImage(t,s,n){let{width:r,height:o}=n||{},a=Object.assign(Object.assign({},r&&{width:r}),o&&{height:o}),i=this.wrap("img",null,Object.assign({src:t,alt:s},a));return this.addRaw(i).addEOL()}addHeading(t,s){let n=`h${s}`,r=["h1","h2","h3","h4","h5","h6"].includes(n)?n:"h1",o=this.wrap(r,t);return this.addRaw(o).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,s){let n=Object.assign({},s&&{cite:s}),r=this.wrap("blockquote",t,n);return this.addRaw(r).addEOL()}addLink(t,s){let n=this.wrap("a",t,{href:s});return this.addRaw(n).addEOL()}},el=new gi;Fe.markdownSummary=el;Fe.summary=el});var tl=M(ze=>{"use strict";var hg=ze&&ze.__createBinding||(Object.create?function(e,t,s,n){n===void 0&&(n=s),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,n){n===void 0&&(n=s),e[n]=t[s]}),wg=ze&&ze.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Eg=ze&&ze.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var s in e)s!=="default"&&Object.hasOwnProperty.call(e,s)&&hg(t,e,s);return wg(t,e),t};Object.defineProperty(ze,"__esModule",{value:!0});ze.toPlatformPath=ze.toWin32Path=ze.toPosixPath=void 0;var gg=Eg(require("path"));function Ig(e){return e.replace(/[\\]/g,"/")}ze.toPosixPath=Ig;function Sg(e){return e.replace(/[/]/g,"\\")}ze.toWin32Path=Sg;function xg(e){return e.replace(/[/\\]/g,gg.sep)}ze.toPlatformPath=xg});var hi=M(g=>{"use strict";var Cg=g&&g.__createBinding||(Object.create?function(e,t,s,n){n===void 0&&(n=s),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,n){n===void 0&&(n=s),e[n]=t[s]}),Tg=g&&g.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),sl=g&&g.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var s in e)s!=="default"&&Object.hasOwnProperty.call(e,s)&&Cg(t,e,s);return Tg(t,e),t},nl=g&&g.__awaiter||function(e,t,s,n){function r(o){return o instanceof s?o:new s(function(a){a(o)})}return new(s||(s=Promise))(function(o,a){function i(l){try{d(n.next(l))}catch(m){a(m)}}function c(l){try{d(n.throw(l))}catch(m){a(m)}}function d(l){l.done?o(l.value):r(l.value).then(i,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(g,"__esModule",{value:!0});g.getIDToken=g.getState=g.saveState=g.group=g.endGroup=g.startGroup=g.info=g.notice=g.warning=g.error=g.debug=g.isDebug=g.setFailed=g.setCommandEcho=g.setOutput=g.getBooleanInput=g.getMultilineInput=g.getInput=g.addPath=g.setSecret=g.exportVariable=g.ExitCode=void 0;var He=fd(),Os=$d(),sn=Oo(),rl=sl(require("os")),bg=sl(require("path")),_g=Zd(),ol;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(ol=g.ExitCode||(g.ExitCode={}));function Rg(e,t){let s=sn.toCommandValue(t);if(process.env[e]=s,process.env.GITHUB_ENV||"")return Os.issueFileCommand("ENV",Os.prepareKeyValueMessage(e,t));He.issueCommand("set-env",{name:e},s)}g.exportVariable=Rg;function vg(e){He.issueCommand("add-mask",{},e)}g.setSecret=vg;function Pg(e){process.env.GITHUB_PATH||""?Os.issueFileCommand("PATH",e):He.issueCommand("add-path",{},e),process.env.PATH=`${e}${bg.delimiter}${process.env.PATH}`}g.addPath=Pg;function Si(e,t){let s=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!s)throw new Error(`Input required and not supplied: ${e}`);return t&&t.trimWhitespace===!1?s:s.trim()}g.getInput=Si;function Ag(e,t){let s=Si(e,t).split(`
`).filter(n=>n!=="");return t&&t.trimWhitespace===!1?s:s.map(n=>n.trim())}g.getMultilineInput=Ag;function Ng(e,t){let s=["true","True","TRUE"],n=["false","False","FALSE"],r=Si(e,t);if(s.includes(r))return!0;if(n.includes(r))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}g.getBooleanInput=Ng;function Og(e,t){if(process.env.GITHUB_OUTPUT||"")return Os.issueFileCommand("OUTPUT",Os.prepareKeyValueMessage(e,t));process.stdout.write(rl.EOL),He.issueCommand("set-output",{name:e},sn.toCommandValue(t))}g.setOutput=Og;function Dg(e){He.issue("echo",e?"on":"off")}g.setCommandEcho=Dg;function Mg(e){process.exitCode=ol.Failure,al(e)}g.setFailed=Mg;function kg(){return process.env.RUNNER_DEBUG==="1"}g.isDebug=kg;function Lg(e){He.issueCommand("debug",{},e)}g.debug=Lg;function al(e,t={}){He.issueCommand("error",sn.toCommandProperties(t),e instanceof Error?e.toString():e)}g.error=al;function Fg(e,t={}){He.issueCommand("warning",sn.toCommandProperties(t),e instanceof Error?e.toString():e)}g.warning=Fg;function zg(e,t={}){He.issueCommand("notice",sn.toCommandProperties(t),e instanceof Error?e.toString():e)}g.notice=zg;function $g(e){process.stdout.write(e+rl.EOL)}g.info=$g;function il(e){He.issue("group",e)}g.startGroup=il;function cl(){He.issue("endgroup")}g.endGroup=cl;function Ug(e,t){return nl(this,void 0,void 0,function*(){il(e);let s;try{s=yield t()}finally{cl()}return s})}g.group=Ug;function Vg(e,t){if(process.env.GITHUB_STATE||"")return Os.issueFileCommand("STATE",Os.prepareKeyValueMessage(e,t));He.issueCommand("save-state",{name:e},sn.toCommandValue(t))}g.saveState=Vg;function Bg(e){return process.env[`STATE_${e}`]||""}g.getState=Bg;function Wg(e){return nl(this,void 0,void 0,function*(){return yield _g.OidcClient.getIDToken(e)})}g.getIDToken=Wg;var Gg=Ii();Object.defineProperty(g,"summary",{enumerable:!0,get:function(){return Gg.summary}});var qg=Ii();Object.defineProperty(g,"markdownSummary",{enumerable:!0,get:function(){return qg.markdownSummary}});var xi=tl();Object.defineProperty(g,"toPosixPath",{enumerable:!0,get:function(){return xi.toPosixPath}});Object.defineProperty(g,"toWin32Path",{enumerable:!0,get:function(){return xi.toWin32Path}});Object.defineProperty(g,"toPlatformPath",{enumerable:!0,get:function(){return xi.toPlatformPath}})});var nc=M(Bt=>{"use strict";var Bm=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Lx=Bm+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Wm="["+Bm+"]["+Lx+"]*",Fx=new RegExp("^"+Wm+"$"),zx=function(e,t){let s=[],n=t.exec(e);for(;n;){let r=[];r.startIndex=t.lastIndex-n[0].length;let o=n.length;for(let a=0;a<o;a++)r.push(n[a]);s.push(r),n=t.exec(e)}return s},$x=function(e){let t=Fx.exec(e);return!(t===null||typeof t>"u")};Bt.isExist=function(e){return typeof e<"u"};Bt.isEmptyObject=function(e){return Object.keys(e).length===0};Bt.merge=function(e,t,s){if(t){let n=Object.keys(t),r=n.length;for(let o=0;o<r;o++)s==="strict"?e[n[o]]=[t[n[o]]]:e[n[o]]=t[n[o]]}};Bt.getValue=function(e){return Bt.isExist(e)?e:""};Bt.isName=$x;Bt.getAllMatches=zx;Bt.nameRegexp=Wm});var oc=M(Km=>{"use strict";var rc=nc(),Ux={allowBooleanAttributes:!1,unpairedTags:[]};Km.validate=function(e,t){t=Object.assign({},Ux,t);let s=[],n=!1,r=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let o=0;o<e.length;o++)if(e[o]==="<"&&e[o+1]==="?"){if(o+=2,o=qm(e,o),o.err)return o}else if(e[o]==="<"){let a=o;if(o++,e[o]==="!"){o=jm(e,o);continue}else{let i=!1;e[o]==="/"&&(i=!0,o++);let c="";for(;o<e.length&&e[o]!==">"&&e[o]!==" "&&e[o]!=="	"&&e[o]!==`
`&&e[o]!=="\r";o++)c+=e[o];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),o--),!Kx(c)){let m;return c.trim().length===0?m="Invalid space after '<'.":m="Tag '"+c+"' is an invalid name.",j("InvalidTag",m,Ue(e,o))}let d=Wx(e,o);if(d===!1)return j("InvalidAttr","Attributes for '"+c+"' have open quote.",Ue(e,o));let l=d.value;if(o=d.index,l[l.length-1]==="/"){let m=o-l.length;l=l.substring(0,l.length-1);let u=Hm(l,t);if(u===!0)n=!0;else return j(u.err.code,u.err.msg,Ue(e,m+u.err.line))}else if(i)if(d.tagClosed){if(l.trim().length>0)return j("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",Ue(e,a));{let m=s.pop();if(c!==m.tagName){let u=Ue(e,m.tagStartPos);return j("InvalidTag","Expected closing tag '"+m.tagName+"' (opened in line "+u.line+", col "+u.col+") instead of closing tag '"+c+"'.",Ue(e,a))}s.length==0&&(r=!0)}}else return j("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",Ue(e,o));else{let m=Hm(l,t);if(m!==!0)return j(m.err.code,m.err.msg,Ue(e,o-l.length+m.err.line));if(r===!0)return j("InvalidXml","Multiple possible root nodes found.",Ue(e,o));t.unpairedTags.indexOf(c)!==-1||s.push({tagName:c,tagStartPos:a}),n=!0}for(o++;o<e.length;o++)if(e[o]==="<")if(e[o+1]==="!"){o++,o=jm(e,o);continue}else if(e[o+1]==="?"){if(o=qm(e,++o),o.err)return o}else break;else if(e[o]==="&"){let m=jx(e,o);if(m==-1)return j("InvalidChar","char '&' is not expected.",Ue(e,o));o=m}else if(r===!0&&!Gm(e[o]))return j("InvalidXml","Extra text at the end",Ue(e,o));e[o]==="<"&&o--}}else{if(Gm(e[o]))continue;return j("InvalidChar","char '"+e[o]+"' is not expected.",Ue(e,o))}if(n){if(s.length==1)return j("InvalidTag","Unclosed tag '"+s[0].tagName+"'.",Ue(e,s[0].tagStartPos));if(s.length>0)return j("InvalidXml","Invalid '"+JSON.stringify(s.map(o=>o.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return j("InvalidXml","Start tag expected.",1);return!0};function Gm(e){return e===" "||e==="	"||e===`
`||e==="\r"}function qm(e,t){let s=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let n=e.substr(s,t-s);if(t>5&&n==="xml")return j("InvalidXml","XML declaration allowed only at the start of the document.",Ue(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function jm(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let s=1;for(t+=8;t<e.length;t++)if(e[t]==="<")s++;else if(e[t]===">"&&(s--,s===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var Vx='"',Bx="'";function Wx(e,t){let s="",n="",r=!1;for(;t<e.length;t++){if(e[t]===Vx||e[t]===Bx)n===""?n=e[t]:n!==e[t]||(n="");else if(e[t]===">"&&n===""){r=!0;break}s+=e[t]}return n!==""?!1:{value:s,index:t,tagClosed:r}}var Gx=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Hm(e,t){let s=rc.getAllMatches(e,Gx),n={};for(let r=0;r<s.length;r++){if(s[r][1].length===0)return j("InvalidAttr","Attribute '"+s[r][2]+"' has no space in starting.",ro(s[r]));if(s[r][3]!==void 0&&s[r][4]===void 0)return j("InvalidAttr","Attribute '"+s[r][2]+"' is without value.",ro(s[r]));if(s[r][3]===void 0&&!t.allowBooleanAttributes)return j("InvalidAttr","boolean attribute '"+s[r][2]+"' is not allowed.",ro(s[r]));let o=s[r][2];if(!Hx(o))return j("InvalidAttr","Attribute '"+o+"' is an invalid name.",ro(s[r]));if(!n.hasOwnProperty(o))n[o]=1;else return j("InvalidAttr","Attribute '"+o+"' is repeated.",ro(s[r]))}return!0}function qx(e,t){let s=/\d/;for(e[t]==="x"&&(t++,s=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(s))break}return-1}function jx(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,qx(e,t);let s=0;for(;t<e.length;t++,s++)if(!(e[t].match(/\w/)&&s<20)){if(e[t]===";")break;return-1}return t}function j(e,t,s){return{err:{code:e,msg:t,line:s.line||s,col:s.col}}}function Hx(e){return rc.isName(e)}function Kx(e){return rc.isName(e)}function Ue(e,t){let s=e.substring(0,t).split(/\r?\n/);return{line:s.length,col:s[s.length-1].length+1}}function ro(e){return e.startIndex+e[1].length}});var Ym=M(ac=>{var Jm={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1},Jx=function(e){return Object.assign({},Jm,e)};ac.buildOptions=Jx;ac.defaultOptions=Jm});var Xm=M((l$,Qm)=>{"use strict";var ic=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,s){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:s})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,[":@"]:t[":@"]}):this.child.push({[t.tagname]:t.child})}};Qm.exports=ic});var eu=M((m$,Zm)=>{function Yx(e,t){let s={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let n=1,r=!1,o=!1,a=!1,i="";for(;t<e.length;t++)if(e[t]==="<"&&!a){if(r&&e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y")t+=7,o=!0;else if(r&&e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T")t+=8;else if(r&&e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T")t+=8;else if(r&&e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N")t+=9;else if(e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-")a=!0;else throw new Error("Invalid DOCTYPE");n++,i=""}else if(e[t]===">"){if(a?e[t-1]==="-"&&e[t-2]==="-"&&(a=!1,n--):(o&&(Xx(i,s),o=!1),n--),n===0)break}else e[t]==="["?r=!0:i+=e[t];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:s,i:t}}var Qx=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function Xx(e,t){let s=Qx.exec(e);s&&(t[s[1]]={regx:RegExp(`&${s[1]};`,"g"),val:s[3]})}Zm.exports=Yx});var su=M((u$,tu)=>{var Zx=/^[-+]?0x[a-fA-F0-9]+$/,eC=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var tC={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function sC(e,t={}){if(t=Object.assign({},tC,t),!e||typeof e!="string")return e;let s=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(s))return e;if(t.hex&&Zx.test(s))return Number.parseInt(s,16);{let n=eC.exec(s);if(n){let r=n[1],o=n[2],a=nC(n[3]),i=n[4]||n[6];if(!t.leadingZeros&&o.length>0&&r&&s[2]!==".")return e;if(!t.leadingZeros&&o.length>0&&!r&&s[1]!==".")return e;{let c=Number(s),d=""+c;return d.search(/[eE]/)!==-1||i?t.eNotation?c:e:s.indexOf(".")!==-1?d==="0"&&a===""||d===a||r&&d==="-"+a?c:e:o?a===d||r+a===d?c:e:s===d||s===r+d?c:e}}else return e}}function nC(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}tu.exports=sC});var ru=M((y$,nu)=>{"use strict";var mc=nc(),oo=Xm(),rC=eu(),oC=su(),f$="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,mc.nameRegexp),cc=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=aC,this.parseXml=mC,this.parseTextData=iC,this.resolveNameSpace=cC,this.buildAttributesMap=lC,this.isItStopNode=yC,this.replaceEntitiesValue=uC,this.readStopNodeData=hC,this.saveTextToParentTag=fC}};function aC(e){let t=Object.keys(e);for(let s=0;s<t.length;s++){let n=t[s];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function iC(e,t,s,n,r,o,a){if(e!==void 0&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){a||(e=this.replaceEntitiesValue(e));let i=this.options.tagValueProcessor(t,e,s,r,o);return i==null?e:typeof i!=typeof e||i!==e?i:this.options.trimValues?lc(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?lc(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function cC(e){if(this.options.removeNSPrefix){let t=e.split(":"),s=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=s+t[1])}return e}var dC=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function lC(e,t){if(!this.options.ignoreAttributes&&typeof e=="string"){let s=mc.getAllMatches(e,dC),n=s.length,r={};for(let o=0;o<n;o++){let a=this.resolveNameSpace(s[o][1]),i=s[o][4],c=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(c=this.options.transformAttributeName(c)),c==="__proto__"&&(c="#__proto__"),i!==void 0){this.options.trimValues&&(i=i.trim()),i=this.replaceEntitiesValue(i);let d=this.options.attributeValueProcessor(a,i,t);d==null?r[c]=i:typeof d!=typeof i||d!==i?r[c]=d:r[c]=lc(i,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(r[c]=!0)}if(!Object.keys(r).length)return;if(this.options.attributesGroupName){let o={};return o[this.options.attributesGroupName]=r,o}return r}}var mC=function(e){e=e.replace(/\r\n?/g,`
`);let t=new oo("!xml"),s=t,n="",r="";for(let o=0;o<e.length;o++)if(e[o]==="<")if(e[o+1]==="/"){let i=Ls(e,">",o,"Closing Tag is not closed."),c=e.substring(o+2,i).trim();if(this.options.removeNSPrefix){let d=c.indexOf(":");d!==-1&&(c=c.substr(d+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),s&&(n=this.saveTextToParentTag(n,s,r)),r=r.substr(0,r.lastIndexOf(".")),s=this.tagsNodeStack.pop(),n="",o=i}else if(e[o+1]==="?"){let i=dc(e,o,!1,"?>");if(!i)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,s,r),!(this.options.ignoreDeclaration&&i.tagName==="?xml"||this.options.ignorePiTags)){let c=new oo(i.tagName);c.add(this.options.textNodeName,""),i.tagName!==i.tagExp&&i.attrExpPresent&&(c[":@"]=this.buildAttributesMap(i.tagExp,r)),s.addChild(c)}o=i.closeIndex+1}else if(e.substr(o+1,3)==="!--"){let i=Ls(e,"-->",o+4,"Comment is not closed.");if(this.options.commentPropName){let c=e.substring(o+4,i-2);n=this.saveTextToParentTag(n,s,r),s.add(this.options.commentPropName,[{[this.options.textNodeName]:c}])}o=i}else if(e.substr(o+1,2)==="!D"){let i=rC(e,o);this.docTypeEntities=i.entities,o=i.i}else if(e.substr(o+1,2)==="!["){let i=Ls(e,"]]>",o,"CDATA is not closed.")-2,c=e.substring(o+9,i);if(n=this.saveTextToParentTag(n,s,r),this.options.cdataPropName)s.add(this.options.cdataPropName,[{[this.options.textNodeName]:c}]);else{let d=this.parseTextData(c,s.tagname,r,!0,!1,!0);d==null&&(d=""),s.add(this.options.textNodeName,d)}o=i+2}else{let i=dc(e,o,this.options.removeNSPrefix),c=i.tagName,d=i.tagExp,l=i.attrExpPresent,m=i.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),s&&n&&s.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,s,r,!1)),c!==t.tagname&&(r+=r?"."+c:c);let u=s;if(u&&this.options.unpairedTags.indexOf(u.tagname)!==-1&&(s=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,r,c)){let y="";if(d.length>0&&d.lastIndexOf("/")===d.length-1)o=i.closeIndex;else if(this.options.unpairedTags.indexOf(c)!==-1)o=i.closeIndex;else{let w=this.readStopNodeData(e,c,m+1);if(!w)throw new Error(`Unexpected end of ${c}`);o=w.i,y=w.tagContent}let p=new oo(c);c!==d&&l&&(p[":@"]=this.buildAttributesMap(d,r)),y&&(y=this.parseTextData(y,c,r,!0,l,!0,!0)),r=r.substr(0,r.lastIndexOf(".")),p.add(this.options.textNodeName,y),s.addChild(p)}else{if(d.length>0&&d.lastIndexOf("/")===d.length-1){c[c.length-1]==="/"?(c=c.substr(0,c.length-1),d=c):d=d.substr(0,d.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));let y=new oo(c);c!==d&&l&&(y[":@"]=this.buildAttributesMap(d,r)),r=r.substr(0,r.lastIndexOf(".")),s.addChild(y)}else{let y=new oo(c);this.tagsNodeStack.push(s),c!==d&&l&&(y[":@"]=this.buildAttributesMap(d,r)),s.addChild(y),s=y}n="",o=m}}else n+=e[o];return t.child},uC=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let s=this.docTypeEntities[t];e=e.replace(s.regx,s.val)}for(let t in this.lastEntities){let s=this.lastEntities[t];e=e.replace(s.regex,s.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let s=this.htmlEntities[t];e=e.replace(s.regex,s.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function fC(e,t,s,n){return e&&(n===void 0&&(n=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,s,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,n),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function yC(e,t,s){let n="*."+s;for(let r in e){let o=e[r];if(n===o||t===o)return!0}return!1}function pC(e,t,s=">"){let n,r="";for(let o=t;o<e.length;o++){let a=e[o];if(n)a===n&&(n="");else if(a==='"'||a==="'")n=a;else if(a===s[0])if(s[1]){if(e[o+1]===s[1])return{data:r,index:o}}else return{data:r,index:o};else a==="	"&&(a=" ");r+=a}}function Ls(e,t,s,n){let r=e.indexOf(t,s);if(r===-1)throw new Error(n);return r+t.length-1}function dc(e,t,s,n=">"){let r=pC(e,t+1,n);if(!r)return;let o=r.data,a=r.index,i=o.search(/\s/),c=o,d=!0;if(i!==-1&&(c=o.substr(0,i).replace(/\s\s*$/,""),o=o.substr(i+1)),s){let l=c.indexOf(":");l!==-1&&(c=c.substr(l+1),d=c!==r.data.substr(l+1))}return{tagName:c,tagExp:o,closeIndex:a,attrExpPresent:d}}function hC(e,t,s){let n=s,r=1;for(;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="/"){let o=Ls(e,">",s,`${t} is not closed`);if(e.substring(s+2,o).trim()===t&&(r--,r===0))return{tagContent:e.substring(n,s),i:o};s=o}else if(e[s+1]==="?")s=Ls(e,"?>",s+1,"StopNode is not closed.");else if(e.substr(s+1,3)==="!--")s=Ls(e,"-->",s+3,"StopNode is not closed.");else if(e.substr(s+1,2)==="![")s=Ls(e,"]]>",s,"StopNode is not closed.")-2;else{let o=dc(e,s,">");o&&((o&&o.tagName)===t&&o.tagExp[o.tagExp.length-1]!=="/"&&r++,s=o.closeIndex)}}function lc(e,t,s){if(t&&typeof e=="string"){let n=e.trim();return n==="true"?!0:n==="false"?!1:oC(e,s)}else return mc.isExist(e)?e:""}nu.exports=cc});var iu=M(au=>{"use strict";function wC(e,t){return ou(e,t)}function ou(e,t,s){let n,r={};for(let o=0;o<e.length;o++){let a=e[o],i=EC(a),c="";if(s===void 0?c=i:c=s+"."+i,i===t.textNodeName)n===void 0?n=a[i]:n+=""+a[i];else{if(i===void 0)continue;if(a[i]){let d=ou(a[i],t,c),l=IC(d,t);a[":@"]?gC(d,a[":@"],c,t):Object.keys(d).length===1&&d[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?d=d[t.textNodeName]:Object.keys(d).length===0&&(t.alwaysCreateTextNode?d[t.textNodeName]="":d=""),r[i]!==void 0&&r.hasOwnProperty(i)?(Array.isArray(r[i])||(r[i]=[r[i]]),r[i].push(d)):t.isArray(i,c,l)?r[i]=[d]:r[i]=d}}}return typeof n=="string"?n.length>0&&(r[t.textNodeName]=n):n!==void 0&&(r[t.textNodeName]=n),r}function EC(e){let t=Object.keys(e);for(let s=0;s<t.length;s++){let n=t[s];if(n!==":@")return n}}function gC(e,t,s,n){if(t){let r=Object.keys(t),o=r.length;for(let a=0;a<o;a++){let i=r[a];n.isArray(i,s+"."+i,!0,!0)?e[i]=[t[i]]:e[i]=t[i]}}}function IC(e,t){let s=Object.keys(e).length;return!!(s===0||s===1&&e[t.textNodeName])}au.prettify=wC});var du=M((h$,cu)=>{var{buildOptions:SC}=Ym(),xC=ru(),{prettify:CC}=iu(),TC=oc(),uc=class{constructor(t){this.externalEntities={},this.options=SC(t)}parse(t,s){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(s){s===!0&&(s={});let o=TC.validate(t,s);if(o!==!0)throw Error(`${o.err.msg}:${o.err.line}:${o.err.col}`)}let n=new xC(this.options);n.addExternalEntities(this.externalEntities);let r=n.parseXml(t);return this.options.preserveOrder||r===void 0?r:CC(r,this.options)}addEntity(t,s){if(s.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(s==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=s}};cu.exports=uc});var yu=M((w$,fu)=>{var bC=`
`;function _C(e,t){let s="";return t.format&&t.indentBy.length>0&&(s=bC),mu(e,t,"",s)}function mu(e,t,s,n){let r="",o=!1;for(let a=0;a<e.length;a++){let i=e[a],c=RC(i),d="";if(s.length===0?d=c:d=`${s}.${c}`,c===t.textNodeName){let p=i[c];vC(d,t)||(p=t.tagValueProcessor(c,p),p=uu(p,t)),o&&(r+=n),r+=p,o=!1;continue}else if(c===t.cdataPropName){o&&(r+=n),r+=`<![CDATA[${i[c][0][t.textNodeName]}]]>`,o=!1;continue}else if(c===t.commentPropName){r+=n+`<!--${i[c][0][t.textNodeName]}-->`,o=!0;continue}else if(c[0]==="?"){let p=lu(i[":@"],t),w=c==="?xml"?"":n,E=i[c][0][t.textNodeName];E=E.length!==0?" "+E:"",r+=w+`<${c}${E}${p}?>`,o=!0;continue}let l=n;l!==""&&(l+=t.indentBy);let m=lu(i[":@"],t),u=n+`<${c}${m}`,y=mu(i[c],t,d,l);t.unpairedTags.indexOf(c)!==-1?t.suppressUnpairedNode?r+=u+">":r+=u+"/>":(!y||y.length===0)&&t.suppressEmptyNode?r+=u+"/>":y&&y.endsWith(">")?r+=u+`>${y}${n}</${c}>`:(r+=u+">",y&&n!==""&&(y.includes("/>")||y.includes("</"))?r+=n+t.indentBy+y+n:r+=y,r+=`</${c}>`),o=!0}return r}function RC(e){let t=Object.keys(e);for(let s=0;s<t.length;s++){let n=t[s];if(n!==":@")return n}}function lu(e,t){let s="";if(e&&!t.ignoreAttributes)for(let n in e){let r=t.attributeValueProcessor(n,e[n]);r=uu(r,t),r===!0&&t.suppressBooleanAttributes?s+=` ${n.substr(t.attributeNamePrefix.length)}`:s+=` ${n.substr(t.attributeNamePrefix.length)}="${r}"`}return s}function vC(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let s=e.substr(e.lastIndexOf(".")+1);for(let n in t.stopNodes)if(t.stopNodes[n]===e||t.stopNodes[n]==="*."+s)return!0;return!1}function uu(e,t){if(e&&e.length>0&&t.processEntities)for(let s=0;s<t.entities.length;s++){let n=t.entities[s];e=e.replace(n.regex,n.val)}return e}fu.exports=_C});var hu=M((E$,pu)=>{"use strict";var PC=yu(),AC={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[]};function us(e){this.options=Object.assign({},AC,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=DC),this.processTextOrObjNode=NC,this.options.format?(this.indentate=OC,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}us.prototype.build=function(e){return this.options.preserveOrder?PC(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};us.prototype.j2x=function(e,t){let s="",n="";for(let r in e)if(!(typeof e[r]>"u"))if(e[r]===null)r[0]==="?"?n+=this.indentate(t)+"<"+r+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+r+"/"+this.tagEndChar;else if(e[r]instanceof Date)n+=this.buildTextValNode(e[r],r,"",t);else if(typeof e[r]!="object"){let o=this.isAttribute(r);if(o)s+=this.buildAttrPairStr(o,""+e[r]);else if(r===this.options.textNodeName){let a=this.options.tagValueProcessor(r,""+e[r]);n+=this.replaceEntitiesValue(a)}else n+=this.buildTextValNode(e[r],r,"",t)}else if(Array.isArray(e[r])){let o=e[r].length;for(let a=0;a<o;a++){let i=e[r][a];typeof i>"u"||(i===null?r[0]==="?"?n+=this.indentate(t)+"<"+r+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+r+"/"+this.tagEndChar:typeof i=="object"?n+=this.processTextOrObjNode(i,r,t):n+=this.buildTextValNode(i,r,"",t))}}else if(this.options.attributesGroupName&&r===this.options.attributesGroupName){let o=Object.keys(e[r]),a=o.length;for(let i=0;i<a;i++)s+=this.buildAttrPairStr(o[i],""+e[r][o[i]])}else n+=this.processTextOrObjNode(e[r],r,t);return{attrStr:s,val:n}};us.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function NC(e,t,s){let n=this.j2x(e,s+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,n.attrStr,s):this.buildObjectNode(n.val,t,n.attrStr,s)}us.prototype.buildObjectNode=function(e,t,s,n){if(e==="")return t[0]==="?"?this.indentate(n)+"<"+t+s+"?"+this.tagEndChar:this.indentate(n)+"<"+t+s+this.closeTag(t)+this.tagEndChar;{let r="</"+t+this.tagEndChar,o="";return t[0]==="?"&&(o="?",r=""),s&&e.indexOf("<")===-1?this.indentate(n)+"<"+t+s+o+">"+e+r:this.options.commentPropName!==!1&&t===this.options.commentPropName&&o.length===0?this.indentate(n)+`<!--${e}-->`+this.newLine:this.indentate(n)+"<"+t+s+o+this.tagEndChar+e+this.indentate(n)+r}};us.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};us.prototype.buildTextValNode=function(e,t,s,n){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(n)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(n)+"<"+t+s+"?"+this.tagEndChar;{let r=this.options.tagValueProcessor(t,e);return r=this.replaceEntitiesValue(r),r===""?this.indentate(n)+"<"+t+s+this.closeTag(t)+this.tagEndChar:this.indentate(n)+"<"+t+s+">"+r+"</"+t+this.tagEndChar}};us.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let s=this.options.entities[t];e=e.replace(s.regex,s.val)}return e};function OC(e){return this.options.indentBy.repeat(e)}function DC(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}pu.exports=us});var fc=M((g$,wu)=>{"use strict";var MC=oc(),kC=du(),LC=hu();wu.exports={XMLParser:kC,XMLValidator:MC,XMLBuilder:LC}});var iE=M((h5,aE)=>{"use strict";var rE=(e=0)=>t=>`\x1B[${38+e};5;${t}m`,oE=(e=0)=>(t,s,n)=>`\x1B[${38+e};2;${t};${s};${n}m`;function vR(){let e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(let[s,n]of Object.entries(t)){for(let[r,o]of Object.entries(n))t[r]={open:`\x1B[${o[0]}m`,close:`\x1B[${o[1]}m`},n[r]=t[r],e.set(o[0],o[1]);Object.defineProperty(t,s,{value:n,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="\x1B[39m",t.bgColor.close="\x1B[49m",t.color.ansi256=rE(),t.color.ansi16m=oE(),t.bgColor.ansi256=rE(10),t.bgColor.ansi16m=oE(10),Object.defineProperties(t,{rgbToAnsi256:{value:(s,n,r)=>s===n&&n===r?s<8?16:s>248?231:Math.round((s-8)/247*24)+232:16+36*Math.round(s/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5),enumerable:!1},hexToRgb:{value:s=>{let n=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(s.toString(16));if(!n)return[0,0,0];let{colorString:r}=n.groups;r.length===3&&(r=r.split("").map(a=>a+a).join(""));let o=Number.parseInt(r,16);return[o>>16&255,o>>8&255,o&255]},enumerable:!1},hexToAnsi256:{value:s=>t.rgbToAnsi256(...t.hexToRgb(s)),enumerable:!1}}),t}Object.defineProperty(aE,"exports",{enumerable:!0,get:vR})});var N=Ns(hi());var dl=async e=>{let t=(e==null?void 0:e.Bucket)||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Yg(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Jg(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},jg=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Hg=/(\d+\.){3}\d+/,Kg=/\.\./;var Jg=e=>jg.test(e)&&!Hg.test(e)&&!Kg.test(e),Yg=e=>{let[t,s,n,r,o,a]=e.split(":"),i=t==="arn"&&e.split(":").length>=6,c=[t,s,n,o,a].filter(Boolean).length===5;if(i&&!c)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return t==="arn"&&!!s&&!!n&&!!o&&!!a};var ll=(e,t,s)=>{let n=async()=>{let r=s[e]??s[t];return typeof r=="function"?r():r};return e==="endpoint"||t==="endpoint"?async()=>{let r=await n();if(r&&typeof r=="object"){if("url"in r)return r.url.href;if("hostname"in r){let{protocol:o,hostname:a,port:i,path:c}=r;return`${o}//${a}${i?":"+i:""}${c}`}}return r}:n};var ml=async(e,t,s,n)=>{let r=await Qg(e,t,s);if(typeof s.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return s.endpointProvider(r,n)},Qg=async(e,t,s)=>{var o;let n={},r=((o=t==null?void 0:t.getEndpointParameterInstructions)==null?void 0:o.call(t))||{};for(let[a,i]of Object.entries(r))switch(i.type){case"staticContextParams":n[a]=i.value;break;case"contextParams":n[a]=e[i.name];break;case"clientContextParams":case"builtInParams":n[a]=await ll(i.name,a,s)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(r).length===0&&Object.assign(n,s),String(s.serviceId).toLowerCase()==="s3"&&await dl(n),n};function ul(e){let t={};if(e=e.replace(/^\?/,""),e)for(let s of e.split("&")){let[n,r=null]=s.split("=");n=decodeURIComponent(n),r&&(r=decodeURIComponent(r)),n in t?Array.isArray(t[n])?t[n].push(r):t[n]=[t[n],r]:t[n]=r}return t}var V=e=>{if(typeof e=="string")return V(new URL(e));let{hostname:t,pathname:s,port:n,protocol:r,search:o}=e,a;return o&&(a=ul(o)),{hostname:t,port:n?parseInt(n):void 0,protocol:r,path:s,query:a}};var fl=e=>typeof e=="object"?"url"in e?V(e.url):e:V(e);var yl=({config:e,instructions:t})=>(s,n)=>async r=>{var i,c;let o=await ml(r.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=o,n.authSchemes=(i=o.properties)==null?void 0:i.authSchemes;let a=(c=n.authSchemes)==null?void 0:c[0];return a&&(n.signing_region=a.signingRegion,n.signing_service=a.signingName),s({...r})};var pl=(e,t)=>(s,n)=>async r=>{let{response:o}=await s(r);try{let a=await t(o,e);return{response:o,output:a}}catch(a){if(Object.defineProperty(a,"$response",{value:o}),!("$metadata"in a)){let i="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";a.message+=`
  `+i}throw a}};var hl=(e,t)=>(s,n)=>async r=>{var i;let o=(i=n.endpointV2)!=null&&i.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!o)throw new Error("No valid endpoint provider available.");let a=await t(r.input,{...e,endpoint:o});return s({...r,request:a})};var Xg={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Ci={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function L(e,t,s){return{applyToStack:n=>{n.add(pl(e,s),Xg),n.add(hl(e,t),Ci)}}}var Zg={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Ci.name},F=(e,t)=>({applyToStack:s=>{s.addRelativeTo(yl({config:e,instructions:t}),Zg)}});var se=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};var ie=e=>{let t=e.tls??!0,{endpoint:s}=e,n=s!=null?async()=>fl(await se(s)()):void 0;return{...e,endpoint:n,tls:t,isCustomEndpoint:!!s,useDualstackEndpoint:se(e.useDualstackEndpoint??!1),useFipsEndpoint:se(e.useFipsEndpoint??!1)}};var wt=class{trace(){}debug(){}info(){}warn(){}error(){}};var Et=()=>{let e=[],t=[],s=new Set,n=l=>l.sort((m,u)=>wl[u.step]-wl[m.step]||El[u.priority||"normal"]-El[m.priority||"normal"]),r=l=>{let m=!1,u=y=>y.name&&y.name===l?(m=!0,s.delete(l),!1):!0;return e=e.filter(u),t=t.filter(u),m},o=l=>{let m=!1,u=y=>y.middleware===l?(m=!0,y.name&&s.delete(y.name),!1):!0;return e=e.filter(u),t=t.filter(u),m},a=l=>(e.forEach(m=>{l.add(m.middleware,{...m})}),t.forEach(m=>{l.addRelativeTo(m.middleware,{...m})}),l),i=l=>{let m=[];return l.before.forEach(u=>{u.before.length===0&&u.after.length===0?m.push(u):m.push(...i(u))}),m.push(l),l.after.reverse().forEach(u=>{u.before.length===0&&u.after.length===0?m.push(u):m.push(...i(u))}),m},c=(l=!1)=>{let m=[],u=[],y={};return e.forEach(w=>{let E={...w,before:[],after:[]};E.name&&(y[E.name]=E),m.push(E)}),t.forEach(w=>{let E={...w,before:[],after:[]};E.name&&(y[E.name]=E),u.push(E)}),u.forEach(w=>{if(w.toMiddleware){let E=y[w.toMiddleware];if(E===void 0){if(l)return;throw new Error(`${w.toMiddleware} is not found when adding ${w.name||"anonymous"} middleware ${w.relation} ${w.toMiddleware}`)}w.relation==="after"&&E.after.push(w),w.relation==="before"&&E.before.push(w)}}),n(m).map(i).reduce((w,E)=>(w.push(...E),w),[])},d={add:(l,m={})=>{let{name:u,override:y}=m,p={step:"initialize",priority:"normal",middleware:l,...m};if(u){if(s.has(u)){if(!y)throw new Error(`Duplicate middleware name '${u}'`);let w=e.findIndex(Ge=>Ge.name===u),E=e[w];if(E.step!==p.step||E.priority!==p.priority)throw new Error(`"${u}" middleware with ${E.priority} priority in ${E.step} step cannot be overridden by same-name middleware with ${p.priority} priority in ${p.step} step.`);e.splice(w,1)}s.add(u)}e.push(p)},addRelativeTo:(l,m)=>{let{name:u,override:y}=m,p={middleware:l,...m};if(u){if(s.has(u)){if(!y)throw new Error(`Duplicate middleware name '${u}'`);let w=t.findIndex(Ge=>Ge.name===u),E=t[w];if(E.toMiddleware!==p.toMiddleware||E.relation!==p.relation)throw new Error(`"${u}" middleware ${E.relation} "${E.toMiddleware}" middleware cannot be overridden by same-name middleware ${p.relation} "${p.toMiddleware}" middleware.`);t.splice(w,1)}s.add(u)}t.push(p)},clone:()=>a(Et()),use:l=>{l.applyToStack(d)},remove:l=>typeof l=="string"?r(l):o(l),removeByTag:l=>{let m=!1,u=y=>{let{tags:p,name:w}=y;return p&&p.includes(l)?(w&&s.delete(w),m=!0,!1):!0};return e=e.filter(u),t=t.filter(u),m},concat:l=>{let m=a(Et());return m.use(l),m},applyToStack:a,identify:()=>c(!0).map(l=>l.name+": "+(l.tags||[]).join(",")),resolve:(l,m)=>{for(let u of c().map(y=>y.middleware).reverse())l=u(l,m);return l}};return d},wl={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},El={high:3,normal:2,low:1};var gt=class{constructor(t){this.middlewareStack=Et(),this.config=t}send(t,s,n){let r=typeof s!="function"?s:void 0,o=typeof s=="function"?s:n,a=t.resolveMiddleware(this.middlewareStack,this.config,r);if(o)a(t).then(i=>o(null,i.output),i=>o(i)).catch(()=>{});else return a(t).then(i=>i.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}};var ce=class{constructor(){this.middlewareStack=Et()}};var as="***SensitiveInformation***";var qo=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&Go.warn(Wo(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){let t=e.toLowerCase();if((t==="false"||t==="true")&&Go.warn(Wo(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},It=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&Go.warn(Wo(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},eI=Math.ceil(34028234663852886e22),gl=e=>{let t=It(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>eI)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},Yr=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}};var Ke=e=>Ti(e,32),Il=e=>Ti(e,16),Sl=e=>Ti(e,8),Ti=(e,t)=>{let s=Yr(e);if(s!==void 0&&tI(s,t)!==s)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return s},tI=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},Me=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},jo=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},f=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return Go.warn(Wo(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}};var xl=e=>It(typeof e=="string"?Qr(e):e);var Cl=e=>gl(typeof e=="string"?Qr(e):e),sI=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Qr=e=>{let t=e.match(sI);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)};var bi=e=>Ke(typeof e=="string"?Qr(e):e),Tl=e=>Il(typeof e=="string"?Qr(e):e),bl=e=>Sl(typeof e=="string"?Qr(e):e),Wo=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),Go={warn:console.warn};var nI=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var PP=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/);var rI=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),_l=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=rI.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[s,n,r,o,a,i,c,d,l]=t,m=Tl(Rl(n)),u=Xr(r,"month",1,12),y=Xr(o,"day",1,31),p=oI(m,u,y,{hours:a,minutes:i,seconds:c,fractionalMilliseconds:d});return l.toUpperCase()!="Z"&&p.setTime(p.getTime()-lI(l)),p},AP=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),NP=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),OP=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/);var Ds=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=xl(e);else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},oI=(e,t,s,n)=>{let r=t-1;return iI(e,r,s),new Date(Date.UTC(e,r,s,Xr(n.hours,"hour",0,23),Xr(n.minutes,"minute",0,59),Xr(n.seconds,"seconds",0,60),dI(n.fractionalMilliseconds)))};var DP=50*365*24*60*60*1e3;var aI=[31,28,31,30,31,30,31,31,30,31,30,31],iI=(e,t,s)=>{let n=aI[t];if(t===1&&cI(e)&&(n=29),s>n)throw new TypeError(`Invalid day for ${nI[t]} in ${e}: ${s}`)},cI=e=>e%4===0&&(e%100!==0||e%400===0),Xr=(e,t,s,n)=>{let r=bl(Rl(e));if(r<s||r>n)throw new TypeError(`${t} must be between ${s} and ${n}, inclusive`);return r},dI=e=>e==null?0:Cl("0."+e)*1e3,lI=e=>{let t=e[0],s=1;if(t=="+")s=1;else if(t=="-")s=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),r=Number(e.substring(4,6));return s*(n*60+r)*60*1e3},Rl=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};var Je=class extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,Je.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}},x=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,r])=>{(e[n]==null||e[n]==="")&&(e[n]=r)});let s=e.message||e.Message||"UnknownError";return e.message=s,delete e.Message,e};var dt=({output:e,parsedBody:t,exceptionCtor:s,errorCode:n})=>{let r=mI(e),o=r.httpStatusCode?r.httpStatusCode+"":void 0,a=new s({name:(t==null?void 0:t.code)||(t==null?void 0:t.Code)||n||o||"UnknownError",$fault:"client",$metadata:r});throw x(a,t)},mI=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});var is=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};var vl=!1,cs=e=>{e&&!vl&&parseInt(e.substring(1,e.indexOf(".")))<14&&(vl=!0)};function Ho(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var _i=e=>{let t="#text";for(let s in e)e.hasOwnProperty(s)&&e[s][t]!==void 0?e[s]=e[s][t]:typeof e[s]=="object"&&e[s]!==null&&(e[s]=_i(e[s]));return e};var Ri=function(){let e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),s=new t;return Object.setPrototypeOf(s,e.prototype),s};Ri.prototype=Object.create(String.prototype,{constructor:{value:Ri,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(Ri,String);function Zr(e,t,s){let n,r,o;if(typeof t>"u"&&typeof s>"u")n={},o=e;else{if(n=e,typeof t=="function")return r=t,o=s,uI(n,r,o);o=t}for(let a of Object.keys(o)){if(!Array.isArray(o[a])){n[a]=o[a];continue}fI(n,null,o,a)}return n}var uI=(e,t,s)=>Zr(e,Object.entries(s).reduce((n,[r,o])=>(Array.isArray(o)?n[r]=o:typeof o=="function"?n[r]=[t,o()]:n[r]=[t,o],n),{})),fI=(e,t,s,n)=>{if(t!==null){let a=s[n];typeof a=="function"&&(a=[,a]);let[i=yI,c=pI,d=n]=a;(typeof i=="function"&&i(t[d])||typeof i!="function"&&i)&&(e[n]=c(t[d]));return}let[r,o]=s[n];if(typeof o=="function"){let a,i=r===void 0&&(a=o())!=null,c=typeof r=="function"&&!!r(void 0)||typeof r!="function"&&!!r;i?e[n]=a:c&&(e[n]=o())}else{let a=r===void 0&&o!=null,i=typeof r=="function"&&!!r(o)||typeof r!="function"&&!!r;(a||i)&&(e[n]=o)}},yI=e=>e!=null,pI=e=>e;var vi;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(vi||(vi={}));var b=class{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/"}static isInstance(t){if(!t)return!1;let s=t;return"method"in s&&"protocol"in s&&"hostname"in s&&"path"in s&&typeof s.query=="object"&&typeof s.headers=="object"}clone(){let t=new b({...this,headers:{...this.headers}});return t.query&&(t.query=hI(t.query)),t}};function hI(e){return Object.keys(e).reduce((t,s)=>{let n=e[s];return{...t,[s]:Array.isArray(n)?[...n]:n}},{})}var St=class{constructor(t){this.statusCode=t.statusCode,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let s=t;return typeof s.statusCode=="number"&&typeof s.headers=="object"}};var D=class extends Je{constructor(t){super(t),Object.setPrototypeOf(this,D.prototype)}};var nn=class extends D{constructor(t){super({name:"InternalServerError",$fault:"server",...t}),this.name="InternalServerError",this.$fault="server",Object.setPrototypeOf(this,nn.prototype),this.Message=t.Message}};var rn=class extends D{constructor(t){super({name:"DuplicateInstanceId",$fault:"client",...t}),this.name="DuplicateInstanceId",this.$fault="client",Object.setPrototypeOf(this,rn.prototype)}},on=class extends D{constructor(t){super({name:"InvalidCommandId",$fault:"client",...t}),this.name="InvalidCommandId",this.$fault="client",Object.setPrototypeOf(this,on.prototype)}},an=class extends D{constructor(t){super({name:"InvalidInstanceId",$fault:"client",...t}),this.name="InvalidInstanceId",this.$fault="client",Object.setPrototypeOf(this,an.prototype),this.Message=t.Message}};var cn=class extends D{constructor(t){super({name:"InvalidParameters",$fault:"client",...t}),this.name="InvalidParameters",this.$fault="client",Object.setPrototypeOf(this,cn.prototype),this.Message=t.Message}};var dn=class extends D{constructor(t){super({name:"InvalidDocument",$fault:"client",...t}),this.name="InvalidDocument",this.$fault="client",Object.setPrototypeOf(this,dn.prototype),this.Message=t.Message}},ln=class extends D{constructor(t){super({name:"InvalidDocumentVersion",$fault:"client",...t}),this.name="InvalidDocumentVersion",this.$fault="client",Object.setPrototypeOf(this,ln.prototype),this.Message=t.Message}};var mn=class extends D{constructor(t){super({name:"UnsupportedPlatformType",$fault:"client",...t}),this.name="UnsupportedPlatformType",this.$fault="client",Object.setPrototypeOf(this,mn.prototype),this.Message=t.Message}};var un=class extends D{constructor(t){super({name:"MaxDocumentSizeExceeded",$fault:"client",...t}),this.name="MaxDocumentSizeExceeded",this.$fault="client",Object.setPrototypeOf(this,un.prototype),this.Message=t.Message}};var fn=class extends D{constructor(t){super({name:"InvalidNextToken",$fault:"client",...t}),this.name="InvalidNextToken",this.$fault="client",Object.setPrototypeOf(this,fn.prototype),this.Message=t.Message}};var yn=class extends D{constructor(t){super({name:"InvalidFilterKey",$fault:"client",...t}),this.name="InvalidFilterKey",this.$fault="client",Object.setPrototypeOf(this,yn.prototype)}};var pn=class extends D{constructor(t){super({name:"InvalidInstanceInformationFilterValue",$fault:"client",...t}),this.name="InvalidInstanceInformationFilterValue",this.$fault="client",Object.setPrototypeOf(this,pn.prototype)}};var hn=class extends D{constructor(t){super({name:"InvalidPluginName",$fault:"client",...t}),this.name="InvalidPluginName",this.$fault="client",Object.setPrototypeOf(this,hn.prototype)}},wn=class extends D{constructor(t){super({name:"InvocationDoesNotExist",$fault:"client",...t}),this.name="InvocationDoesNotExist",this.$fault="client",Object.setPrototypeOf(this,wn.prototype)}};var En=class extends D{constructor(t){super({name:"InvalidNotificationConfig",$fault:"client",...t}),this.name="InvalidNotificationConfig",this.$fault="client",Object.setPrototypeOf(this,En.prototype),this.Message=t.Message}},gn=class extends D{constructor(t){super({name:"InvalidOutputFolder",$fault:"client",...t}),this.name="InvalidOutputFolder",this.$fault="client",Object.setPrototypeOf(this,gn.prototype)}},In=class extends D{constructor(t){super({name:"InvalidRole",$fault:"client",...t}),this.name="InvalidRole",this.$fault="client",Object.setPrototypeOf(this,In.prototype),this.Message=t.Message}};var wI=e=>({...e,...e.Parameters&&{Parameters:as}});var Pl=e=>({...e,...e.Parameters&&{Parameters:as}}),Al=e=>({...e,...e.Command&&{Command:wI(e.Command)}});var Nl=async(e,t)=>{let s=Oi("DescribeInstanceInformation"),n;return n=JSON.stringify(UI(e,t)),Ni(t,s,"/",void 0,n)};var Ol=async(e,t)=>{let s=Oi("GetCommandInvocation"),n;return n=JSON.stringify(VI(e,t)),Ni(t,s,"/",void 0,n)};var Dl=async(e,t)=>{let s=Oi("SendCommand"),n;return n=JSON.stringify(QI(e,t)),Ni(t,s,"/",void 0,n)};var Ml=async(e,t)=>{if(e.statusCode>=300)return EI(e,t);let s=await Ko(e.body,t),n={};n=iS(s,t);let r={$metadata:G(e),...n};return Promise.resolve(r)},EI=async(e,t)=>{let s={...e,body:await Di(e.body,t)},n=Mi(e,s.body);switch(n){case"InternalServerError":case"com.amazonaws.ssm#InternalServerError":throw await Pi(s,t);case"InvalidFilterKey":case"com.amazonaws.ssm#InvalidFilterKey":throw await bI(s,t);case"InvalidInstanceId":case"com.amazonaws.ssm#InvalidInstanceId":throw await Ai(s,t);case"InvalidInstanceInformationFilterValue":case"com.amazonaws.ssm#InvalidInstanceInformationFilterValue":throw await _I(s,t);case"InvalidNextToken":case"com.amazonaws.ssm#InvalidNextToken":throw await RI(s,t);default:let r=s.body;dt({output:e,parsedBody:r,exceptionCtor:D,errorCode:n})}};var kl=async(e,t)=>{if(e.statusCode>=300)return gI(e,t);let s=await Ko(e.body,t),n={};n=dS(s,t);let r={$metadata:G(e),...n};return Promise.resolve(r)},gI=async(e,t)=>{let s={...e,body:await Di(e.body,t)},n=Mi(e,s.body);switch(n){case"InternalServerError":case"com.amazonaws.ssm#InternalServerError":throw await Pi(s,t);case"InvalidCommandId":case"com.amazonaws.ssm#InvalidCommandId":throw await xI(s,t);case"InvalidInstanceId":case"com.amazonaws.ssm#InvalidInstanceId":throw await Ai(s,t);case"InvalidPluginName":case"com.amazonaws.ssm#InvalidPluginName":throw await NI(s,t);case"InvocationDoesNotExist":case"com.amazonaws.ssm#InvocationDoesNotExist":throw await DI(s,t);default:let r=s.body;dt({output:e,parsedBody:r,exceptionCtor:D,errorCode:n})}};var Ll=async(e,t)=>{if(e.statusCode>=300)return II(e,t);let s=await Ko(e.body,t),n={};n=MS(s,t);let r={$metadata:G(e),...n};return Promise.resolve(r)},II=async(e,t)=>{let s={...e,body:await Di(e.body,t)},n=Mi(e,s.body);switch(n){case"DuplicateInstanceId":case"com.amazonaws.ssm#DuplicateInstanceId":throw await SI(s,t);case"InternalServerError":case"com.amazonaws.ssm#InternalServerError":throw await Pi(s,t);case"InvalidDocument":case"com.amazonaws.ssm#InvalidDocument":throw await CI(s,t);case"InvalidDocumentVersion":case"com.amazonaws.ssm#InvalidDocumentVersion":throw await TI(s,t);case"InvalidInstanceId":case"com.amazonaws.ssm#InvalidInstanceId":throw await Ai(s,t);case"InvalidNotificationConfig":case"com.amazonaws.ssm#InvalidNotificationConfig":throw await vI(s,t);case"InvalidOutputFolder":case"com.amazonaws.ssm#InvalidOutputFolder":throw await PI(s,t);case"InvalidParameters":case"com.amazonaws.ssm#InvalidParameters":throw await AI(s,t);case"InvalidRole":case"com.amazonaws.ssm#InvalidRole":throw await OI(s,t);case"MaxDocumentSizeExceeded":case"com.amazonaws.ssm#MaxDocumentSizeExceeded":throw await MI(s,t);case"UnsupportedPlatformType":case"com.amazonaws.ssm#UnsupportedPlatformType":throw await kI(s,t);default:let r=s.body;dt({output:e,parsedBody:r,exceptionCtor:D,errorCode:n})}};var SI=async(e,t)=>{let s=e.body,n=cS(s,t),r=new rn({$metadata:G(e),...n});return x(r,s)};var Pi=async(e,t)=>{let s=e.body,n=pS(s,t),r=new nn({$metadata:G(e),...n});return x(r,s)};var xI=async(e,t)=>{let s=e.body,n=hS(s,t),r=new on({$metadata:G(e),...n});return x(r,s)};var CI=async(e,t)=>{let s=e.body,n=wS(s,t),r=new dn({$metadata:G(e),...n});return x(r,s)};var TI=async(e,t)=>{let s=e.body,n=ES(s,t),r=new ln({$metadata:G(e),...n});return x(r,s)};var bI=async(e,t)=>{let s=e.body,n=gS(s,t),r=new yn({$metadata:G(e),...n});return x(r,s)};var Ai=async(e,t)=>{let s=e.body,n=IS(s,t),r=new an({$metadata:G(e),...n});return x(r,s)},_I=async(e,t)=>{let s=e.body,n=SS(s,t),r=new pn({$metadata:G(e),...n});return x(r,s)};var RI=async(e,t)=>{let s=e.body,n=xS(s,t),r=new fn({$metadata:G(e),...n});return x(r,s)},vI=async(e,t)=>{let s=e.body,n=CS(s,t),r=new En({$metadata:G(e),...n});return x(r,s)};var PI=async(e,t)=>{let s=e.body,n=TS(s,t),r=new gn({$metadata:G(e),...n});return x(r,s)};var AI=async(e,t)=>{let s=e.body,n=bS(s,t),r=new cn({$metadata:G(e),...n});return x(r,s)};var NI=async(e,t)=>{let s=e.body,n=_S(s,t),r=new hn({$metadata:G(e),...n});return x(r,s)};var OI=async(e,t)=>{let s=e.body,n=RS(s,t),r=new In({$metadata:G(e),...n});return x(r,s)};var DI=async(e,t)=>{let s=e.body,n=vS(s,t),r=new wn({$metadata:G(e),...n});return x(r,s)};var MI=async(e,t)=>{let s=e.body,n=PS(s,t),r=new un({$metadata:G(e),...n});return x(r,s)};var kI=async(e,t)=>{let s=e.body,n=zS(s,t),r=new mn({$metadata:G(e),...n});return x(r,s)};var LI=(e,t)=>({...e.Name!=null&&{Name:e.Name}}),FI=(e,t)=>({...e.Alarms!=null&&{Alarms:zI(e.Alarms,t)},...e.IgnorePollAlarmFailure!=null&&{IgnorePollAlarmFailure:e.IgnorePollAlarmFailure}}),zI=(e,t)=>e.filter(s=>s!=null).map(s=>LI(s,t));var $I=(e,t)=>({...e.CloudWatchLogGroupName!=null&&{CloudWatchLogGroupName:e.CloudWatchLogGroupName},...e.CloudWatchOutputEnabled!=null&&{CloudWatchOutputEnabled:e.CloudWatchOutputEnabled}});var UI=(e,t)=>({...e.Filters!=null&&{Filters:jI(e.Filters,t)},...e.InstanceInformationFilterList!=null&&{InstanceInformationFilterList:GI(e.InstanceInformationFilterList,t)},...e.MaxResults!=null&&{MaxResults:e.MaxResults},...e.NextToken!=null&&{NextToken:e.NextToken}});var VI=(e,t)=>({...e.CommandId!=null&&{CommandId:e.CommandId},...e.InstanceId!=null&&{InstanceId:e.InstanceId},...e.PluginName!=null&&{PluginName:e.PluginName}});var BI=(e,t)=>e.filter(s=>s!=null).map(s=>s),WI=(e,t)=>({...e.key!=null&&{key:e.key},...e.valueSet!=null&&{valueSet:Fl(e.valueSet,t)}}),GI=(e,t)=>e.filter(s=>s!=null).map(s=>WI(s,t)),Fl=(e,t)=>e.filter(s=>s!=null).map(s=>s),qI=(e,t)=>({...e.Key!=null&&{Key:e.Key},...e.Values!=null&&{Values:Fl(e.Values,t)}}),jI=(e,t)=>e.filter(s=>s!=null).map(s=>qI(s,t));var HI=(e,t)=>({...e.NotificationArn!=null&&{NotificationArn:e.NotificationArn},...e.NotificationEvents!=null&&{NotificationEvents:KI(e.NotificationEvents,t)},...e.NotificationType!=null&&{NotificationType:e.NotificationType}}),KI=(e,t)=>e.filter(s=>s!=null).map(s=>s);var JI=(e,t)=>Object.entries(e).reduce((s,[n,r])=>(r===null||(s[n]=YI(r,t)),s),{});var YI=(e,t)=>e.filter(s=>s!=null).map(s=>s);var QI=(e,t)=>({...e.AlarmConfiguration!=null&&{AlarmConfiguration:FI(e.AlarmConfiguration,t)},...e.CloudWatchOutputConfig!=null&&{CloudWatchOutputConfig:$I(e.CloudWatchOutputConfig,t)},...e.Comment!=null&&{Comment:e.Comment},...e.DocumentHash!=null&&{DocumentHash:e.DocumentHash},...e.DocumentHashType!=null&&{DocumentHashType:e.DocumentHashType},...e.DocumentName!=null&&{DocumentName:e.DocumentName},...e.DocumentVersion!=null&&{DocumentVersion:e.DocumentVersion},...e.InstanceIds!=null&&{InstanceIds:BI(e.InstanceIds,t)},...e.MaxConcurrency!=null&&{MaxConcurrency:e.MaxConcurrency},...e.MaxErrors!=null&&{MaxErrors:e.MaxErrors},...e.NotificationConfig!=null&&{NotificationConfig:HI(e.NotificationConfig,t)},...e.OutputS3BucketName!=null&&{OutputS3BucketName:e.OutputS3BucketName},...e.OutputS3KeyPrefix!=null&&{OutputS3KeyPrefix:e.OutputS3KeyPrefix},...e.OutputS3Region!=null&&{OutputS3Region:e.OutputS3Region},...e.Parameters!=null&&{Parameters:JI(e.Parameters,t)},...e.ServiceRoleArn!=null&&{ServiceRoleArn:e.ServiceRoleArn},...e.Targets!=null&&{Targets:ZI(e.Targets,t)},...e.TimeoutSeconds!=null&&{TimeoutSeconds:e.TimeoutSeconds}});var XI=(e,t)=>({...e.Key!=null&&{Key:e.Key},...e.Values!=null&&{Values:eS(e.Values,t)}});var ZI=(e,t)=>e.filter(s=>s!=null).map(s=>XI(s,t)),eS=(e,t)=>e.filter(s=>s!=null).map(s=>s);var tS=(e,t)=>({Name:f(e.Name)}),sS=(e,t)=>({Alarms:e.Alarms!=null?nS(e.Alarms,t):void 0,IgnorePollAlarmFailure:qo(e.IgnorePollAlarmFailure)}),nS=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>n===null?null:tS(n,t)),rS=(e,t)=>({Name:f(e.Name),State:f(e.State)}),oS=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>n===null?null:rS(n,t));var zl=(e,t)=>({CloudWatchLogGroupName:f(e.CloudWatchLogGroupName),CloudWatchOutputEnabled:qo(e.CloudWatchOutputEnabled)}),aS=(e,t)=>({AlarmConfiguration:e.AlarmConfiguration!=null?sS(e.AlarmConfiguration,t):void 0,CloudWatchOutputConfig:e.CloudWatchOutputConfig!=null?zl(e.CloudWatchOutputConfig,t):void 0,CommandId:f(e.CommandId),Comment:f(e.Comment),CompletedCount:Ke(e.CompletedCount),DeliveryTimedOutCount:Ke(e.DeliveryTimedOutCount),DocumentName:f(e.DocumentName),DocumentVersion:f(e.DocumentVersion),ErrorCount:Ke(e.ErrorCount),ExpiresAfter:e.ExpiresAfter!=null?Me(Ds(It(e.ExpiresAfter))):void 0,InstanceIds:e.InstanceIds!=null?uS(e.InstanceIds,t):void 0,MaxConcurrency:f(e.MaxConcurrency),MaxErrors:f(e.MaxErrors),NotificationConfig:e.NotificationConfig!=null?AS(e.NotificationConfig,t):void 0,OutputS3BucketName:f(e.OutputS3BucketName),OutputS3KeyPrefix:f(e.OutputS3KeyPrefix),OutputS3Region:f(e.OutputS3Region),Parameters:e.Parameters!=null?OS(e.Parameters,t):void 0,RequestedDateTime:e.RequestedDateTime!=null?Me(Ds(It(e.RequestedDateTime))):void 0,ServiceRole:f(e.ServiceRole),Status:f(e.Status),StatusDetails:f(e.StatusDetails),TargetCount:Ke(e.TargetCount),Targets:e.Targets!=null?LS(e.Targets,t):void 0,TimeoutSeconds:Ke(e.TimeoutSeconds),TriggeredAlarms:e.TriggeredAlarms!=null?oS(e.TriggeredAlarms,t):void 0});var iS=(e,t)=>({InstanceInformationList:e.InstanceInformationList!=null?yS(e.InstanceInformationList,t):void 0,NextToken:f(e.NextToken)});var cS=(e,t)=>({});var dS=(e,t)=>({CloudWatchOutputConfig:e.CloudWatchOutputConfig!=null?zl(e.CloudWatchOutputConfig,t):void 0,CommandId:f(e.CommandId),Comment:f(e.Comment),DocumentName:f(e.DocumentName),DocumentVersion:f(e.DocumentVersion),ExecutionElapsedTime:f(e.ExecutionElapsedTime),ExecutionEndDateTime:f(e.ExecutionEndDateTime),ExecutionStartDateTime:f(e.ExecutionStartDateTime),InstanceId:f(e.InstanceId),PluginName:f(e.PluginName),ResponseCode:Ke(e.ResponseCode),StandardErrorContent:f(e.StandardErrorContent),StandardErrorUrl:f(e.StandardErrorUrl),StandardOutputContent:f(e.StandardOutputContent),StandardOutputUrl:f(e.StandardOutputUrl),Status:f(e.Status),StatusDetails:f(e.StatusDetails)});var lS=(e,t)=>({DetailedStatus:f(e.DetailedStatus),InstanceAssociationStatusAggregatedCount:e.InstanceAssociationStatusAggregatedCount!=null?mS(e.InstanceAssociationStatusAggregatedCount,t):void 0});var mS=(e,t)=>Object.entries(e).reduce((s,[n,r])=>(r===null||(s[n]=Ke(r)),s),{});var uS=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>n===null?null:f(n)),fS=(e,t)=>({ActivationId:f(e.ActivationId),AgentVersion:f(e.AgentVersion),AssociationOverview:e.AssociationOverview!=null?lS(e.AssociationOverview,t):void 0,AssociationStatus:f(e.AssociationStatus),ComputerName:f(e.ComputerName),IPAddress:f(e.IPAddress),IamRole:f(e.IamRole),InstanceId:f(e.InstanceId),IsLatestVersion:qo(e.IsLatestVersion),LastAssociationExecutionDate:e.LastAssociationExecutionDate!=null?Me(Ds(It(e.LastAssociationExecutionDate))):void 0,LastPingDateTime:e.LastPingDateTime!=null?Me(Ds(It(e.LastPingDateTime))):void 0,LastSuccessfulAssociationExecutionDate:e.LastSuccessfulAssociationExecutionDate!=null?Me(Ds(It(e.LastSuccessfulAssociationExecutionDate))):void 0,Name:f(e.Name),PingStatus:f(e.PingStatus),PlatformName:f(e.PlatformName),PlatformType:f(e.PlatformType),PlatformVersion:f(e.PlatformVersion),RegistrationDate:e.RegistrationDate!=null?Me(Ds(It(e.RegistrationDate))):void 0,ResourceType:f(e.ResourceType),SourceId:f(e.SourceId),SourceType:f(e.SourceType)}),yS=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>n===null?null:fS(n,t));var pS=(e,t)=>({Message:f(e.Message)});var hS=(e,t)=>({});var wS=(e,t)=>({Message:f(e.Message)});var ES=(e,t)=>({Message:f(e.Message)});var gS=(e,t)=>({});var IS=(e,t)=>({Message:f(e.Message)}),SS=(e,t)=>({message:f(e.message)});var xS=(e,t)=>({Message:f(e.Message)}),CS=(e,t)=>({Message:f(e.Message)});var TS=(e,t)=>({});var bS=(e,t)=>({Message:f(e.Message)});var _S=(e,t)=>({});var RS=(e,t)=>({Message:f(e.Message)});var vS=(e,t)=>({});var PS=(e,t)=>({Message:f(e.Message)});var AS=(e,t)=>({NotificationArn:f(e.NotificationArn),NotificationEvents:e.NotificationEvents!=null?NS(e.NotificationEvents,t):void 0,NotificationType:f(e.NotificationType)}),NS=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>n===null?null:f(n));var OS=(e,t)=>Object.entries(e).reduce((s,[n,r])=>(r===null||(s[n]=DS(r,t)),s),{}),DS=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>n===null?null:f(n));var MS=(e,t)=>({Command:e.Command!=null?aS(e.Command,t):void 0});var kS=(e,t)=>({Key:f(e.Key),Values:e.Values!=null?FS(e.Values,t):void 0});var LS=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>n===null?null:kS(n,t)),FS=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>n===null?null:f(n));var zS=(e,t)=>({Message:f(e.Message)});var G=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),$S=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),US=(e,t)=>$S(e,t).then(s=>t.utf8Encoder(s)),Ni=async(e,t,s,n,r)=>{let{hostname:o,protocol:a="https",port:i,path:c}=await e.endpoint(),d={protocol:a,hostname:o,port:i,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+s:c+s,headers:t};return n!==void 0&&(d.hostname=n),r!==void 0&&(d.body=r),new b(d)};function Oi(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`AmazonSSM.${e}`}}var Ko=(e,t)=>US(e,t).then(s=>s.length?JSON.parse(s):{}),Di=async(e,t)=>{let s=await Ko(e,t);return s.message=s.message??s.Message,s},Mi=(e,t)=>{let s=(o,a)=>Object.keys(o).find(i=>i.toLowerCase()===a.toLowerCase()),n=o=>{let a=o;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},r=s(e.headers,"x-amzn-errortype");if(r!==void 0)return n(e.headers[r]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)};var Sn=class extends ce{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,s,n){this.middlewareStack.use(L(s,this.serialize,this.deserialize)),this.middlewareStack.use(F(s,Sn.getEndpointParameterInstructions()));let r=t.concat(this.middlewareStack),{logger:o}=s,c={logger:o,clientName:"SSMClient",commandName:"DescribeInstanceInformationCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=s;return r.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,s){return Nl(t,s)}deserialize(t,s){return Ml(t,s)}};var xn=class extends ce{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,s,n){this.middlewareStack.use(L(s,this.serialize,this.deserialize)),this.middlewareStack.use(F(s,xn.getEndpointParameterInstructions()));let r=t.concat(this.middlewareStack),{logger:o}=s,c={logger:o,clientName:"SSMClient",commandName:"GetCommandInvocationCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=s;return r.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,s){return Ol(t,s)}deserialize(t,s){return kl(t,s)}};var Cn=class extends ce{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,s,n){this.middlewareStack.use(L(s,this.serialize,this.deserialize)),this.middlewareStack.use(F(s,Cn.getEndpointParameterInstructions()));let r=t.concat(this.middlewareStack),{logger:o}=s,c={logger:o,clientName:"SSMClient",commandName:"SendCommandCommand",inputFilterSensitiveLog:Pl,outputFilterSensitiveLog:Al},{requestHandler:d}=s;return r.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,s){return Dl(t,s)}deserialize(t,s){return Ll(t,s)}};var ds;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(ds||(ds={}));var Tn=(e,t,s)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${s} "${t}". Expected "true" or "false", got ${e[t]}.`)}};var VS="AWS_USE_DUALSTACK_ENDPOINT",BS="use_dualstack_endpoint";var de={environmentVariableSelector:e=>Tn(e,VS,ds.ENV),configFileSelector:e=>Tn(e,BS,ds.CONFIG),default:!1};var WS="AWS_USE_FIPS_ENDPOINT",GS="use_fips_endpoint";var le={environmentVariableSelector:e=>Tn(e,WS,ds.ENV),configFileSelector:e=>Tn(e,GS,ds.CONFIG),default:!1};var qS="AWS_REGION",jS="region",q={environmentVariableSelector:e=>e[qS],configFileSelector:e=>e[jS],default:()=>{throw new Error("Region is missing")}},me={preferredFile:"credentials"};var Jo=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips"));var ki=e=>Jo(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e;var ue=e=>{let{region:t,useFipsEndpoint:s}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return ki(t);let n=await t();return ki(n)},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return Jo(n)?!0:typeof s!="function"?Promise.resolve(!!s):s()}}};var $l="content-length";function HS(e){return t=>async s=>{let n=s.request;if(b.isInstance(n)){let{body:r,headers:o}=n;if(r&&Object.keys(o).map(a=>a.toLowerCase()).indexOf($l)===-1)try{let a=e(r);n.headers={...n.headers,[$l]:String(a)}}catch{}}return t({...s,request:n})}}var KS={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},fe=e=>({applyToStack:t=>{t.add(HS(e.bodyLengthChecker),KS)}});var JS=e=>t=>async s=>{if(!b.isInstance(s.request))return t(s);let{request:n}=s,{handlerProtocol:r=""}=e.requestHandler.metadata||{};if(r.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]="";else if(!n.headers.host){let o=n.hostname;n.port!=null&&(o+=`:${n.port}`),n.headers.host=o}return t(s)},YS={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},ye=e=>({applyToStack:t=>{t.add(JS(e),YS)}});var QS=()=>(e,t)=>async s=>{var n,r;try{let o=await e(s),{clientName:a,commandName:i,logger:c,dynamoDbDocumentClientOptions:d={}}=t,{overrideInputFilterSensitiveLog:l,overrideOutputFilterSensitiveLog:m}=d,u=l??t.inputFilterSensitiveLog,y=m??t.outputFilterSensitiveLog,{$metadata:p,...w}=o.output;return(n=c==null?void 0:c.info)==null||n.call(c,{clientName:a,commandName:i,input:u(s.input),output:y(w),metadata:p}),o}catch(o){let{clientName:a,commandName:i,logger:c,dynamoDbDocumentClientOptions:d={}}=t,{overrideInputFilterSensitiveLog:l}=d,m=l??t.inputFilterSensitiveLog;throw(r=c==null?void 0:c.error)==null||r.call(c,{clientName:a,commandName:i,input:m(s.input),error:o,metadata:o.$metadata}),o}},XS={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},pe=e=>({applyToStack:t=>{t.add(QS(),XS)}});var Ul="X-Amzn-Trace-Id",ZS="AWS_LAMBDA_FUNCTION_NAME",ex="_X_AMZN_TRACE_ID",tx=e=>t=>async s=>{let{request:n}=s;if(!b.isInstance(n)||e.runtime!=="node"||n.headers.hasOwnProperty(Ul))return t(s);let r=process.env[ZS],o=process.env[ex],a=i=>typeof i=="string"&&i.length>0;return a(r)&&a(o)&&(n.headers[Ul]=o),t({...s,request:n})},sx={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},he=e=>({applyToStack:t=>{t.add(tx(e),sx)}});var xt;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(xt||(xt={}));var Ms=3,J="STANDARD";var Vl=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Bl=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],Wl=[500,502,503,504],Gl=["ECONNRESET","EPIPE","ETIMEDOUT"];var bn=e=>{var t,s;return((t=e.$metadata)==null?void 0:t.httpStatusCode)===429||Vl.includes(e.name)||((s=e.$retryable)==null?void 0:s.throttling)==!0},Yo=e=>{var t;return Bl.includes(e.name)||Gl.includes((e==null?void 0:e.code)||"")||Wl.includes(((t=e.$metadata)==null?void 0:t.httpStatusCode)||0)},ql=e=>{var t;if(((t=e.$metadata)==null?void 0:t.httpStatusCode)!==void 0){let s=e.$metadata.httpStatusCode;return 500<=s&&s<=599&&!Yo(e)}return!1};var eo=class{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(t==null?void 0:t.beta)??.7,this.minCapacity=(t==null?void 0:t.minCapacity)??1,this.minFillRate=(t==null?void 0:t.minFillRate)??.5,this.scaleConstant=(t==null?void 0:t.scaleConstant)??.4,this.smooth=(t==null?void 0:t.smooth)??.8;let s=this.getCurrentTimeInSeconds();this.lastThrottleTime=s,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let s=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,s))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let s=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+s),this.lastTimestamp=t}updateClientSendingRate(t){let s;if(this.updateMeasuredRate(),bn(t)){let r=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=r,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),s=this.cubicThrottle(r),this.enableTokenBucket()}else this.calculateTimeWindow(),s=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(s,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),s=Math.floor(t*2)/2;if(this.requestCount++,s>this.lastTxRateBucket){let n=this.requestCount/(s-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=s}}getPrecise(t){return parseFloat(t.toFixed(8))}};var Qo="amz-sdk-invocation-id",Xo="amz-sdk-request";var jl=()=>{let e=100;return{computeNextBackoffDelay:n=>Math.floor(Math.min(2e4,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}};var Ql=(e,t,s,n)=>{let r=e,o=(n==null?void 0:n.retryCost)??5,a=(n==null?void 0:n.timeoutRetryCost)??10,i=(n==null?void 0:n.retryBackoffStrategy)??jl(),c=e,d=Math.min(2e4,t),l,m=s??0,u=it=>it==="TRANSIENT"?a:o,y=()=>m,p=()=>d,w=()=>l,E=it=>u(it)<=c;return{getRetryCount:y,getRetryDelay:p,getLastRetryCost:w,hasRetryTokens:E,getRetryTokenCount:it=>{let Ya=it.errorType;if(!E(Ya))throw new Error("No retry token available");let Qa=u(Ya),mE=Ya==="THROTTLING"?500:100;i.setDelayBase(mE);let cd=i.computeNextBackoffDelay(m);if(it.retryAfterHint){let uE=it.retryAfterHint.getTime()-Date.now();d=Math.max(uE||0,cd)}else d=cd;return m++,l=Qa,c-=Qa,Qa},releaseRetryTokens:it=>{c+=it??1,c=Math.min(c,r)}}};var Rn=class{constructor(t){this.maxAttemptsProvider=t,this.mode=xt.STANDARD,this.retryToken=Ql(500,100),this.maxAttemptsProvider=t}async acquireInitialRetryToken(t){return this.retryToken}async refreshRetryTokenForRetry(t,s){let n=await this.getMaxAttempts();if(this.shouldRetry(t,s,n))return t.getRetryTokenCount(s),t;throw new Error("No retry token available")}recordSuccess(t){this.retryToken.releaseRetryTokens(t.getLastRetryCost())}async getMaxAttempts(){let t;try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Ms}`),Ms}}shouldRetry(t,s,n){return t.getRetryCount()<n&&t.hasRetryTokens(s.errorType)&&this.isRetryableError(s.errorType)}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}};var ea=class{constructor(t,s){this.maxAttemptsProvider=t,this.mode=xt.ADAPTIVE;let{rateLimiter:n}=s??{};this.rateLimiter=n??new eo,this.standardRetryStrategy=new Rn(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,s){return this.rateLimiter.updateClientSendingRate(s),this.standardRetryStrategy.refreshRetryTokenForRetry(t,s)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}};var Li=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`);var Zl="AWS_MAX_ATTEMPTS",em="max_attempts",we={environmentVariableSelector:e=>{let t=e[Zl];if(!t)return;let s=parseInt(t);if(Number.isNaN(s))throw new Error(`Environment variable ${Zl} mast be a number, got "${t}"`);return s},configFileSelector:e=>{let t=e[em];if(!t)return;let s=parseInt(t);if(Number.isNaN(s))throw new Error(`Shared config file entry ${em} mast be a number, got "${t}"`);return s},default:Ms},Ee=e=>{let{retryStrategy:t}=e,s=se(e.maxAttempts??Ms);return{...e,maxAttempts:s,retryStrategy:async()=>t||(await se(e.retryMode)()===xt.ADAPTIVE?new ea(s):new Rn(s))}},nx="AWS_RETRY_MODE",rx="retry_mode",ge={environmentVariableSelector:e=>e[nx],configFileSelector:e=>e[rx],default:J};ai();var ox=e=>(t,s)=>async n=>{let r=await e.retryStrategy(),o=await e.maxAttempts();if(ax(r)){r=r;let a=await r.acquireInitialRetryToken(s.partition_id),i=new Error,c=0,d=0,{request:l}=n;for(b.isInstance(l)&&(l.headers[Qo]=Fo());;)try{b.isInstance(l)&&(l.headers[Xo]=`attempt=${c+1}; max=${o}`);let{response:m,output:u}=await t(n);return r.recordSuccess(a),u.$metadata.attempts=c+1,u.$metadata.totalRetryDelay=d,{response:m,output:u}}catch(m){let u=ix(m);i=Li(m);try{a=await r.refreshRetryTokenForRetry(a,u)}catch{throw i.$metadata||(i.$metadata={}),i.$metadata.attempts=c+1,i.$metadata.totalRetryDelay=d,i}c=a.getRetryCount();let y=a.getRetryDelay();d+=y,await new Promise(p=>setTimeout(p,y))}}else return r=r,r!=null&&r.mode&&(s.userAgent=[...s.userAgent||[],["cfg/retry-mode",r.mode]]),r.retry(t,n)},ax=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",ix=e=>{let t={errorType:cx(e)},s=lx(e.$response);return s&&(t.retryAfterHint=s),t},cx=e=>bn(e)?"THROTTLING":Yo(e)?"TRANSIENT":ql(e)?"SERVER_ERROR":"CLIENT_ERROR",dx={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Ie=e=>({applyToStack:t=>{t.add(ox(e),dx)}}),lx=e=>{if(!St.isInstance(e))return;let t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;let s=e.headers[t],n=Number(s);return Number.isNaN(n)?new Date(s):new Date(n*1e3)};var $e=class extends Error{constructor(t,s=!0){super(t),this.tryNextLink=s,this.name="ProviderError",Object.setPrototypeOf(this,$e.prototype)}static from(t,s=!0){return Object.assign(new this(t.message,s),t)}};var h=class extends $e{constructor(t,s=!0){super(t,s),this.tryNextLink=s,this.name="CredentialsProviderError",Object.setPrototypeOf(this,h.prototype)}};var z=class extends $e{constructor(t,s=!0){super(t,s),this.tryNextLink=s,this.name="TokenProviderError",Object.setPrototypeOf(this,z.prototype)}};function vn(...e){return()=>{let t=Promise.reject(new $e("No providers in chain"));for(let s of e)t=t.catch(n=>{if(n!=null&&n.tryNextLink)return s();throw n});return t}}var tm=e=>()=>Promise.resolve(e);var Ye=(e,t,s)=>{let n,r,o,a=!1,i=async()=>{r||(r=e());try{n=await r,o=!0,a=!1}finally{r=void 0}return n};return t===void 0?async c=>((!o||c!=null&&c.forceRefresh)&&(n=await i()),n):async c=>((!o||c!=null&&c.forceRefresh)&&(n=await i()),a?n:s&&!s(n)?(a=!0,n):(t(n)&&await i(),n))};var sm={},mx={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),sm[e]=t,mx[t]=e}function Ut(e){let t="";for(let s=0;s<e.byteLength;s++)t+=sm[e[s]];return t}var ta=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";var sa=require("buffer"),ks=(e,t=0,s=e.byteLength-t)=>{if(!ta(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return sa.Buffer.from(e,t,s)},Pn=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?sa.Buffer.from(e,t):sa.Buffer.from(e)};var Y=e=>{let t=Pn(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)};var Ct=e=>typeof e=="string"?Y(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e);var Se=e=>ks(e.buffer,e.byteOffset,e.byteLength).toString("utf8");var nm="X-Amz-Algorithm",rm="X-Amz-Credential",Fi="X-Amz-Date",om="X-Amz-SignedHeaders",am="X-Amz-Expires",zi="X-Amz-Signature",$i="X-Amz-Security-Token";var Ui="authorization",Vi=Fi.toLowerCase(),ux="date",im=[Ui,Vi,ux],cm=zi.toLowerCase(),to="x-amz-content-sha256",dm=$i.toLowerCase();var lm={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},mm=/^proxy-/,um=/^sec-/;var na="AWS4-HMAC-SHA256";var fm="AWS4-HMAC-SHA256-PAYLOAD",ym="UNSIGNED-PAYLOAD",pm=50,Bi="aws4_request",hm=60*60*24*7;var ra={},Wi=[],oa=(e,t,s)=>`${e}/${t}/${s}/${Bi}`,Em=async(e,t,s,n,r)=>{let o=await wm(e,t.secretAccessKey,t.accessKeyId),a=`${s}:${n}:${r}:${Ut(o)}:${t.sessionToken}`;if(a in ra)return ra[a];for(Wi.push(a);Wi.length>pm;)delete ra[Wi.shift()];let i=`AWS4${t.secretAccessKey}`;for(let c of[s,n,r,Bi])i=await wm(e,i,c);return ra[a]=i};var wm=(e,t,s)=>{let n=new e(t);return n.update(Ct(s)),n.digest()};var aa=({headers:e},t,s)=>{let n={};for(let r of Object.keys(e).sort()){if(e[r]==null)continue;let o=r.toLowerCase();(o in lm||t!=null&&t.has(o)||mm.test(o)||um.test(o))&&(!s||s&&!s.has(o))||(n[o]=e[r].trim().replace(/\s+/g," "))}return n};var Tt=e=>encodeURIComponent(e).replace(/[!'()*]/g,fx),fx=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;var Gi=({query:e={}})=>{let t=[],s={};for(let n of Object.keys(e).sort()){if(n.toLowerCase()===cm)continue;t.push(n);let r=e[n];typeof r=="string"?s[n]=`${Tt(n)}=${Tt(r)}`:Array.isArray(r)&&(s[n]=r.slice(0).sort().reduce((o,a)=>o.concat([`${Tt(n)}=${Tt(a)}`]),[]).join("&"))}return t.map(n=>s[n]).filter(n=>n).join("&")};var so=async({headers:e,body:t},s)=>{for(let n of Object.keys(e))if(n.toLowerCase()===to)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||ta(t)){let n=new s;return n.update(Ct(t)),Ut(await n.digest())}return ym};var gm=(e,t)=>{e=e.toLowerCase();for(let s of Object.keys(t))if(e===s.toLowerCase())return!0;return!1};var ia=({headers:e,query:t,...s})=>({...s,headers:{...e},query:t?yx(t):void 0}),yx=e=>Object.keys(e).reduce((t,s)=>{let n=e[s];return{...t,[s]:Array.isArray(n)?[...n]:n}},{});var qi=(e,t={})=>{var r;let{headers:s,query:n={}}=typeof e.clone=="function"?e.clone():ia(e);for(let o of Object.keys(s)){let a=o.toLowerCase();a.slice(0,6)==="x-amz-"&&!((r=t.unhoistableHeaders)!=null&&r.has(a))&&(n[o]=s[o],delete s[o])}return{...e,headers:s,query:n}};var ca=e=>{e=typeof e.clone=="function"?e.clone():ia(e);for(let t of Object.keys(e.headers))im.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e};var Im=e=>px(e).toISOString().replace(/\.\d{3}Z$/,"Z"),px=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;var no=class{constructor({applyChecksum:t,credentials:s,region:n,service:r,sha256:o,uriEscapePath:a=!0}){this.service=r,this.sha256=o,this.uriEscapePath=a,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=se(n),this.credentialProvider=se(s)}async presign(t,s={}){let{signingDate:n=new Date,expiresIn:r=3600,unsignableHeaders:o,unhoistableHeaders:a,signableHeaders:i,signingRegion:c,signingService:d}=s,l=await this.credentialProvider();this.validateResolvedCredentials(l);let m=c??await this.regionProvider(),{longDate:u,shortDate:y}=da(n);if(r>hm)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let p=oa(y,m,d??this.service),w=qi(ca(t),{unhoistableHeaders:a});l.sessionToken&&(w.query[$i]=l.sessionToken),w.query[nm]=na,w.query[rm]=`${l.accessKeyId}/${p}`,w.query[Fi]=u,w.query[am]=r.toString(10);let E=aa(w,o,i);return w.query[om]=Sm(E),w.query[zi]=await this.getSignature(u,p,this.getSigningKey(l,m,y,d),this.createCanonicalRequest(w,E,await so(t,this.sha256))),w}async sign(t,s){return typeof t=="string"?this.signString(t,s):t.headers&&t.payload?this.signEvent(t,s):this.signRequest(t,s)}async signEvent({headers:t,payload:s},{signingDate:n=new Date,priorSignature:r,signingRegion:o,signingService:a}){let i=o??await this.regionProvider(),{shortDate:c,longDate:d}=da(n),l=oa(c,i,a??this.service),m=await so({headers:{},body:s},this.sha256),u=new this.sha256;u.update(t);let y=Ut(await u.digest()),p=[fm,d,l,r,y,m].join(`
`);return this.signString(p,{signingDate:n,signingRegion:i,signingService:a})}async signString(t,{signingDate:s=new Date,signingRegion:n,signingService:r}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let a=n??await this.regionProvider(),{shortDate:i}=da(s),c=new this.sha256(await this.getSigningKey(o,a,i,r));return c.update(Ct(t)),Ut(await c.digest())}async signRequest(t,{signingDate:s=new Date,signableHeaders:n,unsignableHeaders:r,signingRegion:o,signingService:a}={}){let i=await this.credentialProvider();this.validateResolvedCredentials(i);let c=o??await this.regionProvider(),d=ca(t),{longDate:l,shortDate:m}=da(s),u=oa(m,c,a??this.service);d.headers[Vi]=l,i.sessionToken&&(d.headers[dm]=i.sessionToken);let y=await so(d,this.sha256);!gm(to,d.headers)&&this.applyChecksum&&(d.headers[to]=y);let p=aa(d,r,n),w=await this.getSignature(l,u,this.getSigningKey(i,c,m,a),this.createCanonicalRequest(d,p,y));return d.headers[Ui]=`${na} Credential=${i.accessKeyId}/${u}, SignedHeaders=${Sm(p)}, Signature=${w}`,d}createCanonicalRequest(t,s,n){let r=Object.keys(s).sort();return`${t.method}
${this.getCanonicalPath(t)}
${Gi(t)}
${r.map(o=>`${o}:${s[o]}`).join(`
`)}

${r.join(";")}
${n}`}async createStringToSign(t,s,n){let r=new this.sha256;r.update(Ct(n));let o=await r.digest();return`${na}
${t}
${s}
${Ut(o)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let s=[];for(let o of t.split("/"))(o==null?void 0:o.length)!==0&&o!=="."&&(o===".."?s.pop():s.push(o));let n=`${t!=null&&t.startsWith("/")?"/":""}${s.join("/")}${s.length>0&&(t!=null&&t.endsWith("/"))?"/":""}`;return encodeURIComponent(n).replace(/%2F/g,"/")}return t}async getSignature(t,s,n,r){let o=await this.createStringToSign(t,s,r),a=new this.sha256(await n);return a.update(Ct(o)),Ut(await a.digest())}getSigningKey(t,s,n,r){return Em(this.sha256,t,n,s,r||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}},da=e=>{let t=Im(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},Sm=e=>Object.keys(e).sort().join(";");var hx=3e5,An=e=>{let t=e.credentials?wx(e.credentials):e.credentialDefaultProvider(e),{signingEscapePath:s=!0,systemClockOffset:n=e.systemClockOffset||0,sha256:r}=e,o;return e.signer?o=se(e.signer):e.regionInfoProvider?o=()=>se(e.region)().then(async a=>[await e.regionInfoProvider(a,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},a]).then(([a,i])=>{let{signingRegion:c,signingService:d}=a;e.signingRegion=e.signingRegion||c||i,e.signingName=e.signingName||d||e.serviceId;let l={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:r,uriEscapePath:s},m=e.signerConstructor||no;return new m(l)}):o=async a=>{a=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await se(e.region)(),properties:{}},a);let i=a.signingRegion,c=a.signingName;e.signingRegion=e.signingRegion||i,e.signingName=e.signingName||c||e.serviceId;let d={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:r,uriEscapePath:s},l=e.signerConstructor||no;return new l(d)},{...e,systemClockOffset:n,signingEscapePath:s,credentials:t,signer:o}};var wx=e=>typeof e=="function"?Ye(e,t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<hx,t=>t.expiration!==void 0):se(e);var la=e=>new Date(Date.now()+e);var xm=(e,t)=>Math.abs(la(t).getTime()-e)>=3e5;var ji=(e,t)=>{let s=Date.parse(e);return xm(s,t)?s-Date.now():t};var Ex=e=>(t,s)=>async function(n){var d,l,m,u;if(!b.isInstance(n.request))return t(n);let r=(m=(l=(d=s.endpointV2)==null?void 0:d.properties)==null?void 0:l.authSchemes)==null?void 0:m[0],o=(r==null?void 0:r.name)==="sigv4a"?(u=r==null?void 0:r.signingRegionSet)==null?void 0:u.join(","):void 0,a=await e.signer(r),i=await t({...n,request:await a.sign(n.request,{signingDate:la(e.systemClockOffset),signingRegion:o||s.signing_region,signingService:s.signing_service})}).catch(y=>{let p=y.ServerTime??Cm(y.$response);throw p&&(e.systemClockOffset=ji(p,e.systemClockOffset)),y}),c=Cm(i.response);return c&&(e.systemClockOffset=ji(c,e.systemClockOffset)),i},Cm=e=>{var t,s;return St.isInstance(e)?((t=e.headers)==null?void 0:t.date)??((s=e.headers)==null?void 0:s.Date):void 0},gx={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},ls=e=>({applyToStack:t=>{t.addRelativeTo(Ex(e),gx)}});function xe(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}var Hi={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}}],version:"1.1"};var Tm=Hi,bm="",Sx=e=>{let{partitions:t}=Tm;for(let n of t){let{regions:r,outputs:o}=n;for(let[a,i]of Object.entries(r))if(a===e)return{...o,...i}}for(let n of t){let{regionRegex:r,outputs:o}=n;if(new RegExp(r).test(e))return{...o}}let s=t.find(n=>n.id==="aws");if(!s)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...s.outputs}},_m=(e,t="")=>{Tm=e,bm=t},xx=()=>{_m(Hi,"")},Ki=()=>bm;var Vt="endpoints";function Qe(e){return typeof e!="object"||e==null?e:"ref"in e?`$${Qe(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(Qe).join(", ")})`:JSON.stringify(e,null,2)}var k=class extends Error{constructor(t){super(t),this.name="EndpointError"}};var Xi={};Xa(Xi,{aws:()=>Ji,booleanEquals:()=>_x,getAttr:()=>Yi,isSet:()=>Rx,isValidHostLabel:()=>ua,not:()=>vx,parseURL:()=>Px,stringEquals:()=>Ax,substring:()=>Nx,uriEncode:()=>Ox});var Ji={};Xa(Ji,{getUserAgentPrefix:()=>Ki,isVirtualHostableS3Bucket:()=>Rm,parseArn:()=>bx,partition:()=>Sx,setPartitionInfo:()=>_m,useDefaultPartitionInfo:()=>xx});var Cx=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),ma=e=>Cx.test(e)||e.startsWith("[")&&e.endsWith("]");var Tx=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),ua=(e,t=!1)=>{if(!t)return Tx.test(e);let s=e.split(".");for(let n of s)if(!ua(n))return!1;return!0};var Rm=(e,t=!1)=>{if(t){for(let s of e.split("."))if(!Rm(s))return!1;return!0}return!(!ua(e)||e.length<3||e.length>63||e!==e.toLowerCase()||ma(e))};var bx=e=>{let t=e.split(":");if(t.length<6)return null;let[s,n,r,o,a,...i]=t;return s!=="arn"||n===""||r===""||i[0]===""?null:{partition:n,service:r,region:o,accountId:a,resourceId:i[0].includes("/")?i[0].split("/"):i}};var _x=(e,t)=>e===t;var vm=e=>{let t=e.split("."),s=[];for(let n of t){let r=n.indexOf("[");if(r!==-1){if(n.indexOf("]")!==n.length-1)throw new k(`Path: '${e}' does not end with ']'`);let o=n.slice(r+1,-1);if(Number.isNaN(parseInt(o)))throw new k(`Invalid array index: '${o}' in path: '${e}'`);r!==0&&s.push(n.slice(0,r)),s.push(o)}else s.push(n)}return s};var Yi=(e,t)=>vm(t).reduce((s,n)=>{if(typeof s!="object")throw new k(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(s)?s[parseInt(n)]:s[n]},e);var Rx=e=>e!=null;var vx=e=>!e;var Pm;(function(e){e.HEADER="header",e.QUERY="query"})(Pm||(Pm={}));var Am;(function(e){e.AAAA="AAAA",e.A="A"})(Am||(Am={}));var Nn;(function(e){e.HTTP="http",e.HTTPS="https"})(Nn||(Nn={}));var Nm;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(Nm||(Nm={}));var Qi={[Nn.HTTP]:80,[Nn.HTTPS]:443},Px=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:u,port:y,protocol:p="",path:w="",query:E={}}=e,Ge=new URL(`${p}//${u}${y?`:${y}`:""}${w}`);return Ge.search=Object.entries(E).map(([id,it])=>`${id}=${it}`).join("&"),Ge}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let s=t.href,{host:n,hostname:r,pathname:o,protocol:a,search:i}=t;if(i)return null;let c=a.slice(0,-1);if(!Object.values(Nn).includes(c))return null;let d=ma(r),l=s.includes(`${n}:${Qi[c]}`)||typeof e=="string"&&e.includes(`${n}:${Qi[c]}`),m=`${n}${l?`:${Qi[c]}`:""}`;return{scheme:c,authority:m,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:d}};var Ax=(e,t)=>e===t;var Nx=(e,t,s,n)=>t>=s||e.length<s?null:n?e.substring(e.length-s,e.length-t):e.substring(t,s);var Ox=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`);var fa=(e,t)=>{let s=[],n={...t.endpointParams,...t.referenceRecord},r=0;for(;r<e.length;){let o=e.indexOf("{",r);if(o===-1){s.push(e.slice(r));break}s.push(e.slice(r,o));let a=e.indexOf("}",o);if(a===-1){s.push(e.slice(o));break}e[o+1]==="{"&&e[a+1]==="}"&&(s.push(e.slice(o+1,a)),r=a+2);let i=e.substring(o+1,a);if(i.includes("#")){let[c,d]=i.split("#");s.push(Yi(n[c],d))}else s.push(n[i]);r=a+1}return s.join("")};var Om=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e];var ms=(e,t,s)=>{if(typeof e=="string")return fa(e,s);if(e.fn)return ya(e,s);if(e.ref)return Om(e,s);throw new k(`'${t}': ${String(e)} is not a string, function or reference.`)};var ya=({fn:e,argv:t},s)=>{let n=t.map(r=>["boolean","number"].includes(typeof r)?r:ms(r,"arg",s));return e.split(".").reduce((r,o)=>r[o],Xi)(...n)};var Dm=({assign:e,...t},s)=>{var r,o;if(e&&e in s.referenceRecord)throw new k(`'${e}' is already defined in Reference Record.`);let n=ya(t,s);return(o=(r=s.logger)==null?void 0:r.debug)==null||o.call(r,Vt,`evaluateCondition: ${Qe(t)} = ${Qe(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}};var On=(e=[],t)=>{var n,r;let s={};for(let o of e){let{result:a,toAssign:i}=Dm(o,{...t,referenceRecord:{...t.referenceRecord,...s}});if(!a)return{result:a};i&&(s[i.name]=i.value,(r=(n=t.logger)==null?void 0:n.debug)==null||r.call(n,Vt,`assign: ${i.name} := ${Qe(i.value)}`))}return{result:!0,referenceRecord:s}};var Mm=(e,t)=>Object.entries(e).reduce((s,[n,r])=>({...s,[n]:r.map(o=>{let a=ms(o,"Header value entry",t);if(typeof a!="string")throw new k(`Header '${n}' value '${a}' is not a string`);return a})}),{});var Zi=(e,t)=>{if(Array.isArray(e))return e.map(s=>Zi(s,t));switch(typeof e){case"string":return fa(e,t);case"object":if(e===null)throw new k(`Unexpected endpoint property: ${e}`);return pa(e,t);case"boolean":return e;default:throw new k(`Unexpected endpoint property type: ${typeof e}`)}};var pa=(e,t)=>Object.entries(e).reduce((s,[n,r])=>({...s,[n]:Zi(r,t)}),{});var km=(e,t)=>{let s=ms(e,"Endpoint URL",t);if(typeof s=="string")try{return new URL(s)}catch(n){throw console.error(`Failed to construct URL with ${s}`,n),n}throw new k(`Endpoint URL must be a string, got ${typeof s}`)};var Lm=(e,t)=>{var l,m;let{conditions:s,endpoint:n}=e,{result:r,referenceRecord:o}=On(s,t);if(!r)return;let a={...t,referenceRecord:{...t.referenceRecord,...o}},{url:i,properties:c,headers:d}=n;return(m=(l=t.logger)==null?void 0:l.debug)==null||m.call(l,Vt,`Resolving endpoint from template: ${Qe(n)}`),{...d!=null&&{headers:Mm(d,a)},...c!=null&&{properties:pa(c,a)},url:km(i,a)}};var Fm=(e,t)=>{let{conditions:s,error:n}=e,{result:r,referenceRecord:o}=On(s,t);if(r)throw new k(ms(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...o}}))};var zm=(e,t)=>{let{conditions:s,rules:n}=e,{result:r,referenceRecord:o}=On(s,t);if(r)return ha(n,{...t,referenceRecord:{...t.referenceRecord,...o}})};var ha=(e,t)=>{for(let s of e)if(s.type==="endpoint"){let n=Lm(s,t);if(n)return n}else if(s.type==="error")Fm(s,t);else if(s.type==="tree"){let n=zm(s,t);if(n)return n}else throw new k(`Unknown endpoint rule: ${s}`);throw new k("Rules evaluation failed")};var Ce=(e,t)=>{var d,l,m,u,y;let{endpointParams:s,logger:n}=t,{parameters:r,rules:o}=e;(l=(d=t.logger)==null?void 0:d.debug)==null||l.call(d,Vt,`Initial EndpointParams: ${Qe(s)}`);let a=Object.entries(r).filter(([,p])=>p.default!=null).map(([p,w])=>[p,w.default]);if(a.length>0)for(let[p,w]of a)s[p]=s[p]??w;let i=Object.entries(r).filter(([,p])=>p.required).map(([p])=>p);for(let p of i)if(s[p]==null)throw new k(`Missing required parameter: '${p}'`);let c=ha(o,{endpointParams:s,logger:n,referenceRecord:{}});if((m=t.endpointParams)!=null&&m.Endpoint)try{let p=new URL(t.endpointParams.Endpoint),{protocol:w,port:E}=p;c.url.protocol=w,c.url.port=E}catch{}return(y=(u=t.logger)==null?void 0:u.debug)==null||y.call(u,Vt,`Resolved endpoint: ${Qe(c)}`),c};var ec="user-agent",wa="x-amz-user-agent",tc=" ",$m=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g;var Dx=e=>(t,s)=>async n=>{var u,y;let{request:r}=n;if(!b.isInstance(r))return t(n);let{headers:o}=r,a=((u=s==null?void 0:s.userAgent)==null?void 0:u.map(sc))||[],i=(await e.defaultUserAgentProvider()).map(sc),c=((y=e==null?void 0:e.customUserAgent)==null?void 0:y.map(sc))||[],d=Ki(),l=(d?[d]:[]).concat([...i,...a,...c]).join(tc),m=[...i.filter(p=>p.startsWith("aws-sdk-")),...c].join(tc);return e.runtime!=="browser"?(m&&(o[wa]=o[wa]?`${o[ec]} ${m}`:m),o[ec]=l):o[wa]=l,t({...n,request:r})},sc=([e,t])=>{let s=e.indexOf("/"),n=e.substring(0,s),r=e.substring(s+1);return n==="api"&&(r=r.toLowerCase()),[n,r,t].filter(o=>o&&o.length>0).map(o=>o==null?void 0:o.replace($m,"_")).join("/")},Mx={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Te=e=>({applyToStack:t=>{t.add(Dx(e),Mx)}});var Um=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"ssm"});var Vm={name:"@aws-sdk/client-ssm",description:"AWS SDK for JavaScript Ssm Client for Node.js, Browser and React Native",version:"3.312.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo ssm"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.312.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/credential-provider-node":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-signing":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.310.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.310.0","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.310.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.310.0","@aws-sdk/util-defaults-mode-node":"3.310.0","@aws-sdk/util-endpoints":"3.310.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0","@aws-sdk/util-waiter":"3.310.0",tslib:"^2.5.0",uuid:"^8.3.2"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31","@types/uuid":"^8.3.0",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-ssm",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-ssm"}};var Eu=Ns(fc());var ke=class extends Je{constructor(t){super(t),Object.setPrototypeOf(this,ke.prototype)}};var Dn=class extends ke{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,Dn.prototype)}},Mn=class extends ke{constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,Mn.prototype)}},kn=class extends ke{constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,kn.prototype)}},Ln=class extends ke{constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,Ln.prototype)}},Fn=class extends ke{constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,Fn.prototype)}},zn=class extends ke{constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,zn.prototype)}},$n=class extends ke{constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,$n.prototype)}};var gu=async(e,t)=>{let s=Nu,n;return n=Du({...BC(e,t),Action:"AssumeRole",Version:"2011-06-15"}),Au(t,s,"/",void 0,n)};var Iu=async(e,t)=>{let s=Nu,n;return n=Du({...WC(e,t),Action:"AssumeRoleWithWebIdentity",Version:"2011-06-15"}),Au(t,s,"/",void 0,n)};var Su=async(e,t)=>{if(e.statusCode>=300)return FC(e,t);let s=await yc(e.body,t),n={};n=KC(s.AssumeRoleResult,t);let r={$metadata:Wt(e),...n};return Promise.resolve(r)},FC=async(e,t)=>{let s={...e,body:await Ou(e.body,t)},n=Mu(e,s.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Cu(s,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Tu(s,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await bu(s,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await _u(s,t);default:let r=s.body;dt({output:e,parsedBody:r.Error,exceptionCtor:ke,errorCode:n})}};var xu=async(e,t)=>{if(e.statusCode>=300)return zC(e,t);let s=await yc(e.body,t),n={};n=JC(s.AssumeRoleWithWebIdentityResult,t);let r={$metadata:Wt(e),...n};return Promise.resolve(r)},zC=async(e,t)=>{let s={...e,body:await Ou(e.body,t)},n=Mu(e,s.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Cu(s,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await $C(s,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await UC(s,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await VC(s,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Tu(s,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await bu(s,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await _u(s,t);default:let r=s.body;dt({output:e,parsedBody:r.Error,exceptionCtor:ke,errorCode:n})}};var Cu=async(e,t)=>{let s=e.body,n=YC(s.Error,t),r=new Dn({$metadata:Wt(e),...n});return x(r,s)},$C=async(e,t)=>{let s=e.body,n=QC(s.Error,t),r=new $n({$metadata:Wt(e),...n});return x(r,s)},UC=async(e,t)=>{let s=e.body,n=XC(s.Error,t),r=new Fn({$metadata:Wt(e),...n});return x(r,s)};var VC=async(e,t)=>{let s=e.body,n=ZC(s.Error,t),r=new zn({$metadata:Wt(e),...n});return x(r,s)},Tu=async(e,t)=>{let s=e.body,n=eT(s.Error,t),r=new Mn({$metadata:Wt(e),...n});return x(r,s)},bu=async(e,t)=>{let s=e.body,n=tT(s.Error,t),r=new kn({$metadata:Wt(e),...n});return x(r,s)},_u=async(e,t)=>{let s=e.body,n=sT(s.Error,t),r=new Ln({$metadata:Wt(e),...n});return x(r,s)},BC=(e,t)=>{var n,r,o;let s={};if(e.RoleArn!=null&&(s.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(s.RoleSessionName=e.RoleSessionName),e.PolicyArns!=null){let a=Ru(e.PolicyArns,t);((n=e.PolicyArns)==null?void 0:n.length)===0&&(s.PolicyArns=[]),Object.entries(a).forEach(([i,c])=>{let d=`PolicyArns.${i}`;s[d]=c})}if(e.Policy!=null&&(s.Policy=e.Policy),e.DurationSeconds!=null&&(s.DurationSeconds=e.DurationSeconds),e.Tags!=null){let a=HC(e.Tags,t);((r=e.Tags)==null?void 0:r.length)===0&&(s.Tags=[]),Object.entries(a).forEach(([i,c])=>{let d=`Tags.${i}`;s[d]=c})}if(e.TransitiveTagKeys!=null){let a=jC(e.TransitiveTagKeys,t);((o=e.TransitiveTagKeys)==null?void 0:o.length)===0&&(s.TransitiveTagKeys=[]),Object.entries(a).forEach(([i,c])=>{let d=`TransitiveTagKeys.${i}`;s[d]=c})}return e.ExternalId!=null&&(s.ExternalId=e.ExternalId),e.SerialNumber!=null&&(s.SerialNumber=e.SerialNumber),e.TokenCode!=null&&(s.TokenCode=e.TokenCode),e.SourceIdentity!=null&&(s.SourceIdentity=e.SourceIdentity),s};var WC=(e,t)=>{var n;let s={};if(e.RoleArn!=null&&(s.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(s.RoleSessionName=e.RoleSessionName),e.WebIdentityToken!=null&&(s.WebIdentityToken=e.WebIdentityToken),e.ProviderId!=null&&(s.ProviderId=e.ProviderId),e.PolicyArns!=null){let r=Ru(e.PolicyArns,t);((n=e.PolicyArns)==null?void 0:n.length)===0&&(s.PolicyArns=[]),Object.entries(r).forEach(([o,a])=>{let i=`PolicyArns.${o}`;s[i]=a})}return e.Policy!=null&&(s.Policy=e.Policy),e.DurationSeconds!=null&&(s.DurationSeconds=e.DurationSeconds),s};var Ru=(e,t)=>{let s={},n=1;for(let r of e){if(r===null)continue;let o=GC(r,t);Object.entries(o).forEach(([a,i])=>{s[`member.${n}.${a}`]=i}),n++}return s},GC=(e,t)=>{let s={};return e.arn!=null&&(s.arn=e.arn),s},qC=(e,t)=>{let s={};return e.Key!=null&&(s.Key=e.Key),e.Value!=null&&(s.Value=e.Value),s},jC=(e,t)=>{let s={},n=1;for(let r of e)r!==null&&(s[`member.${n}`]=r,n++);return s},HC=(e,t)=>{let s={},n=1;for(let r of e){if(r===null)continue;let o=qC(r,t);Object.entries(o).forEach(([a,i])=>{s[`member.${n}.${a}`]=i}),n++}return s},vu=(e,t)=>{let s={};return e.AssumedRoleId!==void 0&&(s.AssumedRoleId=f(e.AssumedRoleId)),e.Arn!==void 0&&(s.Arn=f(e.Arn)),s},KC=(e,t)=>{let s={};return e.Credentials!==void 0&&(s.Credentials=Pu(e.Credentials,t)),e.AssumedRoleUser!==void 0&&(s.AssumedRoleUser=vu(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(s.PackedPolicySize=bi(e.PackedPolicySize)),e.SourceIdentity!==void 0&&(s.SourceIdentity=f(e.SourceIdentity)),s};var JC=(e,t)=>{let s={};return e.Credentials!==void 0&&(s.Credentials=Pu(e.Credentials,t)),e.SubjectFromWebIdentityToken!==void 0&&(s.SubjectFromWebIdentityToken=f(e.SubjectFromWebIdentityToken)),e.AssumedRoleUser!==void 0&&(s.AssumedRoleUser=vu(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(s.PackedPolicySize=bi(e.PackedPolicySize)),e.Provider!==void 0&&(s.Provider=f(e.Provider)),e.Audience!==void 0&&(s.Audience=f(e.Audience)),e.SourceIdentity!==void 0&&(s.SourceIdentity=f(e.SourceIdentity)),s},Pu=(e,t)=>{let s={};return e.AccessKeyId!==void 0&&(s.AccessKeyId=f(e.AccessKeyId)),e.SecretAccessKey!==void 0&&(s.SecretAccessKey=f(e.SecretAccessKey)),e.SessionToken!==void 0&&(s.SessionToken=f(e.SessionToken)),e.Expiration!==void 0&&(s.Expiration=Me(_l(e.Expiration))),s};var YC=(e,t)=>{let s={};return e.message!==void 0&&(s.message=f(e.message)),s};var QC=(e,t)=>{let s={};return e.message!==void 0&&(s.message=f(e.message)),s},XC=(e,t)=>{let s={};return e.message!==void 0&&(s.message=f(e.message)),s};var ZC=(e,t)=>{let s={};return e.message!==void 0&&(s.message=f(e.message)),s},eT=(e,t)=>{let s={};return e.message!==void 0&&(s.message=f(e.message)),s},tT=(e,t)=>{let s={};return e.message!==void 0&&(s.message=f(e.message)),s},sT=(e,t)=>{let s={};return e.message!==void 0&&(s.message=f(e.message)),s},Wt=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),nT=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),rT=(e,t)=>nT(e,t).then(s=>t.utf8Encoder(s)),Au=async(e,t,s,n,r)=>{let{hostname:o,protocol:a="https",port:i,path:c}=await e.endpoint(),d={protocol:a,hostname:o,port:i,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+s:c+s,headers:t};return n!==void 0&&(d.hostname=n),r!==void 0&&(d.body=r),new b(d)},Nu={"content-type":"application/x-www-form-urlencoded"},yc=(e,t)=>rT(e,t).then(s=>{if(s.length){let n=new Eu.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let r=n.parse(s),o="#text",a=Object.keys(r)[0],i=r[a];return i[o]&&(i[a]=i[o],delete i[o]),_i(i)}return{}}),Ou=async(e,t)=>{let s=await yc(e,t);return s.Error&&(s.Error.message=s.Error.message??s.Error.Message),s},Du=e=>Object.entries(e).map(([t,s])=>Ho(t)+"="+Ho(s)).join("&"),Mu=(e,t)=>{var s;if(((s=t.Error)==null?void 0:s.Code)!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"};var Un=class extends ce{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,s,n){this.middlewareStack.use(L(s,this.serialize,this.deserialize)),this.middlewareStack.use(F(s,Un.getEndpointParameterInstructions())),this.middlewareStack.use(ls(s));let r=t.concat(this.middlewareStack),{logger:o}=s,c={logger:o,clientName:"STSClient",commandName:"AssumeRoleCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=s;return r.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,s){return gu(t,s)}deserialize(t,s){return Su(t,s)}};var Vn=class extends ce{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,s,n){this.middlewareStack.use(L(s,this.serialize,this.deserialize)),this.middlewareStack.use(F(s,Vn.getEndpointParameterInstructions()));let r=t.concat(this.middlewareStack),{logger:o}=s,c={logger:o,clientName:"STSClient",commandName:"AssumeRoleWithWebIdentityCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=s;return r.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,s){return Iu(t,s)}deserialize(t,s){return xu(t,s)}};var Ea=(e,{stsClientCtor:t})=>An({...e,stsClientCtor:t});var ku=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"});var Lu={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.312.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"yarn test:unit","test:unit":"jest"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/credential-provider-node":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-sdk-sts":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-signing":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.310.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.310.0","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.310.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.310.0","@aws-sdk/util-defaults-mode-node":"3.310.0","@aws-sdk/util-endpoints":"3.310.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0","fast-xml-parser":"4.1.2",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}};var Fu="us-east-1",zu=e=>typeof e!="function"?e===void 0?Fu:e:async()=>{try{return await e()}catch{return Fu}},pc=(e,t)=>{let s,n;return async(r,o)=>{if(n=r,!s){let{logger:i,region:c,requestHandler:d}=e;s=new t({logger:i,credentialDefaultProvider:()=>async()=>n,region:zu(c||e.region),...d?{requestHandler:d}:{}})}let{Credentials:a}=await s.send(new Un(o));if(!a||!a.AccessKeyId||!a.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);return{accessKeyId:a.AccessKeyId,secretAccessKey:a.SecretAccessKey,sessionToken:a.SessionToken,expiration:a.Expiration}}},hc=(e,t)=>{let s;return async n=>{if(!s){let{logger:o,region:a,requestHandler:i}=e;s=new t({logger:o,region:zu(a||e.region),...i?{requestHandler:i}:{}})}let{Credentials:r}=await s.send(new Vn(n));if(!r||!r.AccessKeyId||!r.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);return{accessKeyId:r.AccessKeyId,secretAccessKey:r.SecretAccessKey,sessionToken:r.SessionToken,expiration:r.Expiration}}},$u=e=>t=>e({roleAssumer:pc(t,t.stsClientCtor),roleAssumerWithWebIdentity:hc(t,t.stsClientCtor),...t});var aT="AWS_ACCESS_KEY_ID",iT="AWS_SECRET_ACCESS_KEY",cT="AWS_SESSION_TOKEN",dT="AWS_CREDENTIAL_EXPIRATION",fs=()=>async()=>{let e=process.env[aT],t=process.env[iT],s=process.env[cT],n=process.env[dT];if(e&&t)return{accessKeyId:e,secretAccessKey:t,...s&&{sessionToken:s},...n&&{expiration:new Date(n)}};throw new h("Unable to find environment variable credentials.")};var Uu=require("os"),Vu=require("path"),Bn=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:s,HOMEDRIVE:n=`C:${Vu.sep}`}=process.env;return e||t||(s?`${n}${s}`:(0,Uu.homedir)())};var ao="AWS_PROFILE",lT="default",H=e=>e.profile||process.env[ao]||lT;var Bu=require("crypto"),Wu=require("path");var Wn=e=>{let s=(0,Bu.createHash)("sha1").update(e).digest("hex");return(0,Wu.join)(Bn(),".aws","sso","cache",`${s}.json`)};var Gu=require("fs");var{readFile:mT}=Gu.promises,ys=async e=>{let t=Wn(e),s=await mT(t,"utf8");return JSON.parse(s)};var qu=require("path");var uT="AWS_CONFIG_FILE",ga=()=>process.env[uT]||(0,qu.join)(Bn(),".aws","config");var ju=require("path");var fT="AWS_SHARED_CREDENTIALS_FILE",Hu=()=>process.env[fT]||(0,ju.join)(Bn(),".aws","credentials");var Ku=/^profile\s(["'])?([^\1]+)\1$/,Ju=e=>Object.entries(e).filter(([t])=>Ku.test(t)).reduce((t,[s,n])=>({...t,[Ku.exec(s)[2]]:n}),{...e.default&&{default:e.default}});var yT=["__proto__","profile __proto__"],io=e=>{let t={},s;for(let n of e.split(/\r?\n/))if(n=n.split(/(^|\s)[;#]/)[0].trim(),n[0]==="["&&n[n.length-1]==="]"){if(s=n.substring(1,n.length-1),yT.includes(s))throw new Error(`Found invalid profile name "${s}"`)}else if(s){let o=n.indexOf("="),a=0,i=n.length-1;if(o!==-1&&o!==a&&o!==i){let[d,l]=[n.substring(0,o).trim(),n.substring(o+1).trim()];t[s]=t[s]||{},t[s][d]=l}}return t};var Yu=require("fs"),{readFile:pT}=Yu.promises,wc={},co=(e,t)=>((!wc[e]||t!=null&&t.ignoreCache)&&(wc[e]=pT(e,"utf8")),wc[e]);var Qu=()=>({}),Ia=async(e={})=>{let{filepath:t=Hu(),configFilepath:s=ga()}=e,n=await Promise.all([co(s,{ignoreCache:e.ignoreCache}).then(io).then(Ju).catch(Qu),co(t,{ignoreCache:e.ignoreCache}).then(io).catch(Qu)]);return{configFile:n[0],credentialsFile:n[1]}};var Xu=/^sso-session\s(["'])?([^\1]+)\1$/,Zu=e=>Object.entries(e).filter(([t])=>Xu.test(t)).reduce((t,[s,n])=>({...t,[Xu.exec(s)[2]]:n}),{});var hT=()=>({}),ps=async(e={})=>co(e.configFilepath??ga()).then(io).then(Zu).catch(hT);var ef=(...e)=>{let t={};for(let s of e)for(let[n,r]of Object.entries(s))t[n]!==void 0?Object.assign(t[n],r):t[n]=r;return t};var Ve=async e=>{let t=await Ia(e);return ef(t.configFile,t.credentialsFile)};var rf=require("url");var tf=require("buffer"),sf=require("http");function lt(e){return new Promise((t,s)=>{var r;let n=(0,sf.request)({method:"GET",...e,hostname:(r=e.hostname)==null?void 0:r.replace(/^\[(.+)\]$/,"$1")});n.on("error",o=>{s(Object.assign(new $e("Unable to connect to instance metadata service"),o)),n.destroy()}),n.on("timeout",()=>{s(new $e("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",o=>{let{statusCode:a=400}=o;(a<200||300<=a)&&(s(Object.assign(new $e("Error response received from instance metadata service"),{statusCode:a})),n.destroy());let i=[];o.on("data",c=>{i.push(c)}),o.on("end",()=>{t(tf.Buffer.concat(i)),n.destroy()})}),n.end()})}var Sa=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",xa=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)});var Ca=({maxRetries:e=0,timeout:t=1e3})=>({maxRetries:e,timeout:t});var lo=(e,t)=>{let s=e();for(let n=0;n<t;n++)s=s.catch(e);return s};var Fs="AWS_CONTAINER_CREDENTIALS_FULL_URI",zs="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",nf="AWS_CONTAINER_AUTHORIZATION_TOKEN",hs=(e={})=>{let{timeout:t,maxRetries:s}=Ca(e);return()=>lo(async()=>{let n=await ST(),r=JSON.parse(await wT(t,n));if(!Sa(r))throw new h("Invalid response received from instance metadata service.");return xa(r)},s)},wT=async(e,t)=>(process.env[nf]&&(t.headers={...t.headers,Authorization:process.env[nf]}),(await lt({...t,timeout:e})).toString()),ET="169.254.170.2",gT={localhost:!0,"127.0.0.1":!0},IT={"http:":!0,"https:":!0},ST=async()=>{if(process.env[zs])return{hostname:ET,path:process.env[zs]};if(process.env[Fs]){let e=(0,rf.parse)(process.env[Fs]);if(!e.hostname||!(e.hostname in gT))throw new h(`${e.hostname} is not a valid container metadata service hostname`,!1);if(!e.protocol||!(e.protocol in IT))throw new h(`${e.protocol} is not a valid container metadata service protocol`,!1);return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new h(`The container metadata credential provider cannot be used unless the ${zs} or ${Fs} environment variable is set`,!1)};var of=e=>async()=>{try{let t=e(process.env);if(t===void 0)throw new Error;return t}catch(t){throw new h(t.message||`Cannot load config from environment variables with getter: ${e}`)}};var af=(e,{preferredFile:t="config",...s}={})=>async()=>{let n=H(s),{configFile:r,credentialsFile:o}=await Ia(s),a=o[n]||{},i=r[n]||{},c=t==="config"?{...a,...i}:{...i,...a};try{let d=e(c);if(d===void 0)throw new Error;return d}catch(d){throw new h(d.message||`Cannot load config for profile ${n} in SDK configuration files with getter: ${e}`)}};var xT=e=>typeof e=="function",cf=e=>xT(e)?async()=>await e():tm(e);var I=({environmentVariableSelector:e,configFileSelector:t,default:s},n={})=>Ye(vn(of(e),af(t,n),cf(s)));var mo;(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(mo||(mo={}));var CT="AWS_EC2_METADATA_SERVICE_ENDPOINT",TT="ec2_metadata_service_endpoint",df={environmentVariableSelector:e=>e[CT],configFileSelector:e=>e[TT],default:void 0};var ws;(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(ws||(ws={}));var bT="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",_T="ec2_metadata_service_endpoint_mode",lf={environmentVariableSelector:e=>e[bT],configFileSelector:e=>e[_T],default:ws.IPv4};var $s=async()=>V(await RT()||await vT()),RT=async()=>I(df)(),vT=async()=>{let e=await I(lf)();switch(e){case ws.IPv4:return mo.IPv4;case ws.IPv6:return mo.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(ws)}`)}};var PT="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",Ec=(e,t)=>{let s=300+Math.floor(Math.random()*300),n=new Date(Date.now()+s*1e3);t.warn("Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(newExpiration)}.\nFor more information, please visit: "+PT);let r=e.originalExpiration??e.expiration;return{...e,...r?{originalExpiration:r}:{},expiration:n}};var mf=(e,t={})=>{let s=(t==null?void 0:t.logger)||console,n;return async()=>{let r;try{r=await e(),r.expiration&&r.expiration.getTime()<Date.now()&&(r=Ec(r,s))}catch(o){if(n)s.warn("Credential renew failed: ",o),r=Ec(n,s);else throw o}return n=r,r}};var uf="/latest/meta-data/iam/security-credentials/",AT="/latest/api/token",Es=(e={})=>mf(NT(e),{logger:e.logger}),NT=e=>{let t=!1,{timeout:s,maxRetries:n}=Ca(e),r=async(o,a)=>{let i=(await lo(async()=>{let c;try{c=await DT(a)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},o)).trim();return lo(async()=>{let c;try{c=await MT(i,a)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},o)};return async()=>{let o=await $s();if(t)return r(n,{...o,timeout:s});{let a;try{a=(await OT({...o,timeout:s})).toString()}catch(i){if((i==null?void 0:i.statusCode)===400)throw Object.assign(i,{message:"EC2 Metadata token request returned error"});return(i.message==="TimeoutError"||[403,404,405].includes(i.statusCode))&&(t=!0),r(n,{...o,timeout:s})}return r(n,{...o,headers:{"x-aws-ec2-metadata-token":a},timeout:s})}}},OT=async e=>lt({...e,path:AT,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),DT=async e=>(await lt({...e,path:uf})).toString(),MT=async(e,t)=>{let s=JSON.parse((await lt({...t,path:uf+e})).toString());if(!Sa(s))throw new h("Invalid response received from instance metadata service.");return xa(s)};var ff=(e,t)=>{let s={EcsContainer:hs,Ec2InstanceMetadata:Es,Environment:fs};if(e in s)return s[e]();throw new h(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`)};var yf=e=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(kT(e)||LT(e)),kT=e=>typeof e.source_profile=="string"&&typeof e.credential_source>"u",LT=e=>typeof e.credential_source=="string"&&typeof e.source_profile>"u",pf=async(e,t,s,n={})=>{let r=t[e];if(!s.roleAssumer)throw new h(`Profile ${e} requires a role to be assumed, but no role assumption callback was provided.`,!1);let{source_profile:o}=r;if(o&&o in n)throw new h(`Detected a cycle attempting to resolve credentials for profile ${H(s)}. Profiles visited: `+Object.keys(n).join(", "),!1);let a=o?Ta(o,t,s,{...n,[o]:!0}):ff(r.credential_source,e)(),i={RoleArn:r.role_arn,RoleSessionName:r.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:r.external_id},{mfa_serial:c}=r;if(c){if(!s.mfaCodeProvider)throw new h(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,!1);i.SerialNumber=c,i.TokenCode=await s.mfaCodeProvider(c)}let d=await a;return s.roleAssumer(d,i)};var wf=require("child_process"),Ef=require("util");var hf=(e,t)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let s=new Date;if(new Date(t.Expiration)<s)throw Error(`Profile ${e} credential_process returned expired credentials.`)}return{accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)}}};var gf=async(e,t)=>{let s=t[e];if(t[e]){let n=s.credential_process;if(n!==void 0){let r=(0,Ef.promisify)(wf.exec);try{let{stdout:o}=await r(n),a;try{a=JSON.parse(o.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return hf(e,a)}catch(o){throw new h(o.message)}}else throw new h(`Profile ${e} did not contain credential_process.`)}else throw new h(`Profile ${e} could not be found in shared credentials file.`)};var gs=(e={})=>async()=>{let t=await Ve(e);return gf(H(e),t)};var If=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",Sf=async(e,t)=>gs({...e,profile:t})();var uo=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string");var mt=class extends Je{constructor(t){super(t),Object.setPrototypeOf(this,mt.prototype)}};var Gn=class extends mt{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,Gn.prototype)}},qn=class extends mt{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,qn.prototype)}},jn=class extends mt{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,jn.prototype)}},Hn=class extends mt{constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,Hn.prototype)}},xf=e=>({...e,...e.accessToken&&{accessToken:as}}),FT=e=>({...e,...e.secretAccessKey&&{secretAccessKey:as},...e.sessionToken&&{sessionToken:as}}),Cf=e=>({...e,...e.roleCredentials&&{roleCredentials:FT(e.roleCredentials)}});var Tf=async(e,t)=>{let{hostname:s,protocol:n="https",port:r,path:o}=await t.endpoint(),a=Us({},jT,{"x-amz-sso_bearer_token":e.accessToken}),i=`${o!=null&&o.endsWith("/")?o.slice(0,-1):o||""}/federation/credentials`,c=Us({role_name:[,Me(e.roleName,"roleName")],account_id:[,Me(e.accountId,"accountId")]}),d;return new b({protocol:n,hostname:s,port:r,method:"GET",headers:a,path:i,query:c,body:d})};var bf=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return zT(e,t);let s=Us({$metadata:fo(e)}),n=Me(jo(await _f(e.body,t)),"body");return n.roleCredentials!=null&&(s.roleCredentials=WT(n.roleCredentials,t)),s},zT=async(e,t)=>{let s={...e,body:await HT(e.body,t)},n=KT(e,s.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await $T(s,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await UT(s,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await VT(s,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await BT(s,t);default:let r=s.body;dt({output:e,parsedBody:r,exceptionCtor:mt,errorCode:n})}};var Us=Zr,$T=async(e,t)=>{let s=Us({}),n=e.body;n.message!=null&&(s.message=f(n.message));let r=new Gn({$metadata:fo(e),...s});return x(r,e.body)},UT=async(e,t)=>{let s=Us({}),n=e.body;n.message!=null&&(s.message=f(n.message));let r=new qn({$metadata:fo(e),...s});return x(r,e.body)},VT=async(e,t)=>{let s=Us({}),n=e.body;n.message!=null&&(s.message=f(n.message));let r=new jn({$metadata:fo(e),...s});return x(r,e.body)},BT=async(e,t)=>{let s=Us({}),n=e.body;n.message!=null&&(s.message=f(n.message));let r=new Hn({$metadata:fo(e),...s});return x(r,e.body)};var WT=(e,t)=>({accessKeyId:f(e.accessKeyId),expiration:Yr(e.expiration),secretAccessKey:f(e.secretAccessKey),sessionToken:f(e.sessionToken)});var fo=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),GT=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),qT=(e,t)=>GT(e,t).then(s=>t.utf8Encoder(s)),jT=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),_f=(e,t)=>qT(e,t).then(s=>s.length?JSON.parse(s):{}),HT=async(e,t)=>{let s=await _f(e,t);return s.message=s.message??s.Message,s},KT=(e,t)=>{let s=(o,a)=>Object.keys(o).find(i=>i.toLowerCase()===a.toLowerCase()),n=o=>{let a=o;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},r=s(e.headers,"x-amzn-errortype");if(r!==void 0)return n(e.headers[r]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)};var Kn=class extends ce{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,s,n){this.middlewareStack.use(L(s,this.serialize,this.deserialize)),this.middlewareStack.use(F(s,Kn.getEndpointParameterInstructions()));let r=t.concat(this.middlewareStack),{logger:o}=s,c={logger:o,clientName:"SSOClient",commandName:"GetRoleCredentialsCommand",inputFilterSensitiveLog:xf,outputFilterSensitiveLog:Cf},{requestHandler:d}=s;return r.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,s){return Tf(t,s)}deserialize(t,s){return bf(t,s)}};var Rf=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"});var vf={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.310.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.310.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.310.0","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.310.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.310.0","@aws-sdk/util-defaults-mode-node":"3.310.0","@aws-sdk/util-endpoints":"3.310.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}};var Af=require("buffer"),ba=require("crypto"),Q=class{constructor(t,s){this.algorithmIdentifier=t,this.secret=s,this.reset()}update(t,s){this.hash.update(Ct(Pf(t,s)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,ba.createHmac)(this.algorithmIdentifier,Pf(this.secret)):(0,ba.createHash)(this.algorithmIdentifier)}};function Pf(e,t){return Af.Buffer.isBuffer(e)?e:typeof e=="string"?Pn(e,t):ArrayBuffer.isView(e)?ks(e.buffer,e.byteOffset,e.byteLength):ks(e)}function gc(e){let t=[];for(let s of Object.keys(e).sort()){let n=e[s];if(s=Tt(s),Array.isArray(n))for(let r=0,o=n.length;r<o;r++)t.push(`${s}=${Tt(n[r])}`);else{let r=s;(n||typeof n=="string")&&(r+=`=${Tt(n)}`),t.push(r)}}return t.join("&")}var _a=require("http"),Ra=require("https");var Nf=["ECONNRESET","EPIPE","ETIMEDOUT"];var Ic=e=>{let t={};for(let s of Object.keys(e)){let n=e[s];t[s]=Array.isArray(n)?n.join(","):n}return t};var Df=require("stream");function Sc(e,t){(t.headers.Expect||t.headers.expect)==="100-continue"?e.on("continue",()=>{Of(e,t.body)}):Of(e,t.body)}function Of(e,t){t instanceof Df.Readable?t.pipe(e):t?e.end(Buffer.from(t)):e.end()}var Mf=0,X=class{constructor(t){this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((s,n)=>{typeof t=="function"?t().then(r=>{s(this.resolveDefaultConfig(r))}).catch(n):s(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{requestTimeout:s,connectionTimeout:n,socketTimeout:r,httpAgent:o,httpsAgent:a}=t||{},i=!0,c=50;return{connectionTimeout:n,socketTimeout:r,requestTimeout:s??n??r??Mf,httpAgent:o||new _a.Agent({keepAlive:i,maxSockets:c}),httpsAgent:a||new Ra.Agent({keepAlive:i,maxSockets:c})}}destroy(){var t,s,n,r;(s=(t=this.config)==null?void 0:t.httpAgent)==null||s.destroy(),(r=(n=this.config)==null?void 0:n.httpsAgent)==null||r.destroy()}async handle(t,{abortSignal:s}={}){return this.config||(this.config=await this.configProvider),new Promise((n,r)=>{var m;if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(s!=null&&s.aborted){let u=new Error("Request aborted");u.name="AbortError",r(u);return}let o=t.protocol==="https:",a=gc(t.query||{}),i={headers:t.headers,host:t.hostname,method:t.method,path:a?`${t.path}?${a}`:t.path,port:t.port,agent:o?this.config.httpsAgent:this.config.httpAgent},d=(o?Ra.request:_a.request)(i,u=>{let y=new St({statusCode:u.statusCode||-1,headers:Ic(u.headers),body:u});n({response:y})});d.on("error",u=>{Nf.includes(u.code)?r(Object.assign(u,{name:"TimeoutError"})):r(u)});let l=((m=this.config)==null?void 0:m.requestTimeout)??Mf;d.setTimeout(l,()=>{d.destroy(),r(Object.assign(new Error(`Connection timed out after ${l} ms`),{name:"TimeoutError"}))}),s&&(s.onabort=()=>{d.abort();let u=new Error("Request aborted");u.name="AbortError",r(u)}),Sc(d,t)})}};var xc=class{constructor(t){this.sessions=[],this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(s=>s!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let s of this.sessions)s===t&&(s.destroyed||s.destroy())}};var kf=require("stream"),va=class extends kf.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(t,s,n){this.bufferedBytes.push(t),n()}};var be=e=>new Promise((t,s)=>{let n=new va;e.pipe(n),e.on("error",r=>{n.end(),s(r)}),n.on("error",s),n.on("finish",function(){let r=new Uint8Array(Buffer.concat(this.bufferedBytes));t(r)})});var Pa=require("fs"),_e=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.from(e).length;if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.path=="string"||Buffer.isBuffer(e.path))return(0,Pa.lstatSync)(e.path).size;if(typeof e.fd=="number")return(0,Pa.fstatSync)(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)};var Aa=require("os"),yo=require("process");var Lf=()=>{try{return typeof require=="function"&&typeof module<"u"&&require("aws-crt")?["md/crt-avail"]:null}catch{return null}};var YT="AWS_SDK_UA_APP_ID",QT="sdk-ua-app-id",Re=({serviceId:e,clientVersion:t})=>{let s=[["aws-sdk-js",t],[`os/${(0,Aa.platform)()}`,(0,Aa.release)()],["lang/js"],["md/nodejs",`${yo.versions.node}`]],n=Lf();n&&s.push(n),e&&s.push([`api/${e}`,t]),yo.env.AWS_EXECUTION_ENV&&s.push([`exec-env/${yo.env.AWS_EXECUTION_ENV}`]);let r=I({environmentVariableSelector:a=>a[YT],configFileSelector:a=>a[QT],default:void 0})(),o;return async()=>{if(!o){let a=await r;o=a?[...s,[`app/${a}`]]:[...s]}return o}};var XT=/^[A-Za-z0-9+/]*={0,2}$/,ve=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!XT.exec(e))throw new TypeError("Invalid base64 string.");let t=Pn(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};var Pe=e=>ks(e.buffer,e.byteOffset,e.byteLength).toString("base64");var Gf="required",Gt="fn",qt="argv",Jn="ref",Cc="PartitionResult",bt="tree",po="error",ho="endpoint",Ff={[Gf]:!1,type:"String"},zf={[Gf]:!0,default:!1,type:"Boolean"},qf={[Jn]:"Endpoint"},jf={[Gt]:"booleanEquals",[qt]:[{[Jn]:"UseFIPS"},!0]},Hf={[Gt]:"booleanEquals",[qt]:[{[Jn]:"UseDualStack"},!0]},_t={},$f={[Gt]:"booleanEquals",[qt]:[!0,{[Gt]:"getAttr",[qt]:[{[Jn]:Cc},"supportsFIPS"]}]},Uf={[Gt]:"booleanEquals",[qt]:[!0,{[Gt]:"getAttr",[qt]:[{[Jn]:Cc},"supportsDualStack"]}]},Vf=[qf],Bf=[jf],Wf=[Hf],ZT={version:"1.0",parameters:{Region:Ff,UseDualStack:zf,UseFIPS:zf,Endpoint:Ff},rules:[{conditions:[{[Gt]:"aws.partition",[qt]:[{[Jn]:"Region"}],assign:Cc}],type:bt,rules:[{conditions:[{[Gt]:"isSet",[qt]:Vf},{[Gt]:"parseURL",[qt]:Vf,assign:"url"}],type:bt,rules:[{conditions:Bf,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:po},{type:bt,rules:[{conditions:Wf,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:po},{endpoint:{url:qf,properties:_t,headers:_t},type:ho}]}]},{conditions:[jf,Hf],type:bt,rules:[{conditions:[$f,Uf],type:bt,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:_t,headers:_t},type:ho}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:po}]},{conditions:Bf,type:bt,rules:[{conditions:[$f],type:bt,rules:[{type:bt,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:_t,headers:_t},type:ho}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:po}]},{conditions:Wf,type:bt,rules:[{conditions:[Uf],type:bt,rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:_t,headers:_t},type:ho}]},{error:"DualStack is enabled but this partition does not support DualStack",type:po}]},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:_t,headers:_t},type:ho}]}]},Kf=ZT;var Jf=(e,t={})=>Ce(Kf,{endpointParams:e,logger:t.logger});var Yf=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??ve,base64Encoder:(e==null?void 0:e.base64Encoder)??Pe,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Jf,logger:(e==null?void 0:e.logger)??new wt,serviceId:(e==null?void 0:e.serviceId)??"SSO",urlParser:(e==null?void 0:e.urlParser)??V,utf8Decoder:(e==null?void 0:e.utf8Decoder)??Y,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Se});var Qf="AWS_EXECUTION_ENV",Tc="AWS_REGION",bc="AWS_DEFAULT_REGION",Xf="AWS_EC2_METADATA_DISABLED",Zf=["in-region","cross-region","mobile","standard","legacy"],ey="/latest/meta-data/placement/region";var eb="AWS_DEFAULTS_MODE",tb="defaults_mode",ty={environmentVariableSelector:e=>e[eb],configFileSelector:e=>e[tb],default:"legacy"};var Is=({region:e=I(q),defaultsMode:t=I(ty)}={})=>Ye(async()=>{let s=typeof t=="function"?await t():t;switch(s==null?void 0:s.toLowerCase()){case"auto":return sb(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(s==null?void 0:s.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Zf.join(", ")}, got ${s}`)}}),sb=async e=>{if(e){let t=typeof e=="function"?await e():e,s=await nb();return s?t===s?"in-region":"cross-region":"standard"}return"standard"},nb=async()=>{if(process.env[Qf]&&(process.env[Tc]||process.env[bc]))return process.env[Tc]??process.env[bc];if(!process.env[Xf])try{let e=await $s();return(await lt({...e,path:ey})).toString()}catch{}};var sy=e=>{cs(process.version);let t=Is(e),s=()=>t().then(is),n=Yf(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??_e,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Re({serviceId:n.serviceId,clientVersion:vf.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??I(we),region:(e==null?void 0:e.region)??I(q,me),requestHandler:(e==null?void 0:e.requestHandler)??new X(s),retryMode:(e==null?void 0:e.retryMode)??I({...ge,default:async()=>(await s()).retryMode||J}),sha256:(e==null?void 0:e.sha256)??Q.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??be,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??I(de),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??I(le)}};var Na=class extends gt{constructor(t){let s=sy(t),n=Rf(s),r=ue(n),o=ie(r),a=Ee(o),i=a,c=xe(i);super(c),this.config=c,this.middlewareStack.use(Ie(this.config)),this.middlewareStack.use(fe(this.config)),this.middlewareStack.use(ye(this.config)),this.middlewareStack.use(pe(this.config)),this.middlewareStack.use(he(this.config)),this.middlewareStack.use(Te(this.config))}destroy(){super.destroy()}};var Yn="To refresh this SSO session run 'aws sso login' with the corresponding profile.";var Z=class extends Je{constructor(t){super(t),Object.setPrototypeOf(this,Z.prototype)}};var Qn=class extends Z{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,Qn.prototype),this.error=t.error,this.error_description=t.error_description}},Xn=class extends Z{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,Xn.prototype),this.error=t.error,this.error_description=t.error_description}},Zn=class extends Z{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,Zn.prototype),this.error=t.error,this.error_description=t.error_description}},er=class extends Z{constructor(t){super({name:"InternalServerException",$fault:"server",...t}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,er.prototype),this.error=t.error,this.error_description=t.error_description}},tr=class extends Z{constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,tr.prototype),this.error=t.error,this.error_description=t.error_description}},sr=class extends Z{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,sr.prototype),this.error=t.error,this.error_description=t.error_description}},nr=class extends Z{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,nr.prototype),this.error=t.error,this.error_description=t.error_description}},rr=class extends Z{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,rr.prototype),this.error=t.error,this.error_description=t.error_description}},or=class extends Z{constructor(t){super({name:"SlowDownException",$fault:"client",...t}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,or.prototype),this.error=t.error,this.error_description=t.error_description}},ar=class extends Z{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,ar.prototype),this.error=t.error,this.error_description=t.error_description}},ir=class extends Z{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,ir.prototype),this.error=t.error,this.error_description=t.error_description}};var ny=async(e,t)=>{let{hostname:s,protocol:n="https",port:r,path:o}=await t.endpoint(),a={"content-type":"application/json"},i=`${o!=null&&o.endsWith("/")?o.slice(0,-1):o||""}/token`,c;return c=JSON.stringify({...e.clientId!=null&&{clientId:e.clientId},...e.clientSecret!=null&&{clientSecret:e.clientSecret},...e.code!=null&&{code:e.code},...e.deviceCode!=null&&{deviceCode:e.deviceCode},...e.grantType!=null&&{grantType:e.grantType},...e.redirectUri!=null&&{redirectUri:e.redirectUri},...e.refreshToken!=null&&{refreshToken:e.refreshToken},...e.scope!=null&&{scope:hb(e.scope,t)}}),new b({protocol:n,hostname:s,port:r,method:"POST",headers:a,path:i,body:c})};var ry=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return rb(e,t);let s=Xe({$metadata:Ze(e)}),n=Me(jo(await oy(e.body,t)),"body");return n.accessToken!=null&&(s.accessToken=f(n.accessToken)),n.expiresIn!=null&&(s.expiresIn=Ke(n.expiresIn)),n.idToken!=null&&(s.idToken=f(n.idToken)),n.refreshToken!=null&&(s.refreshToken=f(n.refreshToken)),n.tokenType!=null&&(s.tokenType=f(n.tokenType)),s},rb=async(e,t)=>{let s={...e,body:await gb(e.body,t)},n=Ib(e,s.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await ob(s,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await ab(s,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await ib(s,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await cb(s,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await db(s,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await lb(s,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await mb(s,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await ub(s,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await fb(s,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await yb(s,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await pb(s,t);default:let r=s.body;dt({output:e,parsedBody:r,exceptionCtor:Z,errorCode:n})}};var Xe=Zr,ob=async(e,t)=>{let s=Xe({}),n=e.body;n.error!=null&&(s.error=f(n.error)),n.error_description!=null&&(s.error_description=f(n.error_description));let r=new Qn({$metadata:Ze(e),...s});return x(r,e.body)},ab=async(e,t)=>{let s=Xe({}),n=e.body;n.error!=null&&(s.error=f(n.error)),n.error_description!=null&&(s.error_description=f(n.error_description));let r=new Xn({$metadata:Ze(e),...s});return x(r,e.body)},ib=async(e,t)=>{let s=Xe({}),n=e.body;n.error!=null&&(s.error=f(n.error)),n.error_description!=null&&(s.error_description=f(n.error_description));let r=new Zn({$metadata:Ze(e),...s});return x(r,e.body)},cb=async(e,t)=>{let s=Xe({}),n=e.body;n.error!=null&&(s.error=f(n.error)),n.error_description!=null&&(s.error_description=f(n.error_description));let r=new er({$metadata:Ze(e),...s});return x(r,e.body)},db=async(e,t)=>{let s=Xe({}),n=e.body;n.error!=null&&(s.error=f(n.error)),n.error_description!=null&&(s.error_description=f(n.error_description));let r=new tr({$metadata:Ze(e),...s});return x(r,e.body)};var lb=async(e,t)=>{let s=Xe({}),n=e.body;n.error!=null&&(s.error=f(n.error)),n.error_description!=null&&(s.error_description=f(n.error_description));let r=new sr({$metadata:Ze(e),...s});return x(r,e.body)},mb=async(e,t)=>{let s=Xe({}),n=e.body;n.error!=null&&(s.error=f(n.error)),n.error_description!=null&&(s.error_description=f(n.error_description));let r=new nr({$metadata:Ze(e),...s});return x(r,e.body)},ub=async(e,t)=>{let s=Xe({}),n=e.body;n.error!=null&&(s.error=f(n.error)),n.error_description!=null&&(s.error_description=f(n.error_description));let r=new rr({$metadata:Ze(e),...s});return x(r,e.body)},fb=async(e,t)=>{let s=Xe({}),n=e.body;n.error!=null&&(s.error=f(n.error)),n.error_description!=null&&(s.error_description=f(n.error_description));let r=new or({$metadata:Ze(e),...s});return x(r,e.body)},yb=async(e,t)=>{let s=Xe({}),n=e.body;n.error!=null&&(s.error=f(n.error)),n.error_description!=null&&(s.error_description=f(n.error_description));let r=new ar({$metadata:Ze(e),...s});return x(r,e.body)},pb=async(e,t)=>{let s=Xe({}),n=e.body;n.error!=null&&(s.error=f(n.error)),n.error_description!=null&&(s.error_description=f(n.error_description));let r=new ir({$metadata:Ze(e),...s});return x(r,e.body)},hb=(e,t)=>e.filter(s=>s!=null).map(s=>s),Ze=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),wb=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),Eb=(e,t)=>wb(e,t).then(s=>t.utf8Encoder(s));var oy=(e,t)=>Eb(e,t).then(s=>s.length?JSON.parse(s):{}),gb=async(e,t)=>{let s=await oy(e,t);return s.message=s.message??s.Message,s},Ib=(e,t)=>{let s=(o,a)=>Object.keys(o).find(i=>i.toLowerCase()===a.toLowerCase()),n=o=>{let a=o;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},r=s(e.headers,"x-amzn-errortype");if(r!==void 0)return n(e.headers[r]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)};var cr=class extends ce{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,s,n){this.middlewareStack.use(L(s,this.serialize,this.deserialize)),this.middlewareStack.use(F(s,cr.getEndpointParameterInstructions()));let r=t.concat(this.middlewareStack),{logger:o}=s,c={logger:o,clientName:"SSOOIDCClient",commandName:"CreateTokenCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=s;return r.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,s){return ny(t,s)}deserialize(t,s){return ry(t,s)}};var ay=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssooidc"});var iy={name:"@aws-sdk/client-sso-oidc",description:"AWS SDK for JavaScript Sso Oidc Client for Node.js, Browser and React Native",version:"3.310.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso-oidc"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.310.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.310.0","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.310.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.310.0","@aws-sdk/util-defaults-mode-node":"3.310.0","@aws-sdk/util-endpoints":"3.310.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso-oidc",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso-oidc"}};var py="required",jt="fn",Ht="argv",dr="ref",_c="PartitionResult",Rt="tree",wo="error",Eo="endpoint",cy={[py]:!1,type:"String"},dy={[py]:!0,default:!1,type:"Boolean"},hy={[dr]:"Endpoint"},wy={[jt]:"booleanEquals",[Ht]:[{[dr]:"UseFIPS"},!0]},Ey={[jt]:"booleanEquals",[Ht]:[{[dr]:"UseDualStack"},!0]},vt={},ly={[jt]:"booleanEquals",[Ht]:[!0,{[jt]:"getAttr",[Ht]:[{[dr]:_c},"supportsFIPS"]}]},my={[jt]:"booleanEquals",[Ht]:[!0,{[jt]:"getAttr",[Ht]:[{[dr]:_c},"supportsDualStack"]}]},uy=[hy],fy=[wy],yy=[Ey],xb={version:"1.0",parameters:{Region:cy,UseDualStack:dy,UseFIPS:dy,Endpoint:cy},rules:[{conditions:[{[jt]:"aws.partition",[Ht]:[{[dr]:"Region"}],assign:_c}],type:Rt,rules:[{conditions:[{[jt]:"isSet",[Ht]:uy},{[jt]:"parseURL",[Ht]:uy,assign:"url"}],type:Rt,rules:[{conditions:fy,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:wo},{type:Rt,rules:[{conditions:yy,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:wo},{endpoint:{url:hy,properties:vt,headers:vt},type:Eo}]}]},{conditions:[wy,Ey],type:Rt,rules:[{conditions:[ly,my],type:Rt,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:vt,headers:vt},type:Eo}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:wo}]},{conditions:fy,type:Rt,rules:[{conditions:[ly],type:Rt,rules:[{type:Rt,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:vt,headers:vt},type:Eo}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:wo}]},{conditions:yy,type:Rt,rules:[{conditions:[my],type:Rt,rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:vt,headers:vt},type:Eo}]},{error:"DualStack is enabled but this partition does not support DualStack",type:wo}]},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:vt,headers:vt},type:Eo}]}]},gy=xb;var Iy=(e,t={})=>Ce(gy,{endpointParams:e,logger:t.logger});var Sy=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??ve,base64Encoder:(e==null?void 0:e.base64Encoder)??Pe,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Iy,logger:(e==null?void 0:e.logger)??new wt,serviceId:(e==null?void 0:e.serviceId)??"SSO OIDC",urlParser:(e==null?void 0:e.urlParser)??V,utf8Decoder:(e==null?void 0:e.utf8Decoder)??Y,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Se});var xy=e=>{cs(process.version);let t=Is(e),s=()=>t().then(is),n=Sy(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??_e,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Re({serviceId:n.serviceId,clientVersion:iy.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??I(we),region:(e==null?void 0:e.region)??I(q,me),requestHandler:(e==null?void 0:e.requestHandler)??new X(s),retryMode:(e==null?void 0:e.retryMode)??I({...ge,default:async()=>(await s()).retryMode||J}),sha256:(e==null?void 0:e.sha256)??Q.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??be,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??I(de),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??I(le)}};var Oa=class extends gt{constructor(t){let s=xy(t),n=ay(s),r=ue(n),o=ie(r),a=Ee(o),i=a,c=xe(i);super(c),this.config=c,this.middlewareStack.use(Ie(this.config)),this.middlewareStack.use(fe(this.config)),this.middlewareStack.use(ye(this.config)),this.middlewareStack.use(pe(this.config)),this.middlewareStack.use(he(this.config)),this.middlewareStack.use(Te(this.config))}destroy(){super.destroy()}};var Rc={},Cy=e=>{if(Rc[e])return Rc[e];let t=new Oa({region:e});return Rc[e]=t,t};var Ty=(e,t)=>Cy(t).send(new cr({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}));var vc=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new z(`Token is expired. ${Yn}`,!1)};var Ss=(e,t,s=!1)=>{if(typeof t>"u")throw new z(`Value not present for '${e}' in SSO Token${s?". Cannot refresh":""}. ${Yn}`,!1)};var by=require("fs"),{writeFile:Cb}=by.promises,_y=(e,t)=>{let s=Wn(e),n=JSON.stringify(t,null,2);return Cb(s,n)};var Ry=new Date(0),vy=(e={})=>async()=>{let t=await Ve(e),s=H(e),n=t[s];if(n){if(!n.sso_session)throw new z(`Profile '${s}' is missing required property 'sso_session'.`)}else throw new z(`Profile '${s}' could not be found in shared credentials file.`,!1);let r=n.sso_session,a=(await ps(e))[r];if(!a)throw new z(`Sso session '${r}' could not be found in shared credentials file.`,!1);for(let y of["sso_start_url","sso_region"])if(!a[y])throw new z(`Sso session '${r}' is missing required property '${y}'.`,!1);let i=a.sso_start_url,c=a.sso_region,d;try{d=await ys(r)}catch{throw new z(`The SSO session token associated with profile=${s} was not found or is invalid. ${Yn}`,!1)}Ss("accessToken",d.accessToken),Ss("expiresAt",d.expiresAt);let{accessToken:l,expiresAt:m}=d,u={token:l,expiration:new Date(m)};if(u.expiration.getTime()-Date.now()>3e5)return u;if(Date.now()-Ry.getTime()<30*1e3)return vc(u),u;Ss("clientId",d.clientId,!0),Ss("clientSecret",d.clientSecret,!0),Ss("refreshToken",d.refreshToken,!0);try{Ry.setTime(Date.now());let y=await Ty(d,c);Ss("accessToken",y.accessToken),Ss("expiresIn",y.expiresIn);let p=new Date(Date.now()+y.expiresIn*1e3);try{await _y(r,{...d,accessToken:y.accessToken,expiresAt:p.toISOString(),refreshToken:y.refreshToken})}catch{}return{token:y.accessToken,expiration:p}}catch{return vc(u),u}};var bb=15*60*1e3,go=!1,Pc=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:s,ssoRegion:n,ssoRoleName:r,ssoClient:o,profile:a})=>{let i,c="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let E=await vy({profile:a})();i={accessToken:E.token,expiresAt:new Date(E.expiration).toISOString()}}catch(E){throw new h(E.message,go)}else try{i=await ys(e)}catch{throw new h(`The SSO session associated with this profile is invalid. ${c}`,go)}if(new Date(i.expiresAt).getTime()-Date.now()<=bb)throw new h(`The SSO session associated with this profile has expired. ${c}`,go);let{accessToken:d}=i,l=o||new Na({region:n}),m;try{m=await l.send(new Kn({accountId:s,roleName:r,accessToken:d}))}catch(E){throw h.from(E,go)}let{roleCredentials:{accessKeyId:u,secretAccessKey:y,sessionToken:p,expiration:w}={}}=m;if(!u||!y||!p||!w)throw new h("SSO returns an invalid temporary credential.",go);return{accessKeyId:u,secretAccessKey:y,sessionToken:p,expiration:new Date(w)}};var Da=e=>{let{sso_start_url:t,sso_account_id:s,sso_region:n,sso_role_name:r}=e;if(!t||!s||!n||!r)throw new h(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,!1);return e};var Ma=(e={})=>async()=>{let{ssoStartUrl:t,ssoAccountId:s,ssoRegion:n,ssoRoleName:r,ssoClient:o,ssoSession:a}=e,i=H(e);if(!t&&!s&&!n&&!r&&!a){let d=(await Ve(e))[i];if(!d)throw new h(`Profile ${i} was not found.`);if(!uo(d))throw new h(`Profile ${i} is not configured with SSO credentials.`);if(d!=null&&d.sso_session){let E=(await ps(e))[d.sso_session],Ge=` configurations in profile ${i} and sso-session ${d.sso_session}`;if(n&&n!==E.sso_region)throw new h("Conflicting SSO region"+Ge,!1);if(t&&t!==E.sso_start_url)throw new h("Conflicting SSO start_url"+Ge,!1);d.sso_region=E.sso_region,d.sso_start_url=E.sso_start_url}let{sso_start_url:l,sso_account_id:m,sso_region:u,sso_role_name:y,sso_session:p}=Da(d);return Pc({ssoStartUrl:l,ssoSession:p,ssoAccountId:m,ssoRegion:u,ssoRoleName:y,ssoClient:o,profile:i})}else{if(!t||!s||!n||!r)throw new h('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"');return Pc({ssoStartUrl:t,ssoSession:a,ssoAccountId:s,ssoRegion:n,ssoRoleName:r,ssoClient:o,profile:i})}};var Py=e=>{let{sso_start_url:t,sso_account_id:s,sso_session:n,sso_region:r,sso_role_name:o}=Da(e);return Ma({ssoStartUrl:t,ssoAccountId:s,ssoSession:n,ssoRegion:r,ssoRoleName:o})()};var Ac=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1,Nc=e=>Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token});var Ny=require("fs");var Ay=e=>()=>{let{roleArn:t,roleSessionName:s,webIdentityToken:n,providerId:r,policyArns:o,policy:a,durationSeconds:i,roleAssumerWithWebIdentity:c}=e;if(!c)throw new h(`Role Arn '${t}' needs to be assumed with web identity, but no role assumption callback was provided.`,!1);return c({RoleArn:t,RoleSessionName:s??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:r,PolicyArns:o,Policy:a,DurationSeconds:i})};var _b="AWS_WEB_IDENTITY_TOKEN_FILE",Rb="AWS_ROLE_ARN",vb="AWS_ROLE_SESSION_NAME",xs=(e={})=>async()=>Pb(e),Pb=e=>{let t=(e==null?void 0:e.webIdentityTokenFile)??process.env[_b],s=(e==null?void 0:e.roleArn)??process.env[Rb],n=(e==null?void 0:e.roleSessionName)??process.env[vb];if(!t||!s)throw new h("Web identity configuration not specified");return Ay({...e,webIdentityToken:(0,Ny.readFileSync)(t,{encoding:"ascii"}),roleArn:s,roleSessionName:n})()};var Oy=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,Dy=async(e,t)=>xs({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity})();var Ta=async(e,t,s,n={})=>{let r=t[e];if(Object.keys(n).length>0&&Ac(r))return Nc(r);if(yf(r))return pf(e,t,s,n);if(Ac(r))return Nc(r);if(Oy(r))return Dy(r,s);if(If(r))return Sf(s,e);if(uo(r))return Py(r);throw new h(`Profile ${e} could not be found or parsed in shared credentials file.`)};var My=(e={})=>async()=>{let t=await Ve(e);return Ta(H(e),t,e)};var Ab="AWS_EC2_METADATA_DISABLED",ky=e=>process.env[zs]||process.env[Fs]?hs(e):process.env[Ab]?async()=>{throw new h("EC2 Instance Metadata Service access disabled")}:Es(e);var ka=(e={})=>Ye(vn(...e.profile||process.env[ao]?[]:[fs()],Ma(e),My(e),gs(e),xs(e),ky(e),async()=>{throw new h("Could not load credentials from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);var Gy="required",C="type",_="fn",R="argv",Cs="ref",Bs="properties",Ws="headers";var Dc="PartitionResult",et="tree",Gs="booleanEquals",ne="stringEquals",qy="sigv4",jy="us-east-1",Hy="sts",$="endpoint",Ky="https://sts.{Region}.{PartitionResult#dnsSuffix}",Io="error",Mc="getAttr",Ly={[Gy]:!1,[C]:"String"},Oc={[Gy]:!0,default:!1,[C]:"Boolean"},re={[Cs]:"Region"},Jy={[Cs]:"UseFIPS"},Yy={[Cs]:"UseDualStack"},Fy={[_]:"isSet",[R]:[{[Cs]:"Endpoint"}]},Qy={[Cs]:"Endpoint"},Ae={url:"https://sts.amazonaws.com",[Bs]:{authSchemes:[{name:qy,signingRegion:jy,signingName:Hy}]},[Ws]:{}},Kt={},zy={conditions:[{[_]:ne,[R]:[re,"aws-global"]}],[$]:Ae,[C]:$},Xy={[_]:Gs,[R]:[Jy,!0]},Zy={[_]:Gs,[R]:[Yy,!0]},$y={[_]:Gs,[R]:[!0,{[_]:Mc,[R]:[{[Cs]:Dc},"supportsFIPS"]}]},ep={[Cs]:Dc},Uy={[_]:Gs,[R]:[!0,{[_]:Mc,[R]:[ep,"supportsDualStack"]}]},Vy={url:Ky,[Bs]:{},[Ws]:{}},Nb=[Qy],By=[Xy],Wy=[Zy],Ob={version:"1.0",parameters:{Region:Ly,UseDualStack:Oc,UseFIPS:Oc,Endpoint:Ly,UseGlobalEndpoint:Oc},rules:[{conditions:[{[_]:"aws.partition",[R]:[re],assign:Dc}],[C]:et,rules:[{conditions:[{[_]:Gs,[R]:[{[Cs]:"UseGlobalEndpoint"},!0]},{[_]:Gs,[R]:[Jy,!1]},{[_]:Gs,[R]:[Yy,!1]},{[_]:"not",[R]:[Fy]}],[C]:et,rules:[{conditions:[{[_]:ne,[R]:[re,"ap-northeast-1"]}],endpoint:Ae,[C]:$},{conditions:[{[_]:ne,[R]:[re,"ap-south-1"]}],endpoint:Ae,[C]:$},{conditions:[{[_]:ne,[R]:[re,"ap-southeast-1"]}],endpoint:Ae,[C]:$},{conditions:[{[_]:ne,[R]:[re,"ap-southeast-2"]}],endpoint:Ae,[C]:$},zy,{conditions:[{[_]:ne,[R]:[re,"ca-central-1"]}],endpoint:Ae,[C]:$},{conditions:[{[_]:ne,[R]:[re,"eu-central-1"]}],endpoint:Ae,[C]:$},{conditions:[{[_]:ne,[R]:[re,"eu-north-1"]}],endpoint:Ae,[C]:$},{conditions:[{[_]:ne,[R]:[re,"eu-west-1"]}],endpoint:Ae,[C]:$},{conditions:[{[_]:ne,[R]:[re,"eu-west-2"]}],endpoint:Ae,[C]:$},{conditions:[{[_]:ne,[R]:[re,"eu-west-3"]}],endpoint:Ae,[C]:$},{conditions:[{[_]:ne,[R]:[re,"sa-east-1"]}],endpoint:Ae,[C]:$},{conditions:[{[_]:ne,[R]:[re,jy]}],endpoint:Ae,[C]:$},{conditions:[{[_]:ne,[R]:[re,"us-east-2"]}],endpoint:Ae,[C]:$},{conditions:[{[_]:ne,[R]:[re,"us-west-1"]}],endpoint:Ae,[C]:$},{conditions:[{[_]:ne,[R]:[re,"us-west-2"]}],endpoint:Ae,[C]:$},{endpoint:{url:Ky,[Bs]:{authSchemes:[{name:qy,signingRegion:"{Region}",signingName:Hy}]},[Ws]:Kt},[C]:$}]},{conditions:[Fy,{[_]:"parseURL",[R]:Nb,assign:"url"}],[C]:et,rules:[{conditions:By,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[C]:Io},{[C]:et,rules:[{conditions:Wy,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[C]:Io},{endpoint:{url:Qy,[Bs]:Kt,[Ws]:Kt},[C]:$}]}]},{conditions:[Xy,Zy],[C]:et,rules:[{conditions:[$y,Uy],[C]:et,rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[Bs]:Kt,[Ws]:Kt},[C]:$}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[C]:Io}]},{conditions:By,[C]:et,rules:[{conditions:[$y],[C]:et,rules:[{[C]:et,rules:[{conditions:[{[_]:ne,[R]:["aws-us-gov",{[_]:Mc,[R]:[ep,"name"]}]}],endpoint:Vy,[C]:$},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",[Bs]:Kt,[Ws]:Kt},[C]:$}]}]},{error:"FIPS is enabled but this partition does not support FIPS",[C]:Io}]},{conditions:Wy,[C]:et,rules:[{conditions:[Uy],[C]:et,rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",[Bs]:Kt,[Ws]:Kt},[C]:$}]},{error:"DualStack is enabled but this partition does not support DualStack",[C]:Io}]},{[C]:et,rules:[zy,{endpoint:Vy,[C]:$}]}]}]},tp=Ob;var sp=(e,t={})=>Ce(tp,{endpointParams:e,logger:t.logger});var np=e=>({apiVersion:"2011-06-15",base64Decoder:(e==null?void 0:e.base64Decoder)??ve,base64Encoder:(e==null?void 0:e.base64Encoder)??Pe,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??sp,logger:(e==null?void 0:e.logger)??new wt,serviceId:(e==null?void 0:e.serviceId)??"STS",urlParser:(e==null?void 0:e.urlParser)??V,utf8Decoder:(e==null?void 0:e.utf8Decoder)??Y,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Se});var rp=e=>{cs(process.version);let t=Is(e),s=()=>t().then(is),n=np(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??_e,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??$u(ka),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Re({serviceId:n.serviceId,clientVersion:Lu.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??I(we),region:(e==null?void 0:e.region)??I(q,me),requestHandler:(e==null?void 0:e.requestHandler)??new X(s),retryMode:(e==null?void 0:e.retryMode)??I({...ge,default:async()=>(await s()).retryMode||J}),sha256:(e==null?void 0:e.sha256)??Q.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??be,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??I(de),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??I(le)}};var qs=class extends gt{constructor(t){let s=rp(t),n=ku(s),r=ue(n),o=ie(r),a=Ee(o),i=a,c=Ea(i,{stsClientCtor:qs}),d=xe(c);super(d),this.config=d,this.middlewareStack.use(Ie(this.config)),this.middlewareStack.use(fe(this.config)),this.middlewareStack.use(ye(this.config)),this.middlewareStack.use(pe(this.config)),this.middlewareStack.use(he(this.config)),this.middlewareStack.use(Te(this.config))}destroy(){super.destroy()}};var op=(e,t)=>t?class extends e{constructor(n){super(n);for(let r of t)this.middlewareStack.use(r)}}:e,Db=(e={},t)=>pc(e,op(qs,t)),Mb=(e={},t)=>hc(e,op(qs,t)),ap=e=>t=>e({roleAssumer:Db(t),roleAssumerWithWebIdentity:Mb(t),...t});var hp="required",ut="fn",ft="argv",ur="ref",ip="isSet",Le="tree",lr="error",mr="endpoint",kc="PartitionResult",Lc="getAttr",cp={[hp]:!1,type:"String"},dp={[hp]:!0,default:!1,type:"Boolean"},lp={[ur]:"Endpoint"},wp={[ut]:"booleanEquals",[ft]:[{[ur]:"UseFIPS"},!0]},Ep={[ut]:"booleanEquals",[ft]:[{[ur]:"UseDualStack"},!0]},tt={},mp={[ut]:"booleanEquals",[ft]:[!0,{[ut]:Lc,[ft]:[{[ur]:kc},"supportsFIPS"]}]},gp={[ur]:kc},up={[ut]:"booleanEquals",[ft]:[!0,{[ut]:Lc,[ft]:[gp,"supportsDualStack"]}]},fp=[wp],yp=[Ep],pp=[{[ur]:"Region"}],kb={version:"1.0",parameters:{Region:cp,UseDualStack:dp,UseFIPS:dp,Endpoint:cp},rules:[{conditions:[{[ut]:ip,[ft]:[lp]}],type:Le,rules:[{conditions:fp,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:lr},{type:Le,rules:[{conditions:yp,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:lr},{endpoint:{url:lp,properties:tt,headers:tt},type:mr}]}]},{type:Le,rules:[{conditions:[{[ut]:ip,[ft]:pp}],type:Le,rules:[{conditions:[{[ut]:"aws.partition",[ft]:pp,assign:kc}],type:Le,rules:[{conditions:[wp,Ep],type:Le,rules:[{conditions:[mp,up],type:Le,rules:[{type:Le,rules:[{endpoint:{url:"https://ssm-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:tt,headers:tt},type:mr}]}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:lr}]},{conditions:fp,type:Le,rules:[{conditions:[mp],type:Le,rules:[{type:Le,rules:[{conditions:[{[ut]:"stringEquals",[ft]:["aws-us-gov",{[ut]:Lc,[ft]:[gp,"name"]}]}],endpoint:{url:"https://ssm.{Region}.amazonaws.com",properties:tt,headers:tt},type:mr},{endpoint:{url:"https://ssm-fips.{Region}.{PartitionResult#dnsSuffix}",properties:tt,headers:tt},type:mr}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:lr}]},{conditions:yp,type:Le,rules:[{conditions:[up],type:Le,rules:[{type:Le,rules:[{endpoint:{url:"https://ssm.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:tt,headers:tt},type:mr}]}]},{error:"DualStack is enabled but this partition does not support DualStack",type:lr}]},{type:Le,rules:[{endpoint:{url:"https://ssm.{Region}.{PartitionResult#dnsSuffix}",properties:tt,headers:tt},type:mr}]}]}]},{error:"Invalid Configuration: Missing Region",type:lr}]}]},Ip=kb;var Sp=(e,t={})=>Ce(Ip,{endpointParams:e,logger:t.logger});var xp=e=>({apiVersion:"2014-11-06",base64Decoder:(e==null?void 0:e.base64Decoder)??ve,base64Encoder:(e==null?void 0:e.base64Encoder)??Pe,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Sp,logger:(e==null?void 0:e.logger)??new wt,serviceId:(e==null?void 0:e.serviceId)??"SSM",urlParser:(e==null?void 0:e.urlParser)??V,utf8Decoder:(e==null?void 0:e.utf8Decoder)??Y,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Se});var Cp=e=>{cs(process.version);let t=Is(e),s=()=>t().then(is),n=xp(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??_e,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??ap(ka),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Re({serviceId:n.serviceId,clientVersion:Vm.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??I(we),region:(e==null?void 0:e.region)??I(q,me),requestHandler:(e==null?void 0:e.requestHandler)??new X(s),retryMode:(e==null?void 0:e.retryMode)??I({...ge,default:async()=>(await s()).retryMode||J}),sha256:(e==null?void 0:e.sha256)??Q.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??be,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??I(de),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??I(le)}};var La=class extends gt{constructor(t){let s=Cp(t),n=Um(s),r=ue(n),o=ie(r),a=Ee(o),i=a,c=An(i),d=xe(c);super(d),this.config=d,this.middlewareStack.use(Ie(this.config)),this.middlewareStack.use(fe(this.config)),this.middlewareStack.use(ye(this.config)),this.middlewareStack.use(pe(this.config)),this.middlewareStack.use(he(this.config)),this.middlewareStack.use(ls(this.config)),this.middlewareStack.use(Te(this.config))}destroy(){super.destroy()}};var Pt=class{trace(){}debug(){}info(){}warn(){}error(){}};var At=class{constructor(t){this.middlewareStack=Et(),this.config=t}send(t,s,n){let r=typeof s!="function"?s:void 0,o=typeof s=="function"?s:n,a=t.resolveMiddleware(this.middlewareStack,this.config,r);if(o)a(t).then(i=>o(null,i.output),i=>o(i)).catch(()=>{});else return a(t).then(i=>i.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}};var st=class{constructor(){this.middlewareStack=Et()}};var Fa="***SensitiveInformation***";var Lb=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&Np.warn(Ap(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},Fb=Math.ceil(34028234663852886e22),Tp=e=>{let t=Lb(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>Fb)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},Fc=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}};var za=e=>zc(e,32),bp=e=>zc(e,16),_p=e=>zc(e,8),zc=(e,t)=>{let s=Fc(e);if(s!==void 0&&zb(s,t)!==s)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return s},zb=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},Ts=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},$a=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},S=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return Np.warn(Ap(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}};var Rp=e=>Tp(typeof e=="string"?Ua(e):e),$b=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Ua=e=>{let t=e.match($b);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)};var $c=e=>za(typeof e=="string"?Ua(e):e),vp=e=>bp(typeof e=="string"?Ua(e):e),Pp=e=>_p(typeof e=="string"?Ua(e):e),Ap=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),Np={warn:console.warn};var Ub=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var pj=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/);var Vb=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Op=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=Vb.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[s,n,r,o,a,i,c,d,l]=t,m=vp(Dp(n)),u=So(r,"month",1,12),y=So(o,"day",1,31),p=Bb(m,u,y,{hours:a,minutes:i,seconds:c,fractionalMilliseconds:d});return l.toUpperCase()!="Z"&&p.setTime(p.getTime()-Hb(l)),p},hj=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),wj=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Ej=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/);var Bb=(e,t,s,n)=>{let r=t-1;return Gb(e,r,s),new Date(Date.UTC(e,r,s,So(n.hours,"hour",0,23),So(n.minutes,"minute",0,59),So(n.seconds,"seconds",0,60),jb(n.fractionalMilliseconds)))};var gj=50*365*24*60*60*1e3;var Wb=[31,28,31,30,31,30,31,31,30,31,30,31],Gb=(e,t,s)=>{let n=Wb[t];if(t===1&&qb(e)&&(n=29),s>n)throw new TypeError(`Invalid day for ${Ub[t]} in ${e}: ${s}`)},qb=e=>e%4===0&&(e%100!==0||e%400===0),So=(e,t,s,n)=>{let r=Pp(Dp(e));if(r<s||r>n)throw new TypeError(`${t} must be between ${s} and ${n}, inclusive`);return r},jb=e=>e==null?0:Rp("0."+e)*1e3,Hb=e=>{let t=e[0],s=1;if(t=="+")s=1;else if(t=="-")s=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),r=Number(e.substring(4,6));return s*(n*60+r)*60*1e3},Dp=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};var nt=class extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,nt.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}},v=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,r])=>{(e[n]==null||e[n]==="")&&(e[n]=r)});let s=e.message||e.Message||"UnknownError";return e.message=s,delete e.Message,e};var Kb=({output:e,parsedBody:t,exceptionCtor:s,errorCode:n})=>{let r=Jb(e),o=r.httpStatusCode?r.httpStatusCode+"":void 0,a=new s({name:(t==null?void 0:t.code)||(t==null?void 0:t.Code)||n||o||"UnknownError",$fault:"client",$metadata:r});throw v(a,t)},bs=e=>({output:t,parsedBody:s,errorCode:n})=>{Kb({output:t,parsedBody:s,exceptionCtor:e,errorCode:n})},Jb=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});var _s=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};var Mp=!1,Rs=e=>{e&&!Mp&&parseInt(e.substring(1,e.indexOf(".")))<14&&(Mp=!0)};function Va(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var Uc=e=>{let t="#text";for(let s in e)e.hasOwnProperty(s)&&e[s][t]!==void 0?e[s]=e[s][t]:typeof e[s]=="object"&&e[s]!==null&&(e[s]=Uc(e[s]));return e};var Vc=function(){let e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),s=new t;return Object.setPrototypeOf(s,e.prototype),s};Vc.prototype=Object.create(String.prototype,{constructor:{value:Vc,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(Vc,String);function B(e,t,s){let n,r,o;if(typeof t>"u"&&typeof s>"u")n={},o=e;else{if(n=e,typeof t=="function")return r=t,o=s,Yb(n,r,o);o=t}for(let a of Object.keys(o)){if(!Array.isArray(o[a])){n[a]=o[a];continue}kp(n,null,o,a)}return n}var W=(e,t)=>{let s={};for(let n in t)kp(s,e,t,n);return s},Yb=(e,t,s)=>B(e,Object.entries(s).reduce((n,[r,o])=>(Array.isArray(o)?n[r]=o:typeof o=="function"?n[r]=[t,o()]:n[r]=[t,o],n),{})),kp=(e,t,s,n)=>{if(t!==null){let a=s[n];typeof a=="function"&&(a=[,a]);let[i=Qb,c=Xb,d=n]=a;(typeof i=="function"&&i(t[d])||typeof i!="function"&&i)&&(e[n]=c(t[d]));return}let[r,o]=s[n];if(typeof o=="function"){let a,i=r===void 0&&(a=o())!=null,c=typeof r=="function"&&!!r(void 0)||typeof r!="function"&&!!r;i?e[n]=a:c&&(e[n]=o())}else{let a=r===void 0&&o!=null,i=typeof r=="function"&&!!r(o)||typeof r!="function"&&!!r;(a||i)&&(e[n]=o)}},Qb=e=>e!=null,Xb=e=>e;var yt=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null);if(typeof e=="object"){let t={};for(let s of Object.keys(e))e[s]!=null&&(t[s]=yt(e[s]));return t}return e};var Lp=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"logs"});var Fp={name:"@aws-sdk/client-cloudwatch-logs",description:"AWS SDK for JavaScript Cloudwatch Logs Client for Node.js, Browser and React Native",version:"3.316.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo cloudwatch-logs"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.316.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/credential-provider-node":"3.316.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-signing":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.310.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.310.0","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.316.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.316.0","@aws-sdk/util-defaults-mode-node":"3.316.0","@aws-sdk/util-endpoints":"3.310.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-cloudwatch-logs",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-cloudwatch-logs"}};var zp=Ns(fc());var Be=class extends nt{constructor(t){super(t),Object.setPrototypeOf(this,Be.prototype)}};var fr=class extends Be{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,fr.prototype)}},yr=class extends Be{constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,yr.prototype)}},pr=class extends Be{constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,pr.prototype)}},hr=class extends Be{constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,hr.prototype)}},wr=class extends Be{constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,wr.prototype)}},Er=class extends Be{constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,Er.prototype)}},gr=class extends Be{constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,gr.prototype)}};var $p=async(e,t)=>{let s=Xp,n;return n=eh({...o_(e,t),Action:"AssumeRole",Version:"2011-06-15"}),Qp(t,s,"/",void 0,n)};var Up=async(e,t)=>{let s=Xp,n;return n=eh({...a_(e,t),Action:"AssumeRoleWithWebIdentity",Version:"2011-06-15"}),Qp(t,s,"/",void 0,n)};var Vp=async(e,t)=>{if(e.statusCode>=300)return e_(e,t);let s=await Bc(e.body,t),n={};return n=m_(s.AssumeRoleResult,t),{$metadata:Jt(e),...n}},e_=async(e,t)=>{let s={...e,body:await Zp(e.body,t)},n=th(e,s.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Wp(s,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Gp(s,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await qp(s,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await jp(s,t);default:let r=s.body;return Yp({output:e,parsedBody:r.Error,errorCode:n})}};var Bp=async(e,t)=>{if(e.statusCode>=300)return t_(e,t);let s=await Bc(e.body,t),n={};return n=u_(s.AssumeRoleWithWebIdentityResult,t),{$metadata:Jt(e),...n}},t_=async(e,t)=>{let s={...e,body:await Zp(e.body,t)},n=th(e,s.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Wp(s,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await s_(s,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await n_(s,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await r_(s,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Gp(s,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await qp(s,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await jp(s,t);default:let r=s.body;return Yp({output:e,parsedBody:r.Error,errorCode:n})}};var Wp=async(e,t)=>{let s=e.body,n=f_(s.Error,t),r=new fr({$metadata:Jt(e),...n});return v(r,s)},s_=async(e,t)=>{let s=e.body,n=y_(s.Error,t),r=new gr({$metadata:Jt(e),...n});return v(r,s)},n_=async(e,t)=>{let s=e.body,n=p_(s.Error,t),r=new wr({$metadata:Jt(e),...n});return v(r,s)};var r_=async(e,t)=>{let s=e.body,n=h_(s.Error,t),r=new Er({$metadata:Jt(e),...n});return v(r,s)},Gp=async(e,t)=>{let s=e.body,n=w_(s.Error,t),r=new yr({$metadata:Jt(e),...n});return v(r,s)},qp=async(e,t)=>{let s=e.body,n=E_(s.Error,t),r=new pr({$metadata:Jt(e),...n});return v(r,s)},jp=async(e,t)=>{let s=e.body,n=g_(s.Error,t),r=new hr({$metadata:Jt(e),...n});return v(r,s)},o_=(e,t)=>{var n,r,o;let s={};if(e.RoleArn!=null&&(s.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(s.RoleSessionName=e.RoleSessionName),e.PolicyArns!=null){let a=Hp(e.PolicyArns,t);((n=e.PolicyArns)==null?void 0:n.length)===0&&(s.PolicyArns=[]),Object.entries(a).forEach(([i,c])=>{let d=`PolicyArns.${i}`;s[d]=c})}if(e.Policy!=null&&(s.Policy=e.Policy),e.DurationSeconds!=null&&(s.DurationSeconds=e.DurationSeconds),e.Tags!=null){let a=l_(e.Tags,t);((r=e.Tags)==null?void 0:r.length)===0&&(s.Tags=[]),Object.entries(a).forEach(([i,c])=>{let d=`Tags.${i}`;s[d]=c})}if(e.TransitiveTagKeys!=null){let a=d_(e.TransitiveTagKeys,t);((o=e.TransitiveTagKeys)==null?void 0:o.length)===0&&(s.TransitiveTagKeys=[]),Object.entries(a).forEach(([i,c])=>{let d=`TransitiveTagKeys.${i}`;s[d]=c})}return e.ExternalId!=null&&(s.ExternalId=e.ExternalId),e.SerialNumber!=null&&(s.SerialNumber=e.SerialNumber),e.TokenCode!=null&&(s.TokenCode=e.TokenCode),e.SourceIdentity!=null&&(s.SourceIdentity=e.SourceIdentity),s};var a_=(e,t)=>{var n;let s={};if(e.RoleArn!=null&&(s.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(s.RoleSessionName=e.RoleSessionName),e.WebIdentityToken!=null&&(s.WebIdentityToken=e.WebIdentityToken),e.ProviderId!=null&&(s.ProviderId=e.ProviderId),e.PolicyArns!=null){let r=Hp(e.PolicyArns,t);((n=e.PolicyArns)==null?void 0:n.length)===0&&(s.PolicyArns=[]),Object.entries(r).forEach(([o,a])=>{let i=`PolicyArns.${o}`;s[i]=a})}return e.Policy!=null&&(s.Policy=e.Policy),e.DurationSeconds!=null&&(s.DurationSeconds=e.DurationSeconds),s};var Hp=(e,t)=>{let s={},n=1;for(let r of e){if(r===null)continue;let o=i_(r,t);Object.entries(o).forEach(([a,i])=>{s[`member.${n}.${a}`]=i}),n++}return s},i_=(e,t)=>{let s={};return e.arn!=null&&(s.arn=e.arn),s},c_=(e,t)=>{let s={};return e.Key!=null&&(s.Key=e.Key),e.Value!=null&&(s.Value=e.Value),s},d_=(e,t)=>{let s={},n=1;for(let r of e)r!==null&&(s[`member.${n}`]=r,n++);return s},l_=(e,t)=>{let s={},n=1;for(let r of e){if(r===null)continue;let o=c_(r,t);Object.entries(o).forEach(([a,i])=>{s[`member.${n}.${a}`]=i}),n++}return s},Kp=(e,t)=>{let s={};return e.AssumedRoleId!==void 0&&(s.AssumedRoleId=S(e.AssumedRoleId)),e.Arn!==void 0&&(s.Arn=S(e.Arn)),s},m_=(e,t)=>{let s={};return e.Credentials!==void 0&&(s.Credentials=Jp(e.Credentials,t)),e.AssumedRoleUser!==void 0&&(s.AssumedRoleUser=Kp(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(s.PackedPolicySize=$c(e.PackedPolicySize)),e.SourceIdentity!==void 0&&(s.SourceIdentity=S(e.SourceIdentity)),s};var u_=(e,t)=>{let s={};return e.Credentials!==void 0&&(s.Credentials=Jp(e.Credentials,t)),e.SubjectFromWebIdentityToken!==void 0&&(s.SubjectFromWebIdentityToken=S(e.SubjectFromWebIdentityToken)),e.AssumedRoleUser!==void 0&&(s.AssumedRoleUser=Kp(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(s.PackedPolicySize=$c(e.PackedPolicySize)),e.Provider!==void 0&&(s.Provider=S(e.Provider)),e.Audience!==void 0&&(s.Audience=S(e.Audience)),e.SourceIdentity!==void 0&&(s.SourceIdentity=S(e.SourceIdentity)),s},Jp=(e,t)=>{let s={};return e.AccessKeyId!==void 0&&(s.AccessKeyId=S(e.AccessKeyId)),e.SecretAccessKey!==void 0&&(s.SecretAccessKey=S(e.SecretAccessKey)),e.SessionToken!==void 0&&(s.SessionToken=S(e.SessionToken)),e.Expiration!==void 0&&(s.Expiration=Ts(Op(e.Expiration))),s};var f_=(e,t)=>{let s={};return e.message!==void 0&&(s.message=S(e.message)),s};var y_=(e,t)=>{let s={};return e.message!==void 0&&(s.message=S(e.message)),s},p_=(e,t)=>{let s={};return e.message!==void 0&&(s.message=S(e.message)),s};var h_=(e,t)=>{let s={};return e.message!==void 0&&(s.message=S(e.message)),s},w_=(e,t)=>{let s={};return e.message!==void 0&&(s.message=S(e.message)),s},E_=(e,t)=>{let s={};return e.message!==void 0&&(s.message=S(e.message)),s},g_=(e,t)=>{let s={};return e.message!==void 0&&(s.message=S(e.message)),s},Jt=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),I_=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),S_=(e,t)=>I_(e,t).then(s=>t.utf8Encoder(s)),Yp=bs(Be),Qp=async(e,t,s,n,r)=>{let{hostname:o,protocol:a="https",port:i,path:c}=await e.endpoint(),d={protocol:a,hostname:o,port:i,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+s:c+s,headers:t};return n!==void 0&&(d.hostname=n),r!==void 0&&(d.body=r),new b(d)},Xp={"content-type":"application/x-www-form-urlencoded"},Bc=(e,t)=>S_(e,t).then(s=>{if(s.length){let n=new zp.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let r=n.parse(s),o="#text",a=Object.keys(r)[0],i=r[a];return i[o]&&(i[a]=i[o],delete i[o]),Uc(i)}return{}}),Zp=async(e,t)=>{let s=await Bc(e,t);return s.Error&&(s.Error.message=s.Error.message??s.Error.Message),s},eh=e=>Object.entries(e).map(([t,s])=>Va(t)+"="+Va(s)).join("&"),th=(e,t)=>{var s;if(((s=t.Error)==null?void 0:s.Code)!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"};var Ir=class extends st{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,s,n){this.middlewareStack.use(L(s,this.serialize,this.deserialize)),this.middlewareStack.use(F(s,Ir.getEndpointParameterInstructions())),this.middlewareStack.use(ls(s));let r=t.concat(this.middlewareStack),{logger:o}=s,c={logger:o,clientName:"STSClient",commandName:"AssumeRoleCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=s;return r.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,s){return $p(t,s)}deserialize(t,s){return Vp(t,s)}};var Sr=class extends st{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,s,n){this.middlewareStack.use(L(s,this.serialize,this.deserialize)),this.middlewareStack.use(F(s,Sr.getEndpointParameterInstructions()));let r=t.concat(this.middlewareStack),{logger:o}=s,c={logger:o,clientName:"STSClient",commandName:"AssumeRoleWithWebIdentityCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=s;return r.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,s){return Up(t,s)}deserialize(t,s){return Bp(t,s)}};var sh=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"});var nh={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.316.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"yarn test:unit","test:unit":"jest"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/credential-provider-node":"3.316.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-sdk-sts":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-signing":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.310.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.310.0","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.316.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.316.0","@aws-sdk/util-defaults-mode-node":"3.316.0","@aws-sdk/util-endpoints":"3.310.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0","fast-xml-parser":"4.1.2",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}};var rh="us-east-1",oh=e=>typeof e!="function"?e===void 0?rh:e:async()=>{try{return await e()}catch{return rh}},Wc=(e,t)=>{let s,n;return async(r,o)=>{if(n=r,!s){let{logger:i,region:c,requestHandler:d}=e;s=new t({logger:i,credentialDefaultProvider:()=>async()=>n,region:oh(c||e.region),...d?{requestHandler:d}:{}})}let{Credentials:a}=await s.send(new Ir(o));if(!a||!a.AccessKeyId||!a.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);return{accessKeyId:a.AccessKeyId,secretAccessKey:a.SecretAccessKey,sessionToken:a.SessionToken,expiration:a.Expiration}}},Gc=(e,t)=>{let s;return async n=>{if(!s){let{logger:o,region:a,requestHandler:i}=e;s=new t({logger:o,region:oh(a||e.region),...i?{requestHandler:i}:{}})}let{Credentials:r}=await s.send(new Sr(n));if(!r||!r.AccessKeyId||!r.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);return{accessKeyId:r.AccessKeyId,secretAccessKey:r.SecretAccessKey,sessionToken:r.SessionToken,expiration:r.Expiration}}},ah=e=>t=>e({roleAssumer:Wc(t,t.stsClientCtor),roleAssumerWithWebIdentity:Gc(t,t.stsClientCtor),...t});var ih=(e,t)=>{let s={EcsContainer:hs,Ec2InstanceMetadata:Es,Environment:fs};if(e in s)return s[e]();throw new h(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`)};var ch=e=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(C_(e)||T_(e)),C_=e=>typeof e.source_profile=="string"&&typeof e.credential_source>"u",T_=e=>typeof e.credential_source=="string"&&typeof e.source_profile>"u",dh=async(e,t,s,n={})=>{let r=t[e];if(!s.roleAssumer)throw new h(`Profile ${e} requires a role to be assumed, but no role assumption callback was provided.`,!1);let{source_profile:o}=r;if(o&&o in n)throw new h(`Detected a cycle attempting to resolve credentials for profile ${H(s)}. Profiles visited: `+Object.keys(n).join(", "),!1);let a=o?Ba(o,t,s,{...n,[o]:!0}):ih(r.credential_source,e)(),i={RoleArn:r.role_arn,RoleSessionName:r.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:r.external_id},{mfa_serial:c}=r;if(c){if(!s.mfaCodeProvider)throw new h(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,!1);i.SerialNumber=c,i.TokenCode=await s.mfaCodeProvider(c)}let d=await a;return s.roleAssumer(d,i)};var lh=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",mh=async(e,t)=>gs({...e,profile:t})();var xo=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string");var pt=class extends nt{constructor(t){super(t),Object.setPrototypeOf(this,pt.prototype)}};var xr=class extends pt{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,xr.prototype)}},Cr=class extends pt{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,Cr.prototype)}},Tr=class extends pt{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,Tr.prototype)}},br=class extends pt{constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,br.prototype)}},uh=e=>({...e,...e.accessToken&&{accessToken:Fa}}),b_=e=>({...e,...e.secretAccessKey&&{secretAccessKey:Fa},...e.sessionToken&&{sessionToken:Fa}}),fh=e=>({...e,...e.roleCredentials&&{roleCredentials:b_(e.roleCredentials)}});var yh=async(e,t)=>{let{hostname:s,protocol:n="https",port:r,path:o}=await t.endpoint(),a=B({},M_,{"x-amz-sso_bearer_token":e.accessToken}),i=`${o!=null&&o.endsWith("/")?o.slice(0,-1):o||""}/federation/credentials`,c=B({role_name:[,Ts(e.roleName,"roleName")],account_id:[,Ts(e.accountId,"accountId")]}),d;return new b({protocol:n,hostname:s,port:r,method:"GET",headers:a,path:i,query:c,body:d})};var ph=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return __(e,t);let s=B({$metadata:Co(e)}),n=Ts($a(await hh(e.body,t)),"body"),r=W(n,{roleCredentials:yt});return Object.assign(s,r),s},__=async(e,t)=>{let s={...e,body:await k_(e.body,t)},n=L_(e,s.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await v_(s,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await P_(s,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await A_(s,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await N_(s,t);default:let r=s.body;return R_({output:e,parsedBody:r,errorCode:n})}};var R_=bs(pt),v_=async(e,t)=>{let s=B({}),n=e.body,r=W(n,{message:S});Object.assign(s,r);let o=new xr({$metadata:Co(e),...s});return v(o,e.body)},P_=async(e,t)=>{let s=B({}),n=e.body,r=W(n,{message:S});Object.assign(s,r);let o=new Cr({$metadata:Co(e),...s});return v(o,e.body)},A_=async(e,t)=>{let s=B({}),n=e.body,r=W(n,{message:S});Object.assign(s,r);let o=new Tr({$metadata:Co(e),...s});return v(o,e.body)},N_=async(e,t)=>{let s=B({}),n=e.body,r=W(n,{message:S});Object.assign(s,r);let o=new br({$metadata:Co(e),...s});return v(o,e.body)},Co=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),O_=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),D_=(e,t)=>O_(e,t).then(s=>t.utf8Encoder(s)),M_=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),hh=(e,t)=>D_(e,t).then(s=>s.length?JSON.parse(s):{}),k_=async(e,t)=>{let s=await hh(e,t);return s.message=s.message??s.Message,s},L_=(e,t)=>{let s=(o,a)=>Object.keys(o).find(i=>i.toLowerCase()===a.toLowerCase()),n=o=>{let a=o;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},r=s(e.headers,"x-amzn-errortype");if(r!==void 0)return n(e.headers[r]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)};var _r=class extends st{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,s,n){this.middlewareStack.use(L(s,this.serialize,this.deserialize)),this.middlewareStack.use(F(s,_r.getEndpointParameterInstructions()));let r=t.concat(this.middlewareStack),{logger:o}=s,c={logger:o,clientName:"SSOClient",commandName:"GetRoleCredentialsCommand",inputFilterSensitiveLog:uh,outputFilterSensitiveLog:fh},{requestHandler:d}=s;return r.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,s){return yh(t,s)}deserialize(t,s){return ph(t,s)}};var wh=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"});var Eh={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.316.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.310.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.310.0","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.316.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.316.0","@aws-sdk/util-defaults-mode-node":"3.316.0","@aws-sdk/util-endpoints":"3.310.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}};var _h="required",Yt="fn",Qt="argv",Rr="ref",qc="PartitionResult",Nt="tree",To="error",bo="endpoint",gh={[_h]:!1,type:"String"},Ih={[_h]:!0,default:!1,type:"Boolean"},Rh={[Rr]:"Endpoint"},vh={[Yt]:"booleanEquals",[Qt]:[{[Rr]:"UseFIPS"},!0]},Ph={[Yt]:"booleanEquals",[Qt]:[{[Rr]:"UseDualStack"},!0]},Ot={},Sh={[Yt]:"booleanEquals",[Qt]:[!0,{[Yt]:"getAttr",[Qt]:[{[Rr]:qc},"supportsFIPS"]}]},xh={[Yt]:"booleanEquals",[Qt]:[!0,{[Yt]:"getAttr",[Qt]:[{[Rr]:qc},"supportsDualStack"]}]},Ch=[Rh],Th=[vh],bh=[Ph],z_={version:"1.0",parameters:{Region:gh,UseDualStack:Ih,UseFIPS:Ih,Endpoint:gh},rules:[{conditions:[{[Yt]:"aws.partition",[Qt]:[{[Rr]:"Region"}],assign:qc}],type:Nt,rules:[{conditions:[{[Yt]:"isSet",[Qt]:Ch},{[Yt]:"parseURL",[Qt]:Ch,assign:"url"}],type:Nt,rules:[{conditions:Th,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:To},{type:Nt,rules:[{conditions:bh,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:To},{endpoint:{url:Rh,properties:Ot,headers:Ot},type:bo}]}]},{conditions:[vh,Ph],type:Nt,rules:[{conditions:[Sh,xh],type:Nt,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ot,headers:Ot},type:bo}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:To}]},{conditions:Th,type:Nt,rules:[{conditions:[Sh],type:Nt,rules:[{type:Nt,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ot,headers:Ot},type:bo}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:To}]},{conditions:bh,type:Nt,rules:[{conditions:[xh],type:Nt,rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ot,headers:Ot},type:bo}]},{error:"DualStack is enabled but this partition does not support DualStack",type:To}]},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Ot,headers:Ot},type:bo}]}]},Ah=z_;var Nh=(e,t={})=>Ce(Ah,{endpointParams:e,logger:t.logger});var Oh=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??ve,base64Encoder:(e==null?void 0:e.base64Encoder)??Pe,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Nh,logger:(e==null?void 0:e.logger)??new Pt,serviceId:(e==null?void 0:e.serviceId)??"SSO",urlParser:(e==null?void 0:e.urlParser)??V,utf8Decoder:(e==null?void 0:e.utf8Decoder)??Y,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Se});var Dh="AWS_EXECUTION_ENV",jc="AWS_REGION",Hc="AWS_DEFAULT_REGION",Mh="AWS_EC2_METADATA_DISABLED",kh=["in-region","cross-region","mobile","standard","legacy"],Lh="/latest/meta-data/placement/region";var $_="AWS_DEFAULTS_MODE",U_="defaults_mode",Fh={environmentVariableSelector:e=>e[$_],configFileSelector:e=>e[U_],default:"legacy"};var vs=({region:e=I(q),defaultsMode:t=I(Fh)}={})=>Ye(async()=>{let s=typeof t=="function"?await t():t;switch(s==null?void 0:s.toLowerCase()){case"auto":return V_(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(s==null?void 0:s.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${kh.join(", ")}, got ${s}`)}}),V_=async e=>{if(e){let t=typeof e=="function"?await e():e,s=await B_();return s?t===s?"in-region":"cross-region":"standard"}return"standard"},B_=async()=>{if(process.env[Dh]&&(process.env[jc]||process.env[Hc]))return process.env[jc]??process.env[Hc];if(!process.env[Mh])try{let e=await $s();return(await lt({...e,path:Lh})).toString()}catch{}};var zh=e=>{Rs(process.version);let t=vs(e),s=()=>t().then(_s),n=Oh(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??_e,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Re({serviceId:n.serviceId,clientVersion:Eh.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??I(we),region:(e==null?void 0:e.region)??I(q,me),requestHandler:(e==null?void 0:e.requestHandler)??new X(s),retryMode:(e==null?void 0:e.retryMode)??I({...ge,default:async()=>(await s()).retryMode||J}),sha256:(e==null?void 0:e.sha256)??Q.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??be,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??I(de),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??I(le)}};var Wa=class extends At{constructor(t){let s=zh(t),n=wh(s),r=ue(n),o=ie(r),a=Ee(o),i=a,c=xe(i);super(c),this.config=c,this.middlewareStack.use(Ie(this.config)),this.middlewareStack.use(fe(this.config)),this.middlewareStack.use(ye(this.config)),this.middlewareStack.use(pe(this.config)),this.middlewareStack.use(he(this.config)),this.middlewareStack.use(Te(this.config))}destroy(){super.destroy()}};var vr="To refresh this SSO session run 'aws sso login' with the corresponding profile.";var ee=class extends nt{constructor(t){super(t),Object.setPrototypeOf(this,ee.prototype)}};var Pr=class extends ee{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,Pr.prototype),this.error=t.error,this.error_description=t.error_description}},Ar=class extends ee{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,Ar.prototype),this.error=t.error,this.error_description=t.error_description}},Nr=class extends ee{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,Nr.prototype),this.error=t.error,this.error_description=t.error_description}},Or=class extends ee{constructor(t){super({name:"InternalServerException",$fault:"server",...t}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,Or.prototype),this.error=t.error,this.error_description=t.error_description}},Dr=class extends ee{constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,Dr.prototype),this.error=t.error,this.error_description=t.error_description}},Mr=class extends ee{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,Mr.prototype),this.error=t.error,this.error_description=t.error_description}},kr=class extends ee{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,kr.prototype),this.error=t.error,this.error_description=t.error_description}},Lr=class extends ee{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,Lr.prototype),this.error=t.error,this.error_description=t.error_description}},Fr=class extends ee{constructor(t){super({name:"SlowDownException",$fault:"client",...t}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,Fr.prototype),this.error=t.error,this.error_description=t.error_description}},zr=class extends ee{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,zr.prototype),this.error=t.error,this.error_description=t.error_description}},$r=class extends ee{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,$r.prototype),this.error=t.error,this.error_description=t.error_description}};var $h=async(e,t)=>{let{hostname:s,protocol:n="https",port:r,path:o}=await t.endpoint(),a={"content-type":"application/json"},i=`${o!=null&&o.endsWith("/")?o.slice(0,-1):o||""}/token`,c;return c=JSON.stringify(W(e,{clientId:[],clientSecret:[],code:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:d=>yt(d)})),new b({protocol:n,hostname:s,port:r,method:"POST",headers:a,path:i,body:c})};var Uh=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return W_(e,t);let s=B({$metadata:rt(e)}),n=Ts($a(await Vh(e.body,t)),"body"),r=W(n,{accessToken:S,expiresIn:za,idToken:S,refreshToken:S,tokenType:S});return Object.assign(s,r),s},W_=async(e,t)=>{let s={...e,body:await rR(e.body,t)},n=oR(e,s.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await q_(s,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await j_(s,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await H_(s,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await K_(s,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await J_(s,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await Y_(s,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await Q_(s,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await X_(s,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await Z_(s,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await eR(s,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await tR(s,t);default:let r=s.body;return G_({output:e,parsedBody:r,errorCode:n})}};var G_=bs(ee),q_=async(e,t)=>{let s=B({}),n=e.body,r=W(n,{error:S,error_description:S});Object.assign(s,r);let o=new Pr({$metadata:rt(e),...s});return v(o,e.body)},j_=async(e,t)=>{let s=B({}),n=e.body,r=W(n,{error:S,error_description:S});Object.assign(s,r);let o=new Ar({$metadata:rt(e),...s});return v(o,e.body)},H_=async(e,t)=>{let s=B({}),n=e.body,r=W(n,{error:S,error_description:S});Object.assign(s,r);let o=new Nr({$metadata:rt(e),...s});return v(o,e.body)},K_=async(e,t)=>{let s=B({}),n=e.body,r=W(n,{error:S,error_description:S});Object.assign(s,r);let o=new Or({$metadata:rt(e),...s});return v(o,e.body)},J_=async(e,t)=>{let s=B({}),n=e.body,r=W(n,{error:S,error_description:S});Object.assign(s,r);let o=new Dr({$metadata:rt(e),...s});return v(o,e.body)};var Y_=async(e,t)=>{let s=B({}),n=e.body,r=W(n,{error:S,error_description:S});Object.assign(s,r);let o=new Mr({$metadata:rt(e),...s});return v(o,e.body)},Q_=async(e,t)=>{let s=B({}),n=e.body,r=W(n,{error:S,error_description:S});Object.assign(s,r);let o=new kr({$metadata:rt(e),...s});return v(o,e.body)},X_=async(e,t)=>{let s=B({}),n=e.body,r=W(n,{error:S,error_description:S});Object.assign(s,r);let o=new Lr({$metadata:rt(e),...s});return v(o,e.body)},Z_=async(e,t)=>{let s=B({}),n=e.body,r=W(n,{error:S,error_description:S});Object.assign(s,r);let o=new Fr({$metadata:rt(e),...s});return v(o,e.body)},eR=async(e,t)=>{let s=B({}),n=e.body,r=W(n,{error:S,error_description:S});Object.assign(s,r);let o=new zr({$metadata:rt(e),...s});return v(o,e.body)},tR=async(e,t)=>{let s=B({}),n=e.body,r=W(n,{error:S,error_description:S});Object.assign(s,r);let o=new $r({$metadata:rt(e),...s});return v(o,e.body)},rt=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),sR=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),nR=(e,t)=>sR(e,t).then(s=>t.utf8Encoder(s));var Vh=(e,t)=>nR(e,t).then(s=>s.length?JSON.parse(s):{}),rR=async(e,t)=>{let s=await Vh(e,t);return s.message=s.message??s.Message,s},oR=(e,t)=>{let s=(o,a)=>Object.keys(o).find(i=>i.toLowerCase()===a.toLowerCase()),n=o=>{let a=o;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},r=s(e.headers,"x-amzn-errortype");if(r!==void 0)return n(e.headers[r]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)};var Ur=class extends st{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,s,n){this.middlewareStack.use(L(s,this.serialize,this.deserialize)),this.middlewareStack.use(F(s,Ur.getEndpointParameterInstructions()));let r=t.concat(this.middlewareStack),{logger:o}=s,c={logger:o,clientName:"SSOOIDCClient",commandName:"CreateTokenCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=s;return r.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,s){return $h(t,s)}deserialize(t,s){return Uh(t,s)}};var Bh=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssooidc"});var Wh={name:"@aws-sdk/client-sso-oidc",description:"AWS SDK for JavaScript Sso Oidc Client for Node.js, Browser and React Native",version:"3.316.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso-oidc"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.310.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.310.0","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.316.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.316.0","@aws-sdk/util-defaults-mode-node":"3.316.0","@aws-sdk/util-endpoints":"3.310.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso-oidc",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso-oidc"}};var Qh="required",Xt="fn",Zt="argv",Vr="ref",Kc="PartitionResult",Dt="tree",_o="error",Ro="endpoint",Gh={[Qh]:!1,type:"String"},qh={[Qh]:!0,default:!1,type:"Boolean"},Xh={[Vr]:"Endpoint"},Zh={[Xt]:"booleanEquals",[Zt]:[{[Vr]:"UseFIPS"},!0]},ew={[Xt]:"booleanEquals",[Zt]:[{[Vr]:"UseDualStack"},!0]},Mt={},jh={[Xt]:"booleanEquals",[Zt]:[!0,{[Xt]:"getAttr",[Zt]:[{[Vr]:Kc},"supportsFIPS"]}]},Hh={[Xt]:"booleanEquals",[Zt]:[!0,{[Xt]:"getAttr",[Zt]:[{[Vr]:Kc},"supportsDualStack"]}]},Kh=[Xh],Jh=[Zh],Yh=[ew],iR={version:"1.0",parameters:{Region:Gh,UseDualStack:qh,UseFIPS:qh,Endpoint:Gh},rules:[{conditions:[{[Xt]:"aws.partition",[Zt]:[{[Vr]:"Region"}],assign:Kc}],type:Dt,rules:[{conditions:[{[Xt]:"isSet",[Zt]:Kh},{[Xt]:"parseURL",[Zt]:Kh,assign:"url"}],type:Dt,rules:[{conditions:Jh,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:_o},{type:Dt,rules:[{conditions:Yh,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:_o},{endpoint:{url:Xh,properties:Mt,headers:Mt},type:Ro}]}]},{conditions:[Zh,ew],type:Dt,rules:[{conditions:[jh,Hh],type:Dt,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Mt,headers:Mt},type:Ro}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:_o}]},{conditions:Jh,type:Dt,rules:[{conditions:[jh],type:Dt,rules:[{type:Dt,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Mt,headers:Mt},type:Ro}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:_o}]},{conditions:Yh,type:Dt,rules:[{conditions:[Hh],type:Dt,rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Mt,headers:Mt},type:Ro}]},{error:"DualStack is enabled but this partition does not support DualStack",type:_o}]},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Mt,headers:Mt},type:Ro}]}]},tw=iR;var sw=(e,t={})=>Ce(tw,{endpointParams:e,logger:t.logger});var nw=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??ve,base64Encoder:(e==null?void 0:e.base64Encoder)??Pe,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??sw,logger:(e==null?void 0:e.logger)??new Pt,serviceId:(e==null?void 0:e.serviceId)??"SSO OIDC",urlParser:(e==null?void 0:e.urlParser)??V,utf8Decoder:(e==null?void 0:e.utf8Decoder)??Y,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Se});var rw=e=>{Rs(process.version);let t=vs(e),s=()=>t().then(_s),n=nw(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??_e,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Re({serviceId:n.serviceId,clientVersion:Wh.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??I(we),region:(e==null?void 0:e.region)??I(q,me),requestHandler:(e==null?void 0:e.requestHandler)??new X(s),retryMode:(e==null?void 0:e.retryMode)??I({...ge,default:async()=>(await s()).retryMode||J}),sha256:(e==null?void 0:e.sha256)??Q.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??be,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??I(de),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??I(le)}};var Ga=class extends At{constructor(t){let s=rw(t),n=Bh(s),r=ue(n),o=ie(r),a=Ee(o),i=a,c=xe(i);super(c),this.config=c,this.middlewareStack.use(Ie(this.config)),this.middlewareStack.use(fe(this.config)),this.middlewareStack.use(ye(this.config)),this.middlewareStack.use(pe(this.config)),this.middlewareStack.use(he(this.config)),this.middlewareStack.use(Te(this.config))}destroy(){super.destroy()}};var Jc={},ow=e=>{if(Jc[e])return Jc[e];let t=new Ga({region:e});return Jc[e]=t,t};var aw=(e,t)=>ow(t).send(new Ur({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}));var Yc=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new z(`Token is expired. ${vr}`,!1)};var Ps=(e,t,s=!1)=>{if(typeof t>"u")throw new z(`Value not present for '${e}' in SSO Token${s?". Cannot refresh":""}. ${vr}`,!1)};var iw=require("fs"),{writeFile:cR}=iw.promises,cw=(e,t)=>{let s=Wn(e),n=JSON.stringify(t,null,2);return cR(s,n)};var dw=new Date(0),lw=(e={})=>async()=>{let t=await Ve(e),s=H(e),n=t[s];if(n){if(!n.sso_session)throw new z(`Profile '${s}' is missing required property 'sso_session'.`)}else throw new z(`Profile '${s}' could not be found in shared credentials file.`,!1);let r=n.sso_session,a=(await ps(e))[r];if(!a)throw new z(`Sso session '${r}' could not be found in shared credentials file.`,!1);for(let y of["sso_start_url","sso_region"])if(!a[y])throw new z(`Sso session '${r}' is missing required property '${y}'.`,!1);let i=a.sso_start_url,c=a.sso_region,d;try{d=await ys(r)}catch{throw new z(`The SSO session token associated with profile=${s} was not found or is invalid. ${vr}`,!1)}Ps("accessToken",d.accessToken),Ps("expiresAt",d.expiresAt);let{accessToken:l,expiresAt:m}=d,u={token:l,expiration:new Date(m)};if(u.expiration.getTime()-Date.now()>3e5)return u;if(Date.now()-dw.getTime()<30*1e3)return Yc(u),u;Ps("clientId",d.clientId,!0),Ps("clientSecret",d.clientSecret,!0),Ps("refreshToken",d.refreshToken,!0);try{dw.setTime(Date.now());let y=await aw(d,c);Ps("accessToken",y.accessToken),Ps("expiresIn",y.expiresIn);let p=new Date(Date.now()+y.expiresIn*1e3);try{await cw(r,{...d,accessToken:y.accessToken,expiresAt:p.toISOString(),refreshToken:y.refreshToken})}catch{}return{token:y.accessToken,expiration:p}}catch{return Yc(u),u}};var lR=15*60*1e3,vo=!1,Qc=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:s,ssoRegion:n,ssoRoleName:r,ssoClient:o,profile:a})=>{let i,c="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let E=await lw({profile:a})();i={accessToken:E.token,expiresAt:new Date(E.expiration).toISOString()}}catch(E){throw new h(E.message,vo)}else try{i=await ys(e)}catch{throw new h(`The SSO session associated with this profile is invalid. ${c}`,vo)}if(new Date(i.expiresAt).getTime()-Date.now()<=lR)throw new h(`The SSO session associated with this profile has expired. ${c}`,vo);let{accessToken:d}=i,l=o||new Wa({region:n}),m;try{m=await l.send(new _r({accountId:s,roleName:r,accessToken:d}))}catch(E){throw h.from(E,vo)}let{roleCredentials:{accessKeyId:u,secretAccessKey:y,sessionToken:p,expiration:w}={}}=m;if(!u||!y||!p||!w)throw new h("SSO returns an invalid temporary credential.",vo);return{accessKeyId:u,secretAccessKey:y,sessionToken:p,expiration:new Date(w)}};var qa=e=>{let{sso_start_url:t,sso_account_id:s,sso_region:n,sso_role_name:r}=e;if(!t||!s||!n||!r)throw new h(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,!1);return e};var ja=(e={})=>async()=>{let{ssoStartUrl:t,ssoAccountId:s,ssoRegion:n,ssoRoleName:r,ssoClient:o,ssoSession:a}=e,i=H(e);if(!t&&!s&&!n&&!r&&!a){let d=(await Ve(e))[i];if(!d)throw new h(`Profile ${i} was not found.`);if(!xo(d))throw new h(`Profile ${i} is not configured with SSO credentials.`);if(d!=null&&d.sso_session){let E=(await ps(e))[d.sso_session],Ge=` configurations in profile ${i} and sso-session ${d.sso_session}`;if(n&&n!==E.sso_region)throw new h("Conflicting SSO region"+Ge,!1);if(t&&t!==E.sso_start_url)throw new h("Conflicting SSO start_url"+Ge,!1);d.sso_region=E.sso_region,d.sso_start_url=E.sso_start_url}let{sso_start_url:l,sso_account_id:m,sso_region:u,sso_role_name:y,sso_session:p}=qa(d);return Qc({ssoStartUrl:l,ssoSession:p,ssoAccountId:m,ssoRegion:u,ssoRoleName:y,ssoClient:o,profile:i})}else{if(!t||!s||!n||!r)throw new h('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"');return Qc({ssoStartUrl:t,ssoSession:a,ssoAccountId:s,ssoRegion:n,ssoRoleName:r,ssoClient:o,profile:i})}};var mw=e=>{let{sso_start_url:t,sso_account_id:s,sso_session:n,sso_region:r,sso_role_name:o}=qa(e);return ja({ssoStartUrl:t,ssoAccountId:s,ssoSession:n,ssoRegion:r,ssoRoleName:o})()};var Xc=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1,Zc=e=>Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token});var uw=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,fw=async(e,t)=>xs({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity})();var Ba=async(e,t,s,n={})=>{let r=t[e];if(Object.keys(n).length>0&&Xc(r))return Zc(r);if(ch(r))return dh(e,t,s,n);if(Xc(r))return Zc(r);if(uw(r))return fw(r,s);if(lh(r))return mh(s,e);if(xo(r))return mw(r);throw new h(`Profile ${e} could not be found or parsed in shared credentials file.`)};var yw=(e={})=>async()=>{let t=await Ve(e);return Ba(H(e),t,e)};var mR="AWS_EC2_METADATA_DISABLED",pw=e=>process.env[zs]||process.env[Fs]?hs(e):process.env[mR]?async()=>{throw new h("EC2 Instance Metadata Service access disabled")}:Es(e);var Ha=(e={})=>Ye(vn(...e.profile||process.env[ao]?[]:[fs()],ja(e),yw(e),gs(e),xs(e),pw(e),async()=>{throw new h("Could not load credentials from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);var Tw="required",T="type",P="fn",A="argv",As="ref",js="properties",Hs="headers";var td="PartitionResult",ot="tree",Ks="booleanEquals",oe="stringEquals",bw="sigv4",_w="us-east-1",Rw="sts",U="endpoint",vw="https://sts.{Region}.{PartitionResult#dnsSuffix}",Po="error",sd="getAttr",hw={[Tw]:!1,[T]:"String"},ed={[Tw]:!0,default:!1,[T]:"Boolean"},ae={[As]:"Region"},Pw={[As]:"UseFIPS"},Aw={[As]:"UseDualStack"},ww={[P]:"isSet",[A]:[{[As]:"Endpoint"}]},Nw={[As]:"Endpoint"},Ne={url:"https://sts.amazonaws.com",[js]:{authSchemes:[{name:bw,signingRegion:_w,signingName:Rw}]},[Hs]:{}},es={},Ew={conditions:[{[P]:oe,[A]:[ae,"aws-global"]}],[U]:Ne,[T]:U},Ow={[P]:Ks,[A]:[Pw,!0]},Dw={[P]:Ks,[A]:[Aw,!0]},gw={[P]:Ks,[A]:[!0,{[P]:sd,[A]:[{[As]:td},"supportsFIPS"]}]},Mw={[As]:td},Iw={[P]:Ks,[A]:[!0,{[P]:sd,[A]:[Mw,"supportsDualStack"]}]},Sw={url:vw,[js]:{},[Hs]:{}},uR=[Nw],xw=[Ow],Cw=[Dw],fR={version:"1.0",parameters:{Region:hw,UseDualStack:ed,UseFIPS:ed,Endpoint:hw,UseGlobalEndpoint:ed},rules:[{conditions:[{[P]:"aws.partition",[A]:[ae],assign:td}],[T]:ot,rules:[{conditions:[{[P]:Ks,[A]:[{[As]:"UseGlobalEndpoint"},!0]},{[P]:Ks,[A]:[Pw,!1]},{[P]:Ks,[A]:[Aw,!1]},{[P]:"not",[A]:[ww]}],[T]:ot,rules:[{conditions:[{[P]:oe,[A]:[ae,"ap-northeast-1"]}],endpoint:Ne,[T]:U},{conditions:[{[P]:oe,[A]:[ae,"ap-south-1"]}],endpoint:Ne,[T]:U},{conditions:[{[P]:oe,[A]:[ae,"ap-southeast-1"]}],endpoint:Ne,[T]:U},{conditions:[{[P]:oe,[A]:[ae,"ap-southeast-2"]}],endpoint:Ne,[T]:U},Ew,{conditions:[{[P]:oe,[A]:[ae,"ca-central-1"]}],endpoint:Ne,[T]:U},{conditions:[{[P]:oe,[A]:[ae,"eu-central-1"]}],endpoint:Ne,[T]:U},{conditions:[{[P]:oe,[A]:[ae,"eu-north-1"]}],endpoint:Ne,[T]:U},{conditions:[{[P]:oe,[A]:[ae,"eu-west-1"]}],endpoint:Ne,[T]:U},{conditions:[{[P]:oe,[A]:[ae,"eu-west-2"]}],endpoint:Ne,[T]:U},{conditions:[{[P]:oe,[A]:[ae,"eu-west-3"]}],endpoint:Ne,[T]:U},{conditions:[{[P]:oe,[A]:[ae,"sa-east-1"]}],endpoint:Ne,[T]:U},{conditions:[{[P]:oe,[A]:[ae,_w]}],endpoint:Ne,[T]:U},{conditions:[{[P]:oe,[A]:[ae,"us-east-2"]}],endpoint:Ne,[T]:U},{conditions:[{[P]:oe,[A]:[ae,"us-west-1"]}],endpoint:Ne,[T]:U},{conditions:[{[P]:oe,[A]:[ae,"us-west-2"]}],endpoint:Ne,[T]:U},{endpoint:{url:vw,[js]:{authSchemes:[{name:bw,signingRegion:"{Region}",signingName:Rw}]},[Hs]:es},[T]:U}]},{conditions:[ww,{[P]:"parseURL",[A]:uR,assign:"url"}],[T]:ot,rules:[{conditions:xw,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[T]:Po},{[T]:ot,rules:[{conditions:Cw,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[T]:Po},{endpoint:{url:Nw,[js]:es,[Hs]:es},[T]:U}]}]},{conditions:[Ow,Dw],[T]:ot,rules:[{conditions:[gw,Iw],[T]:ot,rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[js]:es,[Hs]:es},[T]:U}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[T]:Po}]},{conditions:xw,[T]:ot,rules:[{conditions:[gw],[T]:ot,rules:[{[T]:ot,rules:[{conditions:[{[P]:oe,[A]:["aws-us-gov",{[P]:sd,[A]:[Mw,"name"]}]}],endpoint:Sw,[T]:U},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",[js]:es,[Hs]:es},[T]:U}]}]},{error:"FIPS is enabled but this partition does not support FIPS",[T]:Po}]},{conditions:Cw,[T]:ot,rules:[{conditions:[Iw],[T]:ot,rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",[js]:es,[Hs]:es},[T]:U}]},{error:"DualStack is enabled but this partition does not support DualStack",[T]:Po}]},{[T]:ot,rules:[Ew,{endpoint:Sw,[T]:U}]}]}]},kw=fR;var Lw=(e,t={})=>Ce(kw,{endpointParams:e,logger:t.logger});var Fw=e=>({apiVersion:"2011-06-15",base64Decoder:(e==null?void 0:e.base64Decoder)??ve,base64Encoder:(e==null?void 0:e.base64Encoder)??Pe,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Lw,logger:(e==null?void 0:e.logger)??new Pt,serviceId:(e==null?void 0:e.serviceId)??"STS",urlParser:(e==null?void 0:e.urlParser)??V,utf8Decoder:(e==null?void 0:e.utf8Decoder)??Y,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Se});var zw=e=>{Rs(process.version);let t=vs(e),s=()=>t().then(_s),n=Fw(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??_e,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??ah(Ha),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Re({serviceId:n.serviceId,clientVersion:nh.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??I(we),region:(e==null?void 0:e.region)??I(q,me),requestHandler:(e==null?void 0:e.requestHandler)??new X(s),retryMode:(e==null?void 0:e.retryMode)??I({...ge,default:async()=>(await s()).retryMode||J}),sha256:(e==null?void 0:e.sha256)??Q.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??be,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??I(de),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??I(le)}};var Js=class extends At{constructor(t){let s=zw(t),n=sh(s),r=ue(n),o=ie(r),a=Ee(o),i=a,c=Ea(i,{stsClientCtor:Js}),d=xe(c);super(d),this.config=d,this.middlewareStack.use(Ie(this.config)),this.middlewareStack.use(fe(this.config)),this.middlewareStack.use(ye(this.config)),this.middlewareStack.use(pe(this.config)),this.middlewareStack.use(he(this.config)),this.middlewareStack.use(Te(this.config))}destroy(){super.destroy()}};var $w=(e,t)=>t?class extends e{constructor(n){super(n);for(let r of t)this.middlewareStack.use(r)}}:e,yR=(e={},t)=>Wc(e,$w(Js,t)),pR=(e={},t)=>Gc(e,$w(Js,t)),Uw=e=>t=>e({roleAssumer:yR(t),roleAssumerWithWebIdentity:pR(t),...t});var Lt="fn",Ft="argv",Br="ref";var Vw="String",rd="PartitionResult",kt="tree",Ao="error",Ys="endpoint",Bw="stringEquals",Ww={required:!0,default:!1,type:"Boolean"},nd={[Br]:"Region"},Gw={[Br]:"Endpoint"},Jw={[Lt]:"booleanEquals",[Ft]:[{[Br]:"UseFIPS"},!0]},Yw={[Lt]:"booleanEquals",[Ft]:[{[Br]:"UseDualStack"},!0]},We={},qw={[Lt]:"booleanEquals",[Ft]:[!0,{[Lt]:"getAttr",[Ft]:[{[Br]:rd},"supportsFIPS"]}]},jw={[Lt]:"booleanEquals",[Ft]:[!0,{[Lt]:"getAttr",[Ft]:[{[Br]:rd},"supportsDualStack"]}]},Hw=[Jw],Kw=[Yw],hR={version:"1.0",parameters:{Region:{required:!0,type:Vw},UseDualStack:Ww,UseFIPS:Ww,Endpoint:{required:!1,type:Vw}},rules:[{conditions:[{[Lt]:"aws.partition",[Ft]:[nd],assign:rd}],type:kt,rules:[{conditions:[{[Lt]:"isSet",[Ft]:[Gw]}],type:kt,rules:[{conditions:Hw,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ao},{type:kt,rules:[{conditions:Kw,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ao},{endpoint:{url:Gw,properties:We,headers:We},type:Ys}]}]},{conditions:[Jw,Yw],type:kt,rules:[{conditions:[qw,jw],type:kt,rules:[{endpoint:{url:"https://logs-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:We,headers:We},type:Ys}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ao}]},{conditions:Hw,type:kt,rules:[{conditions:[qw],type:kt,rules:[{type:kt,rules:[{conditions:[{[Lt]:Bw,[Ft]:[nd,"us-gov-east-1"]}],endpoint:{url:"https://logs.us-gov-east-1.amazonaws.com",properties:We,headers:We},type:Ys},{conditions:[{[Lt]:Bw,[Ft]:[nd,"us-gov-west-1"]}],endpoint:{url:"https://logs.us-gov-west-1.amazonaws.com",properties:We,headers:We},type:Ys},{endpoint:{url:"https://logs-fips.{Region}.{PartitionResult#dnsSuffix}",properties:We,headers:We},type:Ys}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Ao}]},{conditions:Kw,type:kt,rules:[{conditions:[jw],type:kt,rules:[{endpoint:{url:"https://logs.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:We,headers:We},type:Ys}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Ao}]},{endpoint:{url:"https://logs.{Region}.{PartitionResult#dnsSuffix}",properties:We,headers:We},type:Ys}]}]},Qw=hR;var Xw=(e,t={})=>Ce(Qw,{endpointParams:e,logger:t.logger});var Zw=e=>({apiVersion:"2014-03-28",base64Decoder:(e==null?void 0:e.base64Decoder)??ve,base64Encoder:(e==null?void 0:e.base64Encoder)??Pe,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Xw,logger:(e==null?void 0:e.logger)??new Pt,serviceId:(e==null?void 0:e.serviceId)??"CloudWatch Logs",urlParser:(e==null?void 0:e.urlParser)??V,utf8Decoder:(e==null?void 0:e.utf8Decoder)??Y,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Se});var eE=e=>{Rs(process.version);let t=vs(e),s=()=>t().then(_s),n=Zw(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??_e,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??Uw(Ha),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Re({serviceId:n.serviceId,clientVersion:Fp.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??I(we),region:(e==null?void 0:e.region)??I(q,me),requestHandler:(e==null?void 0:e.requestHandler)??new X(s),retryMode:(e==null?void 0:e.retryMode)??I({...ge,default:async()=>(await s()).retryMode||J}),sha256:(e==null?void 0:e.sha256)??Q.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??be,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??I(de),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??I(le)}};var Ka=class extends At{constructor(t){let s=eE(t),n=Lp(s),r=ue(n),o=ie(r),a=Ee(o),i=a,c=An(i),d=xe(c);super(d),this.config=d,this.middlewareStack.use(Ie(this.config)),this.middlewareStack.use(fe(this.config)),this.middlewareStack.use(ye(this.config)),this.middlewareStack.use(pe(this.config)),this.middlewareStack.use(he(this.config)),this.middlewareStack.use(ls(this.config)),this.middlewareStack.use(Te(this.config))}destroy(){super.destroy()}};var zt=class extends nt{constructor(t){super(t),Object.setPrototypeOf(this,zt.prototype)}};var Wr=class extends zt{constructor(t){super({name:"InvalidParameterException",$fault:"client",...t}),this.name="InvalidParameterException",this.$fault="client",Object.setPrototypeOf(this,Wr.prototype)}};var Gr=class extends zt{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,Gr.prototype)}},qr=class extends zt{constructor(t){super({name:"ServiceUnavailableException",$fault:"server",...t}),this.name="ServiceUnavailableException",this.$fault="server",Object.setPrototypeOf(this,qr.prototype)}};var tE=async(e,t)=>{let s=bR("GetLogEvents"),n;return n=JSON.stringify(yt(e)),TR(t,s,"/",void 0,n)};var sE=async(e,t)=>{if(e.statusCode>=300)return wR(e,t);let s=await nE(e.body,t),n={};return n=yt(s),{$metadata:Ja(e),...n}},wR=async(e,t)=>{let s={...e,body:await _R(e.body,t)},n=RR(e,s.body);switch(n){case"InvalidParameterException":case"com.amazonaws.cloudwatchlogs#InvalidParameterException":throw await ER(s,t);case"ResourceNotFoundException":case"com.amazonaws.cloudwatchlogs#ResourceNotFoundException":throw await gR(s,t);case"ServiceUnavailableException":case"com.amazonaws.cloudwatchlogs#ServiceUnavailableException":throw await IR(s,t);default:let r=s.body;return CR({output:e,parsedBody:r,errorCode:n})}};var ER=async(e,t)=>{let s=e.body,n=yt(s),r=new Wr({$metadata:Ja(e),...n});return v(r,s)};var gR=async(e,t)=>{let s=e.body,n=yt(s),r=new Gr({$metadata:Ja(e),...n});return v(r,s)},IR=async(e,t)=>{let s=e.body,n=yt(s),r=new qr({$metadata:Ja(e),...n});return v(r,s)};var Ja=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),SR=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),xR=(e,t)=>SR(e,t).then(s=>t.utf8Encoder(s)),CR=bs(zt),TR=async(e,t,s,n,r)=>{let{hostname:o,protocol:a="https",port:i,path:c}=await e.endpoint(),d={protocol:a,hostname:o,port:i,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+s:c+s,headers:t};return n!==void 0&&(d.hostname=n),r!==void 0&&(d.body=r),new b(d)};function bR(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`Logs_20140328.${e}`}}var nE=(e,t)=>xR(e,t).then(s=>s.length?JSON.parse(s):{}),_R=async(e,t)=>{let s=await nE(e,t);return s.message=s.message??s.Message,s},RR=(e,t)=>{let s=(o,a)=>Object.keys(o).find(i=>i.toLowerCase()===a.toLowerCase()),n=o=>{let a=o;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},r=s(e.headers,"x-amzn-errortype");if(r!==void 0)return n(e.headers[r]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)};var jr=class extends st{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,s,n){this.middlewareStack.use(L(s,this.serialize,this.deserialize)),this.middlewareStack.use(F(s,jr.getEndpointParameterInstructions()));let r=t.concat(this.middlewareStack),{logger:o}=s,c={logger:o,clientName:"CloudWatchLogsClient",commandName:"GetLogEventsCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=s;return r.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,s){return tE(t,s)}deserialize(t,s){return sE(t,s)}};var at=Ns(iE()),ad=new La({}),PR=new Ka({});async function AR(){var e;try{let t=(0,N.getInput)("command",{required:!0}),s=(0,N.getInput)("instance-id")||process.env.SSM_COMMAND_INSTANCE_ID,n=(0,N.getBooleanInput)("powershell"),r=(0,N.getBooleanInput)("wait-for-agent");if(s===void 0){(0,N.setFailed)(Error("An instance ID must be provided."));return}r&&await cE(s);let o=n?"AWS-RunPowerShellScript":"AWS-RunShellScript",a=await ad.send(new Cn({DocumentName:o,InstanceIds:[s],Parameters:{commands:[t,"echo '==========END OF OUTPUT=========='"]},CloudWatchOutputConfig:{CloudWatchOutputEnabled:!0}}));(0,N.debug)(`SendCommandOutput: ${JSON.stringify(a,null,2)}`);let i=(e=a.Command)==null?void 0:e.CommandId;if(a.$metadata.httpStatusCode!==200||!i)return;(0,N.info)("Waiting for remote command invocation to complete...");let c=await dE(s,i);c!==void 0&&(0,N.setOutput)("exit-code",c),(0,N.info)(`Remote command invocation has completed with exit code: ${c}`)}catch(t){t instanceof Error&&(0,N.setFailed)(t)}}async function cE(e,t=0){var n,r;let s=await ad.send(new Sn({Filters:[{Key:"InstanceIds",Values:[e]}]}));if((0,N.debug)(`DescribeInstanceInformationOutput: ${JSON.stringify(s,null,2)}`),((r=(n=s.InstanceInformationList)==null?void 0:n[0])==null?void 0:r.PingStatus)!=="Online")return(0,N.info)(t===0?"Waiting for SSM agent to come online...":"Still waiting..."),await lE(5),cE(e,t+1);(0,N.info)("SSM agent is online.")}async function dE(e,t){await lE(5);let s=await ad.send(new xn({InstanceId:e,CommandId:t}));if((0,N.debug)(`GetCommandInvocationOutput: ${JSON.stringify(s,null,2)}`),["Success","Failed","Cancelled","TimedOut"].includes(s.Status??"")){if((0,N.info)(`Remote command invocation completed with status: "${s.Status}". Fetching output...`),s.StandardOutputContent){let n=await od(s,"stdout");NR(n.join(""))}if(s.StandardErrorContent){let n=await od(s,"stderr");OR(n.join(""))}return!s.StandardOutputContent&&!s.StandardErrorContent&&(0,N.info)(at.default.gray.open+at.default.bold.open+"No output found."),s.ResponseCode??-1}return(0,N.info)("Still waiting..."),dE(e,t)}function NR(e){(0,N.info)(at.default.cyan.open+"----- BEGIN STDOUT CONTENT -----"),e.trim().split(/\r?\n/).forEach(t=>(0,N.info)(at.default.cyan.open+t)),(0,N.info)(at.default.cyan.open+"----- END STDOUT CONTENT -----")}function OR(e){(0,N.info)(at.default.red.open+at.default.bold.open+"----- BEGIN STDERR CONTENT -----"),e.trim().split(/\r?\n/).forEach(t=>(0,N.info)(at.default.red.open+at.default.bold.open+t)),(0,N.info)(at.default.red.open+at.default.bold.open+"----- END STDERR CONTENT -----")}async function od(e,t,s){let{DocumentName:n,CommandId:r,InstanceId:o,PluginName:a}=e,i=await PR.send(new jr({logGroupName:"/aws/ssm/"+n,logStreamName:`${r}/${o}/${a==null?void 0:a.replace(":","-")}/${t}`,startFromHead:!0,nextToken:s}));(0,N.debug)(`GetLogEventsCommandOutput: ${JSON.stringify(i,null,2)}`);let c=(i.events??[]).map(d=>d.message).filter(d=>d!==void 0);return s===i.nextForwardToken?c:c.concat(await od(e,t,i.nextForwardToken))}function lE(e){return new Promise(t=>setTimeout(t,e*1e3))}AR();
