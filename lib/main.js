"use strict";var yf=Object.create;var Ds=Object.defineProperty;var pf=Object.getOwnPropertyDescriptor;var hf=Object.getOwnPropertyNames;var wf=Object.getPrototypeOf,Ef=Object.prototype.hasOwnProperty;var W=(e,t)=>()=>(e&&(t=e(e=0)),t);var v=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Xr=(e,t)=>{for(var n in t)Ds(e,n,{get:t[n],enumerable:!0})},Ua=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of hf(t))!Ef.call(e,r)&&r!==n&&Ds(e,r,{get:()=>t[r],enumerable:!(s=pf(t,r))||s.enumerable});return e};var Bt=(e,t,n)=>(n=e!=null?yf(wf(e)):{},Ua(t||!e||!e.__esModule?Ds(n,"default",{value:e,enumerable:!0}):n,e)),If=e=>Ua(Ds({},"__esModule",{value:!0}),e);var Ms=v(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.toCommandProperties=Gt.toCommandValue=void 0;function gf(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}Gt.toCommandValue=gf;function Sf(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}Gt.toCommandProperties=Sf});var qa=v(te=>{"use strict";var xf=te&&te.__createBinding||(Object.create?function(e,t,n,s){s===void 0&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){s===void 0&&(s=n),e[s]=t[n]}),Tf=te&&te.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Cf=te&&te.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&xf(t,e,n);return Tf(t,e),t};Object.defineProperty(te,"__esModule",{value:!0});te.issue=te.issueCommand=void 0;var _f=Cf(require("os")),Ba=Ms();function Ga(e,t,n){let s=new Qr(e,t,n);process.stdout.write(s.toString()+_f.EOL)}te.issueCommand=Ga;function Rf(e,t=""){Ga(e,{},t)}te.issue=Rf;var Wa="::",Qr=class{constructor(t,n,s){t||(t="missing.command"),this.command=t,this.properties=n,this.message=s}toString(){let t=Wa+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let n=!0;for(let s in this.properties)if(this.properties.hasOwnProperty(s)){let r=this.properties[s];r&&(n?n=!1:t+=",",t+=`${s}=${bf(r)}`)}}return t+=`${Wa}${Af(this.message)}`,t}};function Af(e){return Ba.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function bf(e){return Ba.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});function rs(){return ks>Ls.length-16&&(Ha.default.randomFillSync(Ls),ks=0),Ls.slice(ks,ks+=16)}var Ha,Ls,ks,Zr=W(()=>{Ha=Bt(require("crypto")),Ls=new Uint8Array(256),ks=Ls.length});var ja,Ka=W(()=>{ja=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function vf(e){return typeof e=="string"&&ja.test(e)}var Ke,os=W(()=>{Ka();Ke=vf});function Pf(e,t=0){let n=(L[e[t+0]]+L[e[t+1]]+L[e[t+2]]+L[e[t+3]]+"-"+L[e[t+4]]+L[e[t+5]]+"-"+L[e[t+6]]+L[e[t+7]]+"-"+L[e[t+8]]+L[e[t+9]]+"-"+L[e[t+10]]+L[e[t+11]]+L[e[t+12]]+L[e[t+13]]+L[e[t+14]]+L[e[t+15]]).toLowerCase();if(!Ke(n))throw TypeError("Stringified UUID is invalid");return n}var L,Je,as=W(()=>{os();L=[];for(let e=0;e<256;++e)L.push((e+256).toString(16).substr(1));Je=Pf});function Nf(e,t,n){let s=t&&n||0,r=t||new Array(16);e=e||{};let o=e.node||Ja,a=e.clockseq!==void 0?e.clockseq:eo;if(o==null||a==null){let u=e.random||(e.rng||rs)();o==null&&(o=Ja=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),a==null&&(a=eo=(u[6]<<8|u[7])&16383)}let i=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:no+1,d=i-to+(c-no)/1e4;if(d<0&&e.clockseq===void 0&&(a=a+1&16383),(d<0||i>to)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");to=i,no=c,eo=a,i+=122192928e5;let l=((i&268435455)*1e4+c)%4294967296;r[s++]=l>>>24&255,r[s++]=l>>>16&255,r[s++]=l>>>8&255,r[s++]=l&255;let m=i/4294967296*1e4&268435455;r[s++]=m>>>8&255,r[s++]=m&255,r[s++]=m>>>24&15|16,r[s++]=m>>>16&255,r[s++]=a>>>8|128,r[s++]=a&255;for(let u=0;u<6;++u)r[s+u]=o[u];return t||Je(r)}var Ja,eo,to,no,Ya,Xa=W(()=>{Zr();as();to=0,no=0;Ya=Nf});function Of(e){if(!Ke(e))throw TypeError("Invalid UUID");let t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=t&255,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=t&255,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=t&255,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=t&255,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=t&255,n}var Fs,so=W(()=>{os();Fs=Of});function Df(e){e=unescape(encodeURIComponent(e));let t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}function $s(e,t,n){function s(r,o,a,i){if(typeof r=="string"&&(r=Df(r)),typeof o=="string"&&(o=Fs(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+r.length);if(c.set(o),c.set(r,o.length),c=n(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,a){i=i||0;for(let d=0;d<16;++d)a[i+d]=c[d];return a}return Je(c)}try{s.name=e}catch{}return s.DNS=Mf,s.URL=kf,s}var Mf,kf,ro=W(()=>{as();so();Mf="6ba7b810-9dad-11d1-80b4-00c04fd430c8",kf="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function Lf(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Qa.default.createHash("md5").update(e).digest()}var Qa,Za,ei=W(()=>{Qa=Bt(require("crypto"));Za=Lf});var Ff,ti,ni=W(()=>{ro();ei();Ff=$s("v3",48,Za),ti=Ff});function $f(e,t,n){e=e||{};let s=e.random||(e.rng||rs)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){n=n||0;for(let r=0;r<16;++r)t[n+r]=s[r];return t}return Je(s)}var zs,si=W(()=>{Zr();as();zs=$f});function zf(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),ri.default.createHash("sha1").update(e).digest()}var ri,oi,ai=W(()=>{ri=Bt(require("crypto"));oi=zf});var Vf,ii,ci=W(()=>{ro();ai();Vf=$s("v5",80,oi),ii=Vf});var di,li=W(()=>{di="00000000-0000-0000-0000-000000000000"});function Uf(e){if(!Ke(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var mi,ui=W(()=>{os();mi=Uf});var fi={};Xr(fi,{NIL:()=>di,parse:()=>Fs,stringify:()=>Je,v1:()=>Ya,v3:()=>ti,v4:()=>zs,v5:()=>ii,validate:()=>Ke,version:()=>mi});var oo=W(()=>{Xa();ni();si();ci();li();ui();os();as();so()});var wi=v(ne=>{"use strict";var Wf=ne&&ne.__createBinding||(Object.create?function(e,t,n,s){s===void 0&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){s===void 0&&(s=n),e[s]=t[n]}),Bf=ne&&ne.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),pi=ne&&ne.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&Wf(t,e,n);return Bf(t,e),t};Object.defineProperty(ne,"__esModule",{value:!0});ne.prepareKeyValueMessage=ne.issueFileCommand=void 0;var yi=pi(require("fs")),ao=pi(require("os")),Gf=(oo(),If(fi)),hi=Ms();function qf(e,t){let n=process.env[`GITHUB_${e}`];if(!n)throw new Error(`Unable to find environment variable for file command ${e}`);if(!yi.existsSync(n))throw new Error(`Missing file at path: ${n}`);yi.appendFileSync(n,`${hi.toCommandValue(t)}${ao.EOL}`,{encoding:"utf8"})}ne.issueFileCommand=qf;function Hf(e,t){let n=`ghadelimiter_${Gf.v4()}`,s=hi.toCommandValue(t);if(e.includes(n))throw new Error(`Unexpected input: name should not contain the delimiter "${n}"`);if(s.includes(n))throw new Error(`Unexpected input: value should not contain the delimiter "${n}"`);return`${e}<<${n}${ao.EOL}${s}${ao.EOL}${n}`}ne.prepareKeyValueMessage=Hf});var Ii=v(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.checkBypass=qt.getProxyUrl=void 0;function jf(e){let t=e.protocol==="https:";if(Ei(e))return;let n=(()=>t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(n)return new URL(n)}qt.getProxyUrl=jf;function Ei(e){if(!e.hostname)return!1;let t=e.hostname;if(Kf(t))return!0;let n=process.env.no_proxy||process.env.NO_PROXY||"";if(!n)return!1;let s;e.port?s=Number(e.port):e.protocol==="http:"?s=80:e.protocol==="https:"&&(s=443);let r=[e.hostname.toUpperCase()];typeof s=="number"&&r.push(`${r[0]}:${s}`);for(let o of n.split(",").map(a=>a.trim().toUpperCase()).filter(a=>a))if(o==="*"||r.some(a=>a===o||a.endsWith(`.${o}`)||o.startsWith(".")&&a.endsWith(`${o}`)))return!0;return!1}qt.checkBypass=Ei;function Kf(e){let t=e.toLowerCase();return t==="localhost"||t.startsWith("127.")||t.startsWith("[::1]")||t.startsWith("[0:0:0:0:0:0:0:1]")}});var Ti=v(Ht=>{"use strict";var vS=require("net"),Jf=require("tls"),io=require("http"),gi=require("https"),Yf=require("events"),PS=require("assert"),Xf=require("util");Ht.httpOverHttp=Qf;Ht.httpsOverHttp=Zf;Ht.httpOverHttps=ey;Ht.httpsOverHttps=ty;function Qf(e){var t=new Fe(e);return t.request=io.request,t}function Zf(e){var t=new Fe(e);return t.request=io.request,t.createSocket=Si,t.defaultPort=443,t}function ey(e){var t=new Fe(e);return t.request=gi.request,t}function ty(e){var t=new Fe(e);return t.request=gi.request,t.createSocket=Si,t.defaultPort=443,t}function Fe(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||io.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(s,r,o,a){for(var i=xi(r,o,a),c=0,d=t.requests.length;c<d;++c){var l=t.requests[c];if(l.host===i.host&&l.port===i.port){t.requests.splice(c,1),l.request.onSocket(s);return}}s.destroy(),t.removeSocket(s)})}Xf.inherits(Fe,Yf.EventEmitter);Fe.prototype.addRequest=function(t,n,s,r){var o=this,a=co({request:t},o.options,xi(n,s,r));if(o.sockets.length>=this.maxSockets){o.requests.push(a);return}o.createSocket(a,function(i){i.on("free",c),i.on("close",d),i.on("agentRemove",d),t.onSocket(i);function c(){o.emit("free",i,a)}function d(l){o.removeSocket(i),i.removeListener("free",c),i.removeListener("close",d),i.removeListener("agentRemove",d)}})};Fe.prototype.createSocket=function(t,n){var s=this,r={};s.sockets.push(r);var o=co({},s.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(o.localAddress=t.localAddress),o.proxyAuth&&(o.headers=o.headers||{},o.headers["Proxy-Authorization"]="Basic "+new Buffer(o.proxyAuth).toString("base64")),Ye("making CONNECT request");var a=s.request(o);a.useChunkedEncodingByDefault=!1,a.once("response",i),a.once("upgrade",c),a.once("connect",d),a.once("error",l),a.end();function i(m){m.upgrade=!0}function c(m,u,y){process.nextTick(function(){d(m,u,y)})}function d(m,u,y){if(a.removeAllListeners(),u.removeAllListeners(),m.statusCode!==200){Ye("tunneling socket could not be established, statusCode=%d",m.statusCode),u.destroy();var p=new Error("tunneling socket could not be established, statusCode="+m.statusCode);p.code="ECONNRESET",t.request.emit("error",p),s.removeSocket(r);return}if(y.length>0){Ye("got illegal response body from proxy"),u.destroy();var p=new Error("got illegal response body from proxy");p.code="ECONNRESET",t.request.emit("error",p),s.removeSocket(r);return}return Ye("tunneling connection has established"),s.sockets[s.sockets.indexOf(r)]=u,n(u)}function l(m){a.removeAllListeners(),Ye(`tunneling socket could not be established, cause=%s
`,m.message,m.stack);var u=new Error("tunneling socket could not be established, cause="+m.message);u.code="ECONNRESET",t.request.emit("error",u),s.removeSocket(r)}};Fe.prototype.removeSocket=function(t){var n=this.sockets.indexOf(t);if(n!==-1){this.sockets.splice(n,1);var s=this.requests.shift();s&&this.createSocket(s,function(r){s.request.onSocket(r)})}};function Si(e,t){var n=this;Fe.prototype.createSocket.call(n,e,function(s){var r=e.request.getHeader("host"),o=co({},n.options,{socket:s,servername:r?r.replace(/:.*$/,""):e.host}),a=Jf.connect(0,o);n.sockets[n.sockets.indexOf(s)]=a,t(a)})}function xi(e,t,n){return typeof e=="string"?{host:e,port:t,localAddress:n}:e}function co(e){for(var t=1,n=arguments.length;t<n;++t){var s=arguments[t];if(typeof s=="object")for(var r=Object.keys(s),o=0,a=r.length;o<a;++o){var i=r[o];s[i]!==void 0&&(e[i]=s[i])}}return e}var Ye;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?Ye=function(){var e=Array.prototype.slice.call(arguments);typeof e[0]=="string"?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:Ye=function(){};Ht.debug=Ye});var _i=v((OS,Ci)=>{Ci.exports=Ti()});var Ai=v(_=>{"use strict";var ny=_&&_.__createBinding||(Object.create?function(e,t,n,s){s===void 0&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){s===void 0&&(s=n),e[s]=t[n]}),sy=_&&_.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Gs=_&&_.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&ny(t,e,n);return sy(t,e),t},M=_&&_.__awaiter||function(e,t,n,s){function r(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function i(l){try{d(s.next(l))}catch(m){a(m)}}function c(l){try{d(s.throw(l))}catch(m){a(m)}}function d(l){l.done?o(l.value):r(l.value).then(i,c)}d((s=s.apply(e,t||[])).next())})};Object.defineProperty(_,"__esModule",{value:!0});_.HttpClient=_.isHttps=_.HttpClientResponse=_.HttpClientError=_.getProxyUrl=_.MediaTypes=_.Headers=_.HttpCodes=void 0;var Vs=Gs(require("http")),lo=Gs(require("https")),Ri=Gs(Ii()),Us=Gs(_i()),ye;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})(ye=_.HttpCodes||(_.HttpCodes={}));var B;(function(e){e.Accept="accept",e.ContentType="content-type"})(B=_.Headers||(_.Headers={}));var Xe;(function(e){e.ApplicationJson="application/json"})(Xe=_.MediaTypes||(_.MediaTypes={}));function ry(e){let t=Ri.getProxyUrl(new URL(e));return t?t.href:""}_.getProxyUrl=ry;var oy=[ye.MovedPermanently,ye.ResourceMoved,ye.SeeOther,ye.TemporaryRedirect,ye.PermanentRedirect],ay=[ye.BadGateway,ye.ServiceUnavailable,ye.GatewayTimeout],iy=["OPTIONS","GET","DELETE","HEAD"],cy=10,dy=5,jt=class extends Error{constructor(t,n){super(t),this.name="HttpClientError",this.statusCode=n,Object.setPrototypeOf(this,jt.prototype)}};_.HttpClientError=jt;var Bs=class{constructor(t){this.message=t}readBody(){return M(this,void 0,void 0,function*(){return new Promise(t=>M(this,void 0,void 0,function*(){let n=Buffer.alloc(0);this.message.on("data",s=>{n=Buffer.concat([n,s])}),this.message.on("end",()=>{t(n.toString())})}))})}};_.HttpClientResponse=Bs;function ly(e){return new URL(e).protocol==="https:"}_.isHttps=ly;var mo=class{constructor(t,n,s){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=n||[],this.requestOptions=s,s&&(s.ignoreSslError!=null&&(this._ignoreSslError=s.ignoreSslError),this._socketTimeout=s.socketTimeout,s.allowRedirects!=null&&(this._allowRedirects=s.allowRedirects),s.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=s.allowRedirectDowngrade),s.maxRedirects!=null&&(this._maxRedirects=Math.max(s.maxRedirects,0)),s.keepAlive!=null&&(this._keepAlive=s.keepAlive),s.allowRetries!=null&&(this._allowRetries=s.allowRetries),s.maxRetries!=null&&(this._maxRetries=s.maxRetries))}options(t,n){return M(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,n||{})})}get(t,n){return M(this,void 0,void 0,function*(){return this.request("GET",t,null,n||{})})}del(t,n){return M(this,void 0,void 0,function*(){return this.request("DELETE",t,null,n||{})})}post(t,n,s){return M(this,void 0,void 0,function*(){return this.request("POST",t,n,s||{})})}patch(t,n,s){return M(this,void 0,void 0,function*(){return this.request("PATCH",t,n,s||{})})}put(t,n,s){return M(this,void 0,void 0,function*(){return this.request("PUT",t,n,s||{})})}head(t,n){return M(this,void 0,void 0,function*(){return this.request("HEAD",t,null,n||{})})}sendStream(t,n,s,r){return M(this,void 0,void 0,function*(){return this.request(t,n,s,r)})}getJson(t,n={}){return M(this,void 0,void 0,function*(){n[B.Accept]=this._getExistingOrDefaultHeader(n,B.Accept,Xe.ApplicationJson);let s=yield this.get(t,n);return this._processResponse(s,this.requestOptions)})}postJson(t,n,s={}){return M(this,void 0,void 0,function*(){let r=JSON.stringify(n,null,2);s[B.Accept]=this._getExistingOrDefaultHeader(s,B.Accept,Xe.ApplicationJson),s[B.ContentType]=this._getExistingOrDefaultHeader(s,B.ContentType,Xe.ApplicationJson);let o=yield this.post(t,r,s);return this._processResponse(o,this.requestOptions)})}putJson(t,n,s={}){return M(this,void 0,void 0,function*(){let r=JSON.stringify(n,null,2);s[B.Accept]=this._getExistingOrDefaultHeader(s,B.Accept,Xe.ApplicationJson),s[B.ContentType]=this._getExistingOrDefaultHeader(s,B.ContentType,Xe.ApplicationJson);let o=yield this.put(t,r,s);return this._processResponse(o,this.requestOptions)})}patchJson(t,n,s={}){return M(this,void 0,void 0,function*(){let r=JSON.stringify(n,null,2);s[B.Accept]=this._getExistingOrDefaultHeader(s,B.Accept,Xe.ApplicationJson),s[B.ContentType]=this._getExistingOrDefaultHeader(s,B.ContentType,Xe.ApplicationJson);let o=yield this.patch(t,r,s);return this._processResponse(o,this.requestOptions)})}request(t,n,s,r){return M(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let o=new URL(n),a=this._prepareRequest(t,o,r),i=this._allowRetries&&iy.includes(t)?this._maxRetries+1:1,c=0,d;do{if(d=yield this.requestRaw(a,s),d&&d.message&&d.message.statusCode===ye.Unauthorized){let m;for(let u of this.handlers)if(u.canHandleAuthentication(d)){m=u;break}return m?m.handleAuthentication(this,a,s):d}let l=this._maxRedirects;for(;d.message.statusCode&&oy.includes(d.message.statusCode)&&this._allowRedirects&&l>0;){let m=d.message.headers.location;if(!m)break;let u=new URL(m);if(o.protocol==="https:"&&o.protocol!==u.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield d.readBody(),u.hostname!==o.hostname)for(let y in r)y.toLowerCase()==="authorization"&&delete r[y];a=this._prepareRequest(t,u,r),d=yield this.requestRaw(a,s),l--}if(!d.message.statusCode||!ay.includes(d.message.statusCode))return d;c+=1,c<i&&(yield d.readBody(),yield this._performExponentialBackoff(c))}while(c<i);return d})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,n){return M(this,void 0,void 0,function*(){return new Promise((s,r)=>{function o(a,i){a?r(a):i?s(i):r(new Error("Unknown error"))}this.requestRawWithCallback(t,n,o)})})}requestRawWithCallback(t,n,s){typeof n=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(n,"utf8"));let r=!1;function o(c,d){r||(r=!0,s(c,d))}let a=t.httpModule.request(t.options,c=>{let d=new Bs(c);o(void 0,d)}),i;a.on("socket",c=>{i=c}),a.setTimeout(this._socketTimeout||3*6e4,()=>{i&&i.end(),o(new Error(`Request timeout: ${t.options.path}`))}),a.on("error",function(c){o(c)}),n&&typeof n=="string"&&a.write(n,"utf8"),n&&typeof n!="string"?(n.on("close",function(){a.end()}),n.pipe(a)):a.end()}getAgent(t){let n=new URL(t);return this._getAgent(n)}_prepareRequest(t,n,s){let r={};r.parsedUrl=n;let o=r.parsedUrl.protocol==="https:";r.httpModule=o?lo:Vs;let a=o?443:80;if(r.options={},r.options.host=r.parsedUrl.hostname,r.options.port=r.parsedUrl.port?parseInt(r.parsedUrl.port):a,r.options.path=(r.parsedUrl.pathname||"")+(r.parsedUrl.search||""),r.options.method=t,r.options.headers=this._mergeHeaders(s),this.userAgent!=null&&(r.options.headers["user-agent"]=this.userAgent),r.options.agent=this._getAgent(r.parsedUrl),this.handlers)for(let i of this.handlers)i.prepareRequest(r.options);return r}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},Ws(this.requestOptions.headers),Ws(t||{})):Ws(t||{})}_getExistingOrDefaultHeader(t,n,s){let r;return this.requestOptions&&this.requestOptions.headers&&(r=Ws(this.requestOptions.headers)[n]),t[n]||r||s}_getAgent(t){let n,s=Ri.getProxyUrl(t),r=s&&s.hostname;if(this._keepAlive&&r&&(n=this._proxyAgent),this._keepAlive&&!r&&(n=this._agent),n)return n;let o=t.protocol==="https:",a=100;if(this.requestOptions&&(a=this.requestOptions.maxSockets||Vs.globalAgent.maxSockets),s&&s.hostname){let i={maxSockets:a,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(s.username||s.password)&&{proxyAuth:`${s.username}:${s.password}`}),{host:s.hostname,port:s.port})},c,d=s.protocol==="https:";o?c=d?Us.httpsOverHttps:Us.httpsOverHttp:c=d?Us.httpOverHttps:Us.httpOverHttp,n=c(i),this._proxyAgent=n}if(this._keepAlive&&!n){let i={keepAlive:this._keepAlive,maxSockets:a};n=o?new lo.Agent(i):new Vs.Agent(i),this._agent=n}return n||(n=o?lo.globalAgent:Vs.globalAgent),o&&this._ignoreSslError&&(n.options=Object.assign(n.options||{},{rejectUnauthorized:!1})),n}_performExponentialBackoff(t){return M(this,void 0,void 0,function*(){t=Math.min(cy,t);let n=dy*Math.pow(2,t);return new Promise(s=>setTimeout(()=>s(),n))})}_processResponse(t,n){return M(this,void 0,void 0,function*(){return new Promise((s,r)=>M(this,void 0,void 0,function*(){let o=t.message.statusCode||0,a={statusCode:o,result:null,headers:{}};o===ye.NotFound&&s(a);function i(l,m){if(typeof m=="string"){let u=new Date(m);if(!isNaN(u.valueOf()))return u}return m}let c,d;try{d=yield t.readBody(),d&&d.length>0&&(n&&n.deserializeDates?c=JSON.parse(d,i):c=JSON.parse(d),a.result=c),a.headers=t.message.headers}catch{}if(o>299){let l;c&&c.message?l=c.message:d&&d.length>0?l=d:l=`Failed request: (${o})`;let m=new jt(l,o);m.result=a.result,r(m)}else s(a)}))})}};_.HttpClient=mo;var Ws=e=>Object.keys(e).reduce((t,n)=>(t[n.toLowerCase()]=e[n],t),{})});var bi=v(ge=>{"use strict";var po=ge&&ge.__awaiter||function(e,t,n,s){function r(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function i(l){try{d(s.next(l))}catch(m){a(m)}}function c(l){try{d(s.throw(l))}catch(m){a(m)}}function d(l){l.done?o(l.value):r(l.value).then(i,c)}d((s=s.apply(e,t||[])).next())})};Object.defineProperty(ge,"__esModule",{value:!0});ge.PersonalAccessTokenCredentialHandler=ge.BearerCredentialHandler=ge.BasicCredentialHandler=void 0;var uo=class{constructor(t,n){this.username=t,this.password=n}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return po(this,void 0,void 0,function*(){throw new Error("not implemented")})}};ge.BasicCredentialHandler=uo;var fo=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return po(this,void 0,void 0,function*(){throw new Error("not implemented")})}};ge.BearerCredentialHandler=fo;var yo=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return po(this,void 0,void 0,function*(){throw new Error("not implemented")})}};ge.PersonalAccessTokenCredentialHandler=yo});var Ni=v(Kt=>{"use strict";var vi=Kt&&Kt.__awaiter||function(e,t,n,s){function r(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function i(l){try{d(s.next(l))}catch(m){a(m)}}function c(l){try{d(s.throw(l))}catch(m){a(m)}}function d(l){l.done?o(l.value):r(l.value).then(i,c)}d((s=s.apply(e,t||[])).next())})};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.OidcClient=void 0;var my=Ai(),uy=bi(),Pi=ho(),Qe=class{static createHttpClient(t=!0,n=10){let s={allowRetries:t,maxRetries:n};return new my.HttpClient("actions/oidc-client",[new uy.BearerCredentialHandler(Qe.getRequestToken())],s)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var n;return vi(this,void 0,void 0,function*(){let o=(n=(yield Qe.createHttpClient().getJson(t).catch(a=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${a.statusCode}
 
        Error Message: ${a.result.message}`)})).result)===null||n===void 0?void 0:n.value;if(!o)throw new Error("Response json body do not have ID Token field");return o})}static getIDToken(t){return vi(this,void 0,void 0,function*(){try{let n=Qe.getIDTokenUrl();if(t){let r=encodeURIComponent(t);n=`${n}&audience=${r}`}Pi.debug(`ID token url is ${n}`);let s=yield Qe.getCall(n);return Pi.setSecret(s),s}catch(n){throw new Error(`Error message: ${n.message}`)}})}};Kt.OidcClient=Qe});var go=v(j=>{"use strict";var wo=j&&j.__awaiter||function(e,t,n,s){function r(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function i(l){try{d(s.next(l))}catch(m){a(m)}}function c(l){try{d(s.throw(l))}catch(m){a(m)}}function d(l){l.done?o(l.value):r(l.value).then(i,c)}d((s=s.apply(e,t||[])).next())})};Object.defineProperty(j,"__esModule",{value:!0});j.summary=j.markdownSummary=j.SUMMARY_DOCS_URL=j.SUMMARY_ENV_VAR=void 0;var fy=require("os"),Eo=require("fs"),{access:yy,appendFile:py,writeFile:hy}=Eo.promises;j.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";j.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var Io=class{constructor(){this._buffer=""}filePath(){return wo(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[j.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${j.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield yy(t,Eo.constants.R_OK|Eo.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,n,s={}){let r=Object.entries(s).map(([o,a])=>` ${o}="${a}"`).join("");return n?`<${t}${r}>${n}</${t}>`:`<${t}${r}>`}write(t){return wo(this,void 0,void 0,function*(){let n=!!(t!=null&&t.overwrite),s=yield this.filePath();return yield(n?hy:py)(s,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return wo(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,n=!1){return this._buffer+=t,n?this.addEOL():this}addEOL(){return this.addRaw(fy.EOL)}addCodeBlock(t,n){let s=Object.assign({},n&&{lang:n}),r=this.wrap("pre",this.wrap("code",t),s);return this.addRaw(r).addEOL()}addList(t,n=!1){let s=n?"ol":"ul",r=t.map(a=>this.wrap("li",a)).join(""),o=this.wrap(s,r);return this.addRaw(o).addEOL()}addTable(t){let n=t.map(r=>{let o=r.map(a=>{if(typeof a=="string")return this.wrap("td",a);let{header:i,data:c,colspan:d,rowspan:l}=a,m=i?"th":"td",u=Object.assign(Object.assign({},d&&{colspan:d}),l&&{rowspan:l});return this.wrap(m,c,u)}).join("");return this.wrap("tr",o)}).join(""),s=this.wrap("table",n);return this.addRaw(s).addEOL()}addDetails(t,n){let s=this.wrap("details",this.wrap("summary",t)+n);return this.addRaw(s).addEOL()}addImage(t,n,s){let{width:r,height:o}=s||{},a=Object.assign(Object.assign({},r&&{width:r}),o&&{height:o}),i=this.wrap("img",null,Object.assign({src:t,alt:n},a));return this.addRaw(i).addEOL()}addHeading(t,n){let s=`h${n}`,r=["h1","h2","h3","h4","h5","h6"].includes(s)?s:"h1",o=this.wrap(r,t);return this.addRaw(o).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,n){let s=Object.assign({},n&&{cite:n}),r=this.wrap("blockquote",t,s);return this.addRaw(r).addEOL()}addLink(t,n){let s=this.wrap("a",t,{href:n});return this.addRaw(s).addEOL()}},Oi=new Io;j.markdownSummary=Oi;j.summary=Oi});var Di=v(K=>{"use strict";var wy=K&&K.__createBinding||(Object.create?function(e,t,n,s){s===void 0&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){s===void 0&&(s=n),e[s]=t[n]}),Ey=K&&K.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Iy=K&&K.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&wy(t,e,n);return Ey(t,e),t};Object.defineProperty(K,"__esModule",{value:!0});K.toPlatformPath=K.toWin32Path=K.toPosixPath=void 0;var gy=Iy(require("path"));function Sy(e){return e.replace(/[\\]/g,"/")}K.toPosixPath=Sy;function xy(e){return e.replace(/[/]/g,"\\")}K.toWin32Path=xy;function Ty(e){return e.replace(/[/\\]/g,gy.sep)}K.toPlatformPath=Ty});var ho=v(w=>{"use strict";var Cy=w&&w.__createBinding||(Object.create?function(e,t,n,s){s===void 0&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){s===void 0&&(s=n),e[s]=t[n]}),_y=w&&w.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Mi=w&&w.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&Cy(t,e,n);return _y(t,e),t},ki=w&&w.__awaiter||function(e,t,n,s){function r(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function i(l){try{d(s.next(l))}catch(m){a(m)}}function c(l){try{d(s.throw(l))}catch(m){a(m)}}function d(l){l.done?o(l.value):r(l.value).then(i,c)}d((s=s.apply(e,t||[])).next())})};Object.defineProperty(w,"__esModule",{value:!0});w.getIDToken=w.getState=w.saveState=w.group=w.endGroup=w.startGroup=w.info=w.notice=w.warning=w.error=w.debug=w.isDebug=w.setFailed=w.setCommandEcho=w.setOutput=w.getBooleanInput=w.getMultilineInput=w.getInput=w.addPath=w.setSecret=w.exportVariable=w.ExitCode=void 0;var se=qa(),Dt=wi(),Jt=Ms(),Li=Mi(require("os")),Ry=Mi(require("path")),Ay=Ni(),Fi;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(Fi=w.ExitCode||(w.ExitCode={}));function by(e,t){let n=Jt.toCommandValue(t);if(process.env[e]=n,process.env.GITHUB_ENV||"")return Dt.issueFileCommand("ENV",Dt.prepareKeyValueMessage(e,t));se.issueCommand("set-env",{name:e},n)}w.exportVariable=by;function vy(e){se.issueCommand("add-mask",{},e)}w.setSecret=vy;function Py(e){process.env.GITHUB_PATH||""?Dt.issueFileCommand("PATH",e):se.issueCommand("add-path",{},e),process.env.PATH=`${e}${Ry.delimiter}${process.env.PATH}`}w.addPath=Py;function So(e,t){let n=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!n)throw new Error(`Input required and not supplied: ${e}`);return t&&t.trimWhitespace===!1?n:n.trim()}w.getInput=So;function Ny(e,t){let n=So(e,t).split(`
`).filter(s=>s!=="");return t&&t.trimWhitespace===!1?n:n.map(s=>s.trim())}w.getMultilineInput=Ny;function Oy(e,t){let n=["true","True","TRUE"],s=["false","False","FALSE"],r=So(e,t);if(n.includes(r))return!0;if(s.includes(r))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}w.getBooleanInput=Oy;function Dy(e,t){if(process.env.GITHUB_OUTPUT||"")return Dt.issueFileCommand("OUTPUT",Dt.prepareKeyValueMessage(e,t));process.stdout.write(Li.EOL),se.issueCommand("set-output",{name:e},Jt.toCommandValue(t))}w.setOutput=Dy;function My(e){se.issue("echo",e?"on":"off")}w.setCommandEcho=My;function ky(e){process.exitCode=Fi.Failure,$i(e)}w.setFailed=ky;function Ly(){return process.env.RUNNER_DEBUG==="1"}w.isDebug=Ly;function Fy(e){se.issueCommand("debug",{},e)}w.debug=Fy;function $i(e,t={}){se.issueCommand("error",Jt.toCommandProperties(t),e instanceof Error?e.toString():e)}w.error=$i;function $y(e,t={}){se.issueCommand("warning",Jt.toCommandProperties(t),e instanceof Error?e.toString():e)}w.warning=$y;function zy(e,t={}){se.issueCommand("notice",Jt.toCommandProperties(t),e instanceof Error?e.toString():e)}w.notice=zy;function Vy(e){process.stdout.write(e+Li.EOL)}w.info=Vy;function zi(e){se.issue("group",e)}w.startGroup=zi;function Vi(){se.issue("endgroup")}w.endGroup=Vi;function Uy(e,t){return ki(this,void 0,void 0,function*(){zi(e);let n;try{n=yield t()}finally{Vi()}return n})}w.group=Uy;function Wy(e,t){if(process.env.GITHUB_STATE||"")return Dt.issueFileCommand("STATE",Dt.prepareKeyValueMessage(e,t));se.issueCommand("save-state",{name:e},Jt.toCommandValue(t))}w.saveState=Wy;function By(e){return process.env[`STATE_${e}`]||""}w.getState=By;function Gy(e){return ki(this,void 0,void 0,function*(){return yield Ay.OidcClient.getIDToken(e)})}w.getIDToken=Gy;var qy=go();Object.defineProperty(w,"summary",{enumerable:!0,get:function(){return qy.summary}});var Hy=go();Object.defineProperty(w,"markdownSummary",{enumerable:!0,get:function(){return Hy.markdownSummary}});var xo=Di();Object.defineProperty(w,"toPosixPath",{enumerable:!0,get:function(){return xo.toPosixPath}});Object.defineProperty(w,"toWin32Path",{enumerable:!0,get:function(){return xo.toWin32Path}});Object.defineProperty(w,"toPlatformPath",{enumerable:!0,get:function(){return xo.toPlatformPath}})});var sa=v(Ve=>{"use strict";var gd=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Fw=gd+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Sd="["+gd+"]["+Fw+"]*",$w=new RegExp("^"+Sd+"$"),zw=function(e,t){let n=[],s=t.exec(e);for(;s;){let r=[];r.startIndex=t.lastIndex-s[0].length;let o=s.length;for(let a=0;a<o;a++)r.push(s[a]);n.push(r),s=t.exec(e)}return n},Vw=function(e){let t=$w.exec(e);return!(t===null||typeof t>"u")};Ve.isExist=function(e){return typeof e<"u"};Ve.isEmptyObject=function(e){return Object.keys(e).length===0};Ve.merge=function(e,t,n){if(t){let s=Object.keys(t),r=s.length;for(let o=0;o<r;o++)n==="strict"?e[s[o]]=[t[s[o]]]:e[s[o]]=t[s[o]]}};Ve.getValue=function(e){return Ve.isExist(e)?e:""};Ve.isName=Vw;Ve.getAllMatches=zw;Ve.nameRegexp=Sd});var oa=v(Rd=>{"use strict";var ra=sa(),Uw={allowBooleanAttributes:!1,unpairedTags:[]};Rd.validate=function(e,t){t=Object.assign({},Uw,t);let n=[],s=!1,r=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let o=0;o<e.length;o++)if(e[o]==="<"&&e[o+1]==="?"){if(o+=2,o=Td(e,o),o.err)return o}else if(e[o]==="<"){let a=o;if(o++,e[o]==="!"){o=Cd(e,o);continue}else{let i=!1;e[o]==="/"&&(i=!0,o++);let c="";for(;o<e.length&&e[o]!==">"&&e[o]!==" "&&e[o]!=="	"&&e[o]!==`
`&&e[o]!=="\r";o++)c+=e[o];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),o--),!Jw(c)){let m;return c.trim().length===0?m="Invalid space after '<'.":m="Tag '"+c+"' is an invalid name.",D("InvalidTag",m,ee(e,o))}let d=Gw(e,o);if(d===!1)return D("InvalidAttr","Attributes for '"+c+"' have open quote.",ee(e,o));let l=d.value;if(o=d.index,l[l.length-1]==="/"){let m=o-l.length;l=l.substring(0,l.length-1);let u=_d(l,t);if(u===!0)s=!0;else return D(u.err.code,u.err.msg,ee(e,m+u.err.line))}else if(i)if(d.tagClosed){if(l.trim().length>0)return D("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",ee(e,a));{let m=n.pop();if(c!==m.tagName){let u=ee(e,m.tagStartPos);return D("InvalidTag","Expected closing tag '"+m.tagName+"' (opened in line "+u.line+", col "+u.col+") instead of closing tag '"+c+"'.",ee(e,a))}n.length==0&&(r=!0)}}else return D("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",ee(e,o));else{let m=_d(l,t);if(m!==!0)return D(m.err.code,m.err.msg,ee(e,o-l.length+m.err.line));if(r===!0)return D("InvalidXml","Multiple possible root nodes found.",ee(e,o));t.unpairedTags.indexOf(c)!==-1||n.push({tagName:c,tagStartPos:a}),s=!0}for(o++;o<e.length;o++)if(e[o]==="<")if(e[o+1]==="!"){o++,o=Cd(e,o);continue}else if(e[o+1]==="?"){if(o=Td(e,++o),o.err)return o}else break;else if(e[o]==="&"){let m=jw(e,o);if(m==-1)return D("InvalidChar","char '&' is not expected.",ee(e,o));o=m}else if(r===!0&&!xd(e[o]))return D("InvalidXml","Extra text at the end",ee(e,o));e[o]==="<"&&o--}}else{if(xd(e[o]))continue;return D("InvalidChar","char '"+e[o]+"' is not expected.",ee(e,o))}if(s){if(n.length==1)return D("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",ee(e,n[0].tagStartPos));if(n.length>0)return D("InvalidXml","Invalid '"+JSON.stringify(n.map(o=>o.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return D("InvalidXml","Start tag expected.",1);return!0};function xd(e){return e===" "||e==="	"||e===`
`||e==="\r"}function Td(e,t){let n=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let s=e.substr(n,t-n);if(t>5&&s==="xml")return D("InvalidXml","XML declaration allowed only at the start of the document.",ee(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function Cd(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let n=1;for(t+=8;t<e.length;t++)if(e[t]==="<")n++;else if(e[t]===">"&&(n--,n===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var Ww='"',Bw="'";function Gw(e,t){let n="",s="",r=!1;for(;t<e.length;t++){if(e[t]===Ww||e[t]===Bw)s===""?s=e[t]:s!==e[t]||(s="");else if(e[t]===">"&&s===""){r=!0;break}n+=e[t]}return s!==""?!1:{value:n,index:t,tagClosed:r}}var qw=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function _d(e,t){let n=ra.getAllMatches(e,qw),s={};for(let r=0;r<n.length;r++){if(n[r][1].length===0)return D("InvalidAttr","Attribute '"+n[r][2]+"' has no space in starting.",ps(n[r]));if(n[r][3]!==void 0&&n[r][4]===void 0)return D("InvalidAttr","Attribute '"+n[r][2]+"' is without value.",ps(n[r]));if(n[r][3]===void 0&&!t.allowBooleanAttributes)return D("InvalidAttr","boolean attribute '"+n[r][2]+"' is not allowed.",ps(n[r]));let o=n[r][2];if(!Kw(o))return D("InvalidAttr","Attribute '"+o+"' is an invalid name.",ps(n[r]));if(!s.hasOwnProperty(o))s[o]=1;else return D("InvalidAttr","Attribute '"+o+"' is repeated.",ps(n[r]))}return!0}function Hw(e,t){let n=/\d/;for(e[t]==="x"&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(n))break}return-1}function jw(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,Hw(e,t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(e[t]===";")break;return-1}return t}function D(e,t,n){return{err:{code:e,msg:t,line:n.line||n,col:n.col}}}function Kw(e){return ra.isName(e)}function Jw(e){return ra.isName(e)}function ee(e,t){let n=e.substring(0,t).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function ps(e){return e.startIndex+e[1].length}});var bd=v(aa=>{var Ad={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1},Yw=function(e){return Object.assign({},Ad,e)};aa.buildOptions=Yw;aa.defaultOptions=Ad});var Pd=v((ED,vd)=>{"use strict";var ia=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,n){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:n})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,[":@"]:t[":@"]}):this.child.push({[t.tagname]:t.child})}};vd.exports=ia});var Od=v((ID,Nd)=>{function Xw(e,t){let n={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let s=1,r=!1,o=!1,a=!1,i="";for(;t<e.length;t++)if(e[t]==="<"&&!a){if(r&&e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y")t+=7,o=!0;else if(r&&e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T")t+=8;else if(r&&e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T")t+=8;else if(r&&e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N")t+=9;else if(e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-")a=!0;else throw new Error("Invalid DOCTYPE");s++,i=""}else if(e[t]===">"){if(a?e[t-1]==="-"&&e[t-2]==="-"&&(a=!1,s--):(o&&(Zw(i,n),o=!1),s--),s===0)break}else e[t]==="["?r=!0:i+=e[t];if(s!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:n,i:t}}var Qw=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function Zw(e,t){let n=Qw.exec(e);n&&(t[n[1]]={regx:RegExp(`&${n[1]};`,"g"),val:n[3]})}Nd.exports=Xw});var Md=v((gD,Dd)=>{var eE=/^[-+]?0x[a-fA-F0-9]+$/,tE=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var nE={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function sE(e,t={}){if(t=Object.assign({},nE,t),!e||typeof e!="string")return e;let n=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(n))return e;if(t.hex&&eE.test(n))return Number.parseInt(n,16);{let s=tE.exec(n);if(s){let r=s[1],o=s[2],a=rE(s[3]),i=s[4]||s[6];if(!t.leadingZeros&&o.length>0&&r&&n[2]!==".")return e;if(!t.leadingZeros&&o.length>0&&!r&&n[1]!==".")return e;{let c=Number(n),d=""+c;return d.search(/[eE]/)!==-1||i?t.eNotation?c:e:n.indexOf(".")!==-1?d==="0"&&a===""||d===a||r&&d==="-"+a?c:e:o?a===d||r+a===d?c:e:n===d||n===r+d?c:e}}else return e}}function rE(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}Dd.exports=sE});var Ld=v((xD,kd)=>{"use strict";var ma=sa(),hs=Pd(),oE=Od(),aE=Md(),SD="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,ma.nameRegexp),ca=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=iE,this.parseXml=uE,this.parseTextData=cE,this.resolveNameSpace=dE,this.buildAttributesMap=mE,this.isItStopNode=pE,this.replaceEntitiesValue=fE,this.readStopNodeData=wE,this.saveTextToParentTag=yE}};function iE(e){let t=Object.keys(e);for(let n=0;n<t.length;n++){let s=t[n];this.lastEntities[s]={regex:new RegExp("&"+s+";","g"),val:e[s]}}}function cE(e,t,n,s,r,o,a){if(e!==void 0&&(this.options.trimValues&&!s&&(e=e.trim()),e.length>0)){a||(e=this.replaceEntitiesValue(e));let i=this.options.tagValueProcessor(t,e,n,r,o);return i==null?e:typeof i!=typeof e||i!==e?i:this.options.trimValues?la(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?la(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function dE(e){if(this.options.removeNSPrefix){let t=e.split(":"),n=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=n+t[1])}return e}var lE=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function mE(e,t){if(!this.options.ignoreAttributes&&typeof e=="string"){let n=ma.getAllMatches(e,lE),s=n.length,r={};for(let o=0;o<s;o++){let a=this.resolveNameSpace(n[o][1]),i=n[o][4],c=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(c=this.options.transformAttributeName(c)),c==="__proto__"&&(c="#__proto__"),i!==void 0){this.options.trimValues&&(i=i.trim()),i=this.replaceEntitiesValue(i);let d=this.options.attributeValueProcessor(a,i,t);d==null?r[c]=i:typeof d!=typeof i||d!==i?r[c]=d:r[c]=la(i,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(r[c]=!0)}if(!Object.keys(r).length)return;if(this.options.attributesGroupName){let o={};return o[this.options.attributesGroupName]=r,o}return r}}var uE=function(e){e=e.replace(/\r\n?/g,`
`);let t=new hs("!xml"),n=t,s="",r="";for(let o=0;o<e.length;o++)if(e[o]==="<")if(e[o+1]==="/"){let i=Ft(e,">",o,"Closing Tag is not closed."),c=e.substring(o+2,i).trim();if(this.options.removeNSPrefix){let d=c.indexOf(":");d!==-1&&(c=c.substr(d+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),n&&(s=this.saveTextToParentTag(s,n,r)),r=r.substr(0,r.lastIndexOf(".")),n=this.tagsNodeStack.pop(),s="",o=i}else if(e[o+1]==="?"){let i=da(e,o,!1,"?>");if(!i)throw new Error("Pi Tag is not closed.");if(s=this.saveTextToParentTag(s,n,r),!(this.options.ignoreDeclaration&&i.tagName==="?xml"||this.options.ignorePiTags)){let c=new hs(i.tagName);c.add(this.options.textNodeName,""),i.tagName!==i.tagExp&&i.attrExpPresent&&(c[":@"]=this.buildAttributesMap(i.tagExp,r)),n.addChild(c)}o=i.closeIndex+1}else if(e.substr(o+1,3)==="!--"){let i=Ft(e,"-->",o+4,"Comment is not closed.");if(this.options.commentPropName){let c=e.substring(o+4,i-2);s=this.saveTextToParentTag(s,n,r),n.add(this.options.commentPropName,[{[this.options.textNodeName]:c}])}o=i}else if(e.substr(o+1,2)==="!D"){let i=oE(e,o);this.docTypeEntities=i.entities,o=i.i}else if(e.substr(o+1,2)==="!["){let i=Ft(e,"]]>",o,"CDATA is not closed.")-2,c=e.substring(o+9,i);if(s=this.saveTextToParentTag(s,n,r),this.options.cdataPropName)n.add(this.options.cdataPropName,[{[this.options.textNodeName]:c}]);else{let d=this.parseTextData(c,n.tagname,r,!0,!1,!0);d==null&&(d=""),n.add(this.options.textNodeName,d)}o=i+2}else{let i=da(e,o,this.options.removeNSPrefix),c=i.tagName,d=i.tagExp,l=i.attrExpPresent,m=i.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),n&&s&&n.tagname!=="!xml"&&(s=this.saveTextToParentTag(s,n,r,!1)),c!==t.tagname&&(r+=r?"."+c:c);let u=n;if(u&&this.options.unpairedTags.indexOf(u.tagname)!==-1&&(n=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,r,c)){let y="";if(d.length>0&&d.lastIndexOf("/")===d.length-1)o=i.closeIndex;else if(this.options.unpairedTags.indexOf(c)!==-1)o=i.closeIndex;else{let h=this.readStopNodeData(e,c,m+1);if(!h)throw new Error(`Unexpected end of ${c}`);o=h.i,y=h.tagContent}let p=new hs(c);c!==d&&l&&(p[":@"]=this.buildAttributesMap(d,r)),y&&(y=this.parseTextData(y,c,r,!0,l,!0,!0)),r=r.substr(0,r.lastIndexOf(".")),p.add(this.options.textNodeName,y),n.addChild(p)}else{if(d.length>0&&d.lastIndexOf("/")===d.length-1){c[c.length-1]==="/"?(c=c.substr(0,c.length-1),d=c):d=d.substr(0,d.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));let y=new hs(c);c!==d&&l&&(y[":@"]=this.buildAttributesMap(d,r)),r=r.substr(0,r.lastIndexOf(".")),n.addChild(y)}else{let y=new hs(c);this.tagsNodeStack.push(n),c!==d&&l&&(y[":@"]=this.buildAttributesMap(d,r)),n.addChild(y),n=y}s="",o=m}}else s+=e[o];return t.child},fE=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let n=this.docTypeEntities[t];e=e.replace(n.regx,n.val)}for(let t in this.lastEntities){let n=this.lastEntities[t];e=e.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let n=this.htmlEntities[t];e=e.replace(n.regex,n.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function yE(e,t,n,s){return e&&(s===void 0&&(s=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,n,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,s),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function pE(e,t,n){let s="*."+n;for(let r in e){let o=e[r];if(s===o||t===o)return!0}return!1}function hE(e,t,n=">"){let s,r="";for(let o=t;o<e.length;o++){let a=e[o];if(s)a===s&&(s="");else if(a==='"'||a==="'")s=a;else if(a===n[0])if(n[1]){if(e[o+1]===n[1])return{data:r,index:o}}else return{data:r,index:o};else a==="	"&&(a=" ");r+=a}}function Ft(e,t,n,s){let r=e.indexOf(t,n);if(r===-1)throw new Error(s);return r+t.length-1}function da(e,t,n,s=">"){let r=hE(e,t+1,s);if(!r)return;let o=r.data,a=r.index,i=o.search(/\s/),c=o,d=!0;if(i!==-1&&(c=o.substr(0,i).replace(/\s\s*$/,""),o=o.substr(i+1)),n){let l=c.indexOf(":");l!==-1&&(c=c.substr(l+1),d=c!==r.data.substr(l+1))}return{tagName:c,tagExp:o,closeIndex:a,attrExpPresent:d}}function wE(e,t,n){let s=n,r=1;for(;n<e.length;n++)if(e[n]==="<")if(e[n+1]==="/"){let o=Ft(e,">",n,`${t} is not closed`);if(e.substring(n+2,o).trim()===t&&(r--,r===0))return{tagContent:e.substring(s,n),i:o};n=o}else if(e[n+1]==="?")n=Ft(e,"?>",n+1,"StopNode is not closed.");else if(e.substr(n+1,3)==="!--")n=Ft(e,"-->",n+3,"StopNode is not closed.");else if(e.substr(n+1,2)==="![")n=Ft(e,"]]>",n,"StopNode is not closed.")-2;else{let o=da(e,n,">");o&&((o&&o.tagName)===t&&o.tagExp[o.tagExp.length-1]!=="/"&&r++,n=o.closeIndex)}}function la(e,t,n){if(t&&typeof e=="string"){let s=e.trim();return s==="true"?!0:s==="false"?!1:aE(e,n)}else return ma.isExist(e)?e:""}kd.exports=ca});var zd=v($d=>{"use strict";function EE(e,t){return Fd(e,t)}function Fd(e,t,n){let s,r={};for(let o=0;o<e.length;o++){let a=e[o],i=IE(a),c="";if(n===void 0?c=i:c=n+"."+i,i===t.textNodeName)s===void 0?s=a[i]:s+=""+a[i];else{if(i===void 0)continue;if(a[i]){let d=Fd(a[i],t,c),l=SE(d,t);a[":@"]?gE(d,a[":@"],c,t):Object.keys(d).length===1&&d[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?d=d[t.textNodeName]:Object.keys(d).length===0&&(t.alwaysCreateTextNode?d[t.textNodeName]="":d=""),r[i]!==void 0&&r.hasOwnProperty(i)?(Array.isArray(r[i])||(r[i]=[r[i]]),r[i].push(d)):t.isArray(i,c,l)?r[i]=[d]:r[i]=d}}}return typeof s=="string"?s.length>0&&(r[t.textNodeName]=s):s!==void 0&&(r[t.textNodeName]=s),r}function IE(e){let t=Object.keys(e);for(let n=0;n<t.length;n++){let s=t[n];if(s!==":@")return s}}function gE(e,t,n,s){if(t){let r=Object.keys(t),o=r.length;for(let a=0;a<o;a++){let i=r[a];s.isArray(i,n+"."+i,!0,!0)?e[i]=[t[i]]:e[i]=t[i]}}}function SE(e,t){let n=Object.keys(e).length;return!!(n===0||n===1&&e[t.textNodeName])}$d.prettify=EE});var Ud=v((CD,Vd)=>{var{buildOptions:xE}=bd(),TE=Ld(),{prettify:CE}=zd(),_E=oa(),ua=class{constructor(t){this.externalEntities={},this.options=xE(t)}parse(t,n){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(n){n===!0&&(n={});let o=_E.validate(t,n);if(o!==!0)throw Error(`${o.err.msg}:${o.err.line}:${o.err.col}`)}let s=new TE(this.options);s.addExternalEntities(this.externalEntities);let r=s.parseXml(t);return this.options.preserveOrder||r===void 0?r:CE(r,this.options)}addEntity(t,n){if(n.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(n==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=n}};Vd.exports=ua});var Hd=v((_D,qd)=>{var RE=`
`;function AE(e,t){let n="";return t.format&&t.indentBy.length>0&&(n=RE),Bd(e,t,"",n)}function Bd(e,t,n,s){let r="",o=!1;for(let a=0;a<e.length;a++){let i=e[a],c=bE(i),d="";if(n.length===0?d=c:d=`${n}.${c}`,c===t.textNodeName){let p=i[c];vE(d,t)||(p=t.tagValueProcessor(c,p),p=Gd(p,t)),o&&(r+=s),r+=p,o=!1;continue}else if(c===t.cdataPropName){o&&(r+=s),r+=`<![CDATA[${i[c][0][t.textNodeName]}]]>`,o=!1;continue}else if(c===t.commentPropName){r+=s+`<!--${i[c][0][t.textNodeName]}-->`,o=!0;continue}else if(c[0]==="?"){let p=Wd(i[":@"],t),h=c==="?xml"?"":s,E=i[c][0][t.textNodeName];E=E.length!==0?" "+E:"",r+=h+`<${c}${E}${p}?>`,o=!0;continue}let l=s;l!==""&&(l+=t.indentBy);let m=Wd(i[":@"],t),u=s+`<${c}${m}`,y=Bd(i[c],t,d,l);t.unpairedTags.indexOf(c)!==-1?t.suppressUnpairedNode?r+=u+">":r+=u+"/>":(!y||y.length===0)&&t.suppressEmptyNode?r+=u+"/>":y&&y.endsWith(">")?r+=u+`>${y}${s}</${c}>`:(r+=u+">",y&&s!==""&&(y.includes("/>")||y.includes("</"))?r+=s+t.indentBy+y+s:r+=y,r+=`</${c}>`),o=!0}return r}function bE(e){let t=Object.keys(e);for(let n=0;n<t.length;n++){let s=t[n];if(s!==":@")return s}}function Wd(e,t){let n="";if(e&&!t.ignoreAttributes)for(let s in e){let r=t.attributeValueProcessor(s,e[s]);r=Gd(r,t),r===!0&&t.suppressBooleanAttributes?n+=` ${s.substr(t.attributeNamePrefix.length)}`:n+=` ${s.substr(t.attributeNamePrefix.length)}="${r}"`}return n}function vE(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let n=e.substr(e.lastIndexOf(".")+1);for(let s in t.stopNodes)if(t.stopNodes[s]===e||t.stopNodes[s]==="*."+n)return!0;return!1}function Gd(e,t){if(e&&e.length>0&&t.processEntities)for(let n=0;n<t.entities.length;n++){let s=t.entities[n];e=e.replace(s.regex,s.val)}return e}qd.exports=AE});var Kd=v((RD,jd)=>{"use strict";var PE=Hd(),NE={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[]};function xt(e){this.options=Object.assign({},NE,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=ME),this.processTextOrObjNode=OE,this.options.format?(this.indentate=DE,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}xt.prototype.build=function(e){return this.options.preserveOrder?PE(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};xt.prototype.j2x=function(e,t){let n="",s="";for(let r in e)if(!(typeof e[r]>"u"))if(e[r]===null)r[0]==="?"?s+=this.indentate(t)+"<"+r+"?"+this.tagEndChar:s+=this.indentate(t)+"<"+r+"/"+this.tagEndChar;else if(e[r]instanceof Date)s+=this.buildTextValNode(e[r],r,"",t);else if(typeof e[r]!="object"){let o=this.isAttribute(r);if(o)n+=this.buildAttrPairStr(o,""+e[r]);else if(r===this.options.textNodeName){let a=this.options.tagValueProcessor(r,""+e[r]);s+=this.replaceEntitiesValue(a)}else s+=this.buildTextValNode(e[r],r,"",t)}else if(Array.isArray(e[r])){let o=e[r].length;for(let a=0;a<o;a++){let i=e[r][a];typeof i>"u"||(i===null?r[0]==="?"?s+=this.indentate(t)+"<"+r+"?"+this.tagEndChar:s+=this.indentate(t)+"<"+r+"/"+this.tagEndChar:typeof i=="object"?s+=this.processTextOrObjNode(i,r,t):s+=this.buildTextValNode(i,r,"",t))}}else if(this.options.attributesGroupName&&r===this.options.attributesGroupName){let o=Object.keys(e[r]),a=o.length;for(let i=0;i<a;i++)n+=this.buildAttrPairStr(o[i],""+e[r][o[i]])}else s+=this.processTextOrObjNode(e[r],r,t);return{attrStr:n,val:s}};xt.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function OE(e,t,n){let s=this.j2x(e,n+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,s.attrStr,n):this.buildObjectNode(s.val,t,s.attrStr,n)}xt.prototype.buildObjectNode=function(e,t,n,s){if(e==="")return t[0]==="?"?this.indentate(s)+"<"+t+n+"?"+this.tagEndChar:this.indentate(s)+"<"+t+n+this.closeTag(t)+this.tagEndChar;{let r="</"+t+this.tagEndChar,o="";return t[0]==="?"&&(o="?",r=""),n&&e.indexOf("<")===-1?this.indentate(s)+"<"+t+n+o+">"+e+r:this.options.commentPropName!==!1&&t===this.options.commentPropName&&o.length===0?this.indentate(s)+`<!--${e}-->`+this.newLine:this.indentate(s)+"<"+t+n+o+this.tagEndChar+e+this.indentate(s)+r}};xt.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};xt.prototype.buildTextValNode=function(e,t,n,s){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(s)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(s)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(s)+"<"+t+n+"?"+this.tagEndChar;{let r=this.options.tagValueProcessor(t,e);return r=this.replaceEntitiesValue(r),r===""?this.indentate(s)+"<"+t+n+this.closeTag(t)+this.tagEndChar:this.indentate(s)+"<"+t+n+">"+r+"</"+t+this.tagEndChar}};xt.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let n=this.options.entities[t];e=e.replace(n.regex,n.val)}return e};function DE(e){return this.options.indentBy.repeat(e)}function ME(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}jd.exports=xt});var Yd=v((AD,Jd)=>{"use strict";var kE=oa(),LE=Ud(),FE=Kd();Jd.exports={XMLParser:LE,XMLValidator:kE,XMLBuilder:FE}});var af=v((fU,of)=>{"use strict";var sf=(e=0)=>t=>`\x1B[${38+e};5;${t}m`,rf=(e=0)=>(t,n,s)=>`\x1B[${38+e};2;${t};${n};${s}m`;function Fg(){let e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(let[n,s]of Object.entries(t)){for(let[r,o]of Object.entries(s))t[r]={open:`\x1B[${o[0]}m`,close:`\x1B[${o[1]}m`},s[r]=t[r],e.set(o[0],o[1]);Object.defineProperty(t,n,{value:s,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="\x1B[39m",t.bgColor.close="\x1B[49m",t.color.ansi256=sf(),t.color.ansi16m=rf(),t.bgColor.ansi256=sf(10),t.bgColor.ansi16m=rf(10),Object.defineProperties(t,{rgbToAnsi256:{value:(n,s,r)=>n===s&&s===r?n<8?16:n>248?231:Math.round((n-8)/247*24)+232:16+36*Math.round(n/255*5)+6*Math.round(s/255*5)+Math.round(r/255*5),enumerable:!1},hexToRgb:{value:n=>{let s=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(n.toString(16));if(!s)return[0,0,0];let{colorString:r}=s.groups;r.length===3&&(r=r.split("").map(a=>a+a).join(""));let o=Number.parseInt(r,16);return[o>>16&255,o>>8&255,o&255]},enumerable:!1},hexToAnsi256:{value:n=>t.rgbToAnsi256(...t.hexToRgb(n)),enumerable:!1}}),t}Object.defineProperty(of,"exports",{enumerable:!0,get:Fg})});var cf=require("crypto"),b=Bt(ho());var Ui=async e=>{let t=(e==null?void 0:e.Bucket)||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Xy(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Yy(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},jy=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Ky=/(\d+\.){3}\d+/,Jy=/\.\./;var Yy=e=>jy.test(e)&&!Ky.test(e)&&!Jy.test(e),Xy=e=>{let[t,n,s,r,o,a]=e.split(":"),i=t==="arn"&&e.split(":").length>=6,c=[t,n,s,o,a].filter(Boolean).length===5;if(i&&!c)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return t==="arn"&&!!n&&!!s&&!!o&&!!a};var Wi=(e,t,n)=>{let s=async()=>{let r=n[e]??n[t];return typeof r=="function"?r():r};return e==="endpoint"||t==="endpoint"?async()=>{let r=await s();if(r&&typeof r=="object"){if("url"in r)return r.url.href;if("hostname"in r){let{protocol:o,hostname:a,port:i,path:c}=r;return`${o}//${a}${i?":"+i:""}${c}`}}return r}:s};var Bi=async(e,t,n,s)=>{let r=await Qy(e,t,n);if(typeof n.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return n.endpointProvider(r,s)},Qy=async(e,t,n)=>{var o;let s={},r=((o=t==null?void 0:t.getEndpointParameterInstructions)==null?void 0:o.call(t))||{};for(let[a,i]of Object.entries(r))switch(i.type){case"staticContextParams":s[a]=i.value;break;case"contextParams":s[a]=e[i.name];break;case"clientContextParams":case"builtInParams":s[a]=await Wi(i.name,a,n)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(r).length===0&&Object.assign(s,n),String(n.serviceId).toLowerCase()==="s3"&&await Ui(s),s};function Gi(e){let t={};if(e=e.replace(/^\?/,""),e)for(let n of e.split("&")){let[s,r=null]=n.split("=");s=decodeURIComponent(s),r&&(r=decodeURIComponent(r)),s in t?Array.isArray(t[s])?t[s].push(r):t[s]=[t[s],r]:t[s]=r}return t}var J=e=>{if(typeof e=="string")return J(new URL(e));let{hostname:t,pathname:n,port:s,protocol:r,search:o}=e,a;return o&&(a=Gi(o)),{hostname:t,port:s?parseInt(s):void 0,protocol:r,path:n,query:a}};var qi=e=>typeof e=="object"?"url"in e?J(e.url):e:J(e);var Hi=({config:e,instructions:t})=>(n,s)=>async r=>{var i,c;let o=await Bi(r.input,{getEndpointParameterInstructions(){return t}},{...e},s);s.endpointV2=o,s.authSchemes=(i=o.properties)==null?void 0:i.authSchemes;let a=(c=s.authSchemes)==null?void 0:c[0];return a&&(s.signing_region=a.signingRegion,s.signing_service=a.signingName),n({...r})};var ji=(e,t)=>(n,s)=>async r=>{let{response:o}=await n(r);try{let a=await t(o,e);return{response:o,output:a}}catch(a){if(Object.defineProperty(a,"$response",{value:o}),!("$metadata"in a)){let i="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";a.message+=`
  `+i}throw a}};var Ki=(e,t)=>(n,s)=>async r=>{var i;let o=(i=s.endpointV2)!=null&&i.url&&e.urlParser?async()=>e.urlParser(s.endpointV2.url):e.endpoint;if(!o)throw new Error("No valid endpoint provider available.");let a=await t(r.input,{...e,endpoint:o});return n({...r,request:a})};var Zy={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},To={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Y(e,t,n){return{applyToStack:s=>{s.add(ji(e,n),Zy),s.add(Ki(e,t),To)}}}var ep={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:To.name},X=(e,t)=>({applyToStack:n=>{n.addRelativeTo(Hi({config:e,instructions:t}),ep)}});var F=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};var Ze=e=>{let t=e.tls??!0,{endpoint:n}=e,s=n!=null?async()=>qi(await F(n)()):void 0;return{...e,endpoint:s,tls:t,isCustomEndpoint:!!n,useDualstackEndpoint:F(e.useDualstackEndpoint??!1),useFipsEndpoint:F(e.useFipsEndpoint??!1)}};var Se=class{trace(){}debug(){}info(){}warn(){}error(){}};var Yt=()=>{let e=[],t=[],n=new Set,s=l=>l.sort((m,u)=>Ji[u.step]-Ji[m.step]||Yi[u.priority||"normal"]-Yi[m.priority||"normal"]),r=l=>{let m=!1,u=y=>y.name&&y.name===l?(m=!0,n.delete(l),!1):!0;return e=e.filter(u),t=t.filter(u),m},o=l=>{let m=!1,u=y=>y.middleware===l?(m=!0,y.name&&n.delete(y.name),!1):!0;return e=e.filter(u),t=t.filter(u),m},a=l=>(e.forEach(m=>{l.add(m.middleware,{...m})}),t.forEach(m=>{l.addRelativeTo(m.middleware,{...m})}),l),i=l=>{let m=[];return l.before.forEach(u=>{u.before.length===0&&u.after.length===0?m.push(u):m.push(...i(u))}),m.push(l),l.after.reverse().forEach(u=>{u.before.length===0&&u.after.length===0?m.push(u):m.push(...i(u))}),m},c=(l=!1)=>{let m=[],u=[],y={};return e.forEach(h=>{let E={...h,before:[],after:[]};E.name&&(y[E.name]=E),m.push(E)}),t.forEach(h=>{let E={...h,before:[],after:[]};E.name&&(y[E.name]=E),u.push(E)}),u.forEach(h=>{if(h.toMiddleware){let E=y[h.toMiddleware];if(E===void 0){if(l)return;throw new Error(`${h.toMiddleware} is not found when adding ${h.name||"anonymous"} middleware ${h.relation} ${h.toMiddleware}`)}h.relation==="after"&&E.after.push(h),h.relation==="before"&&E.before.push(h)}}),s(m).map(i).reduce((h,E)=>(h.push(...E),h),[])},d={add:(l,m={})=>{let{name:u,override:y}=m,p={step:"initialize",priority:"normal",middleware:l,...m};if(u){if(n.has(u)){if(!y)throw new Error(`Duplicate middleware name '${u}'`);let h=e.findIndex(Ie=>Ie.name===u),E=e[h];if(E.step!==p.step||E.priority!==p.priority)throw new Error(`"${u}" middleware with ${E.priority} priority in ${E.step} step cannot be overridden by same-name middleware with ${p.priority} priority in ${p.step} step.`);e.splice(h,1)}n.add(u)}e.push(p)},addRelativeTo:(l,m)=>{let{name:u,override:y}=m,p={middleware:l,...m};if(u){if(n.has(u)){if(!y)throw new Error(`Duplicate middleware name '${u}'`);let h=t.findIndex(Ie=>Ie.name===u),E=t[h];if(E.toMiddleware!==p.toMiddleware||E.relation!==p.relation)throw new Error(`"${u}" middleware ${E.relation} "${E.toMiddleware}" middleware cannot be overridden by same-name middleware ${p.relation} "${p.toMiddleware}" middleware.`);t.splice(h,1)}n.add(u)}t.push(p)},clone:()=>a(Yt()),use:l=>{l.applyToStack(d)},remove:l=>typeof l=="string"?r(l):o(l),removeByTag:l=>{let m=!1,u=y=>{let{tags:p,name:h}=y;return p&&p.includes(l)?(h&&n.delete(h),m=!0,!1):!0};return e=e.filter(u),t=t.filter(u),m},concat:l=>{let m=a(Yt());return m.use(l),m},applyToStack:a,identify:()=>c(!0).map(l=>l.name+": "+(l.tags||[]).join(",")),resolve:(l,m)=>{for(let u of c().map(y=>y.middleware).reverse())l=u(l,m);return l}};return d},Ji={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Yi={high:3,normal:2,low:1};var xe=class{constructor(t){this.middlewareStack=Yt(),this.config=t}send(t,n,s){let r=typeof n!="function"?n:void 0,o=typeof n=="function"?n:s,a=t.resolveMiddleware(this.middlewareStack,this.config,r);if(o)a(t).then(i=>o(null,i.output),i=>o(i)).catch(()=>{});else return a(t).then(i=>i.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}};var V=class{constructor(){this.middlewareStack=Yt()}};var et="***SensitiveInformation***";var js=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&Hs.warn(qs(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){let t=e.toLowerCase();if((t==="false"||t==="true")&&Hs.warn(qs(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},Te=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&Hs.warn(qs(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},tp=Math.ceil(34028234663852886e22),Xi=e=>{let t=Te(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>tp)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},is=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}};var re=e=>Co(e,32),Qi=e=>Co(e,16),Zi=e=>Co(e,8),Co=(e,t)=>{let n=is(e);if(n!==void 0&&np(n,t)!==n)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return n},np=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},G=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},Ks=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},f=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return Hs.warn(qs(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}};var ec=e=>Te(typeof e=="string"?cs(e):e);var tc=e=>Xi(typeof e=="string"?cs(e):e),sp=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,cs=e=>{let t=e.match(sp);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)};var _o=e=>re(typeof e=="string"?cs(e):e),nc=e=>Qi(typeof e=="string"?cs(e):e),sc=e=>Zi(typeof e=="string"?cs(e):e),qs=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),Hs={warn:console.warn};var rp=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var Fx=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/);var op=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),rc=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=op.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[n,s,r,o,a,i,c,d,l]=t,m=nc(oc(s)),u=ds(r,"month",1,12),y=ds(o,"day",1,31),p=ap(m,u,y,{hours:a,minutes:i,seconds:c,fractionalMilliseconds:d});return l.toUpperCase()!="Z"&&p.setTime(p.getTime()-mp(l)),p},$x=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),zx=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Vx=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/);var Mt=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=ec(e);else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},ap=(e,t,n,s)=>{let r=t-1;return cp(e,r,n),new Date(Date.UTC(e,r,n,ds(s.hours,"hour",0,23),ds(s.minutes,"minute",0,59),ds(s.seconds,"seconds",0,60),lp(s.fractionalMilliseconds)))};var Ux=50*365*24*60*60*1e3;var ip=[31,28,31,30,31,30,31,31,30,31,30,31],cp=(e,t,n)=>{let s=ip[t];if(t===1&&dp(e)&&(s=29),n>s)throw new TypeError(`Invalid day for ${rp[t]} in ${e}: ${n}`)},dp=e=>e%4===0&&(e%100!==0||e%400===0),ds=(e,t,n,s)=>{let r=sc(oc(e));if(r<n||r>s)throw new TypeError(`${t} must be between ${n} and ${s}, inclusive`);return r},lp=e=>e==null?0:tc("0."+e)*1e3,mp=e=>{let t=e[0],n=1;if(t=="+")n=1;else if(t=="-")n=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let s=Number(e.substring(1,3)),r=Number(e.substring(4,6));return n*(s*60+r)*60*1e3},oc=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};var oe=class extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,oe.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}},g=(e,t={})=>{Object.entries(t).filter(([,s])=>s!==void 0).forEach(([s,r])=>{(e[s]==null||e[s]==="")&&(e[s]=r)});let n=e.message||e.Message||"UnknownError";return e.message=n,delete e.Message,e};var pe=({output:e,parsedBody:t,exceptionCtor:n,errorCode:s})=>{let r=up(e),o=r.httpStatusCode?r.httpStatusCode+"":void 0,a=new n({name:(t==null?void 0:t.code)||(t==null?void 0:t.Code)||s||o||"UnknownError",$fault:"client",$metadata:r});throw g(a,t)},up=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});var tt=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};var ac=!1,nt=e=>{e&&!ac&&parseInt(e.substring(1,e.indexOf(".")))<14&&(ac=!0)};function Js(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var Ro=e=>{let t="#text";for(let n in e)e.hasOwnProperty(n)&&e[n][t]!==void 0?e[n]=e[n][t]:typeof e[n]=="object"&&e[n]!==null&&(e[n]=Ro(e[n]));return e};var Ao=function(){let e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),n=new t;return Object.setPrototypeOf(n,e.prototype),n};Ao.prototype=Object.create(String.prototype,{constructor:{value:Ao,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(Ao,String);function ls(e,t,n){let s,r,o;if(typeof t>"u"&&typeof n>"u")s={},o=e;else{if(s=e,typeof t=="function")return r=t,o=n,fp(s,r,o);o=t}for(let a of Object.keys(o)){if(!Array.isArray(o[a])){s[a]=o[a];continue}yp(s,null,o,a)}return s}var fp=(e,t,n)=>ls(e,Object.entries(n).reduce((s,[r,o])=>(Array.isArray(o)?s[r]=o:typeof o=="function"?s[r]=[t,o()]:s[r]=[t,o],s),{})),yp=(e,t,n,s)=>{if(t!==null){let a=n[s];typeof a=="function"&&(a=[,a]);let[i=pp,c=hp,d=s]=a;(typeof i=="function"&&i(t[d])||typeof i!="function"&&i)&&(e[s]=c(t[d]));return}let[r,o]=n[s];if(typeof o=="function"){let a,i=r===void 0&&(a=o())!=null,c=typeof r=="function"&&!!r(void 0)||typeof r!="function"&&!!r;i?e[s]=a:c&&(e[s]=o())}else{let a=r===void 0&&o!=null,i=typeof r=="function"&&!!r(o)||typeof r!="function"&&!!r;(a||i)&&(e[s]=o)}},pp=e=>e!=null,hp=e=>e;var bo;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(bo||(bo={}));var R=class{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/"}static isInstance(t){if(!t)return!1;let n=t;return"method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&typeof n.query=="object"&&typeof n.headers=="object"}clone(){let t=new R({...this,headers:{...this.headers}});return t.query&&(t.query=wp(t.query)),t}};function wp(e){return Object.keys(e).reduce((t,n)=>{let s=e[n];return{...t,[n]:Array.isArray(s)?[...s]:s}},{})}var Ce=class{constructor(t){this.statusCode=t.statusCode,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let n=t;return typeof n.statusCode=="number"&&typeof n.headers=="object"}};var A=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,A.prototype)}};var Xt=class extends A{constructor(t){super({name:"InternalServerError",$fault:"server",...t}),this.name="InternalServerError",this.$fault="server",Object.setPrototypeOf(this,Xt.prototype),this.Message=t.Message}};var Qt=class extends A{constructor(t){super({name:"DuplicateInstanceId",$fault:"client",...t}),this.name="DuplicateInstanceId",this.$fault="client",Object.setPrototypeOf(this,Qt.prototype)}},Zt=class extends A{constructor(t){super({name:"InvalidCommandId",$fault:"client",...t}),this.name="InvalidCommandId",this.$fault="client",Object.setPrototypeOf(this,Zt.prototype)}},en=class extends A{constructor(t){super({name:"InvalidInstanceId",$fault:"client",...t}),this.name="InvalidInstanceId",this.$fault="client",Object.setPrototypeOf(this,en.prototype),this.Message=t.Message}};var tn=class extends A{constructor(t){super({name:"InvalidParameters",$fault:"client",...t}),this.name="InvalidParameters",this.$fault="client",Object.setPrototypeOf(this,tn.prototype),this.Message=t.Message}};var nn=class extends A{constructor(t){super({name:"InvalidDocument",$fault:"client",...t}),this.name="InvalidDocument",this.$fault="client",Object.setPrototypeOf(this,nn.prototype),this.Message=t.Message}},sn=class extends A{constructor(t){super({name:"InvalidDocumentVersion",$fault:"client",...t}),this.name="InvalidDocumentVersion",this.$fault="client",Object.setPrototypeOf(this,sn.prototype),this.Message=t.Message}};var rn=class extends A{constructor(t){super({name:"UnsupportedPlatformType",$fault:"client",...t}),this.name="UnsupportedPlatformType",this.$fault="client",Object.setPrototypeOf(this,rn.prototype),this.Message=t.Message}};var on=class extends A{constructor(t){super({name:"MaxDocumentSizeExceeded",$fault:"client",...t}),this.name="MaxDocumentSizeExceeded",this.$fault="client",Object.setPrototypeOf(this,on.prototype),this.Message=t.Message}};var an=class extends A{constructor(t){super({name:"InvalidNextToken",$fault:"client",...t}),this.name="InvalidNextToken",this.$fault="client",Object.setPrototypeOf(this,an.prototype),this.Message=t.Message}};var cn=class extends A{constructor(t){super({name:"InvalidFilterKey",$fault:"client",...t}),this.name="InvalidFilterKey",this.$fault="client",Object.setPrototypeOf(this,cn.prototype)}};var dn=class extends A{constructor(t){super({name:"InvalidInstanceInformationFilterValue",$fault:"client",...t}),this.name="InvalidInstanceInformationFilterValue",this.$fault="client",Object.setPrototypeOf(this,dn.prototype)}};var ln=class extends A{constructor(t){super({name:"InvalidPluginName",$fault:"client",...t}),this.name="InvalidPluginName",this.$fault="client",Object.setPrototypeOf(this,ln.prototype)}},mn=class extends A{constructor(t){super({name:"InvocationDoesNotExist",$fault:"client",...t}),this.name="InvocationDoesNotExist",this.$fault="client",Object.setPrototypeOf(this,mn.prototype)}};var un=class extends A{constructor(t){super({name:"InvalidNotificationConfig",$fault:"client",...t}),this.name="InvalidNotificationConfig",this.$fault="client",Object.setPrototypeOf(this,un.prototype),this.Message=t.Message}},fn=class extends A{constructor(t){super({name:"InvalidOutputFolder",$fault:"client",...t}),this.name="InvalidOutputFolder",this.$fault="client",Object.setPrototypeOf(this,fn.prototype)}},yn=class extends A{constructor(t){super({name:"InvalidRole",$fault:"client",...t}),this.name="InvalidRole",this.$fault="client",Object.setPrototypeOf(this,yn.prototype),this.Message=t.Message}};var Ep=e=>({...e,...e.Parameters&&{Parameters:et}});var ic=e=>({...e,...e.Parameters&&{Parameters:et}}),cc=e=>({...e,...e.Command&&{Command:Ep(e.Command)}});var dc=async(e,t)=>{let n=Oo("DescribeInstanceInformation"),s;return s=JSON.stringify(Up(e,t)),No(t,n,"/",void 0,s)};var lc=async(e,t)=>{let n=Oo("GetCommandInvocation"),s;return s=JSON.stringify(Wp(e,t)),No(t,n,"/",void 0,s)};var mc=async(e,t)=>{let n=Oo("SendCommand"),s;return s=JSON.stringify(Qp(e,t)),No(t,n,"/",void 0,s)};var uc=async(e,t)=>{if(e.statusCode>=300)return Ip(e,t);let n=await Ys(e.body,t),s={};s=ch(n,t);let r={$metadata:O(e),...s};return Promise.resolve(r)},Ip=async(e,t)=>{let n={...e,body:await Do(e.body,t)},s=Mo(e,n.body);switch(s){case"InternalServerError":case"com.amazonaws.ssm#InternalServerError":throw await vo(n,t);case"InvalidFilterKey":case"com.amazonaws.ssm#InvalidFilterKey":throw await Rp(n,t);case"InvalidInstanceId":case"com.amazonaws.ssm#InvalidInstanceId":throw await Po(n,t);case"InvalidInstanceInformationFilterValue":case"com.amazonaws.ssm#InvalidInstanceInformationFilterValue":throw await Ap(n,t);case"InvalidNextToken":case"com.amazonaws.ssm#InvalidNextToken":throw await bp(n,t);default:let r=n.body;pe({output:e,parsedBody:r,exceptionCtor:A,errorCode:s})}};var fc=async(e,t)=>{if(e.statusCode>=300)return gp(e,t);let n=await Ys(e.body,t),s={};s=lh(n,t);let r={$metadata:O(e),...s};return Promise.resolve(r)},gp=async(e,t)=>{let n={...e,body:await Do(e.body,t)},s=Mo(e,n.body);switch(s){case"InternalServerError":case"com.amazonaws.ssm#InternalServerError":throw await vo(n,t);case"InvalidCommandId":case"com.amazonaws.ssm#InvalidCommandId":throw await Tp(n,t);case"InvalidInstanceId":case"com.amazonaws.ssm#InvalidInstanceId":throw await Po(n,t);case"InvalidPluginName":case"com.amazonaws.ssm#InvalidPluginName":throw await Op(n,t);case"InvocationDoesNotExist":case"com.amazonaws.ssm#InvocationDoesNotExist":throw await Mp(n,t);default:let r=n.body;pe({output:e,parsedBody:r,exceptionCtor:A,errorCode:s})}};var yc=async(e,t)=>{if(e.statusCode>=300)return Sp(e,t);let n=await Ys(e.body,t),s={};s=kh(n,t);let r={$metadata:O(e),...s};return Promise.resolve(r)},Sp=async(e,t)=>{let n={...e,body:await Do(e.body,t)},s=Mo(e,n.body);switch(s){case"DuplicateInstanceId":case"com.amazonaws.ssm#DuplicateInstanceId":throw await xp(n,t);case"InternalServerError":case"com.amazonaws.ssm#InternalServerError":throw await vo(n,t);case"InvalidDocument":case"com.amazonaws.ssm#InvalidDocument":throw await Cp(n,t);case"InvalidDocumentVersion":case"com.amazonaws.ssm#InvalidDocumentVersion":throw await _p(n,t);case"InvalidInstanceId":case"com.amazonaws.ssm#InvalidInstanceId":throw await Po(n,t);case"InvalidNotificationConfig":case"com.amazonaws.ssm#InvalidNotificationConfig":throw await vp(n,t);case"InvalidOutputFolder":case"com.amazonaws.ssm#InvalidOutputFolder":throw await Pp(n,t);case"InvalidParameters":case"com.amazonaws.ssm#InvalidParameters":throw await Np(n,t);case"InvalidRole":case"com.amazonaws.ssm#InvalidRole":throw await Dp(n,t);case"MaxDocumentSizeExceeded":case"com.amazonaws.ssm#MaxDocumentSizeExceeded":throw await kp(n,t);case"UnsupportedPlatformType":case"com.amazonaws.ssm#UnsupportedPlatformType":throw await Lp(n,t);default:let r=n.body;pe({output:e,parsedBody:r,exceptionCtor:A,errorCode:s})}};var xp=async(e,t)=>{let n=e.body,s=dh(n,t),r=new Qt({$metadata:O(e),...s});return g(r,n)};var vo=async(e,t)=>{let n=e.body,s=hh(n,t),r=new Xt({$metadata:O(e),...s});return g(r,n)};var Tp=async(e,t)=>{let n=e.body,s=wh(n,t),r=new Zt({$metadata:O(e),...s});return g(r,n)};var Cp=async(e,t)=>{let n=e.body,s=Eh(n,t),r=new nn({$metadata:O(e),...s});return g(r,n)};var _p=async(e,t)=>{let n=e.body,s=Ih(n,t),r=new sn({$metadata:O(e),...s});return g(r,n)};var Rp=async(e,t)=>{let n=e.body,s=gh(n,t),r=new cn({$metadata:O(e),...s});return g(r,n)};var Po=async(e,t)=>{let n=e.body,s=Sh(n,t),r=new en({$metadata:O(e),...s});return g(r,n)},Ap=async(e,t)=>{let n=e.body,s=xh(n,t),r=new dn({$metadata:O(e),...s});return g(r,n)};var bp=async(e,t)=>{let n=e.body,s=Th(n,t),r=new an({$metadata:O(e),...s});return g(r,n)},vp=async(e,t)=>{let n=e.body,s=Ch(n,t),r=new un({$metadata:O(e),...s});return g(r,n)};var Pp=async(e,t)=>{let n=e.body,s=_h(n,t),r=new fn({$metadata:O(e),...s});return g(r,n)};var Np=async(e,t)=>{let n=e.body,s=Rh(n,t),r=new tn({$metadata:O(e),...s});return g(r,n)};var Op=async(e,t)=>{let n=e.body,s=Ah(n,t),r=new ln({$metadata:O(e),...s});return g(r,n)};var Dp=async(e,t)=>{let n=e.body,s=bh(n,t),r=new yn({$metadata:O(e),...s});return g(r,n)};var Mp=async(e,t)=>{let n=e.body,s=vh(n,t),r=new mn({$metadata:O(e),...s});return g(r,n)};var kp=async(e,t)=>{let n=e.body,s=Ph(n,t),r=new on({$metadata:O(e),...s});return g(r,n)};var Lp=async(e,t)=>{let n=e.body,s=zh(n,t),r=new rn({$metadata:O(e),...s});return g(r,n)};var Fp=(e,t)=>({...e.Name!=null&&{Name:e.Name}}),$p=(e,t)=>({...e.Alarms!=null&&{Alarms:zp(e.Alarms,t)},...e.IgnorePollAlarmFailure!=null&&{IgnorePollAlarmFailure:e.IgnorePollAlarmFailure}}),zp=(e,t)=>e.filter(n=>n!=null).map(n=>Fp(n,t));var Vp=(e,t)=>({...e.CloudWatchLogGroupName!=null&&{CloudWatchLogGroupName:e.CloudWatchLogGroupName},...e.CloudWatchOutputEnabled!=null&&{CloudWatchOutputEnabled:e.CloudWatchOutputEnabled}});var Up=(e,t)=>({...e.Filters!=null&&{Filters:jp(e.Filters,t)},...e.InstanceInformationFilterList!=null&&{InstanceInformationFilterList:qp(e.InstanceInformationFilterList,t)},...e.MaxResults!=null&&{MaxResults:e.MaxResults},...e.NextToken!=null&&{NextToken:e.NextToken}});var Wp=(e,t)=>({...e.CommandId!=null&&{CommandId:e.CommandId},...e.InstanceId!=null&&{InstanceId:e.InstanceId},...e.PluginName!=null&&{PluginName:e.PluginName}});var Bp=(e,t)=>e.filter(n=>n!=null).map(n=>n),Gp=(e,t)=>({...e.key!=null&&{key:e.key},...e.valueSet!=null&&{valueSet:pc(e.valueSet,t)}}),qp=(e,t)=>e.filter(n=>n!=null).map(n=>Gp(n,t)),pc=(e,t)=>e.filter(n=>n!=null).map(n=>n),Hp=(e,t)=>({...e.Key!=null&&{Key:e.Key},...e.Values!=null&&{Values:pc(e.Values,t)}}),jp=(e,t)=>e.filter(n=>n!=null).map(n=>Hp(n,t));var Kp=(e,t)=>({...e.NotificationArn!=null&&{NotificationArn:e.NotificationArn},...e.NotificationEvents!=null&&{NotificationEvents:Jp(e.NotificationEvents,t)},...e.NotificationType!=null&&{NotificationType:e.NotificationType}}),Jp=(e,t)=>e.filter(n=>n!=null).map(n=>n);var Yp=(e,t)=>Object.entries(e).reduce((n,[s,r])=>(r===null||(n[s]=Xp(r,t)),n),{});var Xp=(e,t)=>e.filter(n=>n!=null).map(n=>n);var Qp=(e,t)=>({...e.AlarmConfiguration!=null&&{AlarmConfiguration:$p(e.AlarmConfiguration,t)},...e.CloudWatchOutputConfig!=null&&{CloudWatchOutputConfig:Vp(e.CloudWatchOutputConfig,t)},...e.Comment!=null&&{Comment:e.Comment},...e.DocumentHash!=null&&{DocumentHash:e.DocumentHash},...e.DocumentHashType!=null&&{DocumentHashType:e.DocumentHashType},...e.DocumentName!=null&&{DocumentName:e.DocumentName},...e.DocumentVersion!=null&&{DocumentVersion:e.DocumentVersion},...e.InstanceIds!=null&&{InstanceIds:Bp(e.InstanceIds,t)},...e.MaxConcurrency!=null&&{MaxConcurrency:e.MaxConcurrency},...e.MaxErrors!=null&&{MaxErrors:e.MaxErrors},...e.NotificationConfig!=null&&{NotificationConfig:Kp(e.NotificationConfig,t)},...e.OutputS3BucketName!=null&&{OutputS3BucketName:e.OutputS3BucketName},...e.OutputS3KeyPrefix!=null&&{OutputS3KeyPrefix:e.OutputS3KeyPrefix},...e.OutputS3Region!=null&&{OutputS3Region:e.OutputS3Region},...e.Parameters!=null&&{Parameters:Yp(e.Parameters,t)},...e.ServiceRoleArn!=null&&{ServiceRoleArn:e.ServiceRoleArn},...e.Targets!=null&&{Targets:eh(e.Targets,t)},...e.TimeoutSeconds!=null&&{TimeoutSeconds:e.TimeoutSeconds}});var Zp=(e,t)=>({...e.Key!=null&&{Key:e.Key},...e.Values!=null&&{Values:th(e.Values,t)}});var eh=(e,t)=>e.filter(n=>n!=null).map(n=>Zp(n,t)),th=(e,t)=>e.filter(n=>n!=null).map(n=>n);var nh=(e,t)=>({Name:f(e.Name)}),sh=(e,t)=>({Alarms:e.Alarms!=null?rh(e.Alarms,t):void 0,IgnorePollAlarmFailure:js(e.IgnorePollAlarmFailure)}),rh=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>s===null?null:nh(s,t)),oh=(e,t)=>({Name:f(e.Name),State:f(e.State)}),ah=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>s===null?null:oh(s,t));var hc=(e,t)=>({CloudWatchLogGroupName:f(e.CloudWatchLogGroupName),CloudWatchOutputEnabled:js(e.CloudWatchOutputEnabled)}),ih=(e,t)=>({AlarmConfiguration:e.AlarmConfiguration!=null?sh(e.AlarmConfiguration,t):void 0,CloudWatchOutputConfig:e.CloudWatchOutputConfig!=null?hc(e.CloudWatchOutputConfig,t):void 0,CommandId:f(e.CommandId),Comment:f(e.Comment),CompletedCount:re(e.CompletedCount),DeliveryTimedOutCount:re(e.DeliveryTimedOutCount),DocumentName:f(e.DocumentName),DocumentVersion:f(e.DocumentVersion),ErrorCount:re(e.ErrorCount),ExpiresAfter:e.ExpiresAfter!=null?G(Mt(Te(e.ExpiresAfter))):void 0,InstanceIds:e.InstanceIds!=null?fh(e.InstanceIds,t):void 0,MaxConcurrency:f(e.MaxConcurrency),MaxErrors:f(e.MaxErrors),NotificationConfig:e.NotificationConfig!=null?Nh(e.NotificationConfig,t):void 0,OutputS3BucketName:f(e.OutputS3BucketName),OutputS3KeyPrefix:f(e.OutputS3KeyPrefix),OutputS3Region:f(e.OutputS3Region),Parameters:e.Parameters!=null?Dh(e.Parameters,t):void 0,RequestedDateTime:e.RequestedDateTime!=null?G(Mt(Te(e.RequestedDateTime))):void 0,ServiceRole:f(e.ServiceRole),Status:f(e.Status),StatusDetails:f(e.StatusDetails),TargetCount:re(e.TargetCount),Targets:e.Targets!=null?Fh(e.Targets,t):void 0,TimeoutSeconds:re(e.TimeoutSeconds),TriggeredAlarms:e.TriggeredAlarms!=null?ah(e.TriggeredAlarms,t):void 0});var ch=(e,t)=>({InstanceInformationList:e.InstanceInformationList!=null?ph(e.InstanceInformationList,t):void 0,NextToken:f(e.NextToken)});var dh=(e,t)=>({});var lh=(e,t)=>({CloudWatchOutputConfig:e.CloudWatchOutputConfig!=null?hc(e.CloudWatchOutputConfig,t):void 0,CommandId:f(e.CommandId),Comment:f(e.Comment),DocumentName:f(e.DocumentName),DocumentVersion:f(e.DocumentVersion),ExecutionElapsedTime:f(e.ExecutionElapsedTime),ExecutionEndDateTime:f(e.ExecutionEndDateTime),ExecutionStartDateTime:f(e.ExecutionStartDateTime),InstanceId:f(e.InstanceId),PluginName:f(e.PluginName),ResponseCode:re(e.ResponseCode),StandardErrorContent:f(e.StandardErrorContent),StandardErrorUrl:f(e.StandardErrorUrl),StandardOutputContent:f(e.StandardOutputContent),StandardOutputUrl:f(e.StandardOutputUrl),Status:f(e.Status),StatusDetails:f(e.StatusDetails)});var mh=(e,t)=>({DetailedStatus:f(e.DetailedStatus),InstanceAssociationStatusAggregatedCount:e.InstanceAssociationStatusAggregatedCount!=null?uh(e.InstanceAssociationStatusAggregatedCount,t):void 0});var uh=(e,t)=>Object.entries(e).reduce((n,[s,r])=>(r===null||(n[s]=re(r)),n),{});var fh=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>s===null?null:f(s)),yh=(e,t)=>({ActivationId:f(e.ActivationId),AgentVersion:f(e.AgentVersion),AssociationOverview:e.AssociationOverview!=null?mh(e.AssociationOverview,t):void 0,AssociationStatus:f(e.AssociationStatus),ComputerName:f(e.ComputerName),IPAddress:f(e.IPAddress),IamRole:f(e.IamRole),InstanceId:f(e.InstanceId),IsLatestVersion:js(e.IsLatestVersion),LastAssociationExecutionDate:e.LastAssociationExecutionDate!=null?G(Mt(Te(e.LastAssociationExecutionDate))):void 0,LastPingDateTime:e.LastPingDateTime!=null?G(Mt(Te(e.LastPingDateTime))):void 0,LastSuccessfulAssociationExecutionDate:e.LastSuccessfulAssociationExecutionDate!=null?G(Mt(Te(e.LastSuccessfulAssociationExecutionDate))):void 0,Name:f(e.Name),PingStatus:f(e.PingStatus),PlatformName:f(e.PlatformName),PlatformType:f(e.PlatformType),PlatformVersion:f(e.PlatformVersion),RegistrationDate:e.RegistrationDate!=null?G(Mt(Te(e.RegistrationDate))):void 0,ResourceType:f(e.ResourceType),SourceId:f(e.SourceId),SourceType:f(e.SourceType)}),ph=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>s===null?null:yh(s,t));var hh=(e,t)=>({Message:f(e.Message)});var wh=(e,t)=>({});var Eh=(e,t)=>({Message:f(e.Message)});var Ih=(e,t)=>({Message:f(e.Message)});var gh=(e,t)=>({});var Sh=(e,t)=>({Message:f(e.Message)}),xh=(e,t)=>({message:f(e.message)});var Th=(e,t)=>({Message:f(e.Message)}),Ch=(e,t)=>({Message:f(e.Message)});var _h=(e,t)=>({});var Rh=(e,t)=>({Message:f(e.Message)});var Ah=(e,t)=>({});var bh=(e,t)=>({Message:f(e.Message)});var vh=(e,t)=>({});var Ph=(e,t)=>({Message:f(e.Message)});var Nh=(e,t)=>({NotificationArn:f(e.NotificationArn),NotificationEvents:e.NotificationEvents!=null?Oh(e.NotificationEvents,t):void 0,NotificationType:f(e.NotificationType)}),Oh=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>s===null?null:f(s));var Dh=(e,t)=>Object.entries(e).reduce((n,[s,r])=>(r===null||(n[s]=Mh(r,t)),n),{}),Mh=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>s===null?null:f(s));var kh=(e,t)=>({Command:e.Command!=null?ih(e.Command,t):void 0});var Lh=(e,t)=>({Key:f(e.Key),Values:e.Values!=null?$h(e.Values,t):void 0});var Fh=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>s===null?null:Lh(s,t)),$h=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>s===null?null:f(s));var zh=(e,t)=>({Message:f(e.Message)});var O=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Vh=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),Uh=(e,t)=>Vh(e,t).then(n=>t.utf8Encoder(n)),No=async(e,t,n,s,r)=>{let{hostname:o,protocol:a="https",port:i,path:c}=await e.endpoint(),d={protocol:a,hostname:o,port:i,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+n:c+n,headers:t};return s!==void 0&&(d.hostname=s),r!==void 0&&(d.body=r),new R(d)};function Oo(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`AmazonSSM.${e}`}}var Ys=(e,t)=>Uh(e,t).then(n=>n.length?JSON.parse(n):{}),Do=async(e,t)=>{let n=await Ys(e,t);return n.message=n.message??n.Message,n},Mo=(e,t)=>{let n=(o,a)=>Object.keys(o).find(i=>i.toLowerCase()===a.toLowerCase()),s=o=>{let a=o;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},r=n(e.headers,"x-amzn-errortype");if(r!==void 0)return s(e.headers[r]);if(t.code!==void 0)return s(t.code);if(t.__type!==void 0)return s(t.__type)};var pn=class extends V{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,n,s){this.middlewareStack.use(Y(n,this.serialize,this.deserialize)),this.middlewareStack.use(X(n,pn.getEndpointParameterInstructions()));let r=t.concat(this.middlewareStack),{logger:o}=n,c={logger:o,clientName:"SSMClient",commandName:"DescribeInstanceInformationCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=n;return r.resolve(l=>d.handle(l.request,s||{}),c)}serialize(t,n){return dc(t,n)}deserialize(t,n){return uc(t,n)}};var hn=class extends V{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,n,s){this.middlewareStack.use(Y(n,this.serialize,this.deserialize)),this.middlewareStack.use(X(n,hn.getEndpointParameterInstructions()));let r=t.concat(this.middlewareStack),{logger:o}=n,c={logger:o,clientName:"SSMClient",commandName:"GetCommandInvocationCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=n;return r.resolve(l=>d.handle(l.request,s||{}),c)}serialize(t,n){return lc(t,n)}deserialize(t,n){return fc(t,n)}};var wn=class extends V{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,n,s){this.middlewareStack.use(Y(n,this.serialize,this.deserialize)),this.middlewareStack.use(X(n,wn.getEndpointParameterInstructions()));let r=t.concat(this.middlewareStack),{logger:o}=n,c={logger:o,clientName:"SSMClient",commandName:"SendCommandCommand",inputFilterSensitiveLog:ic,outputFilterSensitiveLog:cc},{requestHandler:d}=n;return r.resolve(l=>d.handle(l.request,s||{}),c)}serialize(t,n){return mc(t,n)}deserialize(t,n){return yc(t,n)}};var st;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(st||(st={}));var En=(e,t,n)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${n} "${t}". Expected "true" or "false", got ${e[t]}.`)}};var Wh="AWS_USE_DUALSTACK_ENDPOINT",Bh="use_dualstack_endpoint";var rt={environmentVariableSelector:e=>En(e,Wh,st.ENV),configFileSelector:e=>En(e,Bh,st.CONFIG),default:!1};var Gh="AWS_USE_FIPS_ENDPOINT",qh="use_fips_endpoint";var ot={environmentVariableSelector:e=>En(e,Gh,st.ENV),configFileSelector:e=>En(e,qh,st.CONFIG),default:!1};var Hh="AWS_REGION",jh="region",_e={environmentVariableSelector:e=>e[Hh],configFileSelector:e=>e[jh],default:()=>{throw new Error("Region is missing")}},at={preferredFile:"credentials"};var Xs=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips"));var ko=e=>Xs(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e;var it=e=>{let{region:t,useFipsEndpoint:n}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return ko(t);let s=await t();return ko(s)},useFipsEndpoint:async()=>{let s=typeof t=="string"?t:await t();return Xs(s)?!0:typeof n!="function"?Promise.resolve(!!n):n()}}};var wc="content-length";function Kh(e){return t=>async n=>{let s=n.request;if(R.isInstance(s)){let{body:r,headers:o}=s;if(r&&Object.keys(o).map(a=>a.toLowerCase()).indexOf(wc)===-1)try{let a=e(r);s.headers={...s.headers,[wc]:String(a)}}catch{}}return t({...n,request:s})}}var Jh={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},ct=e=>({applyToStack:t=>{t.add(Kh(e.bodyLengthChecker),Jh)}});var Yh=e=>t=>async n=>{if(!R.isInstance(n.request))return t(n);let{request:s}=n,{handlerProtocol:r=""}=e.requestHandler.metadata||{};if(r.indexOf("h2")>=0&&!s.headers[":authority"])delete s.headers.host,s.headers[":authority"]="";else if(!s.headers.host){let o=s.hostname;s.port!=null&&(o+=`:${s.port}`),s.headers.host=o}return t(n)},Xh={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},dt=e=>({applyToStack:t=>{t.add(Yh(e),Xh)}});var Qh=()=>(e,t)=>async n=>{var s,r;try{let o=await e(n),{clientName:a,commandName:i,logger:c,dynamoDbDocumentClientOptions:d={}}=t,{overrideInputFilterSensitiveLog:l,overrideOutputFilterSensitiveLog:m}=d,u=l??t.inputFilterSensitiveLog,y=m??t.outputFilterSensitiveLog,{$metadata:p,...h}=o.output;return(s=c==null?void 0:c.info)==null||s.call(c,{clientName:a,commandName:i,input:u(n.input),output:y(h),metadata:p}),o}catch(o){let{clientName:a,commandName:i,logger:c,dynamoDbDocumentClientOptions:d={}}=t,{overrideInputFilterSensitiveLog:l}=d,m=l??t.inputFilterSensitiveLog;throw(r=c==null?void 0:c.error)==null||r.call(c,{clientName:a,commandName:i,input:m(n.input),error:o,metadata:o.$metadata}),o}},Zh={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},lt=e=>({applyToStack:t=>{t.add(Qh(),Zh)}});var Ec="X-Amzn-Trace-Id",ew="AWS_LAMBDA_FUNCTION_NAME",tw="_X_AMZN_TRACE_ID",nw=e=>t=>async n=>{let{request:s}=n;if(!R.isInstance(s)||e.runtime!=="node"||s.headers.hasOwnProperty(Ec))return t(n);let r=process.env[ew],o=process.env[tw],a=i=>typeof i=="string"&&i.length>0;return a(r)&&a(o)&&(s.headers[Ec]=o),t({...n,request:s})},sw={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},mt=e=>({applyToStack:t=>{t.add(nw(e),sw)}});var Re;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(Re||(Re={}));var kt=3,Ae="STANDARD";var Ic=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],gc=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],Sc=[500,502,503,504],xc=["ECONNRESET","EPIPE","ETIMEDOUT"];var In=e=>{var t,n;return((t=e.$metadata)==null?void 0:t.httpStatusCode)===429||Ic.includes(e.name)||((n=e.$retryable)==null?void 0:n.throttling)==!0},Qs=e=>{var t;return gc.includes(e.name)||xc.includes((e==null?void 0:e.code)||"")||Sc.includes(((t=e.$metadata)==null?void 0:t.httpStatusCode)||0)},Tc=e=>{var t;if(((t=e.$metadata)==null?void 0:t.httpStatusCode)!==void 0){let n=e.$metadata.httpStatusCode;return 500<=n&&n<=599&&!Qs(e)}return!1};var ms=class{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(t==null?void 0:t.beta)??.7,this.minCapacity=(t==null?void 0:t.minCapacity)??1,this.minFillRate=(t==null?void 0:t.minFillRate)??.5,this.scaleConstant=(t==null?void 0:t.scaleConstant)??.4,this.smooth=(t==null?void 0:t.smooth)??.8;let n=this.getCurrentTimeInSeconds();this.lastThrottleTime=n,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let n=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(s=>setTimeout(s,n))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let n=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+n),this.lastTimestamp=t}updateClientSendingRate(t){let n;if(this.updateMeasuredRate(),In(t)){let r=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=r,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),n=this.cubicThrottle(r),this.enableTokenBucket()}else this.calculateTimeWindow(),n=this.cubicSuccess(this.getCurrentTimeInSeconds());let s=Math.min(n,2*this.measuredTxRate);this.updateTokenBucketRate(s)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),n=Math.floor(t*2)/2;if(this.requestCount++,n>this.lastTxRateBucket){let s=this.requestCount/(n-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(s*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=n}}getPrecise(t){return parseFloat(t.toFixed(8))}};var Zs="amz-sdk-invocation-id",er="amz-sdk-request";var Cc=()=>{let e=100;return{computeNextBackoffDelay:s=>Math.floor(Math.min(2e4,Math.random()*2**s*e)),setDelayBase:s=>{e=s}}};var vc=(e,t,n,s)=>{let r=e,o=(s==null?void 0:s.retryCost)??5,a=(s==null?void 0:s.timeoutRetryCost)??10,i=(s==null?void 0:s.retryBackoffStrategy)??Cc(),c=e,d=Math.min(2e4,t),l,m=n??0,u=fe=>fe==="TRANSIENT"?a:o,y=()=>m,p=()=>d,h=()=>l,E=fe=>u(fe)<=c;return{getRetryCount:y,getRetryDelay:p,getLastRetryCost:h,hasRetryTokens:E,getRetryTokenCount:fe=>{let Jr=fe.errorType;if(!E(Jr))throw new Error("No retry token available");let Yr=u(Jr),uf=Jr==="THROTTLING"?500:100;i.setDelayBase(uf);let Va=i.computeNextBackoffDelay(m);if(fe.retryAfterHint){let ff=fe.retryAfterHint.getTime()-Date.now();d=Math.max(ff||0,Va)}else d=Va;return m++,l=Yr,c-=Yr,Yr},releaseRetryTokens:fe=>{c+=fe??1,c=Math.min(c,r)}}};var Sn=class{constructor(t){this.maxAttemptsProvider=t,this.mode=Re.STANDARD,this.retryToken=vc(500,100),this.maxAttemptsProvider=t}async acquireInitialRetryToken(t){return this.retryToken}async refreshRetryTokenForRetry(t,n){let s=await this.getMaxAttempts();if(this.shouldRetry(t,n,s))return t.getRetryTokenCount(n),t;throw new Error("No retry token available")}recordSuccess(t){this.retryToken.releaseRetryTokens(t.getLastRetryCost())}async getMaxAttempts(){let t;try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${kt}`),kt}}shouldRetry(t,n,s){return t.getRetryCount()<s&&t.hasRetryTokens(n.errorType)&&this.isRetryableError(n.errorType)}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}};var nr=class{constructor(t,n){this.maxAttemptsProvider=t,this.mode=Re.ADAPTIVE;let{rateLimiter:s}=n??{};this.rateLimiter=s??new ms,this.standardRetryStrategy=new Sn(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,n){return this.rateLimiter.updateClientSendingRate(n),this.standardRetryStrategy.refreshRetryTokenForRetry(t,n)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}};var Lo=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`);var Nc="AWS_MAX_ATTEMPTS",Oc="max_attempts",ut={environmentVariableSelector:e=>{let t=e[Nc];if(!t)return;let n=parseInt(t);if(Number.isNaN(n))throw new Error(`Environment variable ${Nc} mast be a number, got "${t}"`);return n},configFileSelector:e=>{let t=e[Oc];if(!t)return;let n=parseInt(t);if(Number.isNaN(n))throw new Error(`Shared config file entry ${Oc} mast be a number, got "${t}"`);return n},default:kt},ft=e=>{let{retryStrategy:t}=e,n=F(e.maxAttempts??kt);return{...e,maxAttempts:n,retryStrategy:async()=>t||(await F(e.retryMode)()===Re.ADAPTIVE?new nr(n):new Sn(n))}},rw="AWS_RETRY_MODE",ow="retry_mode",yt={environmentVariableSelector:e=>e[rw],configFileSelector:e=>e[ow],default:Ae};oo();var aw=e=>(t,n)=>async s=>{let r=await e.retryStrategy(),o=await e.maxAttempts();if(iw(r)){r=r;let a=await r.acquireInitialRetryToken(n.partition_id),i=new Error,c=0,d=0,{request:l}=s;for(R.isInstance(l)&&(l.headers[Zs]=zs());;)try{R.isInstance(l)&&(l.headers[er]=`attempt=${c+1}; max=${o}`);let{response:m,output:u}=await t(s);return r.recordSuccess(a),u.$metadata.attempts=c+1,u.$metadata.totalRetryDelay=d,{response:m,output:u}}catch(m){let u=cw(m);i=Lo(m);try{a=await r.refreshRetryTokenForRetry(a,u)}catch{throw i.$metadata||(i.$metadata={}),i.$metadata.attempts=c+1,i.$metadata.totalRetryDelay=d,i}c=a.getRetryCount();let y=a.getRetryDelay();d+=y,await new Promise(p=>setTimeout(p,y))}}else return r=r,r!=null&&r.mode&&(n.userAgent=[...n.userAgent||[],["cfg/retry-mode",r.mode]]),r.retry(t,s)},iw=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",cw=e=>{let t={errorType:dw(e)},n=mw(e.$response);return n&&(t.retryAfterHint=n),t},dw=e=>In(e)?"THROTTLING":Qs(e)?"TRANSIENT":Tc(e)?"SERVER_ERROR":"CLIENT_ERROR",lw={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},pt=e=>({applyToStack:t=>{t.add(aw(e),lw)}}),mw=e=>{if(!Ce.isInstance(e))return;let t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;let n=e.headers[t],s=Number(n);return Number.isNaN(s)?new Date(n):new Date(s*1e3)};var Q=class extends Error{constructor(t,n=!0){super(t),this.tryNextLink=n,this.name="ProviderError",Object.setPrototypeOf(this,Q.prototype)}static from(t,n=!0){return Object.assign(new this(t.message,n),t)}};var I=class extends Q{constructor(t,n=!0){super(t,n),this.tryNextLink=n,this.name="CredentialsProviderError",Object.setPrototypeOf(this,I.prototype)}};var Z=class extends Q{constructor(t,n=!0){super(t,n),this.tryNextLink=n,this.name="TokenProviderError",Object.setPrototypeOf(this,Z.prototype)}};function sr(...e){return()=>{let t=Promise.reject(new Q("No providers in chain"));for(let n of e)t=t.catch(s=>{if(s!=null&&s.tryNextLink)return n();throw s});return t}}var Dc=e=>()=>Promise.resolve(e);var ht=(e,t,n)=>{let s,r,o,a=!1,i=async()=>{r||(r=e());try{s=await r,o=!0,a=!1}finally{r=void 0}return s};return t===void 0?async c=>((!o||c!=null&&c.forceRefresh)&&(s=await i()),s):async c=>((!o||c!=null&&c.forceRefresh)&&(s=await i()),a?s:n&&!n(s)?(a=!0,s):(t(s)&&await i(),s))};var Mc={},uw={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),Mc[e]=t,uw[t]=e}function $e(e){let t="";for(let n=0;n<e.byteLength;n++)t+=Mc[e[n]];return t}var rr=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";var or=require("buffer"),Lt=(e,t=0,n=e.byteLength-t)=>{if(!rr(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return or.Buffer.from(e,t,n)},xn=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?or.Buffer.from(e,t):or.Buffer.from(e)};var be=e=>{let t=xn(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)};var ve=e=>typeof e=="string"?be(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e);var wt=e=>Lt(e.buffer,e.byteOffset,e.byteLength).toString("utf8");var kc="X-Amz-Algorithm",Lc="X-Amz-Credential",Fo="X-Amz-Date",Fc="X-Amz-SignedHeaders",$c="X-Amz-Expires",$o="X-Amz-Signature",zo="X-Amz-Security-Token";var Vo="authorization",Uo=Fo.toLowerCase(),fw="date",zc=[Vo,Uo,fw],Vc=$o.toLowerCase(),us="x-amz-content-sha256",Uc=zo.toLowerCase();var Wc={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Bc=/^proxy-/,Gc=/^sec-/;var ar="AWS4-HMAC-SHA256";var qc="AWS4-HMAC-SHA256-PAYLOAD",Hc="UNSIGNED-PAYLOAD",jc=50,Wo="aws4_request",Kc=60*60*24*7;var ir={},Bo=[],cr=(e,t,n)=>`${e}/${t}/${n}/${Wo}`,Yc=async(e,t,n,s,r)=>{let o=await Jc(e,t.secretAccessKey,t.accessKeyId),a=`${n}:${s}:${r}:${$e(o)}:${t.sessionToken}`;if(a in ir)return ir[a];for(Bo.push(a);Bo.length>jc;)delete ir[Bo.shift()];let i=`AWS4${t.secretAccessKey}`;for(let c of[n,s,r,Wo])i=await Jc(e,i,c);return ir[a]=i};var Jc=(e,t,n)=>{let s=new e(t);return s.update(ve(n)),s.digest()};var dr=({headers:e},t,n)=>{let s={};for(let r of Object.keys(e).sort()){if(e[r]==null)continue;let o=r.toLowerCase();(o in Wc||t!=null&&t.has(o)||Bc.test(o)||Gc.test(o))&&(!n||n&&!n.has(o))||(s[o]=e[r].trim().replace(/\s+/g," "))}return s};var Pe=e=>encodeURIComponent(e).replace(/[!'()*]/g,yw),yw=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;var Go=({query:e={}})=>{let t=[],n={};for(let s of Object.keys(e).sort()){if(s.toLowerCase()===Vc)continue;t.push(s);let r=e[s];typeof r=="string"?n[s]=`${Pe(s)}=${Pe(r)}`:Array.isArray(r)&&(n[s]=r.slice(0).sort().reduce((o,a)=>o.concat([`${Pe(s)}=${Pe(a)}`]),[]).join("&"))}return t.map(s=>n[s]).filter(s=>s).join("&")};var fs=async({headers:e,body:t},n)=>{for(let s of Object.keys(e))if(s.toLowerCase()===us)return e[s];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||rr(t)){let s=new n;return s.update(ve(t)),$e(await s.digest())}return Hc};var Xc=(e,t)=>{e=e.toLowerCase();for(let n of Object.keys(t))if(e===n.toLowerCase())return!0;return!1};var lr=({headers:e,query:t,...n})=>({...n,headers:{...e},query:t?pw(t):void 0}),pw=e=>Object.keys(e).reduce((t,n)=>{let s=e[n];return{...t,[n]:Array.isArray(s)?[...s]:s}},{});var qo=(e,t={})=>{var r;let{headers:n,query:s={}}=typeof e.clone=="function"?e.clone():lr(e);for(let o of Object.keys(n)){let a=o.toLowerCase();a.slice(0,6)==="x-amz-"&&!((r=t.unhoistableHeaders)!=null&&r.has(a))&&(s[o]=n[o],delete n[o])}return{...e,headers:n,query:s}};var mr=e=>{e=typeof e.clone=="function"?e.clone():lr(e);for(let t of Object.keys(e.headers))zc.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e};var Qc=e=>hw(e).toISOString().replace(/\.\d{3}Z$/,"Z"),hw=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;var ys=class{constructor({applyChecksum:t,credentials:n,region:s,service:r,sha256:o,uriEscapePath:a=!0}){this.service=r,this.sha256=o,this.uriEscapePath=a,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=F(s),this.credentialProvider=F(n)}async presign(t,n={}){let{signingDate:s=new Date,expiresIn:r=3600,unsignableHeaders:o,unhoistableHeaders:a,signableHeaders:i,signingRegion:c,signingService:d}=n,l=await this.credentialProvider();this.validateResolvedCredentials(l);let m=c??await this.regionProvider(),{longDate:u,shortDate:y}=ur(s);if(r>Kc)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let p=cr(y,m,d??this.service),h=qo(mr(t),{unhoistableHeaders:a});l.sessionToken&&(h.query[zo]=l.sessionToken),h.query[kc]=ar,h.query[Lc]=`${l.accessKeyId}/${p}`,h.query[Fo]=u,h.query[$c]=r.toString(10);let E=dr(h,o,i);return h.query[Fc]=Zc(E),h.query[$o]=await this.getSignature(u,p,this.getSigningKey(l,m,y,d),this.createCanonicalRequest(h,E,await fs(t,this.sha256))),h}async sign(t,n){return typeof t=="string"?this.signString(t,n):t.headers&&t.payload?this.signEvent(t,n):this.signRequest(t,n)}async signEvent({headers:t,payload:n},{signingDate:s=new Date,priorSignature:r,signingRegion:o,signingService:a}){let i=o??await this.regionProvider(),{shortDate:c,longDate:d}=ur(s),l=cr(c,i,a??this.service),m=await fs({headers:{},body:n},this.sha256),u=new this.sha256;u.update(t);let y=$e(await u.digest()),p=[qc,d,l,r,y,m].join(`
`);return this.signString(p,{signingDate:s,signingRegion:i,signingService:a})}async signString(t,{signingDate:n=new Date,signingRegion:s,signingService:r}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let a=s??await this.regionProvider(),{shortDate:i}=ur(n),c=new this.sha256(await this.getSigningKey(o,a,i,r));return c.update(ve(t)),$e(await c.digest())}async signRequest(t,{signingDate:n=new Date,signableHeaders:s,unsignableHeaders:r,signingRegion:o,signingService:a}={}){let i=await this.credentialProvider();this.validateResolvedCredentials(i);let c=o??await this.regionProvider(),d=mr(t),{longDate:l,shortDate:m}=ur(n),u=cr(m,c,a??this.service);d.headers[Uo]=l,i.sessionToken&&(d.headers[Uc]=i.sessionToken);let y=await fs(d,this.sha256);!Xc(us,d.headers)&&this.applyChecksum&&(d.headers[us]=y);let p=dr(d,r,s),h=await this.getSignature(l,u,this.getSigningKey(i,c,m,a),this.createCanonicalRequest(d,p,y));return d.headers[Vo]=`${ar} Credential=${i.accessKeyId}/${u}, SignedHeaders=${Zc(p)}, Signature=${h}`,d}createCanonicalRequest(t,n,s){let r=Object.keys(n).sort();return`${t.method}
${this.getCanonicalPath(t)}
${Go(t)}
${r.map(o=>`${o}:${n[o]}`).join(`
`)}

${r.join(";")}
${s}`}async createStringToSign(t,n,s){let r=new this.sha256;r.update(ve(s));let o=await r.digest();return`${ar}
${t}
${n}
${$e(o)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let n=[];for(let o of t.split("/"))(o==null?void 0:o.length)!==0&&o!=="."&&(o===".."?n.pop():n.push(o));let s=`${t!=null&&t.startsWith("/")?"/":""}${n.join("/")}${n.length>0&&(t!=null&&t.endsWith("/"))?"/":""}`;return encodeURIComponent(s).replace(/%2F/g,"/")}return t}async getSignature(t,n,s,r){let o=await this.createStringToSign(t,n,r),a=new this.sha256(await s);return a.update(ve(o)),$e(await a.digest())}getSigningKey(t,n,s,r){return Yc(this.sha256,t,s,n,r||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}},ur=e=>{let t=Qc(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},Zc=e=>Object.keys(e).sort().join(";");var ww=3e5,fr=e=>{let t=e.credentials?Ew(e.credentials):e.credentialDefaultProvider(e),{signingEscapePath:n=!0,systemClockOffset:s=e.systemClockOffset||0,sha256:r}=e,o;return e.signer?o=F(e.signer):e.regionInfoProvider?o=()=>F(e.region)().then(async a=>[await e.regionInfoProvider(a,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},a]).then(([a,i])=>{let{signingRegion:c,signingService:d}=a;e.signingRegion=e.signingRegion||c||i,e.signingName=e.signingName||d||e.serviceId;let l={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:r,uriEscapePath:n},m=e.signerConstructor||ys;return new m(l)}):o=async a=>{a=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await F(e.region)(),properties:{}},a);let i=a.signingRegion,c=a.signingName;e.signingRegion=e.signingRegion||i,e.signingName=e.signingName||c||e.serviceId;let d={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:r,uriEscapePath:n},l=e.signerConstructor||ys;return new l(d)},{...e,systemClockOffset:s,signingEscapePath:n,credentials:t,signer:o}};var Ew=e=>typeof e=="function"?ht(e,t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<ww,t=>t.expiration!==void 0):F(e);var yr=e=>new Date(Date.now()+e);var ed=(e,t)=>Math.abs(yr(t).getTime()-e)>=3e5;var Ho=(e,t)=>{let n=Date.parse(e);return ed(n,t)?n-Date.now():t};var Iw=e=>(t,n)=>async function(s){var d,l,m,u;if(!R.isInstance(s.request))return t(s);let r=(m=(l=(d=n.endpointV2)==null?void 0:d.properties)==null?void 0:l.authSchemes)==null?void 0:m[0],o=(r==null?void 0:r.name)==="sigv4a"?(u=r==null?void 0:r.signingRegionSet)==null?void 0:u.join(","):void 0,a=await e.signer(r),i=await t({...s,request:await a.sign(s.request,{signingDate:yr(e.systemClockOffset),signingRegion:o||n.signing_region,signingService:n.signing_service})}).catch(y=>{let p=y.ServerTime??td(y.$response);throw p&&(e.systemClockOffset=Ho(p,e.systemClockOffset)),y}),c=td(i.response);return c&&(e.systemClockOffset=Ho(c,e.systemClockOffset)),i},td=e=>{var t,n;return Ce.isInstance(e)?((t=e.headers)==null?void 0:t.date)??((n=e.headers)==null?void 0:n.Date):void 0},gw={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},pr=e=>({applyToStack:t=>{t.addRelativeTo(Iw(e),gw)}});function Et(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}var jo={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}}],version:"1.1"};var nd=jo,sd="",xw=e=>{let{partitions:t}=nd;for(let s of t){let{regions:r,outputs:o}=s;for(let[a,i]of Object.entries(r))if(a===e)return{...o,...i}}for(let s of t){let{regionRegex:r,outputs:o}=s;if(new RegExp(r).test(e))return{...o}}let n=t.find(s=>s.id==="aws");if(!n)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...n.outputs}},rd=(e,t="")=>{nd=e,sd=t},Tw=()=>{rd(jo,"")},Ko=()=>sd;var ze="endpoints";function ae(e){return typeof e!="object"||e==null?e:"ref"in e?`$${ae(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(ae).join(", ")})`:JSON.stringify(e,null,2)}var P=class extends Error{constructor(t){super(t),this.name="EndpointError"}};var Qo={};Xr(Qo,{aws:()=>Jo,booleanEquals:()=>Aw,getAttr:()=>Yo,isSet:()=>bw,isValidHostLabel:()=>wr,not:()=>vw,parseURL:()=>Pw,stringEquals:()=>Nw,substring:()=>Ow,uriEncode:()=>Dw});var Jo={};Xr(Jo,{getUserAgentPrefix:()=>Ko,isVirtualHostableS3Bucket:()=>od,parseArn:()=>Rw,partition:()=>xw,setPartitionInfo:()=>rd,useDefaultPartitionInfo:()=>Tw});var Cw=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),hr=e=>Cw.test(e)||e.startsWith("[")&&e.endsWith("]");var _w=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),wr=(e,t=!1)=>{if(!t)return _w.test(e);let n=e.split(".");for(let s of n)if(!wr(s))return!1;return!0};var od=(e,t=!1)=>{if(t){for(let n of e.split("."))if(!od(n))return!1;return!0}return!(!wr(e)||e.length<3||e.length>63||e!==e.toLowerCase()||hr(e))};var Rw=e=>{let t=e.split(":");if(t.length<6)return null;let[n,s,r,o,a,...i]=t;return n!=="arn"||s===""||r===""||i[0]===""?null:{partition:s,service:r,region:o,accountId:a,resourceId:i[0].includes("/")?i[0].split("/"):i}};var Aw=(e,t)=>e===t;var ad=e=>{let t=e.split("."),n=[];for(let s of t){let r=s.indexOf("[");if(r!==-1){if(s.indexOf("]")!==s.length-1)throw new P(`Path: '${e}' does not end with ']'`);let o=s.slice(r+1,-1);if(Number.isNaN(parseInt(o)))throw new P(`Invalid array index: '${o}' in path: '${e}'`);r!==0&&n.push(s.slice(0,r)),n.push(o)}else n.push(s)}return n};var Yo=(e,t)=>ad(t).reduce((n,s)=>{if(typeof n!="object")throw new P(`Index '${s}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(n)?n[parseInt(s)]:n[s]},e);var bw=e=>e!=null;var vw=e=>!e;var id;(function(e){e.HEADER="header",e.QUERY="query"})(id||(id={}));var cd;(function(e){e.AAAA="AAAA",e.A="A"})(cd||(cd={}));var Tn;(function(e){e.HTTP="http",e.HTTPS="https"})(Tn||(Tn={}));var dd;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(dd||(dd={}));var Xo={[Tn.HTTP]:80,[Tn.HTTPS]:443},Pw=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:u,port:y,protocol:p="",path:h="",query:E={}}=e,Ie=new URL(`${p}//${u}${y?`:${y}`:""}${h}`);return Ie.search=Object.entries(E).map(([za,fe])=>`${za}=${fe}`).join("&"),Ie}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let n=t.href,{host:s,hostname:r,pathname:o,protocol:a,search:i}=t;if(i)return null;let c=a.slice(0,-1);if(!Object.values(Tn).includes(c))return null;let d=hr(r),l=n.includes(`${s}:${Xo[c]}`)||typeof e=="string"&&e.includes(`${s}:${Xo[c]}`),m=`${s}${l?`:${Xo[c]}`:""}`;return{scheme:c,authority:m,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:d}};var Nw=(e,t)=>e===t;var Ow=(e,t,n,s)=>t>=n||e.length<n?null:s?e.substring(e.length-n,e.length-t):e.substring(t,n);var Dw=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`);var Er=(e,t)=>{let n=[],s={...t.endpointParams,...t.referenceRecord},r=0;for(;r<e.length;){let o=e.indexOf("{",r);if(o===-1){n.push(e.slice(r));break}n.push(e.slice(r,o));let a=e.indexOf("}",o);if(a===-1){n.push(e.slice(o));break}e[o+1]==="{"&&e[a+1]==="}"&&(n.push(e.slice(o+1,a)),r=a+2);let i=e.substring(o+1,a);if(i.includes("#")){let[c,d]=i.split("#");n.push(Yo(s[c],d))}else n.push(s[i]);r=a+1}return n.join("")};var ld=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e];var It=(e,t,n)=>{if(typeof e=="string")return Er(e,n);if(e.fn)return Ir(e,n);if(e.ref)return ld(e,n);throw new P(`'${t}': ${String(e)} is not a string, function or reference.`)};var Ir=({fn:e,argv:t},n)=>{let s=t.map(r=>["boolean","number"].includes(typeof r)?r:It(r,"arg",n));return e.split(".").reduce((r,o)=>r[o],Qo)(...s)};var md=({assign:e,...t},n)=>{var r,o;if(e&&e in n.referenceRecord)throw new P(`'${e}' is already defined in Reference Record.`);let s=Ir(t,n);return(o=(r=n.logger)==null?void 0:r.debug)==null||o.call(r,ze,`evaluateCondition: ${ae(t)} = ${ae(s)}`),{result:s===""?!0:!!s,...e!=null&&{toAssign:{name:e,value:s}}}};var Cn=(e=[],t)=>{var s,r;let n={};for(let o of e){let{result:a,toAssign:i}=md(o,{...t,referenceRecord:{...t.referenceRecord,...n}});if(!a)return{result:a};i&&(n[i.name]=i.value,(r=(s=t.logger)==null?void 0:s.debug)==null||r.call(s,ze,`assign: ${i.name} := ${ae(i.value)}`))}return{result:!0,referenceRecord:n}};var ud=(e,t)=>Object.entries(e).reduce((n,[s,r])=>({...n,[s]:r.map(o=>{let a=It(o,"Header value entry",t);if(typeof a!="string")throw new P(`Header '${s}' value '${a}' is not a string`);return a})}),{});var Zo=(e,t)=>{if(Array.isArray(e))return e.map(n=>Zo(n,t));switch(typeof e){case"string":return Er(e,t);case"object":if(e===null)throw new P(`Unexpected endpoint property: ${e}`);return gr(e,t);case"boolean":return e;default:throw new P(`Unexpected endpoint property type: ${typeof e}`)}};var gr=(e,t)=>Object.entries(e).reduce((n,[s,r])=>({...n,[s]:Zo(r,t)}),{});var fd=(e,t)=>{let n=It(e,"Endpoint URL",t);if(typeof n=="string")try{return new URL(n)}catch(s){throw console.error(`Failed to construct URL with ${n}`,s),s}throw new P(`Endpoint URL must be a string, got ${typeof n}`)};var yd=(e,t)=>{var l,m;let{conditions:n,endpoint:s}=e,{result:r,referenceRecord:o}=Cn(n,t);if(!r)return;let a={...t,referenceRecord:{...t.referenceRecord,...o}},{url:i,properties:c,headers:d}=s;return(m=(l=t.logger)==null?void 0:l.debug)==null||m.call(l,ze,`Resolving endpoint from template: ${ae(s)}`),{...d!=null&&{headers:ud(d,a)},...c!=null&&{properties:gr(c,a)},url:fd(i,a)}};var pd=(e,t)=>{let{conditions:n,error:s}=e,{result:r,referenceRecord:o}=Cn(n,t);if(r)throw new P(It(s,"Error",{...t,referenceRecord:{...t.referenceRecord,...o}}))};var hd=(e,t)=>{let{conditions:n,rules:s}=e,{result:r,referenceRecord:o}=Cn(n,t);if(r)return Sr(s,{...t,referenceRecord:{...t.referenceRecord,...o}})};var Sr=(e,t)=>{for(let n of e)if(n.type==="endpoint"){let s=yd(n,t);if(s)return s}else if(n.type==="error")pd(n,t);else if(n.type==="tree"){let s=hd(n,t);if(s)return s}else throw new P(`Unknown endpoint rule: ${n}`);throw new P("Rules evaluation failed")};var gt=(e,t)=>{var d,l,m,u,y;let{endpointParams:n,logger:s}=t,{parameters:r,rules:o}=e;(l=(d=t.logger)==null?void 0:d.debug)==null||l.call(d,ze,`Initial EndpointParams: ${ae(n)}`);let a=Object.entries(r).filter(([,p])=>p.default!=null).map(([p,h])=>[p,h.default]);if(a.length>0)for(let[p,h]of a)n[p]=n[p]??h;let i=Object.entries(r).filter(([,p])=>p.required).map(([p])=>p);for(let p of i)if(n[p]==null)throw new P(`Missing required parameter: '${p}'`);let c=Sr(o,{endpointParams:n,logger:s,referenceRecord:{}});if((m=t.endpointParams)!=null&&m.Endpoint)try{let p=new URL(t.endpointParams.Endpoint),{protocol:h,port:E}=p;c.url.protocol=h,c.url.port=E}catch{}return(y=(u=t.logger)==null?void 0:u.debug)==null||y.call(u,ze,`Resolved endpoint: ${ae(c)}`),c};var ea="user-agent",xr="x-amz-user-agent",ta=" ",wd=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g;var Mw=e=>(t,n)=>async s=>{var u,y;let{request:r}=s;if(!R.isInstance(r))return t(s);let{headers:o}=r,a=((u=n==null?void 0:n.userAgent)==null?void 0:u.map(na))||[],i=(await e.defaultUserAgentProvider()).map(na),c=((y=e==null?void 0:e.customUserAgent)==null?void 0:y.map(na))||[],d=Ko(),l=(d?[d]:[]).concat([...i,...a,...c]).join(ta),m=[...i.filter(p=>p.startsWith("aws-sdk-")),...c].join(ta);return e.runtime!=="browser"?(m&&(o[xr]=o[xr]?`${o[ea]} ${m}`:m),o[ea]=l):o[xr]=l,t({...s,request:r})},na=([e,t])=>{let n=e.indexOf("/"),s=e.substring(0,n),r=e.substring(n+1);return s==="api"&&(r=r.toLowerCase()),[s,r,t].filter(o=>o&&o.length>0).map(o=>o==null?void 0:o.replace(wd,"_")).join("/")},kw={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},St=e=>({applyToStack:t=>{t.add(Mw(e),kw)}});var Ed=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"ssm"});var Id={name:"@aws-sdk/client-ssm",description:"AWS SDK for JavaScript Ssm Client for Node.js, Browser and React Native",version:"3.312.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo ssm"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.312.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/credential-provider-node":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-signing":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.310.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.310.0","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.310.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.310.0","@aws-sdk/util-defaults-mode-node":"3.310.0","@aws-sdk/util-endpoints":"3.310.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0","@aws-sdk/util-waiter":"3.310.0",tslib:"^2.5.0",uuid:"^8.3.2"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31","@types/uuid":"^8.3.0",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-ssm",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-ssm"}};var Xd=Bt(Yd());var q=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,q.prototype)}};var _n=class extends q{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,_n.prototype)}},Rn=class extends q{constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,Rn.prototype)}},An=class extends q{constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,An.prototype)}},bn=class extends q{constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,bn.prototype)}},vn=class extends q{constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,vn.prototype)}},Pn=class extends q{constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,Pn.prototype)}},Nn=class extends q{constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,Nn.prototype)}};var Qd=async(e,t)=>{let n=ll,s;return s=ul({...BE(e,t),Action:"AssumeRole",Version:"2011-06-15"}),dl(t,n,"/",void 0,s)};var Zd=async(e,t)=>{let n=ll,s;return s=ul({...GE(e,t),Action:"AssumeRoleWithWebIdentity",Version:"2011-06-15"}),dl(t,n,"/",void 0,s)};var el=async(e,t)=>{if(e.statusCode>=300)return $E(e,t);let n=await fa(e.body,t),s={};s=JE(n.AssumeRoleResult,t);let r={$metadata:Ue(e),...s};return Promise.resolve(r)},$E=async(e,t)=>{let n={...e,body:await ml(e.body,t)},s=fl(e,n.body);switch(s){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await nl(n,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await sl(n,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await rl(n,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await ol(n,t);default:let r=n.body;pe({output:e,parsedBody:r.Error,exceptionCtor:q,errorCode:s})}};var tl=async(e,t)=>{if(e.statusCode>=300)return zE(e,t);let n=await fa(e.body,t),s={};s=YE(n.AssumeRoleWithWebIdentityResult,t);let r={$metadata:Ue(e),...s};return Promise.resolve(r)},zE=async(e,t)=>{let n={...e,body:await ml(e.body,t)},s=fl(e,n.body);switch(s){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await nl(n,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await VE(n,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await UE(n,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await WE(n,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await sl(n,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await rl(n,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await ol(n,t);default:let r=n.body;pe({output:e,parsedBody:r.Error,exceptionCtor:q,errorCode:s})}};var nl=async(e,t)=>{let n=e.body,s=XE(n.Error,t),r=new _n({$metadata:Ue(e),...s});return g(r,n)},VE=async(e,t)=>{let n=e.body,s=QE(n.Error,t),r=new Nn({$metadata:Ue(e),...s});return g(r,n)},UE=async(e,t)=>{let n=e.body,s=ZE(n.Error,t),r=new vn({$metadata:Ue(e),...s});return g(r,n)};var WE=async(e,t)=>{let n=e.body,s=eI(n.Error,t),r=new Pn({$metadata:Ue(e),...s});return g(r,n)},sl=async(e,t)=>{let n=e.body,s=tI(n.Error,t),r=new Rn({$metadata:Ue(e),...s});return g(r,n)},rl=async(e,t)=>{let n=e.body,s=nI(n.Error,t),r=new An({$metadata:Ue(e),...s});return g(r,n)},ol=async(e,t)=>{let n=e.body,s=sI(n.Error,t),r=new bn({$metadata:Ue(e),...s});return g(r,n)},BE=(e,t)=>{var s,r,o;let n={};if(e.RoleArn!=null&&(n.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(n.RoleSessionName=e.RoleSessionName),e.PolicyArns!=null){let a=al(e.PolicyArns,t);((s=e.PolicyArns)==null?void 0:s.length)===0&&(n.PolicyArns=[]),Object.entries(a).forEach(([i,c])=>{let d=`PolicyArns.${i}`;n[d]=c})}if(e.Policy!=null&&(n.Policy=e.Policy),e.DurationSeconds!=null&&(n.DurationSeconds=e.DurationSeconds),e.Tags!=null){let a=KE(e.Tags,t);((r=e.Tags)==null?void 0:r.length)===0&&(n.Tags=[]),Object.entries(a).forEach(([i,c])=>{let d=`Tags.${i}`;n[d]=c})}if(e.TransitiveTagKeys!=null){let a=jE(e.TransitiveTagKeys,t);((o=e.TransitiveTagKeys)==null?void 0:o.length)===0&&(n.TransitiveTagKeys=[]),Object.entries(a).forEach(([i,c])=>{let d=`TransitiveTagKeys.${i}`;n[d]=c})}return e.ExternalId!=null&&(n.ExternalId=e.ExternalId),e.SerialNumber!=null&&(n.SerialNumber=e.SerialNumber),e.TokenCode!=null&&(n.TokenCode=e.TokenCode),e.SourceIdentity!=null&&(n.SourceIdentity=e.SourceIdentity),n};var GE=(e,t)=>{var s;let n={};if(e.RoleArn!=null&&(n.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(n.RoleSessionName=e.RoleSessionName),e.WebIdentityToken!=null&&(n.WebIdentityToken=e.WebIdentityToken),e.ProviderId!=null&&(n.ProviderId=e.ProviderId),e.PolicyArns!=null){let r=al(e.PolicyArns,t);((s=e.PolicyArns)==null?void 0:s.length)===0&&(n.PolicyArns=[]),Object.entries(r).forEach(([o,a])=>{let i=`PolicyArns.${o}`;n[i]=a})}return e.Policy!=null&&(n.Policy=e.Policy),e.DurationSeconds!=null&&(n.DurationSeconds=e.DurationSeconds),n};var al=(e,t)=>{let n={},s=1;for(let r of e){if(r===null)continue;let o=qE(r,t);Object.entries(o).forEach(([a,i])=>{n[`member.${s}.${a}`]=i}),s++}return n},qE=(e,t)=>{let n={};return e.arn!=null&&(n.arn=e.arn),n},HE=(e,t)=>{let n={};return e.Key!=null&&(n.Key=e.Key),e.Value!=null&&(n.Value=e.Value),n},jE=(e,t)=>{let n={},s=1;for(let r of e)r!==null&&(n[`member.${s}`]=r,s++);return n},KE=(e,t)=>{let n={},s=1;for(let r of e){if(r===null)continue;let o=HE(r,t);Object.entries(o).forEach(([a,i])=>{n[`member.${s}.${a}`]=i}),s++}return n},il=(e,t)=>{let n={};return e.AssumedRoleId!==void 0&&(n.AssumedRoleId=f(e.AssumedRoleId)),e.Arn!==void 0&&(n.Arn=f(e.Arn)),n},JE=(e,t)=>{let n={};return e.Credentials!==void 0&&(n.Credentials=cl(e.Credentials,t)),e.AssumedRoleUser!==void 0&&(n.AssumedRoleUser=il(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(n.PackedPolicySize=_o(e.PackedPolicySize)),e.SourceIdentity!==void 0&&(n.SourceIdentity=f(e.SourceIdentity)),n};var YE=(e,t)=>{let n={};return e.Credentials!==void 0&&(n.Credentials=cl(e.Credentials,t)),e.SubjectFromWebIdentityToken!==void 0&&(n.SubjectFromWebIdentityToken=f(e.SubjectFromWebIdentityToken)),e.AssumedRoleUser!==void 0&&(n.AssumedRoleUser=il(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(n.PackedPolicySize=_o(e.PackedPolicySize)),e.Provider!==void 0&&(n.Provider=f(e.Provider)),e.Audience!==void 0&&(n.Audience=f(e.Audience)),e.SourceIdentity!==void 0&&(n.SourceIdentity=f(e.SourceIdentity)),n},cl=(e,t)=>{let n={};return e.AccessKeyId!==void 0&&(n.AccessKeyId=f(e.AccessKeyId)),e.SecretAccessKey!==void 0&&(n.SecretAccessKey=f(e.SecretAccessKey)),e.SessionToken!==void 0&&(n.SessionToken=f(e.SessionToken)),e.Expiration!==void 0&&(n.Expiration=G(rc(e.Expiration))),n};var XE=(e,t)=>{let n={};return e.message!==void 0&&(n.message=f(e.message)),n};var QE=(e,t)=>{let n={};return e.message!==void 0&&(n.message=f(e.message)),n},ZE=(e,t)=>{let n={};return e.message!==void 0&&(n.message=f(e.message)),n};var eI=(e,t)=>{let n={};return e.message!==void 0&&(n.message=f(e.message)),n},tI=(e,t)=>{let n={};return e.message!==void 0&&(n.message=f(e.message)),n},nI=(e,t)=>{let n={};return e.message!==void 0&&(n.message=f(e.message)),n},sI=(e,t)=>{let n={};return e.message!==void 0&&(n.message=f(e.message)),n},Ue=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),rI=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),oI=(e,t)=>rI(e,t).then(n=>t.utf8Encoder(n)),dl=async(e,t,n,s,r)=>{let{hostname:o,protocol:a="https",port:i,path:c}=await e.endpoint(),d={protocol:a,hostname:o,port:i,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+n:c+n,headers:t};return s!==void 0&&(d.hostname=s),r!==void 0&&(d.body=r),new R(d)},ll={"content-type":"application/x-www-form-urlencoded"},fa=(e,t)=>oI(e,t).then(n=>{if(n.length){let s=new Xd.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});s.addEntity("#xD","\r"),s.addEntity("#10",`
`);let r=s.parse(n),o="#text",a=Object.keys(r)[0],i=r[a];return i[o]&&(i[a]=i[o],delete i[o]),Ro(i)}return{}}),ml=async(e,t)=>{let n=await fa(e,t);return n.Error&&(n.Error.message=n.Error.message??n.Error.Message),n},ul=e=>Object.entries(e).map(([t,n])=>Js(t)+"="+Js(n)).join("&"),fl=(e,t)=>{var n;if(((n=t.Error)==null?void 0:n.Code)!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"};var On=class extends V{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,n,s){this.middlewareStack.use(Y(n,this.serialize,this.deserialize)),this.middlewareStack.use(X(n,On.getEndpointParameterInstructions())),this.middlewareStack.use(pr(n));let r=t.concat(this.middlewareStack),{logger:o}=n,c={logger:o,clientName:"STSClient",commandName:"AssumeRoleCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=n;return r.resolve(l=>d.handle(l.request,s||{}),c)}serialize(t,n){return Qd(t,n)}deserialize(t,n){return el(t,n)}};var Dn=class extends V{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,n,s){this.middlewareStack.use(Y(n,this.serialize,this.deserialize)),this.middlewareStack.use(X(n,Dn.getEndpointParameterInstructions()));let r=t.concat(this.middlewareStack),{logger:o}=n,c={logger:o,clientName:"STSClient",commandName:"AssumeRoleWithWebIdentityCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=n;return r.resolve(l=>d.handle(l.request,s||{}),c)}serialize(t,n){return Zd(t,n)}deserialize(t,n){return tl(t,n)}};var yl=(e,{stsClientCtor:t})=>fr({...e,stsClientCtor:t});var pl=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"});var hl={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.312.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"yarn test:unit","test:unit":"jest"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/credential-provider-node":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-sdk-sts":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-signing":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.310.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.310.0","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.310.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.310.0","@aws-sdk/util-defaults-mode-node":"3.310.0","@aws-sdk/util-endpoints":"3.310.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0","fast-xml-parser":"4.1.2",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}};var wl="us-east-1",El=e=>typeof e!="function"?e===void 0?wl:e:async()=>{try{return await e()}catch{return wl}},ya=(e,t)=>{let n,s;return async(r,o)=>{if(s=r,!n){let{logger:i,region:c,requestHandler:d}=e;n=new t({logger:i,credentialDefaultProvider:()=>async()=>s,region:El(c||e.region),...d?{requestHandler:d}:{}})}let{Credentials:a}=await n.send(new On(o));if(!a||!a.AccessKeyId||!a.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);return{accessKeyId:a.AccessKeyId,secretAccessKey:a.SecretAccessKey,sessionToken:a.SessionToken,expiration:a.Expiration}}},pa=(e,t)=>{let n;return async s=>{if(!n){let{logger:o,region:a,requestHandler:i}=e;n=new t({logger:o,region:El(a||e.region),...i?{requestHandler:i}:{}})}let{Credentials:r}=await n.send(new Dn(s));if(!r||!r.AccessKeyId||!r.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${s.RoleArn}`);return{accessKeyId:r.AccessKeyId,secretAccessKey:r.SecretAccessKey,sessionToken:r.SessionToken,expiration:r.Expiration}}},Il=e=>t=>e({roleAssumer:ya(t,t.stsClientCtor),roleAssumerWithWebIdentity:pa(t,t.stsClientCtor),...t});var iI="AWS_ACCESS_KEY_ID",cI="AWS_SECRET_ACCESS_KEY",dI="AWS_SESSION_TOKEN",lI="AWS_CREDENTIAL_EXPIRATION",Tr=()=>async()=>{let e=process.env[iI],t=process.env[cI],n=process.env[dI],s=process.env[lI];if(e&&t)return{accessKeyId:e,secretAccessKey:t,...n&&{sessionToken:n},...s&&{expiration:new Date(s)}};throw new I("Unable to find environment variable credentials.")};var gl=require("os"),Sl=require("path"),Mn=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:n,HOMEDRIVE:s=`C:${Sl.sep}`}=process.env;return e||t||(n?`${s}${n}`:(0,gl.homedir)())};var ha="AWS_PROFILE",mI="default",ie=e=>e.profile||process.env[ha]||mI;var xl=require("crypto"),Tl=require("path");var Cr=e=>{let n=(0,xl.createHash)("sha1").update(e).digest("hex");return(0,Tl.join)(Mn(),".aws","sso","cache",`${n}.json`)};var Cl=require("fs");var{readFile:uI}=Cl.promises,_r=async e=>{let t=Cr(e),n=await uI(t,"utf8");return JSON.parse(n)};var _l=require("path");var fI="AWS_CONFIG_FILE",Rr=()=>process.env[fI]||(0,_l.join)(Mn(),".aws","config");var Rl=require("path");var yI="AWS_SHARED_CREDENTIALS_FILE",Al=()=>process.env[yI]||(0,Rl.join)(Mn(),".aws","credentials");var bl=/^profile\s(["'])?([^\1]+)\1$/,vl=e=>Object.entries(e).filter(([t])=>bl.test(t)).reduce((t,[n,s])=>({...t,[bl.exec(n)[2]]:s}),{...e.default&&{default:e.default}});var pI=["__proto__","profile __proto__"],ws=e=>{let t={},n;for(let s of e.split(/\r?\n/))if(s=s.split(/(^|\s)[;#]/)[0].trim(),s[0]==="["&&s[s.length-1]==="]"){if(n=s.substring(1,s.length-1),pI.includes(n))throw new Error(`Found invalid profile name "${n}"`)}else if(n){let o=s.indexOf("="),a=0,i=s.length-1;if(o!==-1&&o!==a&&o!==i){let[d,l]=[s.substring(0,o).trim(),s.substring(o+1).trim()];t[n]=t[n]||{},t[n][d]=l}}return t};var Pl=require("fs"),{readFile:hI}=Pl.promises,wa={},Es=(e,t)=>((!wa[e]||t!=null&&t.ignoreCache)&&(wa[e]=hI(e,"utf8")),wa[e]);var Nl=()=>({}),Ar=async(e={})=>{let{filepath:t=Al(),configFilepath:n=Rr()}=e,s=await Promise.all([Es(n,{ignoreCache:e.ignoreCache}).then(ws).then(vl).catch(Nl),Es(t,{ignoreCache:e.ignoreCache}).then(ws).catch(Nl)]);return{configFile:s[0],credentialsFile:s[1]}};var Ol=/^sso-session\s(["'])?([^\1]+)\1$/,Dl=e=>Object.entries(e).filter(([t])=>Ol.test(t)).reduce((t,[n,s])=>({...t,[Ol.exec(n)[2]]:s}),{});var wI=()=>({}),br=async(e={})=>Es(e.configFilepath??Rr()).then(ws).then(Dl).catch(wI);var Ml=(...e)=>{let t={};for(let n of e)for(let[s,r]of Object.entries(n))t[s]!==void 0?Object.assign(t[s],r):t[s]=r;return t};var Tt=async e=>{let t=await Ar(e);return Ml(t.configFile,t.credentialsFile)};var $l=require("url");var kl=require("buffer"),Ll=require("http");function We(e){return new Promise((t,n)=>{var r;let s=(0,Ll.request)({method:"GET",...e,hostname:(r=e.hostname)==null?void 0:r.replace(/^\[(.+)\]$/,"$1")});s.on("error",o=>{n(Object.assign(new Q("Unable to connect to instance metadata service"),o)),s.destroy()}),s.on("timeout",()=>{n(new Q("TimeoutError from instance metadata service")),s.destroy()}),s.on("response",o=>{let{statusCode:a=400}=o;(a<200||300<=a)&&(n(Object.assign(new Q("Error response received from instance metadata service"),{statusCode:a})),s.destroy());let i=[];o.on("data",c=>{i.push(c)}),o.on("end",()=>{t(kl.Buffer.concat(i)),s.destroy()})}),s.end()})}var vr=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",Pr=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)});var Nr=({maxRetries:e=0,timeout:t=1e3})=>({maxRetries:e,timeout:t});var Is=(e,t)=>{let n=e();for(let s=0;s<t;s++)n=n.catch(e);return n};var gs="AWS_CONTAINER_CREDENTIALS_FULL_URI",Ss="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",Fl="AWS_CONTAINER_AUTHORIZATION_TOKEN",Or=(e={})=>{let{timeout:t,maxRetries:n}=Nr(e);return()=>Is(async()=>{let s=await xI(),r=JSON.parse(await EI(t,s));if(!vr(r))throw new I("Invalid response received from instance metadata service.");return Pr(r)},n)},EI=async(e,t)=>(process.env[Fl]&&(t.headers={...t.headers,Authorization:process.env[Fl]}),(await We({...t,timeout:e})).toString()),II="169.254.170.2",gI={localhost:!0,"127.0.0.1":!0},SI={"http:":!0,"https:":!0},xI=async()=>{if(process.env[Ss])return{hostname:II,path:process.env[Ss]};if(process.env[gs]){let e=(0,$l.parse)(process.env[gs]);if(!e.hostname||!(e.hostname in gI))throw new I(`${e.hostname} is not a valid container metadata service hostname`,!1);if(!e.protocol||!(e.protocol in SI))throw new I(`${e.protocol} is not a valid container metadata service protocol`,!1);return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new I(`The container metadata credential provider cannot be used unless the ${Ss} or ${gs} environment variable is set`,!1)};var zl=e=>async()=>{try{let t=e(process.env);if(t===void 0)throw new Error;return t}catch(t){throw new I(t.message||`Cannot load config from environment variables with getter: ${e}`)}};var Vl=(e,{preferredFile:t="config",...n}={})=>async()=>{let s=ie(n),{configFile:r,credentialsFile:o}=await Ar(n),a=o[s]||{},i=r[s]||{},c=t==="config"?{...a,...i}:{...i,...a};try{let d=e(c);if(d===void 0)throw new Error;return d}catch(d){throw new I(d.message||`Cannot load config for profile ${s} in SDK configuration files with getter: ${e}`)}};var TI=e=>typeof e=="function",Ul=e=>TI(e)?async()=>await e():Dc(e);var x=({environmentVariableSelector:e,configFileSelector:t,default:n},s={})=>ht(sr(zl(e),Vl(t,s),Ul(n)));var xs;(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(xs||(xs={}));var CI="AWS_EC2_METADATA_SERVICE_ENDPOINT",_I="ec2_metadata_service_endpoint",Wl={environmentVariableSelector:e=>e[CI],configFileSelector:e=>e[_I],default:void 0};var Ct;(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(Ct||(Ct={}));var RI="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",AI="ec2_metadata_service_endpoint_mode",Bl={environmentVariableSelector:e=>e[RI],configFileSelector:e=>e[AI],default:Ct.IPv4};var Ts=async()=>J(await bI()||await vI()),bI=async()=>x(Wl)(),vI=async()=>{let e=await x(Bl)();switch(e){case Ct.IPv4:return xs.IPv4;case Ct.IPv6:return xs.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(Ct)}`)}};var PI="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",Ea=(e,t)=>{let n=300+Math.floor(Math.random()*300),s=new Date(Date.now()+n*1e3);t.warn("Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(newExpiration)}.\nFor more information, please visit: "+PI);let r=e.originalExpiration??e.expiration;return{...e,...r?{originalExpiration:r}:{},expiration:s}};var Gl=(e,t={})=>{let n=(t==null?void 0:t.logger)||console,s;return async()=>{let r;try{r=await e(),r.expiration&&r.expiration.getTime()<Date.now()&&(r=Ea(r,n))}catch(o){if(s)n.warn("Credential renew failed: ",o),r=Ea(s,n);else throw o}return s=r,r}};var ql="/latest/meta-data/iam/security-credentials/",NI="/latest/api/token",Dr=(e={})=>Gl(OI(e),{logger:e.logger}),OI=e=>{let t=!1,{timeout:n,maxRetries:s}=Nr(e),r=async(o,a)=>{let i=(await Is(async()=>{let c;try{c=await MI(a)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},o)).trim();return Is(async()=>{let c;try{c=await kI(i,a)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},o)};return async()=>{let o=await Ts();if(t)return r(s,{...o,timeout:n});{let a;try{a=(await DI({...o,timeout:n})).toString()}catch(i){if((i==null?void 0:i.statusCode)===400)throw Object.assign(i,{message:"EC2 Metadata token request returned error"});return(i.message==="TimeoutError"||[403,404,405].includes(i.statusCode))&&(t=!0),r(s,{...o,timeout:n})}return r(s,{...o,headers:{"x-aws-ec2-metadata-token":a},timeout:n})}}},DI=async e=>We({...e,path:NI,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),MI=async e=>(await We({...e,path:ql})).toString(),kI=async(e,t)=>{let n=JSON.parse((await We({...t,path:ql+e})).toString());if(!vr(n))throw new I("Invalid response received from instance metadata service.");return Pr(n)};var Hl=(e,t)=>{let n={EcsContainer:Or,Ec2InstanceMetadata:Dr,Environment:Tr};if(e in n)return n[e]();throw new I(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`)};var jl=e=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(LI(e)||FI(e)),LI=e=>typeof e.source_profile=="string"&&typeof e.credential_source>"u",FI=e=>typeof e.credential_source=="string"&&typeof e.source_profile>"u",Kl=async(e,t,n,s={})=>{let r=t[e];if(!n.roleAssumer)throw new I(`Profile ${e} requires a role to be assumed, but no role assumption callback was provided.`,!1);let{source_profile:o}=r;if(o&&o in s)throw new I(`Detected a cycle attempting to resolve credentials for profile ${ie(n)}. Profiles visited: `+Object.keys(s).join(", "),!1);let a=o?Mr(o,t,n,{...s,[o]:!0}):Hl(r.credential_source,e)(),i={RoleArn:r.role_arn,RoleSessionName:r.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:r.external_id},{mfa_serial:c}=r;if(c){if(!n.mfaCodeProvider)throw new I(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,!1);i.SerialNumber=c,i.TokenCode=await n.mfaCodeProvider(c)}let d=await a;return n.roleAssumer(d,i)};var Yl=require("child_process"),Xl=require("util");var Jl=(e,t)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let n=new Date;if(new Date(t.Expiration)<n)throw Error(`Profile ${e} credential_process returned expired credentials.`)}return{accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)}}};var Ql=async(e,t)=>{let n=t[e];if(t[e]){let s=n.credential_process;if(s!==void 0){let r=(0,Xl.promisify)(Yl.exec);try{let{stdout:o}=await r(s),a;try{a=JSON.parse(o.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return Jl(e,a)}catch(o){throw new I(o.message)}}else throw new I(`Profile ${e} did not contain credential_process.`)}else throw new I(`Profile ${e} could not be found in shared credentials file.`)};var kr=(e={})=>async()=>{let t=await Tt(e);return Ql(ie(e),t)};var Zl=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",em=async(e,t)=>kr({...e,profile:t})();var Cs=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string");var he=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,he.prototype)}};var kn=class extends he{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,kn.prototype)}},Ln=class extends he{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,Ln.prototype)}},Fn=class extends he{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,Fn.prototype)}},$n=class extends he{constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,$n.prototype)}},tm=e=>({...e,...e.accessToken&&{accessToken:et}}),$I=e=>({...e,...e.secretAccessKey&&{secretAccessKey:et},...e.sessionToken&&{sessionToken:et}}),nm=e=>({...e,...e.roleCredentials&&{roleCredentials:$I(e.roleCredentials)}});var sm=async(e,t)=>{let{hostname:n,protocol:s="https",port:r,path:o}=await t.endpoint(),a=$t({},jI,{"x-amz-sso_bearer_token":e.accessToken}),i=`${o!=null&&o.endsWith("/")?o.slice(0,-1):o||""}/federation/credentials`,c=$t({role_name:[,G(e.roleName,"roleName")],account_id:[,G(e.accountId,"accountId")]}),d;return new R({protocol:s,hostname:n,port:r,method:"GET",headers:a,path:i,query:c,body:d})};var rm=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return zI(e,t);let n=$t({$metadata:_s(e)}),s=G(Ks(await om(e.body,t)),"body");return s.roleCredentials!=null&&(n.roleCredentials=GI(s.roleCredentials,t)),n},zI=async(e,t)=>{let n={...e,body:await KI(e.body,t)},s=JI(e,n.body);switch(s){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await VI(n,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await UI(n,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await WI(n,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await BI(n,t);default:let r=n.body;pe({output:e,parsedBody:r,exceptionCtor:he,errorCode:s})}};var $t=ls,VI=async(e,t)=>{let n=$t({}),s=e.body;s.message!=null&&(n.message=f(s.message));let r=new kn({$metadata:_s(e),...n});return g(r,e.body)},UI=async(e,t)=>{let n=$t({}),s=e.body;s.message!=null&&(n.message=f(s.message));let r=new Ln({$metadata:_s(e),...n});return g(r,e.body)},WI=async(e,t)=>{let n=$t({}),s=e.body;s.message!=null&&(n.message=f(s.message));let r=new Fn({$metadata:_s(e),...n});return g(r,e.body)},BI=async(e,t)=>{let n=$t({}),s=e.body;s.message!=null&&(n.message=f(s.message));let r=new $n({$metadata:_s(e),...n});return g(r,e.body)};var GI=(e,t)=>({accessKeyId:f(e.accessKeyId),expiration:is(e.expiration),secretAccessKey:f(e.secretAccessKey),sessionToken:f(e.sessionToken)});var _s=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),qI=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),HI=(e,t)=>qI(e,t).then(n=>t.utf8Encoder(n)),jI=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),om=(e,t)=>HI(e,t).then(n=>n.length?JSON.parse(n):{}),KI=async(e,t)=>{let n=await om(e,t);return n.message=n.message??n.Message,n},JI=(e,t)=>{let n=(o,a)=>Object.keys(o).find(i=>i.toLowerCase()===a.toLowerCase()),s=o=>{let a=o;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},r=n(e.headers,"x-amzn-errortype");if(r!==void 0)return s(e.headers[r]);if(t.code!==void 0)return s(t.code);if(t.__type!==void 0)return s(t.__type)};var zn=class extends V{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,n,s){this.middlewareStack.use(Y(n,this.serialize,this.deserialize)),this.middlewareStack.use(X(n,zn.getEndpointParameterInstructions()));let r=t.concat(this.middlewareStack),{logger:o}=n,c={logger:o,clientName:"SSOClient",commandName:"GetRoleCredentialsCommand",inputFilterSensitiveLog:tm,outputFilterSensitiveLog:nm},{requestHandler:d}=n;return r.resolve(l=>d.handle(l.request,s||{}),c)}serialize(t,n){return sm(t,n)}deserialize(t,n){return rm(t,n)}};var am=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"});var im={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.310.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.310.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.310.0","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.310.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.310.0","@aws-sdk/util-defaults-mode-node":"3.310.0","@aws-sdk/util-endpoints":"3.310.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}};var dm=require("buffer"),Lr=require("crypto"),Ne=class{constructor(t,n){this.algorithmIdentifier=t,this.secret=n,this.reset()}update(t,n){this.hash.update(ve(cm(t,n)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,Lr.createHmac)(this.algorithmIdentifier,cm(this.secret)):(0,Lr.createHash)(this.algorithmIdentifier)}};function cm(e,t){return dm.Buffer.isBuffer(e)?e:typeof e=="string"?xn(e,t):ArrayBuffer.isView(e)?Lt(e.buffer,e.byteOffset,e.byteLength):Lt(e)}function Ia(e){let t=[];for(let n of Object.keys(e).sort()){let s=e[n];if(n=Pe(n),Array.isArray(s))for(let r=0,o=s.length;r<o;r++)t.push(`${n}=${Pe(s[r])}`);else{let r=n;(s||typeof s=="string")&&(r+=`=${Pe(s)}`),t.push(r)}}return t.join("&")}var Fr=require("http"),$r=require("https");var lm=["ECONNRESET","EPIPE","ETIMEDOUT"];var ga=e=>{let t={};for(let n of Object.keys(e)){let s=e[n];t[n]=Array.isArray(s)?s.join(","):s}return t};var um=require("stream");function Sa(e,t){(t.headers.Expect||t.headers.expect)==="100-continue"?e.on("continue",()=>{mm(e,t.body)}):mm(e,t.body)}function mm(e,t){t instanceof um.Readable?t.pipe(e):t?e.end(Buffer.from(t)):e.end()}var fm=0,Oe=class{constructor(t){this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((n,s)=>{typeof t=="function"?t().then(r=>{n(this.resolveDefaultConfig(r))}).catch(s):n(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{requestTimeout:n,connectionTimeout:s,socketTimeout:r,httpAgent:o,httpsAgent:a}=t||{},i=!0,c=50;return{connectionTimeout:s,socketTimeout:r,requestTimeout:n??s??r??fm,httpAgent:o||new Fr.Agent({keepAlive:i,maxSockets:c}),httpsAgent:a||new $r.Agent({keepAlive:i,maxSockets:c})}}destroy(){var t,n,s,r;(n=(t=this.config)==null?void 0:t.httpAgent)==null||n.destroy(),(r=(s=this.config)==null?void 0:s.httpsAgent)==null||r.destroy()}async handle(t,{abortSignal:n}={}){return this.config||(this.config=await this.configProvider),new Promise((s,r)=>{var m;if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(n!=null&&n.aborted){let u=new Error("Request aborted");u.name="AbortError",r(u);return}let o=t.protocol==="https:",a=Ia(t.query||{}),i={headers:t.headers,host:t.hostname,method:t.method,path:a?`${t.path}?${a}`:t.path,port:t.port,agent:o?this.config.httpsAgent:this.config.httpAgent},d=(o?$r.request:Fr.request)(i,u=>{let y=new Ce({statusCode:u.statusCode||-1,headers:ga(u.headers),body:u});s({response:y})});d.on("error",u=>{lm.includes(u.code)?r(Object.assign(u,{name:"TimeoutError"})):r(u)});let l=((m=this.config)==null?void 0:m.requestTimeout)??fm;d.setTimeout(l,()=>{d.destroy(),r(Object.assign(new Error(`Connection timed out after ${l} ms`),{name:"TimeoutError"}))}),n&&(n.onabort=()=>{d.abort();let u=new Error("Request aborted");u.name="AbortError",r(u)}),Sa(d,t)})}};var xa=class{constructor(t){this.sessions=[],this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(n=>n!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let n of this.sessions)n===t&&(n.destroyed||n.destroy())}};var ym=require("stream"),zr=class extends ym.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(t,n,s){this.bufferedBytes.push(t),s()}};var _t=e=>new Promise((t,n)=>{let s=new zr;e.pipe(s),e.on("error",r=>{s.end(),n(r)}),s.on("error",n),s.on("finish",function(){let r=new Uint8Array(Buffer.concat(this.bufferedBytes));t(r)})});var Vr=require("fs"),Rt=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.from(e).length;if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.path=="string"||Buffer.isBuffer(e.path))return(0,Vr.lstatSync)(e.path).size;if(typeof e.fd=="number")return(0,Vr.fstatSync)(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)};var Ur=require("os"),Rs=require("process");var pm=()=>{try{return typeof require=="function"&&typeof module<"u"&&require("aws-crt")?["md/crt-avail"]:null}catch{return null}};var XI="AWS_SDK_UA_APP_ID",QI="sdk-ua-app-id",At=({serviceId:e,clientVersion:t})=>{let n=[["aws-sdk-js",t],[`os/${(0,Ur.platform)()}`,(0,Ur.release)()],["lang/js"],["md/nodejs",`${Rs.versions.node}`]],s=pm();s&&n.push(s),e&&n.push([`api/${e}`,t]),Rs.env.AWS_EXECUTION_ENV&&n.push([`exec-env/${Rs.env.AWS_EXECUTION_ENV}`]);let r=x({environmentVariableSelector:a=>a[XI],configFileSelector:a=>a[QI],default:void 0})(),o;return async()=>{if(!o){let a=await r;o=a?[...n,[`app/${a}`]]:[...n]}return o}};var ZI=/^[A-Za-z0-9+/]*={0,2}$/,bt=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!ZI.exec(e))throw new TypeError("Invalid base64 string.");let t=xn(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};var vt=e=>Lt(e.buffer,e.byteOffset,e.byteLength).toString("base64");var Tm="required",Be="fn",Ge="argv",Vn="ref",Ta="PartitionResult",De="tree",As="error",bs="endpoint",hm={[Tm]:!1,type:"String"},wm={[Tm]:!0,default:!1,type:"Boolean"},Cm={[Vn]:"Endpoint"},_m={[Be]:"booleanEquals",[Ge]:[{[Vn]:"UseFIPS"},!0]},Rm={[Be]:"booleanEquals",[Ge]:[{[Vn]:"UseDualStack"},!0]},Me={},Em={[Be]:"booleanEquals",[Ge]:[!0,{[Be]:"getAttr",[Ge]:[{[Vn]:Ta},"supportsFIPS"]}]},Im={[Be]:"booleanEquals",[Ge]:[!0,{[Be]:"getAttr",[Ge]:[{[Vn]:Ta},"supportsDualStack"]}]},gm=[Cm],Sm=[_m],xm=[Rm],eg={version:"1.0",parameters:{Region:hm,UseDualStack:wm,UseFIPS:wm,Endpoint:hm},rules:[{conditions:[{[Be]:"aws.partition",[Ge]:[{[Vn]:"Region"}],assign:Ta}],type:De,rules:[{conditions:[{[Be]:"isSet",[Ge]:gm},{[Be]:"parseURL",[Ge]:gm,assign:"url"}],type:De,rules:[{conditions:Sm,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:As},{type:De,rules:[{conditions:xm,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:As},{endpoint:{url:Cm,properties:Me,headers:Me},type:bs}]}]},{conditions:[_m,Rm],type:De,rules:[{conditions:[Em,Im],type:De,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Me,headers:Me},type:bs}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:As}]},{conditions:Sm,type:De,rules:[{conditions:[Em],type:De,rules:[{type:De,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Me,headers:Me},type:bs}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:As}]},{conditions:xm,type:De,rules:[{conditions:[Im],type:De,rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Me,headers:Me},type:bs}]},{error:"DualStack is enabled but this partition does not support DualStack",type:As}]},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Me,headers:Me},type:bs}]}]},Am=eg;var bm=(e,t={})=>gt(Am,{endpointParams:e,logger:t.logger});var vm=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??bt,base64Encoder:(e==null?void 0:e.base64Encoder)??vt,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??bm,logger:(e==null?void 0:e.logger)??new Se,serviceId:(e==null?void 0:e.serviceId)??"SSO",urlParser:(e==null?void 0:e.urlParser)??J,utf8Decoder:(e==null?void 0:e.utf8Decoder)??be,utf8Encoder:(e==null?void 0:e.utf8Encoder)??wt});var Pm="AWS_EXECUTION_ENV",Ca="AWS_REGION",_a="AWS_DEFAULT_REGION",Nm="AWS_EC2_METADATA_DISABLED",Om=["in-region","cross-region","mobile","standard","legacy"],Dm="/latest/meta-data/placement/region";var tg="AWS_DEFAULTS_MODE",ng="defaults_mode",Mm={environmentVariableSelector:e=>e[tg],configFileSelector:e=>e[ng],default:"legacy"};var Pt=({region:e=x(_e),defaultsMode:t=x(Mm)}={})=>ht(async()=>{let n=typeof t=="function"?await t():t;switch(n==null?void 0:n.toLowerCase()){case"auto":return sg(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(n==null?void 0:n.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Om.join(", ")}, got ${n}`)}}),sg=async e=>{if(e){let t=typeof e=="function"?await e():e,n=await rg();return n?t===n?"in-region":"cross-region":"standard"}return"standard"},rg=async()=>{if(process.env[Pm]&&(process.env[Ca]||process.env[_a]))return process.env[Ca]??process.env[_a];if(!process.env[Nm])try{let e=await Ts();return(await We({...e,path:Dm})).toString()}catch{}};var km=e=>{nt(process.version);let t=Pt(e),n=()=>t().then(tt),s=vm(e);return{...s,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Rt,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??At({serviceId:s.serviceId,clientVersion:im.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??x(ut),region:(e==null?void 0:e.region)??x(_e,at),requestHandler:(e==null?void 0:e.requestHandler)??new Oe(n),retryMode:(e==null?void 0:e.retryMode)??x({...yt,default:async()=>(await n()).retryMode||Ae}),sha256:(e==null?void 0:e.sha256)??Ne.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??_t,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??x(rt),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??x(ot)}};var Wr=class extends xe{constructor(t){let n=km(t),s=am(n),r=it(s),o=Ze(r),a=ft(o),i=a,c=Et(i);super(c),this.config=c,this.middlewareStack.use(pt(this.config)),this.middlewareStack.use(ct(this.config)),this.middlewareStack.use(dt(this.config)),this.middlewareStack.use(lt(this.config)),this.middlewareStack.use(mt(this.config)),this.middlewareStack.use(St(this.config))}destroy(){super.destroy()}};var Un="To refresh this SSO session run 'aws sso login' with the corresponding profile.";var k=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,k.prototype)}};var Wn=class extends k{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,Wn.prototype),this.error=t.error,this.error_description=t.error_description}},Bn=class extends k{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,Bn.prototype),this.error=t.error,this.error_description=t.error_description}},Gn=class extends k{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,Gn.prototype),this.error=t.error,this.error_description=t.error_description}},qn=class extends k{constructor(t){super({name:"InternalServerException",$fault:"server",...t}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,qn.prototype),this.error=t.error,this.error_description=t.error_description}},Hn=class extends k{constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,Hn.prototype),this.error=t.error,this.error_description=t.error_description}},jn=class extends k{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,jn.prototype),this.error=t.error,this.error_description=t.error_description}},Kn=class extends k{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,Kn.prototype),this.error=t.error,this.error_description=t.error_description}},Jn=class extends k{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,Jn.prototype),this.error=t.error,this.error_description=t.error_description}},Yn=class extends k{constructor(t){super({name:"SlowDownException",$fault:"client",...t}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,Yn.prototype),this.error=t.error,this.error_description=t.error_description}},Xn=class extends k{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,Xn.prototype),this.error=t.error,this.error_description=t.error_description}},Qn=class extends k{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,Qn.prototype),this.error=t.error,this.error_description=t.error_description}};var Lm=async(e,t)=>{let{hostname:n,protocol:s="https",port:r,path:o}=await t.endpoint(),a={"content-type":"application/json"},i=`${o!=null&&o.endsWith("/")?o.slice(0,-1):o||""}/token`,c;return c=JSON.stringify({...e.clientId!=null&&{clientId:e.clientId},...e.clientSecret!=null&&{clientSecret:e.clientSecret},...e.code!=null&&{code:e.code},...e.deviceCode!=null&&{deviceCode:e.deviceCode},...e.grantType!=null&&{grantType:e.grantType},...e.redirectUri!=null&&{redirectUri:e.redirectUri},...e.refreshToken!=null&&{refreshToken:e.refreshToken},...e.scope!=null&&{scope:wg(e.scope,t)}}),new R({protocol:s,hostname:n,port:r,method:"POST",headers:a,path:i,body:c})};var Fm=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return og(e,t);let n=ce({$metadata:de(e)}),s=G(Ks(await $m(e.body,t)),"body");return s.accessToken!=null&&(n.accessToken=f(s.accessToken)),s.expiresIn!=null&&(n.expiresIn=re(s.expiresIn)),s.idToken!=null&&(n.idToken=f(s.idToken)),s.refreshToken!=null&&(n.refreshToken=f(s.refreshToken)),s.tokenType!=null&&(n.tokenType=f(s.tokenType)),n},og=async(e,t)=>{let n={...e,body:await gg(e.body,t)},s=Sg(e,n.body);switch(s){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await ag(n,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await ig(n,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await cg(n,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await dg(n,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await lg(n,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await mg(n,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await ug(n,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await fg(n,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await yg(n,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await pg(n,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await hg(n,t);default:let r=n.body;pe({output:e,parsedBody:r,exceptionCtor:k,errorCode:s})}};var ce=ls,ag=async(e,t)=>{let n=ce({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new Wn({$metadata:de(e),...n});return g(r,e.body)},ig=async(e,t)=>{let n=ce({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new Bn({$metadata:de(e),...n});return g(r,e.body)},cg=async(e,t)=>{let n=ce({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new Gn({$metadata:de(e),...n});return g(r,e.body)},dg=async(e,t)=>{let n=ce({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new qn({$metadata:de(e),...n});return g(r,e.body)},lg=async(e,t)=>{let n=ce({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new Hn({$metadata:de(e),...n});return g(r,e.body)};var mg=async(e,t)=>{let n=ce({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new jn({$metadata:de(e),...n});return g(r,e.body)},ug=async(e,t)=>{let n=ce({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new Kn({$metadata:de(e),...n});return g(r,e.body)},fg=async(e,t)=>{let n=ce({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new Jn({$metadata:de(e),...n});return g(r,e.body)},yg=async(e,t)=>{let n=ce({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new Yn({$metadata:de(e),...n});return g(r,e.body)},pg=async(e,t)=>{let n=ce({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new Xn({$metadata:de(e),...n});return g(r,e.body)},hg=async(e,t)=>{let n=ce({}),s=e.body;s.error!=null&&(n.error=f(s.error)),s.error_description!=null&&(n.error_description=f(s.error_description));let r=new Qn({$metadata:de(e),...n});return g(r,e.body)},wg=(e,t)=>e.filter(n=>n!=null).map(n=>n),de=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Eg=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),Ig=(e,t)=>Eg(e,t).then(n=>t.utf8Encoder(n));var $m=(e,t)=>Ig(e,t).then(n=>n.length?JSON.parse(n):{}),gg=async(e,t)=>{let n=await $m(e,t);return n.message=n.message??n.Message,n},Sg=(e,t)=>{let n=(o,a)=>Object.keys(o).find(i=>i.toLowerCase()===a.toLowerCase()),s=o=>{let a=o;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},r=n(e.headers,"x-amzn-errortype");if(r!==void 0)return s(e.headers[r]);if(t.code!==void 0)return s(t.code);if(t.__type!==void 0)return s(t.__type)};var Zn=class extends V{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,n,s){this.middlewareStack.use(Y(n,this.serialize,this.deserialize)),this.middlewareStack.use(X(n,Zn.getEndpointParameterInstructions()));let r=t.concat(this.middlewareStack),{logger:o}=n,c={logger:o,clientName:"SSOOIDCClient",commandName:"CreateTokenCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=n;return r.resolve(l=>d.handle(l.request,s||{}),c)}serialize(t,n){return Lm(t,n)}deserialize(t,n){return Fm(t,n)}};var zm=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssooidc"});var Vm={name:"@aws-sdk/client-sso-oidc",description:"AWS SDK for JavaScript Sso Oidc Client for Node.js, Browser and React Native",version:"3.310.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso-oidc"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.310.0","@aws-sdk/fetch-http-handler":"3.310.0","@aws-sdk/hash-node":"3.310.0","@aws-sdk/invalid-dependency":"3.310.0","@aws-sdk/middleware-content-length":"3.310.0","@aws-sdk/middleware-endpoint":"3.310.0","@aws-sdk/middleware-host-header":"3.310.0","@aws-sdk/middleware-logger":"3.310.0","@aws-sdk/middleware-recursion-detection":"3.310.0","@aws-sdk/middleware-retry":"3.310.0","@aws-sdk/middleware-serde":"3.310.0","@aws-sdk/middleware-stack":"3.310.0","@aws-sdk/middleware-user-agent":"3.310.0","@aws-sdk/node-config-provider":"3.310.0","@aws-sdk/node-http-handler":"3.310.0","@aws-sdk/protocol-http":"3.310.0","@aws-sdk/smithy-client":"3.310.0","@aws-sdk/types":"3.310.0","@aws-sdk/url-parser":"3.310.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.310.0","@aws-sdk/util-defaults-mode-node":"3.310.0","@aws-sdk/util-endpoints":"3.310.0","@aws-sdk/util-retry":"3.310.0","@aws-sdk/util-user-agent-browser":"3.310.0","@aws-sdk/util-user-agent-node":"3.310.0","@aws-sdk/util-utf8":"3.310.0",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso-oidc",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso-oidc"}};var Km="required",qe="fn",He="argv",es="ref",Aa="PartitionResult",ke="tree",vs="error",Ps="endpoint",Um={[Km]:!1,type:"String"},Wm={[Km]:!0,default:!1,type:"Boolean"},Jm={[es]:"Endpoint"},Ym={[qe]:"booleanEquals",[He]:[{[es]:"UseFIPS"},!0]},Xm={[qe]:"booleanEquals",[He]:[{[es]:"UseDualStack"},!0]},Le={},Bm={[qe]:"booleanEquals",[He]:[!0,{[qe]:"getAttr",[He]:[{[es]:Aa},"supportsFIPS"]}]},Gm={[qe]:"booleanEquals",[He]:[!0,{[qe]:"getAttr",[He]:[{[es]:Aa},"supportsDualStack"]}]},qm=[Jm],Hm=[Ym],jm=[Xm],Tg={version:"1.0",parameters:{Region:Um,UseDualStack:Wm,UseFIPS:Wm,Endpoint:Um},rules:[{conditions:[{[qe]:"aws.partition",[He]:[{[es]:"Region"}],assign:Aa}],type:ke,rules:[{conditions:[{[qe]:"isSet",[He]:qm},{[qe]:"parseURL",[He]:qm,assign:"url"}],type:ke,rules:[{conditions:Hm,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:vs},{type:ke,rules:[{conditions:jm,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:vs},{endpoint:{url:Jm,properties:Le,headers:Le},type:Ps}]}]},{conditions:[Ym,Xm],type:ke,rules:[{conditions:[Bm,Gm],type:ke,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Le,headers:Le},type:Ps}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:vs}]},{conditions:Hm,type:ke,rules:[{conditions:[Bm],type:ke,rules:[{type:ke,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Le,headers:Le},type:Ps}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:vs}]},{conditions:jm,type:ke,rules:[{conditions:[Gm],type:ke,rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Le,headers:Le},type:Ps}]},{error:"DualStack is enabled but this partition does not support DualStack",type:vs}]},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Le,headers:Le},type:Ps}]}]},Qm=Tg;var Zm=(e,t={})=>gt(Qm,{endpointParams:e,logger:t.logger});var eu=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??bt,base64Encoder:(e==null?void 0:e.base64Encoder)??vt,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Zm,logger:(e==null?void 0:e.logger)??new Se,serviceId:(e==null?void 0:e.serviceId)??"SSO OIDC",urlParser:(e==null?void 0:e.urlParser)??J,utf8Decoder:(e==null?void 0:e.utf8Decoder)??be,utf8Encoder:(e==null?void 0:e.utf8Encoder)??wt});var tu=e=>{nt(process.version);let t=Pt(e),n=()=>t().then(tt),s=eu(e);return{...s,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Rt,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??At({serviceId:s.serviceId,clientVersion:Vm.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??x(ut),region:(e==null?void 0:e.region)??x(_e,at),requestHandler:(e==null?void 0:e.requestHandler)??new Oe(n),retryMode:(e==null?void 0:e.retryMode)??x({...yt,default:async()=>(await n()).retryMode||Ae}),sha256:(e==null?void 0:e.sha256)??Ne.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??_t,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??x(rt),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??x(ot)}};var Br=class extends xe{constructor(t){let n=tu(t),s=zm(n),r=it(s),o=Ze(r),a=ft(o),i=a,c=Et(i);super(c),this.config=c,this.middlewareStack.use(pt(this.config)),this.middlewareStack.use(ct(this.config)),this.middlewareStack.use(dt(this.config)),this.middlewareStack.use(lt(this.config)),this.middlewareStack.use(mt(this.config)),this.middlewareStack.use(St(this.config))}destroy(){super.destroy()}};var ba={},nu=e=>{if(ba[e])return ba[e];let t=new Br({region:e});return ba[e]=t,t};var su=(e,t)=>nu(t).send(new Zn({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}));var va=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new Z(`Token is expired. ${Un}`,!1)};var Nt=(e,t,n=!1)=>{if(typeof t>"u")throw new Z(`Value not present for '${e}' in SSO Token${n?". Cannot refresh":""}. ${Un}`,!1)};var ru=require("fs"),{writeFile:Cg}=ru.promises,ou=(e,t)=>{let n=Cr(e),s=JSON.stringify(t,null,2);return Cg(n,s)};var au=new Date(0),iu=(e={})=>async()=>{let t=await Tt(e),n=ie(e),s=t[n];if(s){if(!s.sso_session)throw new Z(`Profile '${n}' is missing required property 'sso_session'.`)}else throw new Z(`Profile '${n}' could not be found in shared credentials file.`,!1);let r=s.sso_session,a=(await br(e))[r];if(!a)throw new Z(`Sso session '${r}' could not be found in shared credentials file.`,!1);for(let y of["sso_start_url","sso_region"])if(!a[y])throw new Z(`Sso session '${r}' is missing required property '${y}'.`,!1);let i=a.sso_start_url,c=a.sso_region,d;try{d=await _r(r)}catch{throw new Z(`The SSO session token associated with profile=${n} was not found or is invalid. ${Un}`,!1)}Nt("accessToken",d.accessToken),Nt("expiresAt",d.expiresAt);let{accessToken:l,expiresAt:m}=d,u={token:l,expiration:new Date(m)};if(u.expiration.getTime()-Date.now()>3e5)return u;if(Date.now()-au.getTime()<30*1e3)return va(u),u;Nt("clientId",d.clientId,!0),Nt("clientSecret",d.clientSecret,!0),Nt("refreshToken",d.refreshToken,!0);try{au.setTime(Date.now());let y=await su(d,c);Nt("accessToken",y.accessToken),Nt("expiresIn",y.expiresIn);let p=new Date(Date.now()+y.expiresIn*1e3);try{await ou(r,{...d,accessToken:y.accessToken,expiresAt:p.toISOString(),refreshToken:y.refreshToken})}catch{}return{token:y.accessToken,expiration:p}}catch{return va(u),u}};var Rg=15*60*1e3,Ns=!1,Pa=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:n,ssoRegion:s,ssoRoleName:r,ssoClient:o,profile:a})=>{let i,c="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let E=await iu({profile:a})();i={accessToken:E.token,expiresAt:new Date(E.expiration).toISOString()}}catch(E){throw new I(E.message,Ns)}else try{i=await _r(e)}catch{throw new I(`The SSO session associated with this profile is invalid. ${c}`,Ns)}if(new Date(i.expiresAt).getTime()-Date.now()<=Rg)throw new I(`The SSO session associated with this profile has expired. ${c}`,Ns);let{accessToken:d}=i,l=o||new Wr({region:s}),m;try{m=await l.send(new zn({accountId:n,roleName:r,accessToken:d}))}catch(E){throw I.from(E,Ns)}let{roleCredentials:{accessKeyId:u,secretAccessKey:y,sessionToken:p,expiration:h}={}}=m;if(!u||!y||!p||!h)throw new I("SSO returns an invalid temporary credential.",Ns);return{accessKeyId:u,secretAccessKey:y,sessionToken:p,expiration:new Date(h)}};var Gr=e=>{let{sso_start_url:t,sso_account_id:n,sso_region:s,sso_role_name:r}=e;if(!t||!n||!s||!r)throw new I(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,!1);return e};var qr=(e={})=>async()=>{let{ssoStartUrl:t,ssoAccountId:n,ssoRegion:s,ssoRoleName:r,ssoClient:o,ssoSession:a}=e,i=ie(e);if(!t&&!n&&!s&&!r&&!a){let d=(await Tt(e))[i];if(!d)throw new I(`Profile ${i} was not found.`);if(!Cs(d))throw new I(`Profile ${i} is not configured with SSO credentials.`);if(d!=null&&d.sso_session){let E=(await br(e))[d.sso_session],Ie=` configurations in profile ${i} and sso-session ${d.sso_session}`;if(s&&s!==E.sso_region)throw new I("Conflicting SSO region"+Ie,!1);if(t&&t!==E.sso_start_url)throw new I("Conflicting SSO start_url"+Ie,!1);d.sso_region=E.sso_region,d.sso_start_url=E.sso_start_url}let{sso_start_url:l,sso_account_id:m,sso_region:u,sso_role_name:y,sso_session:p}=Gr(d);return Pa({ssoStartUrl:l,ssoSession:p,ssoAccountId:m,ssoRegion:u,ssoRoleName:y,ssoClient:o,profile:i})}else{if(!t||!n||!s||!r)throw new I('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"');return Pa({ssoStartUrl:t,ssoSession:a,ssoAccountId:n,ssoRegion:s,ssoRoleName:r,ssoClient:o,profile:i})}};var cu=e=>{let{sso_start_url:t,sso_account_id:n,sso_session:s,sso_region:r,sso_role_name:o}=Gr(e);return qr({ssoStartUrl:t,ssoAccountId:n,ssoSession:s,ssoRegion:r,ssoRoleName:o})()};var Na=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1,Oa=e=>Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token});var lu=require("fs");var du=e=>()=>{let{roleArn:t,roleSessionName:n,webIdentityToken:s,providerId:r,policyArns:o,policy:a,durationSeconds:i,roleAssumerWithWebIdentity:c}=e;if(!c)throw new I(`Role Arn '${t}' needs to be assumed with web identity, but no role assumption callback was provided.`,!1);return c({RoleArn:t,RoleSessionName:n??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:s,ProviderId:r,PolicyArns:o,Policy:a,DurationSeconds:i})};var Ag="AWS_WEB_IDENTITY_TOKEN_FILE",bg="AWS_ROLE_ARN",vg="AWS_ROLE_SESSION_NAME",Hr=(e={})=>async()=>Pg(e),Pg=e=>{let t=(e==null?void 0:e.webIdentityTokenFile)??process.env[Ag],n=(e==null?void 0:e.roleArn)??process.env[bg],s=(e==null?void 0:e.roleSessionName)??process.env[vg];if(!t||!n)throw new I("Web identity configuration not specified");return du({...e,webIdentityToken:(0,lu.readFileSync)(t,{encoding:"ascii"}),roleArn:n,roleSessionName:s})()};var mu=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,uu=async(e,t)=>Hr({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity})();var Mr=async(e,t,n,s={})=>{let r=t[e];if(Object.keys(s).length>0&&Na(r))return Oa(r);if(jl(r))return Kl(e,t,n,s);if(Na(r))return Oa(r);if(mu(r))return uu(r,n);if(Zl(r))return em(n,e);if(Cs(r))return cu(r);throw new I(`Profile ${e} could not be found or parsed in shared credentials file.`)};var fu=(e={})=>async()=>{let t=await Tt(e);return Mr(ie(e),t,e)};var Ng="AWS_EC2_METADATA_DISABLED",yu=e=>process.env[Ss]||process.env[gs]?Or(e):process.env[Ng]?async()=>{throw new I("EC2 Instance Metadata Service access disabled")}:Dr(e);var jr=(e={})=>ht(sr(...e.profile||process.env[ha]?[]:[Tr()],qr(e),fu(e),kr(e),Hr(e),yu(e),async()=>{throw new I("Could not load credentials from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);var Tu="required",S="type",T="fn",C="argv",Ot="ref",zt="properties",Vt="headers";var Ma="PartitionResult",le="tree",Ut="booleanEquals",$="stringEquals",Cu="sigv4",_u="us-east-1",Ru="sts",N="endpoint",Au="https://sts.{Region}.{PartitionResult#dnsSuffix}",Os="error",ka="getAttr",pu={[Tu]:!1,[S]:"String"},Da={[Tu]:!0,default:!1,[S]:"Boolean"},z={[Ot]:"Region"},bu={[Ot]:"UseFIPS"},vu={[Ot]:"UseDualStack"},hu={[T]:"isSet",[C]:[{[Ot]:"Endpoint"}]},Pu={[Ot]:"Endpoint"},U={url:"https://sts.amazonaws.com",[zt]:{authSchemes:[{name:Cu,signingRegion:_u,signingName:Ru}]},[Vt]:{}},je={},wu={conditions:[{[T]:$,[C]:[z,"aws-global"]}],[N]:U,[S]:N},Nu={[T]:Ut,[C]:[bu,!0]},Ou={[T]:Ut,[C]:[vu,!0]},Eu={[T]:Ut,[C]:[!0,{[T]:ka,[C]:[{[Ot]:Ma},"supportsFIPS"]}]},Du={[Ot]:Ma},Iu={[T]:Ut,[C]:[!0,{[T]:ka,[C]:[Du,"supportsDualStack"]}]},gu={url:Au,[zt]:{},[Vt]:{}},Og=[Pu],Su=[Nu],xu=[Ou],Dg={version:"1.0",parameters:{Region:pu,UseDualStack:Da,UseFIPS:Da,Endpoint:pu,UseGlobalEndpoint:Da},rules:[{conditions:[{[T]:"aws.partition",[C]:[z],assign:Ma}],[S]:le,rules:[{conditions:[{[T]:Ut,[C]:[{[Ot]:"UseGlobalEndpoint"},!0]},{[T]:Ut,[C]:[bu,!1]},{[T]:Ut,[C]:[vu,!1]},{[T]:"not",[C]:[hu]}],[S]:le,rules:[{conditions:[{[T]:$,[C]:[z,"ap-northeast-1"]}],endpoint:U,[S]:N},{conditions:[{[T]:$,[C]:[z,"ap-south-1"]}],endpoint:U,[S]:N},{conditions:[{[T]:$,[C]:[z,"ap-southeast-1"]}],endpoint:U,[S]:N},{conditions:[{[T]:$,[C]:[z,"ap-southeast-2"]}],endpoint:U,[S]:N},wu,{conditions:[{[T]:$,[C]:[z,"ca-central-1"]}],endpoint:U,[S]:N},{conditions:[{[T]:$,[C]:[z,"eu-central-1"]}],endpoint:U,[S]:N},{conditions:[{[T]:$,[C]:[z,"eu-north-1"]}],endpoint:U,[S]:N},{conditions:[{[T]:$,[C]:[z,"eu-west-1"]}],endpoint:U,[S]:N},{conditions:[{[T]:$,[C]:[z,"eu-west-2"]}],endpoint:U,[S]:N},{conditions:[{[T]:$,[C]:[z,"eu-west-3"]}],endpoint:U,[S]:N},{conditions:[{[T]:$,[C]:[z,"sa-east-1"]}],endpoint:U,[S]:N},{conditions:[{[T]:$,[C]:[z,_u]}],endpoint:U,[S]:N},{conditions:[{[T]:$,[C]:[z,"us-east-2"]}],endpoint:U,[S]:N},{conditions:[{[T]:$,[C]:[z,"us-west-1"]}],endpoint:U,[S]:N},{conditions:[{[T]:$,[C]:[z,"us-west-2"]}],endpoint:U,[S]:N},{endpoint:{url:Au,[zt]:{authSchemes:[{name:Cu,signingRegion:"{Region}",signingName:Ru}]},[Vt]:je},[S]:N}]},{conditions:[hu,{[T]:"parseURL",[C]:Og,assign:"url"}],[S]:le,rules:[{conditions:Su,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[S]:Os},{[S]:le,rules:[{conditions:xu,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[S]:Os},{endpoint:{url:Pu,[zt]:je,[Vt]:je},[S]:N}]}]},{conditions:[Nu,Ou],[S]:le,rules:[{conditions:[Eu,Iu],[S]:le,rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[zt]:je,[Vt]:je},[S]:N}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[S]:Os}]},{conditions:Su,[S]:le,rules:[{conditions:[Eu],[S]:le,rules:[{[S]:le,rules:[{conditions:[{[T]:$,[C]:["aws-us-gov",{[T]:ka,[C]:[Du,"name"]}]}],endpoint:gu,[S]:N},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",[zt]:je,[Vt]:je},[S]:N}]}]},{error:"FIPS is enabled but this partition does not support FIPS",[S]:Os}]},{conditions:xu,[S]:le,rules:[{conditions:[Iu],[S]:le,rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",[zt]:je,[Vt]:je},[S]:N}]},{error:"DualStack is enabled but this partition does not support DualStack",[S]:Os}]},{[S]:le,rules:[wu,{endpoint:gu,[S]:N}]}]}]},Mu=Dg;var ku=(e,t={})=>gt(Mu,{endpointParams:e,logger:t.logger});var Lu=e=>({apiVersion:"2011-06-15",base64Decoder:(e==null?void 0:e.base64Decoder)??bt,base64Encoder:(e==null?void 0:e.base64Encoder)??vt,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??ku,logger:(e==null?void 0:e.logger)??new Se,serviceId:(e==null?void 0:e.serviceId)??"STS",urlParser:(e==null?void 0:e.urlParser)??J,utf8Decoder:(e==null?void 0:e.utf8Decoder)??be,utf8Encoder:(e==null?void 0:e.utf8Encoder)??wt});var Fu=e=>{nt(process.version);let t=Pt(e),n=()=>t().then(tt),s=Lu(e);return{...s,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Rt,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??Il(jr),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??At({serviceId:s.serviceId,clientVersion:hl.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??x(ut),region:(e==null?void 0:e.region)??x(_e,at),requestHandler:(e==null?void 0:e.requestHandler)??new Oe(n),retryMode:(e==null?void 0:e.retryMode)??x({...yt,default:async()=>(await n()).retryMode||Ae}),sha256:(e==null?void 0:e.sha256)??Ne.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??_t,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??x(rt),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??x(ot)}};var Wt=class extends xe{constructor(t){let n=Fu(t),s=pl(n),r=it(s),o=Ze(r),a=ft(o),i=a,c=yl(i,{stsClientCtor:Wt}),d=Et(c);super(d),this.config=d,this.middlewareStack.use(pt(this.config)),this.middlewareStack.use(ct(this.config)),this.middlewareStack.use(dt(this.config)),this.middlewareStack.use(lt(this.config)),this.middlewareStack.use(mt(this.config)),this.middlewareStack.use(St(this.config))}destroy(){super.destroy()}};var $u=(e,t)=>t?class extends e{constructor(s){super(s);for(let r of t)this.middlewareStack.use(r)}}:e,Mg=(e={},t)=>ya(e,$u(Wt,t)),kg=(e={},t)=>pa(e,$u(Wt,t)),zu=e=>t=>e({roleAssumer:Mg(t),roleAssumerWithWebIdentity:kg(t),...t});var Ju="required",we="fn",Ee="argv",ss="ref",Vu="isSet",H="tree",ts="error",ns="endpoint",La="PartitionResult",Fa="getAttr",Uu={[Ju]:!1,type:"String"},Wu={[Ju]:!0,default:!1,type:"Boolean"},Bu={[ss]:"Endpoint"},Yu={[we]:"booleanEquals",[Ee]:[{[ss]:"UseFIPS"},!0]},Xu={[we]:"booleanEquals",[Ee]:[{[ss]:"UseDualStack"},!0]},me={},Gu={[we]:"booleanEquals",[Ee]:[!0,{[we]:Fa,[Ee]:[{[ss]:La},"supportsFIPS"]}]},Qu={[ss]:La},qu={[we]:"booleanEquals",[Ee]:[!0,{[we]:Fa,[Ee]:[Qu,"supportsDualStack"]}]},Hu=[Yu],ju=[Xu],Ku=[{[ss]:"Region"}],Lg={version:"1.0",parameters:{Region:Uu,UseDualStack:Wu,UseFIPS:Wu,Endpoint:Uu},rules:[{conditions:[{[we]:Vu,[Ee]:[Bu]}],type:H,rules:[{conditions:Hu,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:ts},{type:H,rules:[{conditions:ju,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:ts},{endpoint:{url:Bu,properties:me,headers:me},type:ns}]}]},{type:H,rules:[{conditions:[{[we]:Vu,[Ee]:Ku}],type:H,rules:[{conditions:[{[we]:"aws.partition",[Ee]:Ku,assign:La}],type:H,rules:[{conditions:[Yu,Xu],type:H,rules:[{conditions:[Gu,qu],type:H,rules:[{type:H,rules:[{endpoint:{url:"https://ssm-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:me,headers:me},type:ns}]}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:ts}]},{conditions:Hu,type:H,rules:[{conditions:[Gu],type:H,rules:[{type:H,rules:[{conditions:[{[we]:"stringEquals",[Ee]:["aws-us-gov",{[we]:Fa,[Ee]:[Qu,"name"]}]}],endpoint:{url:"https://ssm.{Region}.amazonaws.com",properties:me,headers:me},type:ns},{endpoint:{url:"https://ssm-fips.{Region}.{PartitionResult#dnsSuffix}",properties:me,headers:me},type:ns}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:ts}]},{conditions:ju,type:H,rules:[{conditions:[qu],type:H,rules:[{type:H,rules:[{endpoint:{url:"https://ssm.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:me,headers:me},type:ns}]}]},{error:"DualStack is enabled but this partition does not support DualStack",type:ts}]},{type:H,rules:[{endpoint:{url:"https://ssm.{Region}.{PartitionResult#dnsSuffix}",properties:me,headers:me},type:ns}]}]}]},{error:"Invalid Configuration: Missing Region",type:ts}]}]},Zu=Lg;var ef=(e,t={})=>gt(Zu,{endpointParams:e,logger:t.logger});var tf=e=>({apiVersion:"2014-11-06",base64Decoder:(e==null?void 0:e.base64Decoder)??bt,base64Encoder:(e==null?void 0:e.base64Encoder)??vt,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??ef,logger:(e==null?void 0:e.logger)??new Se,serviceId:(e==null?void 0:e.serviceId)??"SSM",urlParser:(e==null?void 0:e.urlParser)??J,utf8Decoder:(e==null?void 0:e.utf8Decoder)??be,utf8Encoder:(e==null?void 0:e.utf8Encoder)??wt});var nf=e=>{nt(process.version);let t=Pt(e),n=()=>t().then(tt),s=tf(e);return{...s,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Rt,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??zu(jr),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??At({serviceId:s.serviceId,clientVersion:Id.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??x(ut),region:(e==null?void 0:e.region)??x(_e,at),requestHandler:(e==null?void 0:e.requestHandler)??new Oe(n),retryMode:(e==null?void 0:e.retryMode)??x({...yt,default:async()=>(await n()).retryMode||Ae}),sha256:(e==null?void 0:e.sha256)??Ne.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??_t,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??x(rt),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??x(ot)}};var Kr=class extends xe{constructor(t){let n=nf(t),s=Ed(n),r=it(s),o=Ze(r),a=ft(o),i=a,c=fr(i),d=Et(c);super(d),this.config=d,this.middlewareStack.use(pt(this.config)),this.middlewareStack.use(ct(this.config)),this.middlewareStack.use(dt(this.config)),this.middlewareStack.use(lt(this.config)),this.middlewareStack.use(mt(this.config)),this.middlewareStack.use(pr(this.config)),this.middlewareStack.use(St(this.config))}destroy(){super.destroy()}};var ue=Bt(af()),$a=new Kr({});async function $g(){var e;try{let t=(0,b.getInput)("command",{required:!0}),n=(0,b.getInput)("instance-id")||process.env.SSM_COMMAND_INSTANCE_ID,s=(0,b.getBooleanInput)("powershell"),r=(0,b.getBooleanInput)("wait-for-agent");if(n===void 0){(0,b.setFailed)(Error("An instance ID must be provided."));return}r&&await df(n);let o=await $a.send(new wn({DocumentName:s?"AWS-RunPowerShellScript":"AWS-RunShellScript",InstanceIds:[n],Parameters:{commands:[t,`echo ${(0,cf.randomUUID)()}`]},CloudWatchOutputConfig:{CloudWatchOutputEnabled:!0}}));(0,b.debug)(`SendCommandOutput: ${JSON.stringify(o,null,2)}`);let a=(e=o.Command)==null?void 0:e.CommandId;if(o.$metadata.httpStatusCode!==200||!a)return;(0,b.info)("Waiting for remote command invocation to complete...");let i=await lf(n,a);i!==void 0&&(0,b.setOutput)("exit-code",i),(0,b.info)(`Remote command invocation has completed with exit code: ${i}`)}catch(t){t instanceof Error&&(0,b.setFailed)(t)}}async function df(e){var n,s;let t=await $a.send(new pn({Filters:[{Key:"InstanceIds",Values:[e]}]}));if((0,b.debug)(`DescribeInstanceInformationOutput: ${JSON.stringify(t,null,2)}`),((s=(n=t.InstanceInformationList)==null?void 0:n[0])==null?void 0:s.PingStatus)!=="Online")return await mf(5),df(e)}async function lf(e,t){await mf(5);let n=await $a.send(new hn({InstanceId:e,CommandId:t}));return(0,b.debug)(`GetCommandInvocationOutput: ${JSON.stringify(n,null,2)}`),["Success","Failed","Cancelled","TimedOut"].includes(n.Status??"")?((0,b.info)(`Remote command invocation completed with status: "${n.Status}". Output is printed below.`),n.StandardOutputContent&&zg(n.StandardOutputContent),n.StandardErrorContent&&Vg(n.StandardErrorContent),!n.StandardOutputContent&&!n.StandardErrorContent&&(0,b.info)(ue.default.gray.open+ue.default.bold.open+null),n.ResponseCode??-1):((0,b.info)("Still waiting..."),lf(e,t))}function zg(e){(0,b.info)(ue.default.cyan.open+"----- BEGIN STDOUT CONTENT -----"),e.trim().split(/\r?\n/).forEach(t=>(0,b.info)(ue.default.cyan.open+t)),(0,b.info)(ue.default.cyan.open+"----- END STDOUT CONTENT -----")}function Vg(e){(0,b.info)(ue.default.red.open+ue.default.bold.open+"----- BEGIN STDERR CONTENT -----"),e.trim().split(/\r?\n/).forEach(t=>(0,b.info)(ue.default.red.open+ue.default.bold.open+t)),(0,b.info)(ue.default.red.open+ue.default.bold.open+"----- END STDERR CONTENT -----")}function mf(e){return new Promise(t=>setTimeout(t,e*1e3))}$g();
